["{\"nodes\":{\"Augment_VoiceCall_Recording\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"CallRecordingId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Recording\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"IntelligenceScore\",\"UploadDateTime\"]},\"sources\":[\"Filter_VoiceCall_In_365_Days\",\"Extract_VoiceCallRecording\"]},\"Extract_Contact\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"SystemModstamp\"}],\"object\":\"Contact\"}},\"Extract_Opportunity\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"StageName\"},{\"name\":\"AccountId\"},{\"name\":\"ContactId\"},{\"name\":\"Amount\"}],\"object\":\"Opportunity\"}},\"Augment_Call_Owner\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"OwnerId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Owner\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Role.RolePath\",\"Role.Roles\",\"ProfileId\",\"UsersWithViewAllDataProfile.Id\",\"ManagerId\",\"UsersWithViewAllDataProfile.ManagerId\"]},\"sources\":[\"Append_Voice_Video_Calls\",\"UsersWithViewAllProfile\"]},\"Extract_Managers\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Department\"},{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"ManagerId\"},{\"name\":\"ProfileId\"}],\"object\":\"User\"}},\"Register_CI_Managers\":{\"action\":\"register\",\"parameters\":{\"label\":\"CI_Managers\",\"name\":\"CI_Managers\"},\"sources\":[\"Extract_Managers\"]},\"Register_CI_VoiceCall\":{\"action\":\"register\",\"parameters\":{\"label\":\"CI_VoiceCall\",\"name\":\"CI_VoiceCall\",\"rowLevelSecurityFilter\":\"('Owner.UsersWithViewAllDataProfile.Id' == \\\"$User.Id\\\") || 'Owner.Role.Roles' == \\\"$User.UserRoleId\\\" || 'OwnerId' == \\\"$User.Id\\\"\"},\"sources\":[\"Compute_Call_Fields\"]},\"Extract_VideoCall\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"OwnerId\"},{\"name\":\"RelatedRecordId\"},{\"name\":\"DurationInSeconds\"},{\"name\":\"IsCallCoachingIncluded\"},{\"name\":\"IntelligenceScore\"},{\"name\":\"HostId\"},{\"name\":\"StartDateTime\"},{\"name\":\"Name\"},{\"name\":\"TranscribedLanguage\"}],\"object\":\"VideoCall\"}},\"Profile\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"PermissionsViewAllData\"},{\"name\":\"Id\"}],\"object\":\"Profile\"}},\"Extract_User\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Username\"},{\"name\":\"LastName\"},{\"name\":\"FirstName\"},{\"name\":\"Name\"},{\"name\":\"CompanyName\"},{\"name\":\"Division\"},{\"name\":\"Department\"},{\"name\":\"Title\"},{\"name\":\"Alias\"},{\"name\":\"CommunityNickname\"},{\"name\":\"UserType\"},{\"name\":\"UserRoleId\"},{\"name\":\"SystemModstamp\"},{\"name\":\"ProfileId\"},{\"name\":\"ManagerId\"}],\"object\":\"User\"}},\"Augment_Call_Mentions\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"Mentions\",\"rightKey\":[\"CallId\"],\"rightSelect\":[\"Mention\",\"Count\",\"Category\",\"UniqueCount\"]},\"sources\":[\"Augment_Call_Caller\",\"Compute_Mention_Fields\"]},\"UsersWithViewAllProfile\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"DummyBoolean\"],\"operation\":\"LookupMultiValue\",\"relationship\":\"UsersWithViewAllDataProfile\",\"rightKey\":[\"Profile.PermissionsViewAllData\"],\"rightSelect\":[\"Id\",\"Profile.PermissionsViewAllData\",\"ManagerId\"]},\"sources\":[\"UsersWithDummyBoolean\",\"UserWithBooleanAndProfile\"]},\"Rename_VideoCall_Fields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"UserId\",\"name\":\"UserId\",\"saqlExpression\":\"'HostId'\",\"type\":\"Text\"},{\"format\":\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\",\"isYearEndFiscalYear\":true,\"label\":\"CallStartDateTime\",\"name\":\"CallStartDateTime\",\"saqlExpression\":\"toDate('StartDateTime_sec_epoch')\",\"type\":\"Date\"},{\"label\":\"Call Duration In Seconds\",\"name\":\"CallDurationInSeconds\",\"precision\":18,\"saqlExpression\":\"'DurationInSeconds'\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"Conversation Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Video Call\\\"\",\"type\":\"Text\"},{\"label\":\"CallOrigin\",\"name\":\"CallOrigin\",\"saqlExpression\":\"\\\"NotVoicemail\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_VideoCall_Feed\"]},\"Register_CI_Mentions\":{\"action\":\"register\",\"parameters\":{\"label\":\"CI_Mentions\",\"name\":\"CI_Mentions\",\"rowLevelSecurityFilter\":\"('VoiceCall.Owner.UsersWithViewAllDataProfile.Id' == \\\"$User.Id\\\") || 'VoiceCall.Owner.Role.Roles' == \\\"$User.UserRoleId\\\" || 'VoiceCall.OwnerId' == \\\"$User.Id\\\"\"},\"sources\":[\"Augment_Mention_Security_Filter\"]},\"Augment_Mention_Security_Filter\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"CallId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"VoiceCall\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"OwnerId\",\"Owner.UsersWithViewAllDataProfile.Id\",\"Owner.Role.Roles\",\"RelatedRecord.Status\",\"RelatedRecord.Amount\",\"Owner.ManagerId\",\"Owner.UsersWithViewAllDataProfile.ManagerId\",\"User.ManagerId\",\"TranscribedLanguage\",\"Feed.CommentCount\"]},\"sources\":[\"Augment_Mentions_Call\",\"Augment_Call_Caller\"]},\"Compute_VoiceCall_Type\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Conversation Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Voice Call\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_VoiceCall_Feed\"]},\"Filter_VoiceCall_Recording_Analyzed\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"'Recording.UploadDateTime' is not null and 'Recording.IntelligenceScore' >= 0\"},\"sources\":[\"Augment_VoiceCall_Recording\"]},\"Augment_Call_Caller\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"UserId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"User\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"Name\",\"ProfileId\",\"ManagerId\"]},\"sources\":[\"Augment_Call_RelatedRecord\",\"Extract_User\"]},\"Filter_VideoCall_Analyzed_In_365_Days\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"date('StartDateTime_Year', 'StartDateTime_Month', 'StartDateTime_Day') in [\\\"365 days ago\\\"..\\\"current day\\\"]\\nand 'IsCallCoachingIncluded' ==  \\\"true\\\" and 'IntelligenceScore' >= 0\"},\"sources\":[\"Extract_VideoCall\"]},\"Augment_Call_RelatedRecord\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"RelatedRecordId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"RelatedRecord\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"Name\",\"Type\",\"StageName\",\"AccountId\",\"ContactId\",\"Status\",\"Amount\"]},\"sources\":[\"Augment_Call_Owner\",\"Append_Related_Records\"]},\"Compute_Call_Fields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Duration\",\"name\":\"Duration\",\"saqlExpression\":\"date_to_string(toDate('CallDurationInSeconds'), \\\"HH:mm:ss\\\")\",\"type\":\"Text\"},{\"label\":\"CallName\",\"name\":\"CallName\",\"saqlExpression\":\"'Type' + (case 'CallType' when \\\"Outbound\\\" then coalesce(\\\"\\n with \\\" + 'RelatedRecord.Name', \\\" with \\\" + 'ToPhoneNumber', \\\"\\\") else coalesce(\\\": \\\" + 'Name', \\\"\\\") end)\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_Call_Mentions\"]},\"Extract_Lead\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"SystemModstamp\"},{\"name\":\"Status\"}],\"object\":\"Lead\"}},\"Append_Lead_Type\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Related Record Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Lead\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Lead\"]},\"Augment_VideoCall_Feed\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Feed\",\"rightKey\":[\"ParentId\"],\"rightSelect\":[\"CommentCount\"]},\"sources\":[\"Filter_VideoCall_Analyzed_In_365_Days\",\"Extract_VideoCall_Feed\"]},\"Extract_VoiceCallRecording\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"VoiceCallId\"},{\"name\":\"IntelligenceScore\"},{\"name\":\"UploadDateTime\"}],\"object\":\"VoiceCallRecording\"}},\"Extract_VoiceCall_Feed\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"CommentCount\"},{\"name\":\"Id\"},{\"name\":\"LikeCount\"},{\"name\":\"ParentId\"},{\"name\":\"RelatedRecordId\"}],\"object\":\"VoiceCallFeed\"}},\"UsersWithDummyBoolean\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"DummyBoolean\",\"name\":\"DummyBoolean\",\"saqlExpression\":\"\\\"true\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_User_FlattenUserRole\"]},\"Augment_VoiceCall_Feed\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Id\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Feed\",\"rightKey\":[\"ParentId\"],\"rightSelect\":[\"CommentCount\"]},\"sources\":[\"Filter_VoiceCall_Recording_Analyzed\",\"Extract_VoiceCall_Feed\"]},\"Extract_VideoCall_Feed\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"CommentCount\"},{\"name\":\"Id\"},{\"name\":\"ParentId\"},{\"name\":\"RelatedRecordId\"},{\"name\":\"Type\"},{\"name\":\"LikeCount\"}],\"object\":\"VideoCallFeed\"}},\"Filter_VoiceCall_In_365_Days\":{\"action\":\"filter\",\"parameters\":{\"saqlFilter\":\"date('CallStartDateTime_Year', 'CallStartDateTime_Month', 'CallStartDateTime_Day') in [\\\"365 days ago\\\"..\\\"current day\\\"]\"},\"sources\":[\"Extract_VoiceCall\"]},\"Slice_VideoCall_Fields\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"DurationInSeconds\"},{\"name\":\"HostId\"},{\"name\":\"StartDateTime\"}],\"mode\":\"drop\"},\"sources\":[\"Rename_VideoCall_Fields\"]},\"Augment_User_FlattenUserRole\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"UserRoleId\"],\"relationship\":\"Role\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Roles\",\"RolePath\"]},\"sources\":[\"Extract_User\",\"Flatten_UserRole\"]},\"Append_Voice_Video_Calls\":{\"action\":\"append\",\"parameters\":{\"enableDisjointedSchemaMerge\":true},\"sources\":[\"Compute_VoiceCall_Type\",\"Slice_VideoCall_Fields\"]},\"Augment_Mentions_Call\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"CallId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Call\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Owner.ProfileId\",\"Owner.Role.RolePath\",\"Owner.Role.Roles\",\"Owner.UsersWithViewAllDataProfile.Id\",\"OwnerId\",\"CallStartDateTime\",\"CallRecordingId\",\"User.Id\",\"User.Name\",\"Recording.IntelligenceScore\",\"Recording.UploadDateTime\",\"User.ProfileId\",\"RelatedRecord.Id\",\"RelatedRecord.Name\",\"RelatedRecord.Type\",\"IntelligenceScore\",\"RelatedRecord.StageName\",\"RelatedRecord.AccountId\",\"RelatedRecord.ContactId\",\"SourceType\",\"Type\",\"RelatedRecord.Status\",\"RelatedRecord.Amount\",\"Owner.ManagerId\",\"Owner.UsersWithViewAllDataProfile.ManagerId\",\"User.ManagerId\",\"TranscribedLanguage\",\"CallDurationInSeconds\",\"Feed.CommentCount\",\"CallOrigin\"]},\"sources\":[\"Compute_Mention_Fields\",\"Augment_Call_Caller\"]},\"Extract_Account\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"SystemModstamp\"}],\"object\":\"Account\"}},\"Compute_Mention_Fields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"1\",\"label\":\"Unique Count\",\"name\":\"UniqueCount\",\"precision\":8,\"saqlExpression\":\"1\",\"scale\":2,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Call_Mentions\"]},\"Extract_VoiceCall\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"OwnerId\"},{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"UserId\"},{\"name\":\"CallStartDateTime\"},{\"name\":\"CallDurationInSeconds\"},{\"name\":\"CallRecordingId\"},{\"name\":\"RelatedRecordId\"},{\"name\":\"ToPhoneNumber\"},{\"name\":\"FromPhoneNumber\"},{\"name\":\"CallType\"},{\"name\":\"SourceType\"},{\"name\":\"SystemModstamp\"},{\"name\":\"TranscribedLanguage\"},{\"defaultValue\":\"NotVoicemail\",\"name\":\"CallOrigin\"}],\"object\":\"VoiceCall\"}},\"DummyTemplate\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Name\"}],\"fullRefreshToken\":\"v1\",\"object\":\"Organization\",\"runtime\":{\"SFDCtoken\":\"SFDCtoken\"}}},\"UserWithBooleanAndProfile\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ProfileId\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Profile\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Id\",\"PermissionsViewAllData\"]},\"sources\":[\"UsersWithDummyBoolean\",\"Profile\"]},\"Extract_UserRole\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"ParentRoleId\"},{\"name\":\"RollupDescription\"},{\"name\":\"LastModifiedDate\"},{\"name\":\"LastModifiedById\"},{\"name\":\"SystemModstamp\"},{\"name\":\"DeveloperName\"}],\"object\":\"UserRole\"}},\"Append_Account_Type\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Related Record Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Account\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Account\"]},\"Append_Contact_Type\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Related Record Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Contact\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Contact\"]},\"Flatten_UserRole\":{\"action\":\"flatten\",\"parameters\":{\"multiField\":{\"isSystemField\":false,\"label\":\"Roles\",\"name\":\"Roles\"},\"parentField\":\"ParentRoleId\",\"pathField\":{\"isSystemField\":false,\"label\":\"RolePath\",\"name\":\"RolePath\"},\"selfField\":\"Id\"},\"sources\":[\"Extract_UserRole\"]},\"Append_Related_Records\":{\"action\":\"append\",\"parameters\":{\"enableDisjointedSchemaMerge\":true},\"sources\":[\"Append_Account_Type\",\"Append_Contact_Type\",\"Append_Lead_Type\",\"Append_Opportunity_Type\"]},\"Extract_Call_Mentions\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"name\":\"CallId\",\"saqlExpression\":\"\\\"dummy voice/video call id\\\"\",\"type\":\"Text\"},{\"name\":\"Category\",\"saqlExpression\":\"\\\"dummy mention category\\\"\",\"type\":\"Text\"},{\"name\":\"Mention\",\"saqlExpression\":\"\\\"dummy mention\\\"\",\"type\":\"Text\"},{\"name\":\"Count\",\"precision\":8,\"saqlExpression\":\"0\",\"scale\":2,\"type\":\"Numeric\"},{\"name\":\"S3SnapshotFileUri\",\"saqlExpression\":\"\\\"dummy s3 snapshot file uri\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":false},\"sources\":[\"DummyTemplate\"]},\"Append_Opportunity_Type\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Related Record Type\",\"name\":\"Type\",\"saqlExpression\":\"\\\"Opportunity\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Extract_Opportunity\"]}}}",null]
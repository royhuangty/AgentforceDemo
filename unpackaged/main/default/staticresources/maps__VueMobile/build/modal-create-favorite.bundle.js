"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[7249],{4234:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var a=t(5728),i=t(4870),o=t(3057),l=t(8050);const r={components:{MAModal:a.Z,MAInput:i.Z,MASpinner:o.Z},props:{modalOptions:{type:Object,required:!0}},data:()=>({favoriteName:"",description:"",isLoading:!1}),created(){void 0!==this.modalOptions.name&&(this.favoriteName=this.modalOptions.name)},methods:{close(){this.$emit("close",!1)},validateFavorite(){let e=!0;return""===this.favoriteName&&(window.MAToastMessages.showWarning({message:this.$Labels.Favorite_Location_Error,subMessage:this.$Labels.Favorite_Name_Validation,timeOut:6e3}),e=!1),e},createFavorite(){if(!this.validateFavorite())return;this.isLoading=!0;const e={action:"createFavoriteLocationMainTree",ajaxResource:"FavoriteLocationsAJAXResources",serializedLocation:JSON.stringify({Name:this.favoriteName,maps__User__c:window.MASystem.User.Id,maps__Folder__c:null,maps__AddressFields__c:JSON.stringify(this.modalOptions.addressFields),Id:null,maps__Latitude__c:this.modalOptions.latlng.lat,maps__Longitude__c:this.modalOptions.latlng.lng,maps__Address__c:this.modalOptions.address,maps__Description__c:this.description,maps__FavoriteMarker__c:"#00FF00"})};(0,l.wX)(this.$Remoting.processAJAXRequest,[e],{buffer:!1}).then((e=>{const{success:s=!1,data:t={}}=e;if(s){const e={component:"FavoriteLayer",description:this.description,type:"favorite",qid:(0,l.x$)(),name:this.favoriteName,defaultAction:"plot-favorite",id:t.Id};this.$bus.$emit("add-layer",e,(()=>{this.$nextTick((()=>{this.$bus.$emit("load-recents-layers"),this.$bus.$emit("load-folder"),window.MAToastMessages.showSuccess({message:this.$Labels.Favorite_Success,subMessage:this.$Labels.Favorite_Success_Sub_Message}),this.close()}))}))}else{console.warn(e);const s=e.message||this.$Labels.Unable_To_Create_Favorite;window.MAToastMessages.showError({message:this.$Labels.Favorite_Location_Error,subMessage:s,timeOut:6e3}),this.isLoading=!1}}))}}},n=(0,t(1900).Z)(r,(function(){var e=this,s=e._self._c;return s("MAModal",{attrs:{doDetach:!0,title:e.$Labels.ActionFramework_Create_Favorite},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),s("MAInput",{staticClass:"slds-p-vertical_xx-small",attrs:{isRequired:!0,label:e.$Labels.MA_Name},model:{value:e.favoriteName,callback:function(s){e.favoriteName=s},expression:"favoriteName"}})],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.MA_Cancel)+"\n        ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",on:{click:e.createFavorite}},[e._v("\n            "+e._s(e.$Labels.MA_Done)+"\n        ")])])])}),[],!1,null,null,null).exports},4870:(e,s,t)=>{t.d(s,{Z:()=>i});const a={name:"MAInput",mixins:[t(3826).Z],props:{value:{type:[String,Number],required:!0},isRequired:{type:Boolean,default:!1},useTextArea:{type:Boolean,default:!1},disableResize:{type:Boolean,default:!1},label:{type:String,default:""},errors:{type:Array,default:()=>[]},placeholder:{type:String,default:""},type:{type:String,default:"text"},isInvalid:{type:Boolean,default:!1},isDisabled:{type:Boolean,default:!1},hasFocus:{type:Boolean,default:!1},requiredLabel:{type:String,default:"Required"}},computed:{showLabel(){return this.label},hasErrors(){return this.errors&&this.errors.length},listeners(){return{...this.$listeners,input:e=>this.$emit("input",e.target.value)}}},watch:{hasFocus(e){e&&this.focus()}},mounted(){this.hasFocus&&this.focus()},methods:{focus(){this.$refs.input.focus(),this.$refs.input.select()}}},i=(0,t(1900).Z)(a,(function(){var e=this,s=e._self._c;return s("div",{staticClass:"slds-form-element",class:{"slds-has-error":e.isInvalid}},[e.showLabel?s("label",{staticClass:"slds-form-element__label"},[e.isRequired?s("abbr",{staticClass:"slds-required",attrs:{title:e.requiredLabel}},[e._v("*")]):e._e(),e._v("\n        "+e._s(e.decodeHtml(e.label))+"\n        "),e._t("label")],2):e._e(),e._v(" "),s("div",{staticClass:"slds-form-element__control",staticStyle:{position:"relative"}},[e.useTextArea?s("textarea",e._g({staticClass:"slds-textarea",attrs:{disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)}},e.listeners)):s("input",e._g({ref:"input",staticClass:"slds-input",attrs:{type:e.type,disabled:e.isDisabled,placeholder:e.placeholder},domProps:{value:e.decodeHtml(e.value)},on:{blur:function(s){return e.$emit("update:hasFocus",!1)}}},e.listeners)),e._v(" "),e._t("extendInput")],2),e._v(" "),e.isInvalid?s("div",{staticClass:"slds-form-element__help"},[e._t("errors")],2):e._e()])}),[],!1,null,"71386de2",null).exports}}]);
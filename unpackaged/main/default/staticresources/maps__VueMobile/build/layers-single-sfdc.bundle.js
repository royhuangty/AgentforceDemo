(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[683],{3126:(e,t,s)=>{e.exports=s.p+"images/d61e60332b10a8fa7cd62815ef896afd.svg"},4642:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(7813);const{$:i}=window,l={props:{layerData:{type:Object,required:!0},isLoading:{type:Boolean,default:!1}},data:()=>({totalMarkers:0,visibleMarkers:0,legendRowSelections:{},legendRowTimeout:null,showAllLegendData:!1}),computed:{computedTotalRecords(){return(0,a.N4)(this.$Labels.MA_Total_Records,[this.totalMarkers])},computedRecordsCreatedVisible(){return(0,a.N4)(this.$Labels.MA_Records_Created_Visible,[this.totalMarkers,this.visibleMarkers])},layerType(){return this.layerData.type},legendInfo:{get(){let e={};return e=this.plottedInfo.legendInfo||{},e},set(e){this.plottedInfo.legendInfo=e}},legendImages(){return this.plottedInfo.imgInfo||[]},layerQID(){return this.layerData.qid},plottedLayer(){let e;return"marker"===this.layerType&&(e=i(`#PlottedQueriesTable .savedQuery[qid="${this.layerQID}"]`)),e},plottedInfo(){return this.plottedLayer.data()||{}},legendShowText(){let e=this.$Labels.MA_Show_All;return this.showAllLegendData&&(e=this.$Labels.MA_Show_Less),e}},created(){this.build()},methods:{formatLabel:(e,t)=>(0,a.N4)(e,t),build(){this.updateLegend()},toggleVisibleLegend(){this.showAllLegendData=!this.showAllLegendData},updateLegend(){let e=0,t=0;const s=Object.keys(this.legendInfo)||[];for(let a=0;a<s.length;a++){const i=s[a],l=this.legendInfo[i];e+=l.totalmarkers,t+=l.count}this.visibleMarkers=t,this.totalMarkers=e},getIconColor(e){const t=i.parseHTML(e);return i(t).css("color")},toggleRow(e){clearTimeout(this.legendRowTimeout),this.legendRowTimeout=null,this.legendRowSelections[e.legendId]=e.active,this.legendRowTimeout=setTimeout((()=>{const e={plottedQuery:this.plottedLayer,rows:this.legendRowSelections};window.Plotting.toggleLegendRow(e,(()=>{window.Plotting.updateQueryInfo(this.plottedLayer,(()=>{this.legendRowSelections={},this.build(),this.$emit("toggleLoading",!1),this.plottedLayer.removeClass("loading"),this.plottedLayer.find(".queryLoader").hide(),this.plottedLayer.find(".queryIcon ").show()}))}))}),250)}}},o=(0,s(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"layers-individual-filter-wrap"},[t("div",{staticClass:"ma-section-title ma-section-title",staticStyle:{padding:"18px 16px 16px"}},[t("span",{staticClass:"legend-title"},[e._v(e._s(e._f("decode")(e.$Labels.MA_MARKER_LEGEND)))]),e._v(" "),t("span",{staticClass:"legend-moreless-text",staticStyle:{position:"absolute",right:"0px",top:"2px",height:"45px","line-height":"45px",padding:"0 15px"},on:{click:e.toggleVisibleLegend}},[t("span",{staticClass:"moreless-text"},[e._v(e._s(e._f("decode")(e.legendShowText)))])])]),e._v(" "),t("div",{staticClass:"pad-16-16-8 background--white"},[t("div",{staticClass:"margin-0 text--dark-blue legendField"},[t("div",{staticClass:"ma-item-name-subtitle plottinginfo-wrapper",staticStyle:{"font-size":"16px"}},[t("div",{staticClass:"status"},[e._v(e._s(e._f("decode")(e.computedTotalRecords)))]),e._v(" "),t("div",{staticClass:"status"},[e._v(e._s(e._f("decode")(e.computedRecordsCreatedVisible)))])])])]),e._v(" "),t("div",{staticClass:"legend-wrap background--white"},e._l(e.legendInfo,(function(a,i,l){return t("div",{directives:[{name:"show",rawName:"v-show",value:a.totalmarkers>0||e.showAllLegendData,expression:"row.totalmarkers > 0 || showAllLegendData"}],key:i,staticClass:"legend-item legend-row ma-form-control-wrap ma-checkbox-wrap flex-horizontal",attrs:{"data-id":i,uid:l}},[t("div",{staticClass:"flex-grow-1"},[t("label",{staticClass:"ma-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.active,expression:"row.active"}],staticClass:"legend-checkbox",attrs:{id:"legend-checkbox13","data-rule":l,uid:l,checked:"checked",name:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(a.active)?e._i(a.active,null)>-1:a.active},on:{change:[function(t){var s=a.active,i=t.target,l=!!i.checked;if(Array.isArray(s)){var o=e._i(s,null);i.checked?o<0&&e.$set(a,"active",s.concat([null])):o>-1&&e.$set(a,"active",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(a,"active",l)},function(t){return e.toggleRow(a)}]}}),e._v(" "),t("span",{staticClass:"ma-checkbox-faux"}),e._v(" "),t("span",{staticClass:"ma-checkbox-label"},[e._v(e._s(e._f("decode")(a.label)))])])]),e._v(" "),t("div",{staticClass:"legend-count"},[t("span",{staticClass:"visiblemarkers"},[e._v(e._s(e._f("decode")(e.formatLabel(e.$Labels.Mobile_Legend_Count,[a.count,a.totalmarkers]))))])]),e._v(" "),t("div",{staticClass:"legend-marker"},[a.icon.indexOf("/images/marker")>-1||a.icon.indexOf("servlet.FileDownload")>-1||a.icon.indexOf("sfc/servlet.shepherd/version/download/")>-1||a.icon.indexOf("/sfc/servlet.shepherd/document/download/")>-1?t("img",{staticClass:"legend-image",staticStyle:{height:"20px","max-width":"30px"},attrs:{src:a.icon}}):-1!==a.icon.indexOf("ion-ios-infinite")?t("span",{style:{"font-size":"18px",color:e.getIconColor(a.icon)}},[e._v("âˆž")]):-1!==a.icon.indexOf("glyphicon-comment")?t("span",{staticClass:"slds-icon-utility-prompt",style:{"font-size":"16px",fill:e.getIconColor(a.icon)}},[t("MAIcon",{attrs:{slot:"extendInput",src:s(3126)},slot:"extendInput"})],1):t("span",[e._v(e._s(e._f("decode")(a.icon)))])])])})),0)])}),[],!1,null,"177ece6c",null).exports}}]);
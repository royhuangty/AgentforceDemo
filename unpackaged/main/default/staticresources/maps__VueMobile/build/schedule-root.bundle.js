"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[997],{9606:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var d=s(5908),i=s(3057),l=s(3589),a=s(7813),u=s(7082),o=s(5467);const r={components:{ScheduleHeader:()=>({...(0,l.Z)(),component:s.e(7797).then(s.bind(s,9527)),error:o.Z}),ScheduleBody:()=>({...(0,l.Z)(),component:s.e(7557).then(s.bind(s,6134)),error:o.Z}),ScheduleFooter:()=>({...(0,l.Z)(),component:s.e(376).then(s.bind(s,3528)),error:o.Z}),MASpinner:i.Z},data:()=>({}),computed:{...(0,d.mapState)("schedule",{schedule__isInitialized:"isInitialized"}),...(0,d.mapGetters)("schedule",{schedule__isLoading:"isLoading",schedule__queue:"queue"})},created(){this.$bus.$on("remove-schedule-route",this.schedule__removeRoute),this.$bus.$on("add-to-schedule",this.addItemsToQueue),this.schedule__updateScheduleReady()},destroyed(){this.$bus.$off("remove-schedule-route"),this.$bus.$off("add-to-schedule")},methods:{...(0,d.mapMutations)("schedule",{schedule__updateQueue:"updateQueue",schedule__updateScheduleReady:"updateScheduleReady"}),...(0,d.mapActions)("schedule",{schedule__removeRoute:"removeRoute"}),getScheduleData({saveEventsState:e=!1,shiftId:t}){this.$emit("getScheduleData",{saveEventsState:e,shiftId:t})},addItemsToQueue(e){function t(e,t){let s=!1;return s=e.isMALocation?e.placeId===t.placeId:e.relationshipId===t.relationshipId,s}this.schedule__removeRoute();const s=[];let d=!1;const i={total:0,success:!1};e.forEach((e=>{if(150===this.schedule__queue.length)return void(d=!0);if(void 0!==e.isSupported&&!e.isSupported)return void s.push({title:e.marker.title,baseObjectLabel:e.baseObjectLabel});e.LinkId__c&&(e.relationshipId=e.LinkId__c);const l=null!=e.lat&&null!=e.lng;e.spatial=l,e.showActionMenu=!1,e.excludeFromRoute=!l,l||(e.className="non-spatial-cell"),e.id=(0,a.x$)(),e.Name=e.title,e.baseObjectId=e.baseObjectId;let u="";e.marker&&(u=e.marker.address||e.marker.FormattedAddress_MA),e.Address__c=u;const{prioritySettings:{type:o="",label:r="",sfdcFieldType:c="number",sfdcFieldValue:n=0}={}}=e.marker;e.priorityValue=n,e.priority=0,e.priorityType=o,e.priorityLabel=r,e.priorityFieldType=c,e.guideWaypoint={hasWaypoint:!1,isLocked:!0},e.addressFields={BillingCity:e.marker.BillingCity,BillingState:e.marker.BillingState,BillingCountry:e.marker.BillingCountry,BillingStreet:e.marker.BillingStreet,BillingPostalCode:e.marker.BillingPostalCode},delete e.marker,delete e.supportsActivities,delete e.baseObjectLabel,this.schedule__queue.find(t.bind(this,e))||(this.schedule__updateQueue(e),i.success=!0,i.total+=1)})),s.length,i.success&&window.MAToastMessages.showSuccess({message:(0,a.N4)(this.$Labels.Schedule_Records_Added_To_Schedule,[i.total])}),d&&u.Z.showErrorMessage(82700,u.D.SCHEDULE)}}},c=(0,s(1900).Z)(r,(function(){var e=this,t=e._self._c;return e.schedule__isInitialized?t("div",{staticClass:"schedule-wrapper slds-grid slds-grid_vertical"},[t("MASpinner",{directives:[{name:"show",rawName:"v-show",value:e.schedule__isLoading,expression:"schedule__isLoading"}]}),e._v(" "),t("ScheduleHeader",{on:{getScheduleData:e.getScheduleData}}),e._v(" "),t("ScheduleBody"),e._v(" "),t("ScheduleFooter")],1):e._e()}),[],!1,null,"61c7f8a0",null).exports}}]);
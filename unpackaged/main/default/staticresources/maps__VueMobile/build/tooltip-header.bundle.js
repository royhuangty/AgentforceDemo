"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2139],{9409:(t,s,e)=>{e.r(s),e.d(s,{default:()=>l});var o=e(5908);const{google:i,getProperty:a,userSettings:r}=window,d={data(){return{distanceToMyPosition:`${this.$Labels.MA_Loading_With_Ellipsis}`,address:"",name:""}},computed:{...(0,o.mapGetters)("tooltip",{tooltip__record:"record",tooltip__marker:"marker",tooltip__queryMetaData:"queryMetaData",tooltip__markerType:"markerType"})},created(){this.buildHeader()},methods:{hideTooltip(){this.$emit("hide-tooltip")},getDistanceToMyPosition(){if("my-position"===this.tooltip__markerType)this.distanceToMyPosition="";else if(window.myCachedPosition)try{const t=new i.maps.LatLng(this.tooltip__record.location.coordinates.lat,this.tooltip__record.location.coordinates.lng),s=i.maps.geometry.spherical.computeDistanceBetween(window.myCachedPosition,t),e=a(r||{},"RouteDefaults.unit")||"mi",o="km"===e?"KM":"MILES",d=Math.round(s*window.unitFactors.METERS[o]*100)/100;this.distanceToMyPosition=`${d} ${e}`}catch(t){this.distanceToMyPosition=""}else this.distanceToMyPosition=""},buildHeader(){this.getFormattedAddress(),this.getName(),this.getDistanceToMyPosition()},getFormattedAddress(){if("sfdc-marker"===this.tooltip__markerType)this.address=window.Plotting.getFormattedAddress(this.tooltip__record,this.tooltip__queryMetaData)||"";else if("my-position"===this.tooltip__markerType)window.reverseGeocode({latLng:this.tooltip__record.location.coordinates,complete:t=>{if(t.success&&t.results.length>0){const[s={}]=t.results,e=s.formatted_address||"";this.tooltip__record.address=e,this.address=e,this.tooltip__marker.address=e}}});else if("poi"===this.tooltip__markerType)if(this.tooltip__record.adr_address){const[t,s]=window.MASystem.User.UserLocale.split("_");this.address=window.MASearch.formatGoogleLocaleAddress(t,s,this.tooltip__record.adr_address)}else this.address=this.tooltip__record.formatted_address;else if("favorite-marker"===this.tooltip__markerType){let t="";this.tooltip__marker.addressFields&&(t=window.formatLocaleAddress(window.MASystem.User.UserLocale,this.tooltip__marker.addressFields)),this.address=t||this.tooltip__marker.location.address}else this.address=this.tooltip__record.address},getName(){if("sfdc-marker"===this.tooltip__markerType){const t=this.tooltip__queryMetaData.tooltips||[];if(t.length){const s=t[0],e=a(this.tooltip__record,s.ActualFieldName)||"",o=window.formatTooltip(this.tooltip__record,s,!0)||e;this.name=""===o?"N/A":o}}else"favorite-marker"===this.tooltip__markerType?this.name=this.tooltip__marker.title:this.name=this.tooltip__record.name}}},l=(0,e(1900).Z)(d,(function(){var t=this,s=t._self._c;return s("div",{staticClass:"tooltipHeaderWrapper"},[s("div",{staticClass:"slds-grid ma-top-bar tooltip-top-bar",attrs:{id:"markerTooltipTopBar"}},[s("div",{staticClass:"slds-p-vertical_small slds-p-left_medium recordName slds-col_bump-right slds-truncate"},[s("div",{staticClass:"slds-text-heading_medium slds-p-right--small slds-truncate"},[t._v(t._s(t._f("decode")(t.name)))]),t._v(" "),s("div",{staticClass:"infowindow_subtext ma-top-bar-subtext recordAddress slds-truncate"},[t._v("\n                "+t._s(t._f("decode")(t.address))+"\n            ")])]),t._v(" "),s("div",{staticClass:"slds-p-vertical_small slds-p-left_small slds-p-top_xx-small"},[s("div",{staticClass:"infowindow_meta-text ma-top-bar-meta-distance recordDistance slds-truncate"},[t._v(t._s(t.distanceToMyPosition))]),t._v(" "),s("div",{staticClass:"infowindow_meta-text ma-top-bar-meta-time recordTime slds-truncate"})]),t._v(" "),s("div",{staticClass:"slds-p-vertical_small slds-p-right_x-small slds-p-left_medium"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-container",on:{click:t.hideTooltip}},[s("span",{staticClass:"ma-icon ma-icon-close"})])])])])}),[],!1,null,"c4c7f014",null).exports}}]);
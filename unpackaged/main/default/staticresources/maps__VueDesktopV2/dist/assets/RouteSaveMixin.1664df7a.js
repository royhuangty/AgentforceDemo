import{f as _,aO as d,aQ as a}from"../bundle.js";const i={setup(){const e=_(),s=d();return{mainStore:e,routesStore:s}},computed:{currentRoute(){return this.routesStore.currentRoute},waypoints(){return this.currentRoute.waypoints},first(){return this.currentRoute.first},last(){return this.currentRoute.last}},methods:{getWaypointRecordsForSave(){const e=[];let s=1;if(this.first&&Object.keys(this.first).length!==0){const t=this.$_RouteSave_buildRecordFromWaypoint(this.first,"start");t.sortOrder=s++,e.push(t)}if(this.waypoints.forEach(t=>{const r=this.$_RouteSave_buildRecordFromWaypoint(t,"unlocked");r.sortOrder=s++,e.push(r)}),this.last&&Object.keys(this.last).length!==0){const t=this.$_RouteSave_buildRecordFromWaypoint(this.last,"end");t.sortOrder=s++,e.push(t)}return e},$_RouteSave_convertToJSON(e){let s=MAPS.Utils.String.htmlDecode(e);try{s=JSON.parse(s)}catch{s=a.defaultOptions,s.saveError=!0}return s},$_RouteSave_buildRecordFromWaypoint(e,s){let t=e.maps__Options__c;typeof t=="string"&&(t=this.$_RouteSave_convertToJSON(t)),t.LockType=s;let r=MAPS.Utils.String.htmlDecode(e.Name)||"";r.length>=80&&(r=`${r.substring(0,77)}...`);let c=null;e.maps__BaseObjectId__c!==void 0&&e.maps__BaseObjectId__c!==""?c=e.maps__BaseObjectId__c:e.baseObjectId!==void 0&&e.baseObjectId!==""&&(c=e.baseObjectId);let o=null;return e.maps__BaseObject__c!==void 0&&e.maps__BaseObject__c!==""?o=e.maps__BaseObject__c:e.baseObjectLabel!==""&&e.baseObjectLabel!==void 0&&(o=e.baseObjectLabel),{recordId:e.recordId,isLocked:e.maps__isLocked__c||!1,name:MAPS.Utils.String.htmlDecode(r),address:e.maps__Address__c,latitude:e.lat,longitude:e.lng,savedQueryId:(e.maps__MarkerLayer__c||"").indexOf("OptionsLayer")===0?void 0:e.maps__MarkerLayer__c,linkId:e.maps__LinkId__c,notes:MAPS.Utils.String.htmlDecode(e.maps__Notes__c),options:JSON.stringify(t),baseObjectId:c,baseObject:o}}}};export{i as R};

import{_ as $,o as h,c as k,h as v,a7 as be,e as S,t as M,j as le,a0 as X,ac as We,B as de,b9 as la,P as H,O as Z,r as c,F as Y,q as se,b as L,i,w as n,l as ie,T as aa,ai as ns,z as ia,a8 as qe,a6 as $e,n as oa,a2 as Ye,I as ft,s as ge,ao as ra,M as ve,$ as ds,Z as cs,ba as na,a3 as Fe,aN as da,J as ca,K as ua,v as Ce,ak as pa,af as ma,ag as _a,a9 as ha,a5 as ye,bb as V,x as Ze,bc as ba,bd as oe,Q as Yt,f as us,as as ya,E as Ee,be as fa,bf as La,S as ga,bg as va,g as Sa,bh as Oa,bi as Kt,L as Ta}from"../bundle.js";import{M as ps}from"./Modal.76578f76.js";import{P as Lt}from"./Popover.93a0feed.js";import{u as K}from"./index.d251dbc7.js";import{D as O,M as Q,T as J}from"./enums.445299a0.js";import{g as Ma}from"./salesforce-object-utils.cdd4a0a9.js";import{C as Ve}from"./ColorPicker.e47e828c.js";import{c as C,r as z,d as Wt,m as ms,a as Aa}from"./index.0172543b.js";import{v as Re}from"./valid-hex-value.729e56db.js";import{R as ka}from"./ButtonGroup.2e921f3c.js";import{R as _s}from"./Group.7e0cb254.js";import{D as hs}from"./DatePicker.899772b4.js";import{T as Ba}from"./TimePicker.bfa4e2f9.js";import{m as ue,H as $a}from"./HeatMapOptions.3785dac9.js";import"./Radio.2202254f.js";const Fa={name:"Card",props:{title:{type:String,default:""},padBody:Boolean},computed:{showHeader(){return this.title||this.$slots.icon||this.$slots["header-content"]||this.$slots.title}}},Ca={class:"slds-card"},Da={key:0,class:"slds-card__header slds-grid"},Ra={class:"slds-media slds-media_center slds-has-flexi-truncate"},Ea={key:0,class:"slds-media__figure"},Va={class:"slds-media__body"},Ia={class:"slds-card__header-title"},Pa=["title"],wa={key:0},Na={key:1,class:"slds-card__footer"};function xa(e,t,l,o,a,s){return h(),k("article",Ca,[s.showHeader?(h(),k("div",Da,[v("div",Ra,[e.$slots.icon?(h(),k("div",Ea,[be(e.$slots,"icon")])):S("",!0),v("div",Va,[be(e.$slots,"title",{},()=>[v("h2",Ia,[v("span",{title:l.title,class:"slds-truncate"},[v("span",null,M(l.title),1)],8,Pa)])])])]),e.$slots["header-content"]?(h(),k("div",wa,[be(e.$slots,"header-content")])):S("",!0)])):S("",!0),v("div",{class:X([{"slds-card__body_inner":l.padBody},"slds-card__body"])},[be(e.$slots,"body",{},()=>[le("Card Body")])],2),e.$slots.footer?(h(),k("footer",Na,[be(e.$slots,"footer")])):S("",!0)])}const gt=$(Fa,[["render",xa]]),Ua=()=>({id:We(),resource:"",operator:"",value:""}),ja=()=>({deleteCondition:"Delete Condition",resource:"Resource",operator:"Operator",value:"Value",parent:"Parent",grandparent:"Grandparent",magnus:"Great"}),Xt=()=>({title:"Condition",deleteIcon:"Delete Condition"}),Ga={name:"ExpressionCondition",components:{ButtonIcon:de,ConditionalWrapper:la,Picklist:H,TextInput:Z},props:{ancestral:Boolean,assistiveText:{type:Object,default:()=>Xt()},id:{type:[String,Number],required:!0},labels:{type:Object,default:()=>{}},operator:{type:[String,Number,Symbol],default:""},operatorErrors:{type:Array,default:()=>[]},operators:{type:Array,default:()=>[]},resource:{type:[String,Number,Symbol,Array],default:""},resourceErrors:{type:Array,default:()=>[]},resources:{type:Array,default:()=>[]},resourceIdKey:{type:String,default:"id"},resourceTitleKey:{type:String,default:"title"},skipRegistration:Boolean,value:{type:[String,Number,Symbol],default:""}},data(){return{index:0,gutterLabel:null,gutterVisibile:!0,numSiblings:0,localResources:[]}},computed:{computedLabels(){const e=Object.hasOwn(this,"$__getGlobalLabels")?this.$__getGlobalLabels().condition||{}:{};return{...ja(),...e,...this.$props.labels}},computedAssistiveText(){return{...Xt(),...this.$props.assistiveText}},computedGutterAssistiveText(){return`${this.computedAssistiveText.title} ${this.gutterLabel}`},isSelectedResourceNullOrBlank(){const e=this.resource===null||this.resource==="";let t=!1;if(this.$props.ancestral){const l=this.resource[this.resources.length-1];t=typeof l>"u"||l===""||l===null}return e||t},isDeleteButtonDisabled(){const e=this.isSelectedResourceNullOrBlank&&this.numSiblings===0;let t=!0;return this.$props.ancestral&&(t=this.resource.length===0),e&&t}},watch:{"$props.resources":{handler(){this.localResources=this.$props.resources.map((e,t)=>({id:We(),label:this.getResourceOptionsLabel(t,this.$props.resources.length),resources:e})),!this.$parent.$props.disableA11y&&this.$props.ancestral&&this.$nextTick(this.focusResource)},deep:!0,immediate:!0}},created(){this.$props.skipRegistration||this.$parent.registerCondition(this.id,{setGutterVisibility:this.setGutterVisibility.bind(this),setGutterLabel:this.setGutterLabel.bind(this),setIndex:this.setIndex.bind(this),setNumSiblings:this.setNumSiblings.bind(this),focusResource:this.focusResource.bind(this)})},beforeUnmount(){this.$props.skipRegistration||this.$parent.unregisterCondition(this.$props.id)},methods:{setGutterVisibility(e){this.gutterVisibile=e},setGutterLabel(e){this.gutterLabel=e},setIndex(e){this.index=e},setNumSiblings(e){this.numSiblings=e},focusResource(){if(this.$props.ancestral){const{id:e}=this.localResources[this.localResources.length-1];this.$refs[`resource-${e}`].focus()}else this.$refs.resource.focus()},getResourceOptionsLabel(e,t){return t===1||e+1===t?this.computedLabels.resource:e===0?this.computedLabels.parent:e===1?this.computedLabels.grandparent:`${`${this.computedLabels.magnus} `.repeat(e-1)} ${this.computedLabels.grandparent}`},onDeleteRequest(){this.numSiblings===0?this.resetCondition():this.deleteCondition()},async resetCondition(){if(this.onValueInput(""),this.onOperatorChanged(""),this.$props.ancestral){if(this.$emit("update:resource",[]),this.$props.resources.length){const e=[this.$props.resources[0]];this.$emit("update:resources",e)}}else this.onResourceChanged("");await this.$nextTick(this.focusResource),this.$emit("reset-condition",{id:this.$props.id,index:this.index})},deleteCondition(){this.$emit("delete-condition",{id:this.$props.id,index:this.index})},onOperatorChanged(e){this.$emit("update:operator",e),this.$emit("operator-change",{id:this.$props.id,index:this.index,value:e})},onResourceChanged(e){this.$emit("update:resource",e),this.$emit("resource-change",{id:this.$props.id,index:this.index,value:e})},onSelectedResourceOption(e,t=0){let l=[...this.$props.resource];e?l.splice(t,l.length,e[this.$props.resourceIdKey]):l.splice(t,l.length),this.$emit("update:resource",l),t!==this.$props.resources.length-1&&(l=[...this.$props.resources],l.splice(t+1),this.$emit("update:resources",l)),this.$emit("resource-change",{id:this.$props.id,index:this.index,ancestralIndex:t,cleared:e===null,option:e})},onResourceClear(e=0){this.onSelectedResourceOption(null,e)},onValueInput(e){this.$emit("update:value",e),this.$emit("value-change",{id:this.$props.id,index:this.index,value:e})}}},za={class:"slds-expression__row"},Ha={key:0,class:"slds-expression__legend"},qa={class:"slds-assistive-text"},Ya={class:"slds-col slds-grow-none",style:{width:"15rem"}},Ka={key:0,class:"slds-col slds-grow-none margin-top-auto",style:{"min-width":"15rem"}},Wa={class:"slds-col slds-grow-none margin-top-auto"},Xa={class:"slds-grid"},Qa={class:"slds-col slds-grow-none margin-top-auto"},Ja={class:"slds-col slds-grow-none"},Za={class:"slds-form-element"},ei=v("span",{class:"slds-form-element__label"},"\xA0",-1),ti={class:"slds-form-element__control"};function si(e,t,l,o,a,s){const u=c("Picklist"),d=c("TextInput"),b=c("ButtonIcon"),_=c("ConditionalWrapper");return h(),k("li",za,[v("fieldset",null,[a.gutterVisibile?(h(),k("legend",Ha,[v("span",null,M(a.gutterLabel),1),v("span",qa,M(s.computedGutterAssistiveText),1)])):S("",!0),v("div",{class:X(["slds-grid slds-gutters_xx-small",{"slds-grid_vertical":e.$props.ancestral}])},[v("div",Ya,[e.$props.ancestral&&a.localResources.length>1?(h(!0),k(Y,{key:0},se(a.localResources.length-1,y=>(h(),L(u,{ref_for:!0,ref:`resource-${a.localResources[y-1].id}`,key:a.localResources[y-1].id,errors:l.resourceErrors,idKey:e.$props.resourceIdKey,labels:{name:a.localResources[y-1].label},options:a.localResources[y-1].resources,titleKey:e.$props.resourceTitleKey,modelValue:e.$props.resource[y-1],filterable:"",resizeToFitContent:"",onSelectedOption:g=>s.onSelectedResourceOption(g,y-1),onClear:g=>s.onResourceClear(y-1)},null,8,["errors","idKey","labels","options","titleKey","modelValue","onSelectedOption","onClear"]))),128)):S("",!0),e.$props.ancestral?S("",!0):(h(),L(u,{key:1,ref:"resource",errors:l.resourceErrors,idKey:e.$props.resourceIdKey,labels:{name:s.computedLabels.resource},options:l.resources,titleKey:e.$props.resourceTitleKey,modelValue:e.$props.resource,filterable:"",resizeToFitContent:"","onUpdate:modelValue":s.onResourceChanged},null,8,["errors","idKey","labels","options","titleKey","modelValue","onUpdate:modelValue"]))]),i(_,{active:e.$props.ancestral,element:"div",class:"slds-grid slds-grid_vertical-align-start"},{default:n(()=>[e.$props.ancestral?(h(),k("div",Ka,[i(u,{ref:`resource-${a.localResources[a.localResources.length-1].id}`,errors:l.resourceErrors,idKey:e.$props.resourceIdKey,labels:{name:a.localResources[a.localResources.length-1].label},options:a.localResources[a.localResources.length-1].resources,titleKey:e.$props.resourceTitleKey,modelValue:e.$props.resource[a.localResources.length-1],filterable:"",resizeToFitContent:"",onSelectedOption:t[0]||(t[0]=y=>s.onSelectedResourceOption(y,a.localResources.length-1)),onClear:t[1]||(t[1]=y=>s.onResourceClear(a.localResources.length-1))},null,8,["errors","idKey","labels","options","titleKey","modelValue"])])):S("",!0),v("div",Wa,[i(u,{disabled:s.isSelectedResourceNullOrBlank,errors:l.operatorErrors,labels:{name:s.computedLabels.operator},options:l.operators,modelValue:e.$props.operator,resizeToFitContent:"","onUpdate:modelValue":s.onOperatorChanged},null,8,["disabled","errors","labels","options","modelValue","onUpdate:modelValue"])]),v("div",Xa,[be(e.$slots,"value",{},()=>[v("div",Qa,[i(d,{disabled:s.isSelectedResourceNullOrBlank,labels:{name:s.computedLabels.value},modelValue:e.$props.value,required:"","onUpdate:modelValue":s.onValueInput},null,8,["disabled","labels","modelValue","onUpdate:modelValue"])])]),be(e.$slots,"extension"),v("div",Ja,[v("div",Za,[ei,v("div",ti,[i(b,{iconCategory:"utility",iconName:"delete",variant:"border-filled",assistiveText:s.computedAssistiveText.deleteIcon,disabled:s.isDeleteButtonDisabled,title:s.computedLabels.deleteCondition,onClick:s.onDeleteRequest},null,8,["assistiveText","disabled","title","onClick"])])])])])]),_:3},8,["active"])],2)])])}const li=$(Ga,[["render",si]]),ai=()=>({active:"Active",completed:"Completed",error:"Error",progress:"Progress"}),ii={name:"ProgressIndicator",components:{Button:ie,ButtonIcon:de,Tooltip:aa},mixins:[ns],props:{assistiveText:{type:Object,default:()=>ai()},currentStep:{type:Number,default:0},onRequestStepChange:{type:Function,default:null},orientation:{type:String,default:"horizontal",validator:e=>{const t=["horizontal","vertical"];return e&&!t.includes(e)?(console.error(`Valid orientation prop values are ${t.join(", ")}`),!1):!0}},steps:{type:Array,required:!0,validator:e=>{if(!e.length)return!1;const t=["id","label"];return e.every(l=>t.every(o=>Object.prototype.hasOwnProperty.call(l,o)))}},withShade:Boolean},data(){return{currentStepIndex:0}},computed:{percentComplete(){let e=Math.floor(100*(this.currentStepIndex/(this.$props.steps.length-1)));return e>100?e=100:e<0&&(e=0),e},completedBarWidth(){return this.$props.orientation==="horizontal"?`width: ${this.percentComplete}%`:null},themeClasses(){const e=[];return this.$props.withShade&&e.push("slds-progress_shade"),this.$props.orientation==="vertical"&&e.push("slds-progress_vertical"),e}},watch:{currentStep:{handler(e){this.steps&&e>=0&&e<this.steps.length&&(this.currentStepIndex=e,this.$refs&&this.$refs.stepList&&this.setCurrentStep(this.currentStepIndex))},immediate:!0}},methods:{getListItemClasses(e,t){return{"slds-is-completed":t<this.currentStepIndex,"slds-is-active":t===this.currentStepIndex&&!e.hasError,"slds-has-error":e.hasError}},getVerticalButtonClasses(e,t){return t<this.currentStepIndex||e.hasError?"slds-button_icon slds-progress__marker_icon":"button-without-icon"},allowStepChange(e){return typeof this.$props.onRequestStepChange=="function"?this.$props.onRequestStepChange(e,this.currentStepIndex):!0},async setCurrentStep(e){!await this.allowStepChange(e)||(this.$emit("step-change",e),this.$emit("update:currentStep",e),this.currentStepIndex=e,this.$nextTick(()=>{this.$refs.stepList.querySelectorAll(".slds-progress__item button")[e].focus()}))},onStepClick(e){this.$emit("step-click",e),this.currentStepIndex!==e&&this.setCurrentStep(e)},up(){this.$props.orientation!=="horizontal"&&this.previous()},down(){this.$props.orientation!=="horizontal"&&this.next()},next(){this.$props.steps[this.currentStepIndex+1]&&this.setCurrentStep(this.currentStepIndex+1)},previous(){this.currentStepIndex>0&&this.setCurrentStep(this.currentStepIndex-1)}}},oi=["aria-direction"],ri=["id"],ni={key:0,class:"slds-assistive-text"},di=["id"],ci=["aria-valuenow"],ui={class:"slds-assistive-text"};function pi(e,t,l,o,a,s){const u=c("ButtonIcon"),d=c("Button"),b=c("Tooltip");return h(),k("div",{class:X([s.themeClasses,"slds-progress"])},[v("ol",{ref:"stepList",role:"tablist","aria-direction":e.$props.orientation,class:"slds-progress__list",onKeydown:[t[0]||(t[0]=qe($e((..._)=>s.down&&s.down(..._),["prevent"]),["down"])),t[1]||(t[1]=qe($e((..._)=>s.next&&s.next(..._),["prevent"]),["right"])),t[2]||(t[2]=qe($e((..._)=>s.up&&s.up(..._),["prevent"]),["up"])),t[3]||(t[3]=qe($e((..._)=>s.previous&&s.previous(..._),["prevent"]),["left"]))]},[(h(!0),k(Y,null,se(e.$props.steps,(_,y)=>(h(),k("li",{key:_.id,class:X([s.getListItemClasses(_,y),"slds-progress__item"])},[e.$props.orientation==="horizontal"?(h(),L(b,{key:0},ia({default:n(()=>[v("div",{id:`step-${_.id}-tooltip`},M(e.decodeHtml(_.label)),9,ri)]),_:2},[_.hasError||y<a.currentStepIndex?{name:"source",fn:n(()=>[i(u,{ref_for:!0,ref:"source","aria-describedby":`step-${_.id}-tooltip`,class:X([{"slds-button_icon slds-progress__marker_icon":y<a.currentStepIndex||_.hasError},"slds-button slds-progress__marker"]),tabindex:y===a.currentStepIndex?0:-1,iconCategory:"utility",iconName:_.hasError?"error":"success",assistiveText:_.hasError?`${_.label} - ${e.$props.assistiveText.error}`:`${_.label} - ${e.$props.assistiveText.completed}`,title:_.hasError?`${_.label} - ${e.$props.assistiveText.error}`:`${_.label} - ${e.$props.assistiveText.completed}`,onClick:g=>s.onStepClick(y)},null,8,["aria-describedby","class","tabindex","iconName","assistiveText","title","onClick"])]),key:"0"}:{name:"source",fn:n(()=>[i(d,{ref_for:!0,ref:"source",variant:"base",class:"slds-progress__marker",tabindex:y===a.currentStepIndex?0:-1,onClick:g=>s.onStepClick(y)},{default:n(()=>[v("span",{class:"slds-assistive-text"},M(e.decodeHtml(`${_.label}${y===a.currentStepIndex?` - ${e.$props.assistiveText.active}`:""}`)),1)]),_:2},1032,["tabindex","onClick"])]),key:"1"}]),1024)):(h(),k(Y,{key:1},[_.hasError||y<a.currentStepIndex?(h(),L(u,{key:0,slot:"source","aria-describedby":`step-${_.id}`,class:X([s.getVerticalButtonClasses(_,y),"slds-button slds-progress__marker"]),tabindex:y===a.currentStepIndex?0:-1,iconCategory:"utility",iconName:_.hasError?"error":"success",assistiveText:_.hasError?`${_.label} - ${e.$props.assistiveText.error}`:`${_.label} - ${e.$props.assistiveText.completed}`,title:_.hasError?`${_.label} - ${e.$props.assistiveText.error}`:`${_.label} - ${e.$props.assistiveText.completed}`,onClick:g=>s.onStepClick(y)},null,8,["aria-describedby","class","tabindex","iconName","assistiveText","title","onClick"])):(h(),L(d,{key:1,slot:"source",variant:"base",label:"",class:"slds-progress__marker",tabindex:y===a.currentStepIndex?0:-1,onClick:g=>s.onStepClick(y)},{default:n(()=>[y===a.currentStepIndex?(h(),k("span",ni,M(e.decodeHtml(`${_.label} - ${e.$props.assistiveText.active}`)),1)):S("",!0)]),_:2},1032,["tabindex","onClick"])),v("div",{id:`step-${_.id}`,class:"slds-progress__item_content slds-grid slds-grid_align-spread"},M(e.decodeHtml(`${_.label}`)),9,di)],64))],2))),128))],40,oi),v("div",{"aria-valuenow":s.percentComplete,class:X({"slds-progress-bar slds-progress-bar_x-small":e.$props.orientation==="horizontal"}),"aria-valuemin":"0","aria-valuemax":"100",role:"progressbar"},[v("span",{style:oa(s.completedBarWidth),class:"slds-progress-bar__value"},[v("span",ui,M(e.decodeHtml(`${e.$props.assistiveText.progress}: ${s.percentComplete}%`)),1)],4)],10,ci)],2)}const mi=$(ii,[["render",pi],["__scopeId","data-v-9a4da314"]]),bs=e=>e!==void 0&&e.match(/^and$/i)!==null,ys=e=>e!==void 0&&e.match(/^or$/i)!==null,_t=e=>e!==void 0&&e.match(/^[0-9]+$/)!==null,Qt=e=>bs(e)||ys(e);class _i{#s=0;#i;#e;#t=[];constructor(t,l={}){this.#i=t,this.#e={andOr:"To use successive AND-OR expressions, add parentheses.",invalidOperator:"Fix your syntax. Invalid operator placement.",unmatchedParentheses:"Fix your syntax. Unmatched parentheses.",...l}}tokenize(){const t={success:!0},l=/\s*(\(|\)|\b[0-9]+\b|\band\b|\bor\b|(\S+))\s*/gi,o=[];let a;for(;(a=l.exec(this.#i))!==null;)a[2]?o.push({index:a.index,token:a[2]}):this.#t.push(a[1]);return o.length&&(t.invalidTokens=o,t.success=!1),t}getTokens(){return this.#t}getOperands(){return this.#t.filter(t=>_t(t))}parse(){const t={success:!0};try{const l=this.#o();if(this.#s!==this.#t.length)throw new SyntaxError(this.#e.invalidOperator);t.expression=l}catch(l){t.success=!1,t.error=l.message}return t}#o(){const t={and:!1,or:!1};let l=this.#r(),o=this.#a();for(;Qt(o);){if(!t.and&&bs(o)&&(t.and=!0),!t.or&&ys(o)&&(t.or=!0),t.or&&t.and)throw new SyntaxError(this.#e.andOr);this.#l(o);const a=this.#r();l={type:o,left:l,right:a},o=this.#a()}return l}#r(){const t=this.#a();if(_t(t))return this.#l(t),{type:"number",value:t};if(Qt(t)){if(this.#s===0||!_t(this.#n()))throw new SyntaxError(this.#e.invalidOperator);return this.#l(t),{type:"operator",id:t}}if(t==="("){this.#l(t);const l=this.#o();if(this.#a()!==")")throw new SyntaxError(this.#e.unmatchedParentheses);return this.#l(")"),l}throw new SyntaxError(this.#e.invalidOperator)}#n(){return this.#t[this.#s-1]}#a(){return this.#t[this.#s]}#l(){this.#s++}}const Jt=(e,t)=>{let l=window.moment();if(e){if(e.indexOf(" ")>-1){const d=e.split(" ");e="";let b;d.forEach(_=>{Number.isNaN(Number(_))?e+=`${_}_`:(e+="N_",b=_)}),e=e.substring(0,e.length-1),b&&(e+=`:${b}`)}const o=e.split(":"),a=o[0].toUpperCase(),s=Number(o[1])||1,u=window.MASystem?.Organization?.FiscalYearSettings??window.MAPS?.fiscalYearSettings;switch(a){case"YESTERDAY":case"N_DAYS_AGO":case"LAST_N_DAYS":l=l.subtract(s,"days");break;case"TOMORROW":case"N_DAYS_FROM_NOW":case"NEXT_N_DAYS":l=l.add(s,"days");break;case"LAST_WEEK":case"LAST_N_WEEKS":l=l.subtract(s,"weeks");break;case"NEXT_WEEK":case"NEXT_N_WEEKS":l=l.add(s,"weeks");break;case"LAST_MONTH":case"LAST_N_MONTHS":l=l.subtract(s,"months");break;case"NEXT_MONTH":case"NEXT_N_MONTHS":l=l.add(s,"months");break;case"LAST_QUARTER":case"LAST_N_QUARTERS":l=l.subtract(s,"quarters");break;case"NEXT_QUARTER":case"NEXT_N_QUARTERS":l=l.add(s,"quarters");break;case"LAST_YEAR":case"LAST_N_YEARS":case"N_YEARS_AGO":l=l.subtract(s,"years");break;case"NEXT_YEAR":case"NEXT_N_YEARS":case"N_YEARS_FROM_NOW":l=l.add(s,"years");break;case"THIS_FISCAL_QUARTER":l=t==="start"?window.moment(u.currentFiscalQuarterStartDate):window.moment(u.currentFiscalQuarterEndDate);break;case"LAST_FISCAL_QUARTER":case"LAST_N_FISCAL_QUARTERS":l=t==="start"?window.moment(u.currentFiscalQuarterStartDate).subtract(s,"quarters"):window.moment(u.currentFiscalQuarterEndDate).subtract(s,"quarters");break;case"NEXT_FISCAL_QUARTER":case"NEXT_N_FISCAL_QUARTERS":l=t==="start"?window.moment(u.currentFiscalQuarterStartDate).add(s,"quarters"):window.moment(u.currentFiscalQuarterEndDate).add(s,"quarters");break;case"THIS_FISCAL_YEAR":l=t==="start"?window.moment(u.currentFiscalYearStartDate):window.moment(u.currentFiscalYearEndDate);break;case"LAST_FISCAL_YEAR":case"LAST_N_FISCAL_YEARS":l=t==="start"?window.moment(u.currentFiscalYearStartDate).subtract(s,"years"):window.moment(u.currentFiscalYearEndDate).subtract(s,"years");break;case"NEXT_FISCAL_YEAR":case"NEXT_N_FISCAL_YEARS":l=t==="start"?window.moment(u.currentFiscalYearStartDate).add(s,"years"):window.moment(u.currentFiscalYearEndDate).add(s,"years");break}switch(a){case"TODAY":case"YESTERDAY":case"TOMORROW":case"N_DAYS_AGO":case"LAST_N_DAYS":case"N_DAYS_FROM_NOW":case"NEXT_N_DAYS":l=t==="start"?l.startOf("day"):l.endOf("day");break;case"THIS_WEEK":case"LAST_WEEK":case"NEXT_WEEK":case"LAST_N_WEEKS":case"NEXT_N_WEEKS":l=t==="start"?l.startOf("week"):l.endOf("week");break;case"THIS_MONTH":case"LAST_MONTH":case"NEXT_MONTH":case"LAST_N_MONTHS":case"NEXT_N_MONTHS":l=t==="start"?l.startOf("month"):l.endOf("month");break;case"THIS_QUARTER":case"LAST_QUARTER":case"NEXT_QUARTER":case"LAST_N_QUARTERS":case"NEXT_N_QUARTERS":l=t==="start"?l.startOf("quarter"):l.endOf("quarter");break;case"THIS_YEAR":case"LAST_YEAR":case"NEXT_YEAR":case"LAST_N_YEARS":case"NEXT_N_YEARS":case"N_YEARS_AGO":case"N_YEARS_FROM_NOW":l=t==="start"?l.startOf("year"):l.endOf("year");break}}return l.format()};var bt={exports:{}};(function(e,t){var l=200,o="__lodash_hash_undefined__",a=800,s=16,u=9007199254740991,d="[object Arguments]",b="[object Array]",_="[object AsyncFunction]",y="[object Boolean]",g="[object Date]",m="[object Error]",A="[object Function]",B="[object GeneratorFunction]",F="[object Map]",j="[object Number]",x="[object Null]",Ie="[object Object]",Pe="[object Proxy]",G="[object RegExp]",Ms="[object Set]",As="[object String]",ks="[object Undefined]",Bs="[object WeakMap]",$s="[object ArrayBuffer]",Fs="[object DataView]",Cs="[object Float32Array]",Ds="[object Float64Array]",Rs="[object Int8Array]",Es="[object Int16Array]",Vs="[object Int32Array]",Is="[object Uint8Array]",Ps="[object Uint8ClampedArray]",ws="[object Uint16Array]",Ns="[object Uint32Array]",xs=/[\\^$.*+?()[\]{}|]/g,Us=/^\[object .+?Constructor\]$/,js=/^(?:0|[1-9]\d*)$/,P={};P[Cs]=P[Ds]=P[Rs]=P[Es]=P[Vs]=P[Is]=P[Ps]=P[ws]=P[Ns]=!0,P[d]=P[b]=P[$s]=P[y]=P[Fs]=P[g]=P[m]=P[A]=P[F]=P[j]=P[Ie]=P[G]=P[Ms]=P[As]=P[Bs]=!1;var Ot=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,Gs=typeof self=="object"&&self&&self.Object===Object&&self,Se=Ot||Gs||Function("return this")(),Tt=t&&!t.nodeType&&t,Oe=Tt&&!0&&e&&!e.nodeType&&e,Mt=Oe&&Oe.exports===Tt,st=Mt&&Ot.process,At=function(){try{var r=Oe&&Oe.require&&Oe.require("util").types;return r||st&&st.binding&&st.binding("util")}catch{}}(),kt=At&&At.isTypedArray;function zs(r,p,f){switch(f.length){case 0:return r.call(p);case 1:return r.call(p,f[0]);case 2:return r.call(p,f[0],f[1]);case 3:return r.call(p,f[0],f[1],f[2])}return r.apply(p,f)}function Hs(r,p){for(var f=-1,T=Array(r);++f<r;)T[f]=p(f);return T}function qs(r){return function(p){return r(p)}}function Ys(r,p){return r?.[p]}function Ks(r,p){return function(f){return r(p(f))}}var Ws=Array.prototype,Xs=Function.prototype,we=Object.prototype,lt=Se["__core-js_shared__"],Ne=Xs.toString,re=we.hasOwnProperty,Bt=function(){var r=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),$t=we.toString,Qs=Ne.call(Object),Js=RegExp("^"+Ne.call(re).replace(xs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=Mt?Se.Buffer:void 0,Ft=Se.Symbol,Ct=Se.Uint8Array,Dt=xe?xe.allocUnsafe:void 0,Rt=Ks(Object.getPrototypeOf,Object),Et=Object.create,Zs=we.propertyIsEnumerable,el=Ws.splice,pe=Ft?Ft.toStringTag:void 0,Ue=function(){try{var r=ot(Object,"defineProperty");return r({},"",{}),r}catch{}}(),tl=xe?xe.isBuffer:void 0,Vt=Math.max,sl=Date.now,It=ot(Se,"Map"),Te=ot(Object,"create"),ll=function(){function r(){}return function(p){if(!_e(p))return{};if(Et)return Et(p);r.prototype=p;var f=new r;return r.prototype=void 0,f}}();function me(r){var p=-1,f=r==null?0:r.length;for(this.clear();++p<f;){var T=r[p];this.set(T[0],T[1])}}function al(){this.__data__=Te?Te(null):{},this.size=0}function il(r){var p=this.has(r)&&delete this.__data__[r];return this.size-=p?1:0,p}function ol(r){var p=this.__data__;if(Te){var f=p[r];return f===o?void 0:f}return re.call(p,r)?p[r]:void 0}function rl(r){var p=this.__data__;return Te?p[r]!==void 0:re.call(p,r)}function nl(r,p){var f=this.__data__;return this.size+=this.has(r)?0:1,f[r]=Te&&p===void 0?o:p,this}me.prototype.clear=al,me.prototype.delete=il,me.prototype.get=ol,me.prototype.has=rl,me.prototype.set=nl;function ne(r){var p=-1,f=r==null?0:r.length;for(this.clear();++p<f;){var T=r[p];this.set(T[0],T[1])}}function dl(){this.__data__=[],this.size=0}function cl(r){var p=this.__data__,f=je(p,r);if(f<0)return!1;var T=p.length-1;return f==T?p.pop():el.call(p,f,1),--this.size,!0}function ul(r){var p=this.__data__,f=je(p,r);return f<0?void 0:p[f][1]}function pl(r){return je(this.__data__,r)>-1}function ml(r,p){var f=this.__data__,T=je(f,r);return T<0?(++this.size,f.push([r,p])):f[T][1]=p,this}ne.prototype.clear=dl,ne.prototype.delete=cl,ne.prototype.get=ul,ne.prototype.has=pl,ne.prototype.set=ml;function fe(r){var p=-1,f=r==null?0:r.length;for(this.clear();++p<f;){var T=r[p];this.set(T[0],T[1])}}function _l(){this.size=0,this.__data__={hash:new me,map:new(It||ne),string:new me}}function hl(r){var p=ze(this,r).delete(r);return this.size-=p?1:0,p}function bl(r){return ze(this,r).get(r)}function yl(r){return ze(this,r).has(r)}function fl(r,p){var f=ze(this,r),T=f.size;return f.set(r,p),this.size+=f.size==T?0:1,this}fe.prototype.clear=_l,fe.prototype.delete=hl,fe.prototype.get=bl,fe.prototype.has=yl,fe.prototype.set=fl;function Le(r){var p=this.__data__=new ne(r);this.size=p.size}function Ll(){this.__data__=new ne,this.size=0}function gl(r){var p=this.__data__,f=p.delete(r);return this.size=p.size,f}function vl(r){return this.__data__.get(r)}function Sl(r){return this.__data__.has(r)}function Ol(r,p){var f=this.__data__;if(f instanceof ne){var T=f.__data__;if(!It||T.length<l-1)return T.push([r,p]),this.size=++f.size,this;f=this.__data__=new fe(T)}return f.set(r,p),this.size=f.size,this}Le.prototype.clear=Ll,Le.prototype.delete=gl,Le.prototype.get=vl,Le.prototype.has=Sl,Le.prototype.set=Ol;function Tl(r,p){var f=dt(r),T=!f&&nt(r),E=!f&&!T&&Ut(r),I=!f&&!T&&!E&&Gt(r),w=f||T||E||I,R=w?Hs(r.length,String):[],N=R.length;for(var te in r)(p||re.call(r,te))&&!(w&&(te=="length"||E&&(te=="offset"||te=="parent")||I&&(te=="buffer"||te=="byteLength"||te=="byteOffset")||Nt(te,N)))&&R.push(te);return R}function at(r,p,f){(f!==void 0&&!He(r[p],f)||f===void 0&&!(p in r))&&it(r,p,f)}function Ml(r,p,f){var T=r[p];(!(re.call(r,p)&&He(T,f))||f===void 0&&!(p in r))&&it(r,p,f)}function je(r,p){for(var f=r.length;f--;)if(He(r[f][0],p))return f;return-1}function it(r,p,f){p=="__proto__"&&Ue?Ue(r,p,{configurable:!0,enumerable:!0,value:f,writable:!0}):r[p]=f}var Al=Nl();function Ge(r){return r==null?r===void 0?ks:x:pe&&pe in Object(r)?xl(r):ql(r)}function Pt(r){return Me(r)&&Ge(r)==d}function kl(r){if(!_e(r)||zl(r))return!1;var p=ut(r)?Js:Us;return p.test(Xl(r))}function Bl(r){return Me(r)&&jt(r.length)&&!!P[Ge(r)]}function $l(r){if(!_e(r))return Hl(r);var p=xt(r),f=[];for(var T in r)T=="constructor"&&(p||!re.call(r,T))||f.push(T);return f}function wt(r,p,f,T,E){r!==p&&Al(p,function(I,w){if(E||(E=new Le),_e(I))Fl(r,p,w,f,wt,T,E);else{var R=T?T(rt(r,w),I,w+"",r,p,E):void 0;R===void 0&&(R=I),at(r,w,R)}},zt)}function Fl(r,p,f,T,E,I,w){var R=rt(r,f),N=rt(p,f),te=w.get(N);if(te){at(r,f,te);return}var ee=I?I(R,N,f+"",r,p,w):void 0,Ae=ee===void 0;if(Ae){var pt=dt(N),mt=!pt&&Ut(N),qt=!pt&&!mt&&Gt(N);ee=N,pt||mt||qt?dt(R)?ee=R:Ql(R)?ee=Il(R):mt?(Ae=!1,ee=Rl(N,!0)):qt?(Ae=!1,ee=Vl(N,!0)):ee=[]:Jl(N)||nt(N)?(ee=R,nt(R)?ee=Zl(R):(!_e(R)||ut(R))&&(ee=Ul(N))):Ae=!1}Ae&&(w.set(N,ee),E(ee,N,T,I,w),w.delete(N)),at(r,f,ee)}function Cl(r,p){return Kl(Yl(r,p,Ht),r+"")}var Dl=Ue?function(r,p){return Ue(r,"toString",{configurable:!0,enumerable:!1,value:ta(p),writable:!0})}:Ht;function Rl(r,p){if(p)return r.slice();var f=r.length,T=Dt?Dt(f):new r.constructor(f);return r.copy(T),T}function El(r){var p=new r.constructor(r.byteLength);return new Ct(p).set(new Ct(r)),p}function Vl(r,p){var f=p?El(r.buffer):r.buffer;return new r.constructor(f,r.byteOffset,r.length)}function Il(r,p){var f=-1,T=r.length;for(p||(p=Array(T));++f<T;)p[f]=r[f];return p}function Pl(r,p,f,T){var E=!f;f||(f={});for(var I=-1,w=p.length;++I<w;){var R=p[I],N=T?T(f[R],r[R],R,f,r):void 0;N===void 0&&(N=r[R]),E?it(f,R,N):Ml(f,R,N)}return f}function wl(r){return Cl(function(p,f){var T=-1,E=f.length,I=E>1?f[E-1]:void 0,w=E>2?f[2]:void 0;for(I=r.length>3&&typeof I=="function"?(E--,I):void 0,w&&jl(f[0],f[1],w)&&(I=E<3?void 0:I,E=1),p=Object(p);++T<E;){var R=f[T];R&&r(p,R,T,I)}return p})}function Nl(r){return function(p,f,T){for(var E=-1,I=Object(p),w=T(p),R=w.length;R--;){var N=w[r?R:++E];if(f(I[N],N,I)===!1)break}return p}}function ze(r,p){var f=r.__data__;return Gl(p)?f[typeof p=="string"?"string":"hash"]:f.map}function ot(r,p){var f=Ys(r,p);return kl(f)?f:void 0}function xl(r){var p=re.call(r,pe),f=r[pe];try{r[pe]=void 0;var T=!0}catch{}var E=$t.call(r);return T&&(p?r[pe]=f:delete r[pe]),E}function Ul(r){return typeof r.constructor=="function"&&!xt(r)?ll(Rt(r)):{}}function Nt(r,p){var f=typeof r;return p=p??u,!!p&&(f=="number"||f!="symbol"&&js.test(r))&&r>-1&&r%1==0&&r<p}function jl(r,p,f){if(!_e(f))return!1;var T=typeof p;return(T=="number"?ct(f)&&Nt(p,f.length):T=="string"&&p in f)?He(f[p],r):!1}function Gl(r){var p=typeof r;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?r!=="__proto__":r===null}function zl(r){return!!Bt&&Bt in r}function xt(r){var p=r&&r.constructor,f=typeof p=="function"&&p.prototype||we;return r===f}function Hl(r){var p=[];if(r!=null)for(var f in Object(r))p.push(f);return p}function ql(r){return $t.call(r)}function Yl(r,p,f){return p=Vt(p===void 0?r.length-1:p,0),function(){for(var T=arguments,E=-1,I=Vt(T.length-p,0),w=Array(I);++E<I;)w[E]=T[p+E];E=-1;for(var R=Array(p+1);++E<p;)R[E]=T[E];return R[p]=f(w),zs(r,this,R)}}function rt(r,p){if(!(p==="constructor"&&typeof r[p]=="function")&&p!="__proto__")return r[p]}var Kl=Wl(Dl);function Wl(r){var p=0,f=0;return function(){var T=sl(),E=s-(T-f);if(f=T,E>0){if(++p>=a)return arguments[0]}else p=0;return r.apply(void 0,arguments)}}function Xl(r){if(r!=null){try{return Ne.call(r)}catch{}try{return r+""}catch{}}return""}function He(r,p){return r===p||r!==r&&p!==p}var nt=Pt(function(){return arguments}())?Pt:function(r){return Me(r)&&re.call(r,"callee")&&!Zs.call(r,"callee")},dt=Array.isArray;function ct(r){return r!=null&&jt(r.length)&&!ut(r)}function Ql(r){return Me(r)&&ct(r)}var Ut=tl||sa;function ut(r){if(!_e(r))return!1;var p=Ge(r);return p==A||p==B||p==_||p==Pe}function jt(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=u}function _e(r){var p=typeof r;return r!=null&&(p=="object"||p=="function")}function Me(r){return r!=null&&typeof r=="object"}function Jl(r){if(!Me(r)||Ge(r)!=Ie)return!1;var p=Rt(r);if(p===null)return!0;var f=re.call(p,"constructor")&&p.constructor;return typeof f=="function"&&f instanceof f&&Ne.call(f)==Qs}var Gt=kt?qs(kt):Bl;function Zl(r){return Pl(r,zt(r))}function zt(r){return ct(r)?Tl(r,!0):$l(r)}var ea=wl(function(r,p,f){wt(r,p,f)});function ta(r){return function(){return r}}function Ht(r){return r}function sa(){return!1}e.exports=ea})(bt,bt.exports);const hi=bt.exports,he=new Map,ae=async({sobject:e,includeDedicatedLookupOptions:t=!1,excludeUnsupportedDisplayTypes:l=!1,showCompoundAddress:o=!1})=>{let a=e;Array.isArray(a)||(a=[a]);let s=a.join(".");if(o&&(s+=".showCompoundAddress"),t&&(s+=".lookup"),l&&(s+=".filtered"),!he.has(s)){const u=a.map(A=>Ma({sobject:A,includeDedicatedLookupOptions:!0}));let d=(await Promise.all(u)).reduce((A,B)=>A.concat(B),[]);if(a.length>1){const A=["Alias","Email","FirstName","Id","IsActive","LastName","LastReferencedDate","LastViewedDate","Name","Phone","ProfileId","Title","Username","UserRoleId"],B=new Map;d.forEach(F=>{if(!!A.includes(F.apiName))if(F.sobjects=[F.sobject],B.has(F.apiName)){const j=B.get(F.apiName);j.sobjects.push(F.sobject),j.label=`${j.sobjects.join("/")} ${j.apiName}`}else B.set(F.apiName,F)}),d=Array.from(B.values())}const b=["time"];o||b.push("address");const _=[],y=[],g=[];d.forEach(A=>{const B=!b.includes(A.displayType);B&&y.push(A),A.isLookup||_.push(A),B&&!A.isLookup&&g.push(A)});const m=a.join(".")+(o?".showCompoundAddress":"");he.set(m,_),he.set(`${m}.lookup`,d),he.set(`${m}.filtered`,g),he.set(`${m}.lookup.filtered`,y)}return he.get(s)},bi=["WhatId","WhoId","WhatId.lookup","WhoId.lookup"],Xe=e=>e.filter(({apiName:t})=>!bi.includes(t)),yi=()=>he.clear(),Qe=(e="string")=>O[e.toUpperCase()]||O.STRING;const fi={components:{Icon:ft},mixins:[ns],props:{coverable:Boolean,label:{type:String,required:!0},options:{type:Array,required:!0},size:{type:String,default:"medium",validator(e){const t=["small","medium","large"];return t.find(l=>l===e)?!0:(console.error(`Valid size values are ${t.join(", ")}`),!1)}},value:{type:[String,Number],default:null},vertical:Boolean},data(){return{radioGroupName:We()}},computed:{input:{get(){return this.value},set(e){this.$emit("input",e)}},computedOptions(){const e=this.$props.vertical?["value","heading","description"]:["value","label"],t=this.$props.options.every(o=>e.every(a=>Object.prototype.hasOwnProperty.call(o,a))),l=this.$props.vertical?"vertical":"horizontal";return t||console.error(`For ${l} orientation, each option requires the following properties: ${e.join(", ")}`),this.$props.options.map(o=>({id:We(),...o}))},visualPickerClasses(){const e=["slds-visual-picker"];return e.push(`slds-visual-picker_${this.$props.size}`),this.$props.vertical&&e.push("slds-visual-picker_vertical"),e}}},Li={class:"slds-form-element"},gi={class:"slds-form-element__legend slds-form-element__label"},vi={class:"slds-form-element__control"},Si=["id","value","disabled","name"],Oi=["for"],Ti={key:0,class:"slds-is-selected"},Mi={class:"slds-icon_container"},Ai={key:0,class:"option-image"},ki=["src"],Bi={class:"slds-text-heading_large"},$i={class:"slds-text-title"},Fi={key:0,class:"slds-visual-picker__body"},Ci={key:0,class:"slds-text-heading_small"},Di={class:"slds-text-title"};function Ri(e,t,l,o,a,s){const u=c("Icon");return h(),k("fieldset",Li,[v("legend",gi,M(e.decodeHtml(e.$props.label)),1),v("div",vi,[(h(!0),k(Y,null,se(s.computedOptions,d=>(h(),k("div",{key:d.id,class:X(s.visualPickerClasses)},[ge(v("input",{id:d.value,"onUpdate:modelValue":t[0]||(t[0]=b=>s.input=b),value:d.value,disabled:d.disabled,name:a.radioGroupName,type:"radio"},null,8,Si),[[ra,s.input]]),v("label",{for:d.value},[v("span",{class:X([e.$props.coverable?"slds-visual-picker__icon":"slds-visual-picker__text","slds-visual-picker__figure slds-align_absolute-center"])},[e.$props.coverable?(h(),k("span",Ti,[v("span",Mi,[i(u,{category:"action",name:"check",size:"large"})])])):S("",!0),v("span",{class:X({"slds-is-not-selected":e.$props.coverable})},[d.imageUrl&&!e.$props.vertical?(h(),k("span",Ai,[v("img",{src:d.imageUrl},null,8,ki)])):(h(),k(Y,{key:1},[v("span",Bi,M(e.decodeHtml(d.heading)),1),v("span",$i,M(e.decodeHtml(d.description)),1)],64))],2)],2),e.$props.vertical?S("",!0):(h(),k("span",Fi,[d.bodyHeading?(h(),k("span",Ci,M(e.decodeHtml(d.bodyHeading)),1)):S("",!0),v("span",Di,M(e.decodeHtml(d.label)),1)])),e.$props.coverable?S("",!0):(h(),L(u,{key:1,category:"utility",name:"check",variant:"inverse",size:"x-small",class:"slds-visual-picker__text-check"}))],8,Oi)],2))),128))])])}const Ei=$(fi,[["render",Ri],["__scopeId","data-v-4c16ccd6"]]),Vi=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/uniform.cb0b94d5.png"}),Ii=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/varied-based-on-one-field.9090b1c9.png"}),Pi=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/varied-based-on-two-fields.b58952ed.png"}),wi=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/labeled-pins.95d8d711.png"}),Ni=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/ordered-by-one-field.262380c5.png"}),xi=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/polyline-uniform.8295b821.png"}),Ui=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/polyline-varied-based-on-one-field.12d1715a.png"}),fs={methods:{genericExceptionHandler(e){const t=()=>e.action&&e.method?`${e.action}.${e.method}`:null;this.store.toasts.push({message:e.message,subMessage:t(),state:"error"})},showErrorToast(e){this.store.toasts.push({message:MASystem.Labels.MA_Error,subMessage:e,state:"error"})},showWarningToast(e){this.store.toasts.push({message:MASystem.Labels.warning,subMessage:e,state:"warning"})}}},D={mixins:[fs],inject:["getStore"],computed:{store(){return this.getStore()}},unmounted(){typeof this.onDestroy=="function"&&this.onDestroy()}},ji=(e,t)=>{let l=!0;return t.isLookup&&(l=z.$validator(e)),l},Gi={name:"MarkerFieldSelection",components:{Picklist:H},extends:D,props:{labelForId:{type:String,default:""},modelValue:{type:String,default:""},size:{type:Number,default:3},labels:{type:Object,default:()=>{}},baseObject:{type:String,default:""},showCompoundAddress:{type:Boolean,default:!1}},emits:["update:modelValue","changed","clear","update:value"],setup(){return{v$:K()}},data(){return{fields:[],mainValue:"",parentValue:"",parentReferenceData:{baseType:"",currentBaseObjectName:"",fieldType:"",parentFieldOptions:[],isUpdated:!1},isLookup:!1,isPolymorphic:!1,picklistLabels:{}}},validations(){return{mainValue:{required:C.withMessage(this.$Labels.MA_Field_Req,z)},parentValue:{parentRequired:C.withMessage(this.$Labels.MA_Field_Req,ji)}}},computed:{field(){let e="";const t=this.store.layer.baseObjectPolymorphicObject&&this.mainValue.split(".")[0]===this.store.layer.baseObjectAddressObject;return this.parentValue&&t?e=`${this.store.layer.baseObjectPolymorphicObject}::${this.parentValue}`:this.parentValue&&this.isLookup?e=`${this.mainValue.replace("__c.lookup","__r").replace("Id.lookup","")}.${this.parentValue}`:this.mainValue&&!this.isLookup&&(e=this.mainValue),e}},async created(){this.fields=await ae({sobject:this.store.layer.baseObject,excludeUnsupportedDisplayTypes:!0,includeDedicatedLookupOptions:!0,showCompoundAddress:this.showCompoundAddress}),await this.setPicklistFieldValues(this.$props.modelValue)},methods:{async setPicklistFieldValues(e){const t="::",l=new RegExp(`${t}|\\.`);[this.mainValue="",this.parentValue=""]=e.split(l),this.isPolymorphic=e.indexOf(t)>-1,this.isPolymorphic?this.mainValue=`${this.store.layer.baseObjectAddressObject}.lookup`:(this.parentValue||this.isLookup)&&(this.mainValue=this.mainValue.indexOf("__r")>-1?this.mainValue.replace("__r","__c.lookup"):`${this.mainValue}Id.lookup`),(this.parentValue||this.isLookup)&&(this.isLookup=!0,this.parentReferenceData.isUpdated||await this.getParentReferenceData()),this.getFieldMetaData(this.isLookup)},async handleValueChange(e){this.resetValues(),this.isLookup=e.isLookup,this.isLookup?await this.getParentReferenceData():await this.getFieldMetaData()},async getParentReferenceData(){try{this.store.callouts++;const e=this.fields.find(a=>a.apiName===this.mainValue),l=`${this.store.layer.baseObjectAddressObject}.lookup`===e.apiName&&this.store.layer.baseObjectPolymorphicObject?[this.store.layer.baseObjectPolymorphicObject]:e.referenceSObjects,o=await ae({sobject:l,showCompoundAddress:this.showCompoundAddress});this.parentReferenceData={baseType:e.displayType,currentBaseObjectName:l[0],fieldType:e.soapType,parentFieldOptions:o,isUpdated:!0}}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},resetValues(){this.parentValue="",this.isLookup=!1,this.isPolymorphic=!1,this.parentReferenceData={baseType:"",currentBaseObjectName:"",fieldType:"",parentFieldOptions:[],isUpdated:!1},this.$emit("clear"),this.v$.parentValue.$reset()},resetParentValues(){this.parentValue="",this.$emit("clear")},async handleParentChange(){await this.getFieldMetaData(!0)},async getFieldMetaData(e){let t=null;e?t=this.parentReferenceData.parentFieldOptions.find(l=>l.apiName===this.parentValue):t=this.fields.find(l=>l.apiName===this.mainValue),t&&this.$emit("changed",{baseType:t.displayType.toUpperCase(),fieldType:t.soapType,field:t,value:this.field}),this.$emit("update:modelValue",this.field)},toProperCase(e){return e.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase())},focus(){this.$refs.focusTarget2?this.$refs.focusTarget2.focus():this.$refs.focusTarget1.focus()}}};function zi(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("Layout");return h(),L(d,{size:e.$props.size},{default:n(()=>[i(b,null,{default:n(()=>[i(d,{class:"slds-align-middle",size:"12"},{default:n(()=>[i(u,{ref:"focusTarget1",modelValue:o.v$.mainValue.$model,"onUpdate:modelValue":t[0]||(t[0]=_=>o.v$.mainValue.$model=_),inputAttrs:{id:"mlbFieldSelectionBaseStyleOptionResource"},errors:e.$getErrorsByField(o.v$.mainValue),required:"",options:a.fields,labels:e.$props.labels,filterable:"",idKey:"apiName",titleKey:"label",resizeToFitContent:"",labelForId:a.isLookup?"default":e.$props.labelForId,onSelectedOption:s.handleValueChange,onClear:s.resetValues},null,8,["modelValue","errors","options","labels","labelForId","onSelectedOption","onClear"]),a.isLookup?(h(),L(u,{key:0,ref:"focusTarget2",modelValue:o.v$.parentValue.$model,"onUpdate:modelValue":t[1]||(t[1]=_=>o.v$.parentValue.$model=_),inputAttrs:{id:"mlbFieldSelectionBaseStyleLookupOptionResource"},required:"",filterable:"",resizeToFitContent:"",labelForId:e.$props.labelForId,options:a.parentReferenceData.parentFieldOptions,errors:e.$getErrorsByField(o.v$.parentValue),idKey:"apiName",titleKey:"label",onSelectedOption:s.handleParentChange,onClear:s.resetParentValues},null,8,["modelValue","labelForId","options","errors","onSelectedOption","onClear"])):S("",!0)]),_:1})]),_:1})]),_:1},8,["size"])}const et=$(Gi,[["render",zi]]),U={};U[O.STRING]=U[O.TEXTAREA]=U[O.URL]=U[O.EMAIL]=U[O.COMBOBOX]=[{id:"contains",title:MASystem.Labels.MA_Contains},{id:"equals",title:MASystem.Labels.MA_Equals},{id:"starts",title:MASystem.Labels.MA_Starts_With}];U[O.PHONE]=[{id:"equals",title:MASystem.Labels.MA_Equals},{id:"starts",title:MASystem.Labels.MA_Starts_With}];U[O.NUMBER]=U[O.CURRENCY]=U[O.INTEGER]=U[O.DOUBLE]=U[O.PERCENT]=[{id:"currency",title:MASystem.Labels.MA_Range}];U[O.DATE]=U[O.DATETIME]=[{id:"date",title:MASystem.Labels.MA_Range}];U[O.MULTIPICKLIST]=[{id:"includes",title:MASystem.Labels.MA_Includes},{id:"excludes",title:MASystem.Labels.MA_Excludes}];U[O.REFERENCE]=U[O.PICKLIST]=U[O.BOOLEAN]=U[O.ID]=[{id:"equals",title:MASystem.Labels.MA_Equals}];const{shapes:Hi}=ve,Zt=20,Ls=["accessStandardPin","accessCircle","accessTriangle","accessSquare","accessSharpPin","accessGear","accessTallPin","accessDiamond","accessHexagon","accessPentagon","accessCross","accessStar"],qi=Object.entries(Hi).filter(e=>e[1].types&&e[1].types.includes("dynamic")&&!Ls.includes(e[1].label)),es=qi.map(e=>e[0]);let ts=14;const Yi={components:{Icon:ft},props:{focusedShape:{type:String,default:"accessStandardPin"},focusTab:{type:String,default:"standard"}},emits:["update:modelValue"],data(){return{showPopover:!1,selectedShape:"",targetBindTo:null,focusedShapeIndex:0,openingFocusIndex:0,openingValue:"",shapeDivsRef:[],renderedShapes:[],scrollBatches:[],accessShapes:Ls}},created(){this.openingValue=this.$props.focusedShape;let e=[];for(let t=0;t<es.length;t++){const l=es[t];if(l===this.$props.focusedShape){this.renderedShapes.unshift(l);continue}t<20?this.renderedShapes.push(l):e.push(l),e.length===Zt&&(this.scrollBatches.push(e),e=[])}e.length>0&&(this.scrollBatches.push(e),e=[]),this.$props.focusTab==="standard"&&this.accessShapes.includes(this.$props.focusedShape)&&(this.focusedShapeIndex=this.accessShapes.indexOf(this.$props.focusedShape))},mounted(){this.$nextTick(()=>{this.getShapes()}),this.$nextTick(()=>{this.setShapeFocus()})},methods:{setSelectedShape(e="accessStandardPin",t){if(this.getShapes(),this.$emit("update:modelValue",e),t!==void 0)this.shapeDivsRef[this.focusedShapeIndex].setAttribute("tabindex",-1),this.removeActiveStyle(this.focusedShapeIndex),this.focusedShapeIndex=t,this.setShapeFocus(),this.selectedShape=e;else{this.selectedShape=e;const l=Array.from(document.querySelectorAll(".shapeImage"));for(let o=0;o<l.length;o++)l[o].classList.remove("is-active")}},setShapeFocus(){this.shapeDivsRef[this.focusedShapeIndex].focus(),this.shapeDivsRef[this.focusedShapeIndex].setAttribute("tabindex",0),this.shapeDivsRef[this.focusedShapeIndex].classList.add("slds-button_outline-brand")},addActiveStyle(e){this.shapeDivsRef.length>0&&(this.shapeDivsRef[e].classList.add("is-active"),this.shapeDivsRef[e].classList.add("slds-button_outline-brand"))},removeActiveStyle(e){this.shapeDivsRef[e].classList.remove("is-active"),this.shapeDivsRef[e].classList.remove("slds-button_outline-brand")},previousShape(){this.getShapes(),this.removeActiveStyle(this.focusedShapeIndex),this.focusedShapeIndex>0&&this.focusedShapeIndex--,this.$props.focusTab==="classic"?this.setSelectedShape(this.renderedShapes[this.focusedShapeIndex],this.focusedShapeIndex):this.setSelectedShape(this.accessShapes[this.focusedShapeIndex],this.focusedShapeIndex),this.setShapeFocus()},nextShape(){this.getShapes(),this.removeActiveStyle(this.focusedShapeIndex),this.focusedShapeIndex<this.shapeDivsRef.length-1&&this.focusedShapeIndex++,this.$props.focusTab==="classic"?this.setSelectedShape(this.renderedShapes[this.focusedShapeIndex],this.focusedShapeIndex):this.setSelectedShape(this.accessShapes[this.focusedShapeIndex],this.focusedShapeIndex),this.setShapeFocus(),this.focusedShapeIndex===ts&&this.scrollBatches.length>0&&(this.loadMoreShapes(),ts+=Zt)},keypressHandler(e){(e.key==="ArrowUp"||e.key==="ArrowLeft")&&(e.preventDefault(),this.previousShape()),(e.key==="ArrowDown"||e.key==="ArrowRight")&&(e.preventDefault(),this.nextShape())},scrollHandler(e){const{target:t}=e,{scrollHeight:l,scrollTop:o,clientHeight:a}=t;l-o-a<=25&&this.scrollBatches.length&&this.loadMoreShapes()},getShapes(){this.shapeDivsRef=[],this.$props.focusTab==="classic"?this.shapeDivsRef=this.$refs.legacySwatches.querySelectorAll(".shapeImage"):this.shapeDivsRef=this.$refs.defaultSwatches.querySelectorAll(".shapeImage")},loadMoreShapes(){this.renderedShapes=[...this.renderedShapes,...this.scrollBatches.shift()],this.$nextTick(this.getShapes)},generateAssistiveTextByIconName(e){const t=`shapePicker_shape_${e}`;return this.$Labels[t]},createSVGImage(e,t){return(!e||typeof e!="string")&&(e="Marker"),e===this.$props.value&&t&&(this.focusedShapeIndex=t,this.openingFocusIndex=t),ve.createSVG({type:e,color:"#f4f6f9"})},createAccessSVGImage(e){return ve.createSVG({type:e,color:"#f4f6f9"})}}},Ki=["tabindex","onClick","onFocus"],Wi={class:"slds-assistive-text"},Xi=["tabindex","onClick","onFocus"],Qi={class:"slds-assistive-text"};function Ji(e,t,l,o,a,s){const u=c("Icon");return h(),k("div",null,[e.$props.focusTab==="standard"?(h(),k("ul",{key:0,ref:"defaultSwatches",role:"listbox",class:"slds-color-picker__swatches slds-grid slds-gutters slds-wrap slds-scrollable",style:{margin:"0 auto"},tabindex:"-1",onKeydown:t[0]||(t[0]=(...d)=>s.keypressHandler&&s.keypressHandler(...d)),onScroll:t[1]||(t[1]=(...d)=>s.scrollHandler&&s.scrollHandler(...d))},[(h(!0),k(Y,null,se(a.accessShapes,(d,b)=>(h(),k("li",{key:d,tabindex:a.focusedShapeIndex===b?0:-1,role:"presentation",class:"slds-col slds-m-top_x-small slds_size_1-of-4 slds-grow-none",onClick:_=>s.setSelectedShape(d,b),onFocus:_=>s.setSelectedShape(d,b)},[i(u,{id:a.accessShapes[b],svg:s.createAccessSVGImage(d),role:"option",class:"slds-button slds-button_icon slds-p-around_xxx-small shapeImage",iconClass:["slds-icon_small","slds-icon-text-light"]},null,8,["id","svg"]),v("span",Wi,M(s.generateAssistiveTextByIconName(d)),1)],40,Ki))),128))],544)):S("",!0),e.$props.focusTab==="classic"?(h(),k("ul",{key:1,ref:"legacySwatches",role:"listbox",class:"slds-color-picker__swatches slds-grid slds-gutters slds-wrap slds-scrollable popoverContentContainer",style:{margin:"0 auto",display:"grid","grid-template-columns":"auto auto auto auto","justify-content":"start"},tabindex:"-1",onKeydown:t[2]||(t[2]=(...d)=>s.keypressHandler&&s.keypressHandler(...d)),onScroll:t[3]||(t[3]=(...d)=>s.scrollHandler&&s.scrollHandler(...d))},[(h(!0),k(Y,null,se(a.renderedShapes,(d,b)=>(h(),k("li",{key:d,tabindex:a.focusedShapeIndex===b?0:-1,role:"presentation",class:"slds-col slds-m-top_x-small slds_size_1-of-4 slds-grow-none",onClick:_=>s.setSelectedShape(d,b),onFocus:_=>s.setSelectedShape(d,b)},[i(u,{id:a.renderedShapes[b],svg:s.createSVGImage(d,b),role:"option",class:"slds-button slds-button_icon slds-p-around_xxx-small shapeImage",iconClass:["slds-icon_small","slds-icon-text-light"]},null,8,["id","svg"]),v("span",Qi,M(s.generateAssistiveTextByIconName(d)),1)],40,Xi))),128))],544)):S("",!0)])}const Zi=$(Yi,[["render",Ji],["__scopeId","data-v-eb248db9"]]),{shapes:eo}=ve,De=["accessStandardPin","accessCircle","accessTriangle","accessSquare","accessSharpPin","accessGear","accessTallPin","accessDiamond","accessHexagon","accessPentagon","accessCross","accessStar"],to=Object.entries(eo).filter(e=>!De.includes(e[1].label)).map(e=>e[0]),so={components:{SLDSButton:ie,ButtonIcon:de,Icon:ft,Tabs:ds,Tab:cs,Popover:Lt,ShapeSelectorBody:Zi},props:{modelValue:{type:String,default:"accessStandardPin"}},emits:["update:modelValue"],data(){return{activeTab:"",showPopover:!1,selectedShape:"",targetBindTo:null,focusedShapeIndex:0,openingFocusIndex:0,openingValue:this.$props.modelValue,displaySVG:"<svg></svg>",accessShapes:[],createLegacySVG:null,shapes:[],loaded:!1}},watch:{modelValue:{handler(){this.setSelectedShape(this.$props.modelValue)},immediate:!0}},mounted(){!to.includes(this.openingValue)&&!De.includes(this.openingValue)&&(this.openingValue="accessStandardPin",this.$emit("update:modelValue",this.openingValue)),this.activeTab=De.includes(this.openingValue)?"standard":"classic",this.displaySVG=this.createSVGImage(this.openingValue),this.loaded=!0},methods:{createSVGImage(e){return(!e||typeof e!="string")&&(e="accessStandardPin"),ve.createSVG({type:e,color:`#f4f6f9:${e}`})},openPopover(e){this.targetBindTo=e.target,this.showPopover=!0,this.$nextTick(()=>{this.$refs.shapeTabs.$el.querySelectorAll(".slds-tabs_default__link")[0].focus()})},closePopover(){this.showPopover=!1},togglePopover(e){this.showPopover?this.closePopover():this.openPopover(e)},setSelectedShape(e="accessStandardPin"){this.selectedShape=e},cancel(){this.setSelectedShape(this.openingValue),this.focusedShapeIndex=this.openingFocusIndex,this.activeTab=De.includes(this.selectedShape)?"standard":"classic",this.closePopover()},saveSelection(){this.$emit("update:modelValue",this.selectedShape),this.displaySVG=this.createSVGImage(this.selectedShape),this.openingValue=this.selectedShape,this.openingFocusIndex=this.focusedShapeIndex,this.activeTab=De.includes(this.selectedShape)?"standard":"classic",this.closePopover()}}},lo={class:"slds-form-element"},ao={class:"slds-form-element__label"},io={class:"slds-form-element__control"},oo={class:"slds-grid slds-grid_align-end"},ro={class:"slds-col"};function no(e,t,l,o,a,s){const u=c("Icon"),d=c("ButtonIcon"),b=c("ShapeSelectorBody"),_=c("Tab"),y=c("Tabs"),g=c("SLDSButton"),m=c("Popover");return h(),k("div",lo,[v("label",ao,M(e.$Labels.shapePicker_MLB_default_title),1),v("div",io,[i(d,{id:"mlbShapeSelectorBtnResource",ref:"trigger",variant:"border-filled",assistiveText:e.$Labels.shapePicker_MLB_default_assistive_text,title:e.$Labels.shapePicker_MLB_default_assistive_text,more:"",onClick:s.togglePopover},{default:n(()=>[i(u,{svg:a.displaySVG,class:"slds-m-right_xx-small",iconClass:["slds-icon_small","slds-icon-text-light"]},null,8,["svg"])]),_:1},8,["assistiveText","title","onClick"])]),a.showPopover?(h(),L(m,{key:0,id:"mlbPopoverResource",alignment:"bottom right",bindTo:e.$refs.trigger.$el,width:"small",closeOnClickOutside:"",onClose:s.cancel},{header:n(()=>[]),content:n(()=>[i(y,{ref:"shapeTabs",activeTabId:a.activeTab,"onUpdate:activeTabId":t[0]||(t[0]=A=>a.activeTab=A),class:"useDefaultStyling"},{default:n(()=>[i(_,{id:"standard",ref:"standardTab",class:"shapePicker_standard",title:e.$Labels.shapePicker_MLB_standard_tab,style:{padding:"0rem 0"}},{default:n(()=>[i(b,{focusedShape:a.openingValue,focusTab:"standard","onUpdate:modelValue":s.setSelectedShape},null,8,["focusedShape","onUpdate:modelValue"])]),_:1},8,["title"]),i(_,{id:"classic",ref:"legacyTab",class:"shapePicker_legacy",title:e.$Labels.shapePicker_MLB_legacy_tab,style:{padding:"0rem 0"}},{default:n(()=>[i(b,{focusedShape:a.openingValue,focusTab:"classic","onUpdate:modelValue":s.setSelectedShape},null,8,["focusedShape","onUpdate:modelValue"])]),_:1},8,["title"])]),_:1},8,["activeTabId"])]),footer:n(()=>[v("div",oo,[v("div",ro,[i(g,{id:"mlbShapeCancelBtnResource",variant:"neutral",onClick:s.cancel},{default:n(()=>[le(M(e.$Labels.shapePicker_MLB_Cancel),1)]),_:1},8,["onClick"]),i(g,{id:"mlbShapeDoneBtnResource",variant:"brand",onClick:s.saveSelection},{default:n(()=>[le(M(e.$Labels.shapePicker_MLB_Done),1)]),_:1},8,["onClick"])])])]),_:1},8,["bindTo","onClose"])):S("",!0)])}const vt=$(so,[["render",no]]);const co={name:"MarkerStyling",components:{ShapeSelector:vt,ColorPicker:Ve,RadioButtonGroup:ka,Picklist:H},extends:D,props:{hasColor:Boolean,test:{type:String,default:""},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(){return{v$:K()}},validations(){const e={customShape:{},color:{},checkHexCode:{}};return(this.markerTypeMode==="preset"&&this.hasColor||this.isPolyline)&&(e.checkHexCode={hasError:t=>t===!1},e.color={required:z,validHexValue:C.withMessage("",Re)}),this.markerTypeMode==="custom"&&(e.customShape={required:z}),e},data(){return{radioEdit:!1,shape:"accessStandardPin",color:"#46E71B",customShape:"",markerTypeMode:"preset",markerTypeOptions:[{label:this.$Labels.markerStylePicker_RadioButtonGroup_MLB_Preset,value:"preset"},{label:this.$Labels.markerStylePicker_RadioButtonGroup_MLB_Custom,value:"custom"}],checkHexCode:!1}},computed:{colorPickerLabel(){let e=this.$Labels.markerStylePicker_ColorPicker_MLB_MarkerColor;return this.store.metadata.isPolyline&&(e=this.$Labels.markerStylePicker_ColorPicker_MLB_PolylineColor),e},isEditMode(){return!this.store.metadata.mode.equals(Q.CREATE)}},watch:{"$props.modelValue":{handler(e){const t=e.split(":");if(this.radioEdit){this.radioEdit=!1;return}t[0]==="image"?(this.markerTypeMode="custom",this.customShape=e):(this.markerTypeMode="preset",t.length>1?[this.color,this.shape]=t:[this.shape]=t)},immediate:!0},markerTypeMode:{handler(){this.radioEdit=!0,this.updateBinding()}}},created(){this.store.metadata.isPolyline?(this.color=this.color||"#86baf3",this.shape="accessCircle"):(this.color=this.color||"#46E71B",this.shape=this.shape||"accessStandardPin")},methods:{updateBinding(){if(this.markerTypeMode!=="custom"){this.$emit("update:modelValue",this.$props.hasColor&&this.color?`${this.color}:${this.shape}`:this.shape);return}this.$emit("update:modelValue",this.customShape)}}};function uo(e,t,l,o,a,s){const u=c("RadioButtonGroup"),d=c("LayoutItem"),b=c("ShapeSelector"),_=c("ColorPicker"),y=c("Picklist"),g=c("Layout");return h(),L(g,{class:"slds-gutters_xx-small"},{default:n(()=>[e.store.metadata.isPolyline?S("",!0):(h(),L(d,{key:0,class:"slds-col slds-grow-none"},{default:n(()=>[i(u,{id:"mlbStylingTypeRadioResource",modelValue:a.markerTypeMode,"onUpdate:modelValue":t[0]||(t[0]=m=>a.markerTypeMode=m),options:a.markerTypeOptions,labels:{name:e.$Labels.markerStylePicker_RadioButtonGroup_MLB_MarkerType}},null,8,["modelValue","options","labels"])]),_:1})),a.markerTypeMode==="preset"&&!e.store.metadata.isPolyline?(h(),L(d,{key:1,class:"slds-col slds-shrink-none"},{default:n(()=>[i(b,{id:"mlbShapeSelectorResource",modelValue:a.shape,"onUpdate:modelValue":[t[1]||(t[1]=m=>a.shape=m),s.updateBinding]},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):S("",!0),a.markerTypeMode==="preset"&&l.hasColor||e.store.metadata.isPolyline?(h(),L(d,{key:2,class:"slds-col slds-shrink-none"},{default:n(()=>[l.hasColor||e.store.metadata.isPolyline?(h(),L(_,{key:0,id:"mlbColorPickerResource",modelValue:o.v$.color.$model,"onUpdate:modelValue":[t[2]||(t[2]=m=>o.v$.color.$model=m),s.updateBinding],errors:e.$getErrorsByField(o.v$.color),labels:{chooseColor:s.colorPickerLabel}},null,8,["modelValue","errors","labels","onUpdate:modelValue"])):S("",!0)]),_:1})):S("",!0),a.markerTypeMode==="custom"&&!e.store.metadata.isPolyline?(h(),L(d,{key:3,class:"slds-col slds-grow-none"},{default:n(()=>[i(y,{modelValue:o.v$.customShape.$model,"onUpdate:modelValue":[t[3]||(t[3]=m=>o.v$.customShape.$model=m),s.updateBinding],inputAttrs:{id:"mlbImageOptionResource"},errors:e.$getErrorsByField(o.v$.customShape),labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Image_Picklist_Label},options:e.store.metadata.customMarkerImageOptions},null,8,["modelValue","errors","labels","options","onUpdate:modelValue"])]),_:1})):S("",!0)]),_:1})}const gs=$(co,[["render",uo],["__scopeId","data-v-97c64c2d"]]);const po={name:"BooleanValueType",components:{RadioGroup:_s},emits:["update:value"],data(){return{options:[{label:this.$Labels.modal_MLB_Boolean_True,value:"TRUE",disabled:!1},{label:this.$Labels.modal_MLB_Boolean_False,value:"FALSE",disabled:!1}]}}};function mo(e,t,l,o,a,s){const u=c("RadioGroup");return h(),L(u,{modelValue:e.$attrs.value,labels:{name:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,options:a.options,onInput:t[0]||(t[0]=d=>e.$emit("update:value",d.target.value))},null,8,["modelValue","labels","disabled","options"])}const _o=$(po,[["render",mo],["__scopeId","data-v-401b8e07"]]),ho=[{id:"YESTERDAY",title:MASystem.Labels.modal_MLB_DateTime_Literal_Yesterday},{id:"TODAY",title:MASystem.Labels.modal_MLB_DateTime_Literal_Today},{id:"TOMORROW",title:MASystem.Labels.modal_MLB_DateTime_Literal_Tomorrow},{id:"LAST_N_DAYS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Days,variable:!0},{id:"NEXT_N_DAYS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Days,variable:!0},{id:"N_DAYS_AGO",title:MASystem.Labels.modal_MLB_DateTime_Literal_N_Days_Ago,variable:!0},{id:"N_DAYS_FROM_NOW",title:MASystem.Labels.modal_MLB_DateTime_Literal_N_Days_From_Now,variable:!0},{id:"LAST_WEEK",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_Week},{id:"THIS_WEEK",title:MASystem.Labels.modal_MLB_DateTime_Literal_This_Week},{id:"NEXT_WEEK",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_Week},{id:"LAST_N_WEEKS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Weeks,variable:!0},{id:"NEXT_N_WEEKS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Weeks,variable:!0},{id:"LAST_MONTH",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_Month},{id:"THIS_MONTH",title:MASystem.Labels.modal_MLB_DateTime_Literal_This_Month},{id:"NEXT_MONTH",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_Month},{id:"LAST_N_MONTHS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Months,variable:!0},{id:"NEXT_N_MONTHS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Months,variable:!0},{id:"THIS_QUARTER",title:MASystem.Labels.modal_MLB_DateTime_Literal_This_Quarter},{id:"LAST_QUARTER",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_Quarter},{id:"NEXT_QUARTER",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_Quarter},{id:"LAST_N_QUARTERS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Quarters,variable:!0},{id:"NEXT_N_QUARTERS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Quarters,variable:!0},{id:"THIS_YEAR",title:MASystem.Labels.modal_MLB_DateTime_Literal_This_Year},{id:"LAST_YEAR",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_Year},{id:"NEXT_YEAR",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_Year},{id:"LAST_N_YEARS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Years,variable:!0},{id:"NEXT_N_YEARS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Years,variable:!0},{id:"N_YEARS_AGO",title:MASystem.Labels.modal_MLB_DateTime_Literal_N_Years_Ago,variable:!0},{id:"N_YEARS_FROM_NOW",title:MASystem.Labels.modal_MLB_DateTime_Literal_N_Years_From_Now,variable:!0},{id:"THIS_FISCAL_QUARTER",title:MASystem.Labels.modal_MLB_DateTime_Literal_This_Fiscal_Quarter},{id:"LAST_FISCAL_QUARTER",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_Fiscal_Quarter},{id:"NEXT_FISCAL_QUARTER",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_Fiscal_Quarter},{id:"LAST_N_FISCAL_QUARTERS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Fiscal_Quarters,variable:!0},{id:"NEXT_N_FISCAL_QUARTERS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Fiscal_Quarters,variable:!0},{id:"THIS_FISCAL_YEAR",title:MASystem.Labels.modal_MLB_DateTime_Literal_This_Fiscal_Year},{id:"LAST_FISCAL_YEAR",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_Fiscal_Year},{id:"NEXT_FISCAL_YEAR",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_Fiscal_Year},{id:"LAST_N_FISCAL_YEARS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Last_N_Fiscal_Years,variable:!0},{id:"NEXT_N_FISCAL_YEARS",title:MASystem.Labels.modal_MLB_DateTime_Literal_Next_N_Fiscal_Years,variable:!0}];const ce=Object.freeze({FIXED:"FIXED",LITERAL:"LITERAL"}),bo={name:"DateTimeValueTypeInstance",components:{DatePicker:hs,Picklist:H,TextInput:Z,TimePicker:Ba},extends:D,inheritAttrs:!1,validations(){const e={date:{},literalN:{},literal:{}};return this.mode===ce.LITERAL?(e.literal={required:z},this.showLiteralN&&(e.literalN={minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))})):this.mode===ce.FIXED&&this.attrs.isMarkerStyleFilter&&(e.date={required:z}),e},setup(){return{v$:K()}},data(){return{date:null,literals:ho,literal:"",literalN:"",literalOption:{},dateFormat:MAPS.currentUser.dateFormat.toUpperCase(),firstDayOfWeek:MAPS.currentUser.StartOfWeekIndex,userLocale:MAPS.currentUser.Locale.replace("sh_ME_USD","sh-ME").replace("_","-").slice(0,5),attrs:this.$attrs,mode:ce.FIXED,modes:[{id:ce.FIXED,title:this.$Labels.modal_MLB_DateTime_Mode_Picklist_Fixed},{id:ce.LITERAL,title:this.$Labels.modal_MLB_DateTime_Mode_Picklist_Literal}],Modes:ce,time:{hours:0,minutes:0},prevVal:null}},computed:{showLiteralN(){return this.literalOption.variable},user(){return MAPS.currentUser}},watch:{"$attrs.value":{handler(e){e&&e!=="NULL"?(this.setLocalValuesByBinding(),this.$emit(`change-${this.attrs.valueString}`,{value:this.attrs.value,mode:this.mode})):this.$emit(`update:${this.attrs.valueString}`,"NULL")},immediate:!0},date(e){const t=[void 0,null];(e||t.indexOf(e)>-1&&t.indexOf(this.prevVal)===-1)&&this.updateSyncValue()}},methods:{setLocalValuesByBinding(){this.prevVal=this.attrs.value;let e=this.attrs.value;const t=new Date(e);if(this.attrs.isMarkerStyleFilter&&!na(t)){e=e.replace(/\s/g,"_");const s=e.match(/\d+/);if(s){const u=s[0];e=`${e.replace(/\d+/,"N")}:${u}`}}const l=e.split(":"),o=this.literals.findIndex(s=>s.id===l[0]);if(o!==-1)this.mode=this.Modes.LITERAL,this.literalOption=this.literals[o],[this.literal,this.literalN=""]=l;else if(this.mode=this.Modes.FIXED,e){if(!this.attrs.hasTime){const s=t.getTimezoneOffset();t.setMinutes(t.getMinutes()+s)}this.date=t,this.attrs.hasTime&&(this.time={hours:t.getHours(),minutes:t.getMinutes()})}},onLiteralClear(){this.literalN="",this.literalOption={},this.updateSyncValue()},onSelectOption(e){this.literalOption=e,this.updateSyncValue()},updateTime(e){this.time=e,this.updateSyncValue()},updateSyncValue(){let e="NULL";if(this.mode===ce.FIXED)if(this.v$.literal.$reset(),this.date){const t=new Date(this.date);t.setHours(0,0,0,0),this.attrs.hasTime&&this.time&&(t.setHours(this.time.hours),t.setMinutes(this.time.minutes));const l=t.toISOString();e=this.attrs.hasTime?l:l.split("T")[0]}else this.attrs.hasTime&&this.time||(this.time={hours:0,minutes:0});else this.mode===ce.LITERAL&&(this.v$.date.$reset(),this.literal&&(this.literalOption.variable?this.attrs.isMarkerStyleFilter?e=this.literal.replace(/(N)_/,`${this.literalN||1}_`).replace(/_/g," "):(this.literalN||(this.literalN=1),e=`${this.literal}:${this.literalN||1}`):(e=this.attrs.isMarkerStyleFilter?this.literal.replace(/_/g," "):this.literal,this.literalN="")));this.$emit(`update:${this.attrs.valueString}`,e)}}};function yo(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("DatePicker"),_=c("TimePicker"),y=c("TextInput"),g=c("Layout");return h(),L(g,{class:"slds-gutters_xx-small"},{default:n(()=>[i(d,{class:"slds-col slds-grow-none"},{default:n(()=>[i(u,{modelValue:a.mode,"onUpdate:modelValue":t[0]||(t[0]=m=>a.mode=m),inputAttrs:{id:"mlbMarkerTypeOptionResource"},labels:{name:a.attrs.labels.type},options:a.modes,onChanged:s.updateSyncValue},null,8,["modelValue","labels","options","onChanged"])]),_:1}),a.mode===a.Modes.FIXED?(h(),k(Y,{key:0},[i(d,{class:"slds-col slds-grow-none"},{default:n(()=>[i(b,{modelValue:o.v$.date.$model,"onUpdate:modelValue":t[1]||(t[1]=m=>o.v$.date.$model=m),firstDayOfWeek:a.firstDayOfWeek,locale:a.userLocale,errors:e.$getErrorsByField(o.v$.date),labels:{selectDate:e.$Labels.MA_Select_A_Date,name:a.attrs.labels.date},detach:""},null,8,["modelValue","firstDayOfWeek","locale","errors","labels"])]),_:1}),i(d,{class:"slds-col slds-grow-none"},{default:n(()=>[i(_,{modelValue:a.time,"onUpdate:modelValue":[t[2]||(t[2]=m=>a.time=m),t[3]||(t[3]=m=>s.updateTime(m))],combobox:"",disabled:!e.$attrs.hasTime||!a.date,labels:{name:"Time"},locale:a.userLocale,interval:{hours:1,minutes:0}},null,8,["modelValue","disabled","locale"])]),_:1})],64)):a.mode===a.Modes.LITERAL?(h(),k(Y,{key:1},[i(d,{class:"slds-col slds-grow-none"},{default:n(()=>[i(u,{modelValue:o.v$.literal.$model,"onUpdate:modelValue":t[4]||(t[4]=m=>o.v$.literal.$model=m),inputAttrs:{id:"mlbMarkerDatesOptionResource"},labels:{name:a.attrs.labels.date},options:a.literals,errors:e.$getErrorsByField(o.v$.literal),filterable:"",resizeToFitContent:"",onClear:s.onLiteralClear,onSelectedOption:s.onSelectOption},null,8,["modelValue","labels","options","errors","onClear","onSelectedOption"])]),_:1}),i(d,{class:"slds-col"},{default:n(()=>[i(y,{modelValue:o.v$.literalN.$model,"onUpdate:modelValue":t[5]||(t[5]=m=>o.v$.literalN.$model=m),inputAttrs:{id:"mlbUserDateTimeResource"},labels:{name:e.$Labels.modal_MLB_Condition_DateTime_Value_of_N},disabled:!s.showLiteralN,errors:e.$getErrorsByField(o.v$.literalN),onChange:s.updateSyncValue},null,8,["modelValue","labels","disabled","errors","onChange"])]),_:1})],64)):S("",!0)]),_:1})}const fo=$(bo,[["render",yo],["__scopeId","data-v-0aaef1b5"]]),ht=function(t,l){const o=c("Instance"),a={onChangeValue:({value:s,mode:u})=>{!this.$attrs.range||(this.v$.range.value.$model=s,this.v$.range.mode.$model=u)},onChangeValue2:({value:s,mode:u})=>{this.v$.range.value2.$model=s,this.v$.range.mode2.$model=u}};return Fe(o,{...this.$attrs,...a,hasTime:this.$attrs.displayType.name===O.DATETIME.name,labels:l,value:this.$attrs[t],valueString:t})},Ke=(e,t)=>{if(t.mode===t.mode2&&t.value===t.value2)return!0;let{value:l,value2:o}=t;t.mode==="LITERAL"&&(l=Jt(t.value,"start")),t.mode2==="LITERAL"&&(o=Jt(t.value2,"end"));const a=new Date(l).setSeconds(0),s=new Date(o).setSeconds(0);return!(t.mode===t.mode2&&a>s)},Lo={name:"DateTimeValueType",components:{Instance:fo},extends:D,inheritAttrs:!1,validations(){const e={};return this.$attrs.range&&(e.range={value:{validDateRange:Ke},value2:{validDateRange:Ke},mode:{validDateRange:Ke},mode2:{validDateRange:Ke}}),e},setup(){return{v$:K()}},data(){return{range:{value:this.$attrs.value,value2:this.$attrs.value2,mode:null,mode2:null,chosenLiteral:"",chosenLiteral2:""},validRange:!0,errors:[]}},render(){if(this.$attrs.range){const e=[Fe("label",{class:"slds-form-element__label"},[MASystem.Labels.modal_MLB_DateTime_Range_Label]),Fe("div",{class:{"slds-col slds-grow-none margin-top-auto slds-box":!0,"slds-box-has-error":this.v$.$invalid},style:"background: #eee; padding: 10px;"},[ht.call(this,"value",{type:MASystem.Labels.modal_MLB_DateTime_Mode_Picklist_Start_Label,date:MASystem.Labels.modal_MLB_DateTime_Date_Component_Start_Label,time:MASystem.Labels.modal_MLB_DateTime_Time_Component_Start_Label}),ht.call(this,"value2",{type:MASystem.Labels.modal_MLB_DateTime_Mode_Picklist_End_Label,date:MASystem.Labels.modal_MLB_DateTime_Date_Component_End_Label,time:MASystem.Labels.modal_MLB_DateTime_Time_Component_End_Label})])];return this.v$.$invalid&&e.push(Fe("div",{class:"slds-text-color_destructive"},[MASystem.Labels.modal_MLB_Live_Last_Report_Date_StartDate_after_End_Date])),Fe("div",{class:"slds-form-element"},e)}return ht.call(this,"value",{type:MASystem.Labels.modal_MLB_DateTime_Mode_Picklist_Label,date:MASystem.Labels.modal_MLB_DateTime_Date_Component_Label,time:MASystem.Labels.modal_MLB_DateTime_Time_Component_Label})}};const ke=new da(["FIXED","VARIABLE"]),go=()=>[{id:":UserId",title:MASystem.Labels.modal_MLB_Dynamic_Filter_UserID},{id:":DirectReportIds",title:MASystem.Labels.modal_MLB_Dynamic_Filter_DirectReportIDs},{id:":SubordinateIds",title:MASystem.Labels.modal_MLB_Dynamic_Filter_SubordinateIDs},{id:":TeamAccountIds",title:MASystem.Labels.modal_MLB_Dynamic_Filter_TeamAccountIDs}],vo={id:":Dynamic",title:MASystem.Labels.modal_MLB_Dynamic_Filter_Dynamic},So={name:"IdValueType",components:{ActionMenu:ca,ActionMenuItem:ua,Picklist:H,TextInput:Z},extends:D,inheritAttrs:!1,validations(){const e={variableValue:{},fixedValue:{}};return this.isVariable&&(e.variableValue={required:C.withMessage(this.$Labels.MLB_Required_Field_Error,z)}),e},emits:["update:value"],setup(){return{v$:K()}},data(){return{options:[],Types:ke,type:ke.FIXED,variableValue:"",fixedValue:"",hasErrors:!1}},computed:{isFixed(){return this.type.name===ke.FIXED.name},isVariable(){return this.type.name===ke.VARIABLE.name},isMenuDisabled(){return["Task","Event"].includes(this.store.layer.baseObject)}},created(){const e=go(),{sobjects:t=[],referenceSObjects:l=[]}=this.$attrs.option;(l&&l.includes("User")||t&&t.includes("User"))&&e.unshift(vo),this.options=e,e.find(o=>o.id===this.$attrs.value)?(this.type=ke.VARIABLE,this.variableValue=this.$attrs.value):this.fixedValue=this.$attrs.value},methods:{setType(e){this.type=e,this.variableValue="",this.hasErrors=!1,this.$emit("update:value","")}}};function Oo(e,t,l,o,a,s){const u=c("TextInput"),d=c("Picklist"),b=c("LayoutItem"),_=c("ActionMenuItem"),y=c("ActionMenu"),g=c("Layout");return h(),L(g,{class:"slds-gutters_xx-small",verticalAlign:"end"},{default:n(()=>[i(b,{class:"slds-col"},{default:n(()=>[s.isFixed?(h(),L(u,{key:0,modelValue:o.v$.fixedValue.$model,"onUpdate:modelValue":t[0]||(t[0]=m=>o.v$.fixedValue.$model=m),labels:{name:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,onChange:t[1]||(t[1]=m=>e.$emit("update:value",m.target.value))},null,8,["modelValue","labels","disabled"])):S("",!0),s.isVariable?(h(),L(d,{key:1,modelValue:o.v$.variableValue.$model,"onUpdate:modelValue":t[2]||(t[2]=m=>o.v$.variableValue.$model=m),inputAttrs:{id:"mlbConditionValueOptionResource"},disabled:e.$attrs.disabled,labels:{name:e.$Labels.modal_MLB_Condition_Value},options:a.options,errors:e.$getErrorsByField(o.v$.variableValue),onSelectedOption:t[3]||(t[3]=m=>e.$emit("update:value",m.id))},null,8,["modelValue","disabled","labels","options","errors"])):S("",!0)]),_:1}),v("div",{class:X({bottomBoost:a.hasErrors})},[e.$attrs.disableDynamicOptions?S("",!0):(h(),L(b,{key:0,class:X({"slds-col slds-p-bottom_medium":a.hasErrors,bottomBoost:a.hasErrors})},{default:n(()=>[i(y,{disabled:s.isMenuDisabled,isActionMenu:!1,class:"slds-form-element__control"},{default:n(()=>[i(_,{label:e.$Labels.modal_MLB_Dynamic_Filter_Mode_Picklist_Fixed,selected:s.isFixed,onClick:t[4]||(t[4]=m=>s.setType(a.Types.FIXED))},null,8,["label","selected"]),i(_,{label:e.$Labels.modal_MLB_Dynamic_Filter_Mode_Picklist_Variable,selected:s.isVariable,onClick:t[5]||(t[5]=m=>s.setType(a.Types.VARIABLE))},null,8,["label","selected"])]),_:1},8,["disabled"])]),_:1},8,["class"]))],2)]),_:1})}const To=$(So,[["render",Oo]]),vs="~~",Mo=e=>e?e.split(vs):[],Ao=e=>e.join(vs),ko={name:"PicklistValueType",components:{Picklist:H},emits:["update:value"],data(){return{values:[]}},watch:{"$attrs.value":{handler(){this.values=Mo(this.$attrs.value)},immediate:!0},values(){this.$emit("update:value",Ao(this.values))}}};function Bo(e,t,l,o,a,s){const u=c("Picklist",!0);return h(),L(u,{modelValue:a.values,"onUpdate:modelValue":t[0]||(t[0]=d=>a.values=d),inputAttrs:{id:"mlbDisableConditionValueOptionResource"},labels:{name:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,options:e.$attrs.option.picklistOptions,multiselectDialog:"",resizeToFitContent:""},null,8,["modelValue","labels","disabled","options"])}const $o=$(ko,[["render",Bo]]),ss={number:{decimal:MASystem.Labels.modal_MLB_Input_Error_Number},date:{minIntegerValue:MASystem.Labels.modal_MLB_Input_Error_Positive_Integer,required:MASystem.Labels.modal_MLB_Date_Required}},ls=[O.CURRENCY,O.DOUBLE,O.INTEGER,O.PERCENT],Fo={name:"TextValueType",components:{TextInput:Z},extends:D,inheritAttrs:!1,validations(){const e={value:{},value2:{}};return this.computedDisplayType==="number"&&(e.value={decimal:C.withMessage(this.$Labels.modal_MLB_Input_Error_Number,Wt)},e.value2={decimal:C.withMessage(this.$Labels.modal_MLB_Input_Error_Number,Wt)}),e},emits:["update:value","update:value2"],data(){return{v$:K(),attrs:this.$attrs,value:this.$attrs.value,value2:this.$attrs.value2}},computed:{computedDisplayType(){let e="string";const{displayType:t}=this.$attrs;for(let l=0;l<ls.length;l++){const o=ls[l];if(t.name===o.name){e="number";break}}return e},typeErrors(){let e={};return ss[this.computedDisplayType]&&(e=ss[this.computedDisplayType]),e}},watch:{value(e){this.$emit("update:value",e)},value2(e){this.$emit("update:value2",e)}}};function Co(e,t,l,o,a,s){const u=c("TextInput",!0),d=c("LayoutItem"),b=c("Layout");return h(),L(b,{class:"slds-gutters_xx-small"},{default:n(()=>[i(d,{class:"slds-col"},{default:n(()=>[i(u,{modelValue:a.v$.value.$model,"onUpdate:modelValue":t[0]||(t[0]=_=>a.v$.value.$model=_),labels:{name:e.$attrs.range?e.$Labels.modal_MLB_Condition_Value_From:e.$Labels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,errors:e.$getErrorsByField(a.v$.value),onChange:t[1]||(t[1]=_=>e.valueCom=_.target.value)},null,8,["modelValue","labels","disabled","errors"])]),_:1}),ge(i(d,{class:"slds-col"},{default:n(()=>[i(u,{modelValue:a.v$.value2.$model,"onUpdate:modelValue":t[2]||(t[2]=_=>a.v$.value2.$model=_),labels:{name:e.$Labels.modal_MLB_Condition_Value_To},disabled:e.$attrs.disabled,errors:e.$getErrorsByField(a.v$.value2),onChange:t[3]||(t[3]=_=>e.valueCom2=_.target.value)},null,8,["modelValue","labels","disabled","errors"])]),_:1},512),[[Ce,e.$attrs.range]])]),_:1})}const Do=$(Fo,[["render",Co]]),Ro={name:"TypeAhead",components:{Picklist:H},extends:D,emits:["update:comparedisplay","update:comparevalue","update:value","searchError"],data(){return{value:"",searchTimeout:null,savedResult:[],searchErrors:[],renderDropdown:!1,savedValues:{}}},mounted(){const{value:e="",comparedisplay:t=""}=this.$attrs;e&&t?(this.savedResult.push({Id:e,Name:t}),this.value=t):e&&(this.savedResult.push({Id:e,Name:e}),this.value=e)},methods:{async getSearchResults(e){const t={sf_object:this.$attrs.parentSObject,fieldsToReturn:"Id, Name",searchTerm:e},l=await MAPS.Utils.Apex.invoke("maps.RemoteFunctions.searchObjectForName",[t]),{success:o,data:a,message:s}=l;return o&&a?a:((!o||s)&&this.$emit("searchError",{message:s,state:"error"}),[])},clearOptions(){this.savedResult=[]},handleChange(e){e&&(this.$emit("update:comparedisplay",e.Name),this.$emit("update:comparevalue",e.Id)),this.$emit("update:value",e.Id)},addSearchErrorToast(e){this.toasts.push(e)}}};function Eo(e,t,l,o,a,s){const u=c("Picklist");return h(),L(u,{ref:"typeAheadPicklist",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=d=>a.value=d),inputAttrs:{id:"mlbAheadConditionValueOptionResource"},labels:{name:e.$Labels.modal_MLB_Condition_Value},options:[{options:s.getSearchResults},{title:"Search Results",options:a.savedResult}],titleKey:"Name",idKey:"Id",asyncDelay:250,filterable:"",combobox:"",resizeToFitContent:"",detach:"",errors:a.searchErrors,onSearchError:s.addSearchErrorToast,onClear:s.clearOptions,onSelectedOption:t[1]||(t[1]=d=>s.handleChange(d))},null,8,["modelValue","labels","options","errors","onSearchError","onClear"])}const Vo=$(Ro,[["render",Eo]]),Io={[O.BOOLEAN]:"Boolean",[O.CURRENCY]:"TextInput",[O.DOUBLE]:"TextInput",[O.DATE]:"DateTime",[O.DATETIME]:"DateTime",[O.EMAIL]:"TextInput",[O.ENCRYPTEDSTRING]:"TextInput",[O.ID]:"Id",[O.INTEGER]:"TextInput",[O.MULTIPICKLIST]:"Picklist",[O.PICKLIST]:"Picklist",[O.PHONE]:"TextInput",[O.PERCENT]:"TextInput",[O.REFERENCE]:"Id",[O.STRING]:"TextInput",[O.TEXTAREA]:"TextInput",[O.URL]:"TextInput",[O.TYPEAHEAD]:"TypeAhead"},Po={name:"ConditionValue",components:{Boolean:_o,DateTime:Lo,Id:To,Picklist:$o,TextInput:Do,TypeAhead:Vo},inheritAttrs:!1,props:{displayType:{type:pa,default:()=>O.STRING}},data(){return{cmp:null}},watch:{displayType:{handler(){this.cmp=Io[this.$props.displayType]},immediate:!0}}};function wo(e,t,l,o,a,s){return h(),L(ha(a.cmp),ma(_a({...e.$attrs,...e.$props})),null,16)}const Ss=$(Po,[["render",wo]]),No={name:"MarkerStyleGrid",components:{TextInput:Z,MarkerStyling:gs,ButtonIcon:de,ColorPicker:Ve,ShapeSelector:vt,ConditionValue:Ss,Picklist:H},extends:D,props:{color:Boolean,shape:Boolean,assignmentField:{type:String,required:!0},fieldLabel:{type:String,required:!0},displayType:{type:String,required:!0},picklistOptions:{type:String,required:!0},addShapeOrColor:{type:Function,required:!0},toValPropertyName:{type:String,required:!0},parentSObject:{type:String,default:""}},emits:["add-row"],setup(){return{v$:K()}},data(){return{DisplayTypes:O,otherPicklistOption:[{id:"<Other>",title:this.$Labels.modal_MLB_DO_One_Field_Varied_Label_Unspecified_Text}],checkHexCode:[]}},computed:{gridIsReadOnly(){return this.$props.displayType==="picklist"||this.$props.displayType==="boolean"},allowGridModification(){return this.$props.displayType!=="picklist"&&this.$props.displayType!=="boolean"},computedDisplayType(){return Qe(this.$props.displayType)},operatorOptions(){let e=[{id:"equals",title:this.$Labels.modal_MLB_DO_One_Field_Varied_Text_Operator_Equals}];return U[this.computedDisplayType]&&(e=U[this.computedDisplayType]),e},showRangeInput(){return this.$props.displayType==="number"||this.$props.displayType==="date"},showOperatorSelect(){return this.$props.displayType!=="number"&&this.$props.displayType!=="date"},fieldPicklistOptions(){return this.store.metadata.markerStyle[this.$props.picklistOptions]}},created(){this.checkHexCode=new Array(this.store.layer[this.$props.assignmentField].length).fill(!1)},mounted(){this.setFocusOnRow()},methods:{addHexValidation(e){this.checkHexCode.splice(e+1,0,!1)},addBelow(e){this.$emit("add-row",{index:e})},removeRow(e){this.checkHexCode.splice(e,1);const t=this.store.layer[this.$props.assignmentField];t.splice(e,1),this.store.layer[this.$props.assignmentField]=t,this.$nextTick(()=>{const l=this.store.layer[this.$props.assignmentField].length;if(l>1){let o=e;e===l-1&&(o=e-1),this.$refs[`add-${o}`][0].focus()}})},isNotLastElement(e){return this.store.layer[this.$props.assignmentField].length-1!==e},setFocusOnRow(e){this.$nextTick(()=>{const t=this.store.layer[this.$props.assignmentField].length;let l=t-2;typeof e<"u"&&(l=e),t>1&&!this.gridIsReadOnly&&this.$refs[`add-${l}`][0].focus()})}}};function xo(e,t,l,o,a,s){const u=c("ButtonIcon"),d=c("LayoutItem"),b=c("TextInput"),_=c("Picklist"),y=c("ConditionValue"),g=c("Layout"),m=c("MarkerStyling"),A=c("ColorPicker"),B=c("ShapeSelector");return h(),k("div",null,[(h(!0),k(Y,null,se(e.store.layer[e.$props.assignmentField],(F,j)=>(h(),L(g,{key:F.id,verticalAlign:"start",class:"slds-gutters_xx-small"},{default:n(()=>[s.allowGridModification?(h(),L(d,{key:0,class:"slds-col slds-grow-none slds-m-right_medium",style:{"margin-top":"1.5rem"}},{default:n(()=>[i(u,{id:"mlbStyleGridAddFieldBtnResource",ref_for:!0,ref:`add-${j}`,disabled:!s.isNotLastElement(j),iconCategory:"utility",iconName:"add",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_add,title:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_add,onClick:x=>s.addBelow(j)},null,8,["disabled","assistiveText","title","onClick"])]),_:2},1024)):S("",!0),i(d,{class:"slds-col slds-grow-none slds-shrink-none"},{default:n(()=>[i(b,{ref_for:!0,ref:`label-${j}`,inputAttrs:{id:"mlbStyleGridUserFieldResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Read_Only},readonly:"",modelValue:e.store.metadata.markerStyle[e.$props.fieldLabel]},null,8,["labels","modelValue"])]),_:2},1024),s.showOperatorSelect?(h(),L(d,{key:1,class:"slds-col slds-grow-none",size:"2"},{default:n(()=>[i(_,{modelValue:F.operator,"onUpdate:modelValue":x=>F.operator=x,inputAttrs:{id:"mlbStyleGridOperatorOptionResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Form_Control_Op},options:s.operatorOptions,disabled:!s.isNotLastElement(j)||s.gridIsReadOnly},null,8,["modelValue","onUpdate:modelValue","labels","options","disabled"])]),_:2},1024)):S("",!0),i(d,{class:"slds-col slds-grow-none",size:s.showRangeInput?5:2},{default:n(()=>[F.comparevalue!=="<Other>"||j!==e.store.layer[e.$props.assignmentField].length-1?(h(),L(y,{key:0,comparedisplay:F.comparedisplay,"onUpdate:comparedisplay":x=>F.comparedisplay=x,value:F.comparevalue,"onUpdate:value":x=>F.comparevalue=x,value2:F[e.$props.toValPropertyName],"onUpdate:value2":x=>F[e.$props.toValPropertyName]=x,displayType:s.computedDisplayType,option:{picklistOptions:s.fieldPicklistOptions},disabled:s.gridIsReadOnly||!s.isNotLastElement(j),disableDynamicOptions:"true",isMarkerStyleFilter:"true",range:s.showRangeInput,parentSObject:e.$props.parentSObject},null,8,["comparedisplay","onUpdate:comparedisplay","value","onUpdate:value","value2","onUpdate:value2","displayType","option","disabled","range","parentSObject"])):(h(),L(g,{key:1,class:"slds-gutters_xx-small"},{default:n(()=>[i(d,{flexibility:"auto"},{default:n(()=>[i(b,{inputAttrs:{id:"mlbStyleUnspecifiedTextResource"},modelValue:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Unspecified_Text,labels:{name:s.showRangeInput?e.$Labels.modal_MLB_Condition_Value_From:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Form_Control_Val},disabled:""},null,8,["modelValue","labels"])]),_:1}),s.showRangeInput?(h(),L(d,{key:0,flexibility:"auto"},{default:n(()=>[i(b,{inputAttrs:{id:"mlbStyleUnspecifiedValueToResource"},modelValue:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Unspecified_Text,labels:{name:e.$Labels.modal_MLB_Condition_Value_To},disabled:""},null,8,["modelValue","labels"])]),_:1})):S("",!0)]),_:1}))]),_:2},1032,["size"]),i(d,{class:"slds-col slds-grow-none"},{default:n(()=>[i(g,{class:"slds-gutters_xx-small"},{default:n(()=>[e.$props.shape&&e.$props.color?(h(),L(d,{key:0,class:"slds-col"},{default:n(()=>[i(m,{modelValue:F.value,"onUpdate:modelValue":x=>F.value=x,hasColor:e.$props.color},null,8,["modelValue","onUpdate:modelValue","hasColor"])]),_:2},1024)):e.$props.color?(h(),L(d,{key:1,class:"slds-col"},{default:n(()=>[e.store.metadata.isPolyline?(h(),L(m,{key:0,modelValue:F.value,"onUpdate:modelValue":x=>F.value=x,hasColor:e.$props.color},null,8,["modelValue","onUpdate:modelValue","hasColor"])):(h(),L(A,{key:1,modelValue:F.value,"onUpdate:modelValue":x=>F.value=x,labels:{chooseColor:e.$Labels.modal_MLB_colorpicker_choose_color}},null,8,["modelValue","onUpdate:modelValue","labels"]))]),_:2},1024)):(h(),L(d,{key:2,class:"slds-col"},{default:n(()=>[i(B,{modelValue:F.value,"onUpdate:modelValue":x=>F.value=x},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)),i(d,{class:"slds-col"},{default:n(()=>[i(u,{id:"mlbStyleGridRemoveBtnResource",iconCategory:"utility",iconName:"delete",style:{"margin-top":"1.5rem"},variant:"border-filled",assistiveText:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_delete,disabled:!s.isNotLastElement(j)||!s.allowGridModification,title:e.$Labels.modal_MLB_DO_One_Field_Varied_Assist_Text_delete,onClick:x=>s.removeRow(j)},null,8,["assistiveText","disabled","title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])}const Uo=$(No,[["render",xo]]),jo=e=>{switch(e){case"currency":case"double":case"integer":case"percent":return"number";case"string":case"textarea":case"url":case"phone":case"combobox":case"email":return"string";case"picklist":case"boolean":return"picklist";case"multipicklist":return"multipicklist";case"id":case"reference":return"typeahead";case"date":case"datetime":return"date";default:return null}},Go=({generateDivisionsFrom:e,generateDivisionsTo:t,numberOfDivisions:l})=>{const o=Number(e),a=Number(t),s=Number(l),u=Math.ceil((a-o)/s);let d=o;const b=[];for(let _=1;_<=s;_++){const y=s===_?u:u-1,g=s===_?a:d+y;b.push([d,g]),d+=u}return b},as=()=>{const e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];let t="#";for(let l=0;l<6;l++)t+=e[Math.floor(Math.random()*16)];return t},zo=(e,t)=>e.map(l=>{const{shape:o}=t;let a=null;if(o){const[,s]=l.value.split(":");a=`${as()}:${s}`}else a=as();return{...l,value:a}}),Ho=(e,t)=>{const{shape:l,color:o}=t,{shapes:a}=ve,s=Object.keys(a);return e.map(u=>{const d=Math.floor(Math.random()*s.length);let b=null;if(l&&o){const[_]=u.value.split(":");b=`${_}:${s[d]}`}else b=s[d];return{...u,value:b}})},qo={name:"DivisionGenerator",components:{TextInput:Z,Checkbox:ye,Button:ie,Popover:Lt},data(){return{showPopover:!1,generateDivisionsFrom:"",generateDivisionsTo:"",numberOfDivisions:"",overwrite:!0,disableGenerate:!1}},methods:{generateDivisions(){const{generateDivisionsFrom:e,generateDivisionsTo:t,numberOfDivisions:l,overwrite:o}=this,a=Go({generateDivisionsFrom:e,generateDivisionsTo:t,numberOfDivisions:l});this.$emit("generate",{divisions:a,overwrite:o}),this.generateDivisionsFrom="",this.generateDivisionsTo="",this.numberOfDivisions="",this.showPopover=!1},validateNumOfDivisions(){const e=Number(this.numberOfDivisions);return e?e>50?(this.disableGenerate=!0,[this.$Labels.modal_MLB_DO_Generate_Divisions_Validator]):(this.disableGenerate=!1,[]):(this.disableGenerate=!1,[])}}},Yo={class:"slds-clearfix"},Ko={class:"slds-float_right"};function Wo(e,t,l,o,a,s){const u=c("Button"),d=c("TextInput"),b=c("Checkbox"),_=c("Popover");return h(),k("div",null,[i(u,{id:"mlbDivisionAddRowBtnResource",class:"slds-form-element__control",label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Generate_Div,variant:"base",onClick:t[0]||(t[0]=y=>{a.showPopover=!a.showPopover})},null,8,["label"]),a.showPopover?(h(),L(_,{key:0,onClose:t[6]||(t[6]=y=>{a.showPopover=!1})},{header:n(()=>[le(M(e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Generate_Div),1)]),content:n(()=>[i(d,{modelValue:a.generateDivisionsFrom,"onUpdate:modelValue":t[1]||(t[1]=y=>a.generateDivisionsFrom=y),inputAttrs:{id:"mlbGenerateDivisionFromResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Operator_From},type:"number"},null,8,["modelValue","labels"]),i(d,{modelValue:a.generateDivisionsTo,"onUpdate:modelValue":t[2]||(t[2]=y=>a.generateDivisionsTo=y),inputAttrs:{id:"mlbGenerateDivisionToResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Operator_To},type:"number"},null,8,["modelValue","labels"]),i(d,{modelValue:a.numberOfDivisions,"onUpdate:modelValue":t[3]||(t[3]=y=>a.numberOfDivisions=y),inputAttrs:{id:"mlbNumOfDivisionResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Input_Label_NumDiv},errors:s.validateNumOfDivisions(),type:"number"},null,8,["modelValue","labels","errors"]),i(b,{modelValue:a.overwrite,"onUpdate:modelValue":t[4]||(t[4]=y=>a.overwrite=y),inputAttrs:{id:"mlbOverwriteLabelChxResource"},class:"slds-p-top_xx-small",labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_CB_Overwrite_Label}},null,8,["modelValue","labels"])]),footer:n(()=>[v("div",Yo,[v("div",Ko,[i(u,{id:"mlbDivisionGeneratorCancelBtnResource",title:"Cancel",variant:"neutral",onClick:t[5]||(t[5]=y=>{a.showPopover=!1})},{default:n(()=>[le(M(e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Cancel),1)]),_:1}),i(u,{id:"mlbDivisionGeneratorDisableBtnResource",title:"Generate",variant:"brand",disabled:a.disableGenerate,onClick:s.generateDivisions},{default:n(()=>[le(M(e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Generate),1)]),_:1},8,["disabled","onClick"])])])]),_:1})):S("",!0)])}const Xo=$(qo,[["render",Wo]]),Qo={name:"MarkerStyle",components:{SLDSButton:ie,MarkerStyleGrid:Uo,DivisionGenerator:Xo,FieldSelection:et},extends:D,props:{color:Boolean,shape:Boolean,picklistLabel:{type:String,required:!1,default:""}},emits:["reset-auto-assign-data"],data(){return{processSavedData:!1,isFieldSelected:!1,parentSObject:""}},computed:{isShapeOnlyMode(){return this.shape&&!this.color},computedDisplayType(){return jo(this.store.metadata.markerStyle[this.computedFieldDataType])},computedAssignmentField(){return this.isShapeOnlyMode?"shapeAssignment":"colorAssignment"},computedField(){return this.isShapeOnlyMode?"shapePicklistField":"picklistField"},computedToValPropertyName(){return this.computedDisplayType==="date"?"enddate":"toVal"},computedFieldDataType(){return this.isShapeOnlyMode?"shapeFieldDataType":"fieldDataType"},computedFieldLabel(){return this.isShapeOnlyMode?"shapeFieldLabel":"fieldLabel"},computedPicklistOptions(){return this.isShapeOnlyMode?"shapePicklistOptions":"colorPicklistOptions"},showDivisionGenerator(){return this.computedDisplayType==="number"},showAddRowButton(){const e=this.store.metadata.markerStyle[this.computedFieldDataType];return!["picklist","boolean"].includes(e)}},created(){this.store.layer[this.computedField]&&(this.processSavedData=!0),this.validateAssignmentData()},methods:{resetFieldType(){this.store.layer.colorAssignmentType===W.ONE_VARIED&&this.$emit("reset-auto-assign-data"),this.isFieldSelected=!1,this.store.metadata.markerStyle[this.computedFieldDataType]=""},async setPicklistFieldAndColorAssignment(e){const{field:t}=e,{apiName:l,displayType:o,label:a,picklistOptions:s,sobject:u,referenceSObjects:d}=t;this.parentSObject=d?.length>0?d[0]:u,this.store.metadata.markerStyle[this.computedFieldDataType]=o,this.store.metadata.markerStyle[this.computedFieldLabel]=a,this.store.layer[this.computedField]=l,this.isFieldSelected=!0;const b=this.getValidOperator();if(o==="boolean"?this.store.metadata.markerStyle[this.computedPicklistOptions]=[{id:"True",title:this.$Labels.MA_True},{id:"False",title:this.$Labels.MA_False}]:(o==="picklist"||this.computedDisplayType==="multipicklist")&&(this.store.metadata.markerStyle[this.computedPicklistOptions]=s),this.processSavedData){if(this.processSavedData=!1,this.computedDisplayType==="picklist"&&this.store.metadata.markerStyle[this.computedFieldDataType]!=="boolean"){const g=[],m=[];s.forEach(A=>{this.color&&this.store.layer.colorAssignment.filter(B=>B.comparevalue===A.id).length===0?g.push({comparevalue:A.id,id:V(),operator:b,value:this.generateColorAndShapeValue()}):!this.color&&this.shape&&this.store.layer.shapePicklistField&&this.store.layer.shapeAssignment.filter(B=>B.comparevalue===A.id).length===0&&m.push({comparevalue:A.id,id:V(),operator:b,value:this.generateColorAndShapeValue()})}),g.forEach(A=>{this.store.layer.colorAssignment.splice(this.store.layer.colorAssignment.length-1,0,A)}),m.forEach(A=>{this.store.layer.shapeAssignment.splice(this.store.layer.shapeAssignment.length-1,0,A)})}return}let _=!1,y=!1;if(this.store.layer[this.computedAssignmentField].length=0,this.computedDisplayType==="picklist"?this.store.metadata.markerStyle[this.computedFieldDataType]==="boolean"?this.store.layer[this.computedAssignmentField].push({id:V(),operator:b,comparevalue:"True",value:this.generateColorAndShapeValue()},{id:V(),operator:b,comparevalue:"False",value:this.generateColorAndShapeValue()}):(s.forEach(g=>{this.store.layer[this.computedAssignmentField].push({id:V(),operator:b,comparevalue:g.id,value:this.generateColorAndShapeValue()})}),_=!0):this.computedDisplayType!==null&&(_=!0,y=!0),y){const g={id:V(),operator:b,comparevalue:"",comparedisplay:"",[this.computedToValPropertyName]:"",value:this.generateColorAndShapeValue()};this.store.layer[this.computedAssignmentField].push(g)}if(_){const g={id:V(),operator:b,comparevalue:"<Other>",[this.computedToValPropertyName]:"<Other>",value:this.generateColorAndShapeValue()};this.store.layer[this.computedAssignmentField].push(g)}},addRow({index:e}){let t=0;typeof e<"u"&&(t=e+1);const l=this.getValidOperator(),o=this.store.layer[this.computedAssignmentField];o.splice(t,0,{id:V(),operator:l,comparevalue:"",comparedisplay:"",[this.computedToValPropertyName]:"",value:this.generateColorAndShapeValue()}),this.store.layer[this.computedAssignmentField]=o,this.$refs.markerStyleGrid.setFocusOnRow(t),this.$refs.markerStyleGrid.addHexValidation(e)},onGenerateDivision({divisions:e,overwrite:t}){if(t){this.store.layer[this.computedAssignmentField].length=0;const l=this.store.layer[this.computedAssignmentField];l.push({id:V(),operator:"currency",comparevalue:"<Other>",toVal:"<Other>",value:this.generateColorAndShapeValue()}),this.store.layer[this.computedAssignmentField]=l}for(let l=e.length-1;l>=0;l--){const[o,a]=e[l],s=this.store.layer[this.computedAssignmentField];s.unshift({id:V(),comparevalue:o.toString(),operator:"currency",toVal:a.toString(),value:this.generateColorAndShapeValue()}),this.store.layer[this.computedAssignmentField]=s}this.$refs.markerStyleGrid.setFocusOnRow()},randomizeColors(){const{shape:e,color:t}=this,l=this.store.metadata.isPolyline?"accessCircle":e,o=zo(this.store.layer[this.computedAssignmentField],{shape:l,color:t});this.store.layer[this.computedAssignmentField]=[],this.$nextTick(()=>{this.store.layer[this.computedAssignmentField]=o})},randomizeShapes(){const{shape:e,color:t}=this,l=Ho(this.store.layer[this.computedAssignmentField],{shape:e,color:t});this.store.layer[this.computedAssignmentField]=[],this.$nextTick(()=>{this.store.layer[this.computedAssignmentField]=l})},generateColorAndShapeValue(){return this.store.metadata.isPolyline?"#86baf3:accessCircle":this.color&&this.shape?"#46E71B:accessStandardPin":this.color?this.store.layer.colorAssignmentType==="Dynamic-Label"?"#16325C":"#46E71B":this.shape?"accessStandardPin":null},getValidOperator(){let e="equals";const t=this.store.metadata.markerStyle[this.computedFieldDataType],l=Qe(t);if(U[l]){const o=U[l],[a]=o;e=a.id}return e},validateAssignmentData(){Array.isArray(this.store.layer.colorAssignment)&&!this.isShapeOnlyMode&&this.store.layer.colorAssignment.forEach(e=>{if(e.operator||(e.operator=this.getValidOperator()),this.color&&this.shape){const[t="#00FF00",l="accessStandardPin"]=e.value.split(":");e.value=`${t}:${l}`}else e.value||(e.value="#00FF00")}),Array.isArray(this.store.layer.shapeAssignment)&&this.isShapeOnlyMode&&this.store.layer.shapeAssignment.forEach(e=>{e.operator||(e.operator=this.getValidOperator()),e.value||(e.value="accessStandardPin")})}}},Jo={class:"slds-button-group",role:"group"};function Zo(e,t,l,o,a,s){const u=c("FieldSelection"),d=c("LayoutItem"),b=c("SLDSButton"),_=c("DivisionGenerator"),y=c("Layout"),g=c("MarkerStyleGrid");return h(),k("div",null,[i(y,{verticalAlign:"end",class:"slds-gutters_xx-small"},{default:n(()=>[i(d,{size:"3",flexibility:"no-grow"},{default:n(()=>[i(u,{id:"mlbFieldSelectionResource",modelValue:e.store.layer[s.computedField],"onUpdate:modelValue":t[0]||(t[0]=m=>e.store.layer[s.computedField]=m),size:12,baseObject:e.store.layer.baseObject,labels:{name:e.$props.picklistLabel},onClear:s.resetFieldType,onChanged:s.setPicklistFieldAndColorAssignment},null,8,["modelValue","baseObject","labels","onClear","onChanged"])]),_:1}),a.isFieldSelected?(h(),k(Y,{key:0},[s.showAddRowButton?(h(),L(d,{key:0,class:"slds-col slds-grow-none"},{default:n(()=>[i(b,{id:"mlbAddRowBtnResource",class:"slds-form-element__control",label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Add_Row,variant:"neutral",onClick:s.addRow},null,8,["label","onClick"])]),_:1})):S("",!0),s.showDivisionGenerator?(h(),L(d,{key:1,class:"slds-col slds-grow-none"},{default:n(()=>[i(_,{onGenerate:s.onGenerateDivision},null,8,["onGenerate"])]),_:1})):S("",!0)],64)):S("",!0),a.isFieldSelected?(h(),L(d,{key:1,class:"slds-col",size:"6",alignmentBump:"left"},{default:n(()=>[v("div",Jo,[l.color?(h(),L(b,{key:0,id:"mlbRandomizeColorBtnResource",label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Random_Colors,class:"slds-form-element__control",variant:"neutral",onClick:s.randomizeColors},null,8,["label","onClick"])):S("",!0),l.shape?(h(),L(b,{key:1,id:"mlbRandomizeShapeBtnResource",label:e.$Labels.modal_MLB_DO_One_Field_Varied_Btn_Random_Shapes,class:"slds-form-element__control",variant:"neutral",onClick:s.randomizeShapes},null,8,["label","onClick"])):S("",!0)])]),_:1})):S("",!0)]),_:1}),a.isFieldSelected?(h(),L(g,{key:0,ref:"markerStyleGrid",class:"slds-m-top_medium",color:e.$props.color,shape:e.$props.shape,assignmentField:s.computedAssignmentField,fieldLabel:s.computedFieldLabel,displayType:s.computedDisplayType,addShapeOrColor:s.generateColorAndShapeValue,picklistOptions:s.computedPicklistOptions,toValPropertyName:s.computedToValPropertyName,parentSObject:a.parentSObject,onAddRow:s.addRow},null,8,["color","shape","assignmentField","fieldLabel","displayType","addShapeOrColor","picklistOptions","toValPropertyName","parentSObject","onAddRow"])):S("",!0)])}const St=$(Qo,[["render",Zo]]),er={name:"LabeledPins",components:{ColorPicker:Ve,MarkerStyle:St,FieldSelection:et},extends:D,setup(){return{v$:K()}},validations(){return{store:{layer:{advancedOptions:{markerLabelTextColor:{required:C.withMessage(this.$Labels.MLB_Required_Field_Error,z),validHexValue:C.withMessage("",Re)}}}}}},mounted(){this.store.layer.advancedOptions.dynamicLabelTitleField=this.store.layer.advancedOptions.dynamicLabelTitleField||this.store.layer.tooltip1},beforeUnmount(){this.store.metadata.markerStyle.fieldDataType="",this.store.metadata.markerStyle.fieldLabel="",this.store.layer.picklistField=""},methods:{onFieldSelectionChanged(e){this.store.layer.advancedOptions.dynamicLabelTitleField=e.field.apiName,this.store.layer.advancedOptions.dynamicLabelTitleFieldType=e.fieldType}}};function tr(e,t,l,o,a,s){const u=c("FieldSelection"),d=c("LayoutItem"),b=c("ColorPicker"),_=c("Layout"),y=c("MarkerStyle");return h(),L(_,null,{default:n(()=>[i(d,null,{default:n(()=>[i(_,null,{default:n(()=>[i(d,{size:"3",flexibility:"no-grow"},{default:n(()=>[i(u,{modelValue:e.store.layer.advancedOptions.dynamicLabelTitleField,"onUpdate:modelValue":t[0]||(t[0]=g=>e.store.layer.advancedOptions.dynamicLabelTitleField=g),baseObject:e.store.layer.baseObject,size:12,labels:{name:e.$Labels.modal_MLB_DO_Labeled_Pins_Label_Field_Text},onChanged:s.onFieldSelectionChanged},null,8,["modelValue","baseObject","labels","onChanged"])]),_:1}),i(d,{style:{"padding-left":"8px"}},{default:n(()=>[i(b,{modelValue:o.v$.store.layer.advancedOptions.markerLabelTextColor.$model,"onUpdate:modelValue":t[1]||(t[1]=g=>o.v$.store.layer.advancedOptions.markerLabelTextColor.$model=g),errors:e.$getErrorsByField(o.v$.store.layer.advancedOptions.markerLabelTextColor),labels:{chooseColor:e.$Labels.markerStylePicker_ColorPicker_MLB_LabelColor}},null,8,["modelValue","errors","labels"])]),_:1})]),_:1}),i(y,{color:"",picklistLabel:e.$Labels.modal_MLB_DO_Labeled_Pins_Label_Field_Picklist_Label},null,8,["picklistLabel"])]),_:1})]),_:1})}const sr=$(er,[["render",tr]]),lr={name:"OneFieldOrdered",components:{Checkbox:ye,ScopedNotification:Ze},extends:D,computed:{computedDrawLine:{get(){return Object.prototype.hasOwnProperty.call(this.store.layer.colorAssignment,"drawLine")?this.store.layer.colorAssignment.drawLine:!1},set(e){this.store.layer.colorAssignment={drawLine:e}}}}},ar={slot:""},ir={class:"direction-text slds-truncate"};function or(e,t,l,o,a,s){const u=c("Checkbox"),d=c("ScopedNotification");return h(),k("div",null,[i(u,{modelValue:s.computedDrawLine,"onUpdate:modelValue":t[0]||(t[0]=b=>s.computedDrawLine=b),inputAttrs:{id:"mlbOneFieldOrderedShowLinesChxResource"},class:"slds-p-top_xx-small slds-p-bottom_large",labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_OBOF_CB_Label}},null,8,["modelValue","labels"]),i(d,null,{content:n(()=>[v("p",ar,[v("span",ir,M(e.$Labels.modal_MLB_option_DO_section_Markers_modal_OBOF_Direction),1)])]),_:1})])}const rr=$(lr,[["render",or]]),nr={name:"OneFieldVaried",components:{TextInput:Z,Picklist:H,Checkbox:ye,ShapeSelector:vt,MarkerStyle:St},extends:D,data(){return{applicationOfShapes:[{id:"dynamic",title:this.$Labels.modal_MLB_DO_One_Field_Varied_Label_Or_Disabled_Random},{id:"static",title:this.$Labels.modal_MLB_DO_One_Field_Varied_PL_Uniform}],selectedMarkerStyle:"",automaticAssignEnabled:!1,shape:"accessStandardPin"}},computed:{showDynamicAutoAssign(){const{fieldDataType:e}=this.store.metadata.markerStyle;return["reference","string","id"].includes(e)},autoAssignLabel(){let e=this.$Labels.modal_MLB_DO_One_Field_Varied_CB_Label_Auto_Assign;return this.store.metadata.isPolyline&&(e=this.$Labels.modal_MLB_DO_One_Field_Varied_CB_Label_Auto_Assign_polyline),e},unspecifiedColorLabel(){let e=this.$Labels.modal_MLB_DO_One_Field_Varied_Label_Marker_Color;return this.store.metadata.isPolyline&&(e=this.$Labels.markerStylePicker_ColorPicker_MLB_PolylineColor),e},aaEnabled:{get(){return this.automaticAssignEnabled},set(e){this.automaticAssignEnabled=e,this.store.layer.advancedOptions.automaticassign=this.automaticAssignEnabled}},markerStyleSelected:{get(){return this.selectedMarkerStyle},set(e){this.selectedMarkerStyle=e,this.store.layer.advancedOptions.markerShapeType=e}}},created(){if(this.store.metadata.isPolyline&&(this.shape="accessCircle"),this.automaticAssignEnabled=this.store.layer.advancedOptions.automaticassign,this.markerStyleSelected=this.store.layer.advancedOptions.markerShapeType,this.store.layer.advancedOptions.markerShapeValue){const[,e]=this.store.layer.advancedOptions.markerShapeValue.split(":");this.shape=e}},beforeUnmount(){this.store.layer.advancedOptions.markerShapeType="static",this.store.layer.advancedOptions.otherthreshold="0",this.store.layer.advancedOptions.automaticassign=!1},methods:{resetAutoAssignData(){this.store.layer.advancedOptions.markerShapeType="dynamic",this.store.layer.advancedOptions.otherthreshold=".001",this.store.layer.advancedOptions.automaticassign=!1,delete this.store.layer.advancedOptions.markerShapeValue},setMarkerShapeValue(e){this.shape=e,this.store.layer.advancedOptions.markerShapeValue=`#46E71B:${e}`}}},dr={class:"slds-text-heading_small slds-text-title_bold"};function cr(e,t,l,o,a,s){const u=c("MarkerStyle"),d=c("LayoutItem"),b=c("Checkbox"),_=c("TextInput"),y=c("Layout"),g=c("Picklist"),m=c("ShapeSelector");return h(),k("div",null,[i(u,{color:"",shape:!e.store.metadata.isPolyline,picklistLabel:e.$Labels.modal_MLB_DO_One_Field_Varied_PL_Style_Field,onResetAutoAssignData:s.resetAutoAssignData},null,8,["shape","picklistLabel","onResetAutoAssignData"]),s.showDynamicAutoAssign?(h(),L(y,{key:0,class:"slds-p-top_large",multipleRows:""},{default:n(()=>[i(d,{size:"12"},{default:n(()=>[v("div",dr,M(e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Unspecified),1)]),_:1}),i(d,{size:"12",class:"slds-p-top_large"},{default:n(()=>[i(b,{modelValue:s.aaEnabled,"onUpdate:modelValue":t[0]||(t[0]=A=>s.aaEnabled=A),inputAttrs:{id:"mlbAssignColorEnabledChxResource"},labels:{name:s.autoAssignLabel}},null,8,["modelValue","labels"])]),_:1}),s.aaEnabled?(h(),k(Y,{key:0},[i(d,{size:"12",class:"slds-p-top_small"},{default:n(()=>[i(y,null,{default:n(()=>[i(d,{size:"2"},{default:n(()=>[i(_,{modelValue:e.store.layer.advancedOptions.otherthreshold,"onUpdate:modelValue":t[1]||(t[1]=A=>e.store.layer.advancedOptions.otherthreshold=A),inputAttrs:{id:"mlbThresholdResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_Text_Label_Threshold},type:"number"},null,8,["modelValue","labels"])]),_:1})]),_:1})]),_:1}),i(d,{size:"12"},{default:n(()=>[e.store.metadata.isPolyline?S("",!0):(h(),L(y,{key:0},{default:n(()=>[i(d,{size:"2"},{default:n(()=>[i(g,{modelValue:s.markerStyleSelected,"onUpdate:modelValue":t[2]||(t[2]=A=>s.markerStyleSelected=A),inputAttrs:{id:"mlbStyleSelectedOptionResource"},labels:{name:e.$Labels.modal_MLB_DO_One_Field_Varied_PL_App_Of_Shapes},idKey:"id",titleKey:"title",options:a.applicationOfShapes},null,8,["modelValue","labels","options"])]),_:1}),s.markerStyleSelected==="static"?(h(),L(d,{key:0,size:"2",class:"slds-p-left_large"},{default:n(()=>[i(m,{modelValue:a.shape,"onUpdate:modelValue":s.setMarkerShapeValue},null,8,["modelValue","onUpdate:modelValue"])]),_:1})):S("",!0)]),_:1}))]),_:1}),i(d,{size:"12"},{default:n(()=>[i(y,null,{default:n(()=>[i(d,{size:"2"},{default:n(()=>[i(_,{inputAttrs:{id:"mlbUnspecificColorResource"},labels:{name:s.unspecifiedColorLabel},type:"text",disabled:"",modelValue:e.$Labels.modal_MLB_DO_One_Field_Varied_Label_Or_Disabled_Random},null,8,["labels","modelValue"])]),_:1})]),_:1})]),_:1})],64)):S("",!0)]),_:1})):S("",!0)])}const ur=$(nr,[["render",cr]]),pr={name:"TwoFieldVaried",components:{MarkerStyle:St},extends:D},mr={class:"slds-text-heading_small slds-text-title_bold"},_r={class:"slds-text-heading_medium slds-text-title_bold"};function hr(e,t,l,o,a,s){const u=c("LayoutItem"),d=c("MarkerStyle"),b=c("Layout");return h(),L(b,{multipleRows:"",verticalAlign:"center"},{default:n(()=>[i(u,{size:"12"},{default:n(()=>[v("p",mr,M(e.$Labels.modal_MLB_DO_Two_Field_Varied_Shape_Section),1)]),_:1}),i(u,{size:"12",class:"slds-m-top_large"},{default:n(()=>[i(d,{shape:"",picklistLabel:e.$Labels.modal_MLB_DO_One_Field_Varied_PL_Style_Field},null,8,["picklistLabel"])]),_:1}),i(u,{size:"12",class:"slds-border_bottom slds-m-top_large slds-m-bottom_large"}),i(u,{size:"12"},{default:n(()=>[v("p",_r,M(e.$Labels.modal_MLB_DO_Two_Field_Varied_Color_Section),1)]),_:1}),i(u,{size:"12",class:"slds-m-top_large"},{default:n(()=>[i(d,{color:"",picklistLabel:e.$Labels.modal_MLB_DO_Two_Field_Varied_Picklist_Label},null,8,["picklistLabel"])]),_:1})]),_:1})}const br=$(pr,[["render",hr]]),yr={name:"MLBUniform",components:{MarkerStyling:gs},extends:D,data(){return{style:""}},created(){this.style=this.store.layer.iconColor},methods:{setStyle(e){this.store.layer.colorAssignmentType="Static",this.store.layer.iconColor=e}}};function fr(e,t,l,o,a,s){const u=c("MarkerStyling");return h(),L(u,{modelValue:a.style,"onUpdate:modelValue":[t[0]||(t[0]=d=>a.style=d),s.setStyle],hasColor:""},null,8,["modelValue","onUpdate:modelValue"])}const Lr=$(yr,[["render",fr]]),W=Object.freeze({UNIFORM:"Static",ONE_VARIED:"Dynamic, Field",TWO_VARIED:"Dynamic-multiField",LABELED:"Dynamic-Label",ORDERED:"Dynamic-Order"}),gr={name:"MLBDisplayMarkers",components:{VisualPicker:Ei,LabeledPins:sr,OneFieldOrdered:rr,OneFieldVaried:ur,TwoFieldVaried:br,Uniform:Lr},extends:D,data(){return{initialValue:"",MarkerStyles:W,markerOptions:[{value:W.UNIFORM,label:this.$Labels.modal_MLB_Display_Markers_Styles_Uniform,imageUrl:Vi},{value:W.ONE_VARIED,label:this.$Labels.modal_MLB_Display_Markers_Styles_One_Varied,imageUrl:Ii},{value:W.TWO_VARIED,label:this.$Labels.modal_MLB_Display_Markers_Styles_Two_Varied,imageUrl:Pi},{value:W.LABELED,label:this.$Labels.modal_MLB_Display_Markers_Styles_Labeled_Pins,imageUrl:wi},{value:W.ORDERED,label:this.$Labels.modal_MLB_Display_Markers_Styles_Ordered,imageUrl:Ni}],polylineOptions:[{value:W.UNIFORM,label:this.$Labels.modal_MLB_Display_Markers_Styles_Uniform,imageUrl:xi},{value:W.ONE_VARIED,label:this.$Labels.modal_MLB_Display_Markers_Styles_One_Varied,imageUrl:Ui}]}},async created(){this.initialValue=this.store.layer.colorAssignmentType||"",await this.getMarkerImageOptions()},methods:{async getMarkerImageOptions(){this.store.callouts++;try{const{success:e,data:t=[],error:l}=await MAPS.Utils.Apex.invoke("maps.MarkerLayerBuilderController.getMarkerImageOptions",[]);e?this.store.metadata.customMarkerImageOptions=t.map(o=>({title:o.itemLabel,id:`image:${o.itemValue}`})):this.genericErrorHandler(l)}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},setStoreData(e){this.store.layer.colorAssignmentType=e,e===W.ORDERED?this.store.layer.colorAssignment={drawLine:!1}:this.store.layer.colorAssignment=[],this.store.layer.shapeAssignment=[],this.store.metadata.markerStyle.fieldDataType="",this.store.metadata.markerStyle.fieldLabel="",this.store.metadata.markerStyle.shapeFieldDataType="",this.store.metadata.markerStyle.shapeFieldLabel="",this.store.layer.picklistField="",this.store.layer.shapePicklistField=""}}},vr={class:"slds-p-around_medium"},Sr={class:"slds-p-vertical_large"};function Or(e,t,l,o,a,s){const u=c("VisualPicker"),d=c("Uniform"),b=c("OneFieldVaried"),_=c("TwoFieldVaried"),y=c("LabeledPins"),g=c("OneFieldOrdered");return h(),k("div",vr,[i(u,{id:"mlbVisualPickerResource",modelValue:e.store.layer.colorAssignmentType,"onUpdate:modelValue":t[0]||(t[0]=m=>e.store.layer.colorAssignmentType=m),value:a.initialValue,options:e.store.metadata.isPolyline?a.polylineOptions:a.markerOptions,label:e.store.metadata.isPolyline?e.$Labels.MA_Polyline_Style:e.$Labels.modal_MLB_Display_Markers_Styles_Title,onInput:s.setStoreData},null,8,["modelValue","value","options","label","onInput"]),v("div",Sr,[e.store.layer.colorAssignmentType===a.MarkerStyles.UNIFORM?(h(),L(d,{key:0,id:"mlbUniformResource"})):S("",!0),e.store.layer.colorAssignmentType===a.MarkerStyles.ONE_VARIED?(h(),L(b,{key:1,id:"mlbOneFieldVariedResource"})):S("",!0),e.store.layer.colorAssignmentType===a.MarkerStyles.TWO_VARIED?(h(),L(_,{key:2,id:"mlbTwoFieldVariedResource"})):S("",!0),e.store.layer.colorAssignmentType===a.MarkerStyles.LABELED?(h(),L(y,{key:3,id:"mlbLabeledPinsResource"})):S("",!0),e.store.layer.colorAssignmentType===a.MarkerStyles.ORDERED?(h(),L(g,{key:4,id:"mlbOneFieldOrderedResource"})):S("",!0)])])}const Tr=$(gr,[["render",Or]]),q={};q[O.STRING]=q[O.PHONE]=q[O.TEXTAREA]=q[O.URL]=q[O.EMAIL]=q[O.COMBOBOX]=[{id:"equals",title:MASystem.Labels.MA_Equals},{id:"not equal to",title:MASystem.Labels.MA_NOT_EQUAL_TO},{id:"starts with",title:MASystem.Labels.MA_Starts_With},{id:"contains",title:MASystem.Labels.MA_Contains},{id:"does not contain",title:MASystem.Labels.MA_Does_Not_Contain}];q[O.NUMBER]=q[O.DATE]=q[O.DATETIME]=q[O.CURRENCY]=q[O.INTEGER]=q[O.DOUBLE]=q[O.PERCENT]=[{id:"equals",title:MASystem.Labels.MA_Equals},{id:"not equal to",title:MASystem.Labels.MA_NOT_EQUAL_TO},{id:"less than",title:MASystem.Labels.MA_Less_Than},{id:"greater than",title:MASystem.Labels.MA_Greater_Than},{id:"less or equal",title:MASystem.Labels.MA_Less_Than_Equal},{id:"greater or equal",title:MASystem.Labels.MA_Greater_Than_Equal},{id:"range",title:MASystem.Labels.MA_Range}];q[O.MULTIPICKLIST]=[{id:"includes",title:MASystem.Labels.MA_Includes},{id:"excludes",title:MASystem.Labels.MA_Excludes}];q[O.ID]=q[O.PICKLIST]=q[O.REFERENCE]=[{id:"equals",title:MASystem.Labels.MA_Equals},{id:"not equal to",title:MASystem.Labels.MA_NOT_EQUAL_TO}];q[O.BOOLEAN]=[{id:"equals",title:MASystem.Labels.MA_Equals}];const yt=(e,t)=>({index:t,baseObject:e,indexLabel:(t+1).toString(),fieldName:"",parentFieldName:null,grandparentFieldName:null,fieldType:"",operator:"",value:"",value2:"",addressObject:"",polymorphicAddressObject:""}),Mr={components:{Expression:ba,Condition:li,ConditionValue:Ss},extends:D,props:{fields:{type:Array,default:()=>[]},filterLogic:{type:String,default:""},filters:{type:Array,default:()=>[]},baseObject:{type:String,default:""},disableLogic:Boolean,noGutter:Boolean,noLogic:Boolean,useFilterLogic:Boolean,disableDynamicVariables:Boolean},validations(){return{isFilterLogicValid:{valid:e=>e===!0}}},emits:["update:filterLogic","update:useFilterLogic","update:filters"],setup(){return{v$:K()}},data(){return{mode:oe.ALL,modes:[oe.ALL,oe.CUSTOM],conditions:[],conditionLabels:{deleteCondition:this.$Labels.modal_MLB_Filters_Field_Condition_Delete,resource:this.$Labels.modal_MLB_Filters_Field_Condition_Resource,operator:this.$Labels.modal_MLB_Filters_Field_Condition_Operator,parent:this.$Labels.modal_MLB_Filters_Field_Condition_Parent,grandparent:this.$Labels.modal_MLB_Filters_Field_Condition_Grandparent},conditionAssistiveText:{title:this.$Labels.modal_MLB_Filters_Field_Condition_AssistiveText_Title,deleteIcon:this.$Labels.modal_MLB_Filters_Field_Condition_AssistiveText_Delete},expressionLabels:{addCondition:this.$Labels.modal_MLB_Filters_Field_Expression_Add_Condition,and:this.$Labels.modal_MLB_Filters_Field_Expression_Boolean_AND,customLogic:this.$Labels.modal_MLB_Filters_Field_Expression_Custom_Logic,customLogicPlaceholder:this.$Labels.modal_MLB_Expression_Placeholder,modeAll:this.$Labels.modal_MLB_Filters_Field_Expression_Mode_All,modeCustom:this.$Labels.modal_MLB_Filters_Field_Expression_Mode_Custom_Logic,takeAction:this.$Labels.modal_MLB_Filters_Field_Expression_Mode,title:this.$Labels.modal_MLB_Filters_Field_Expression_Title},isFilterLogicValid:!0,filterLogicErrors:[],disableFilterLogic:this.$props.disableLogic,booleanExpressionValidatorlabels:{andOr:this.$Labels.MLB_Boolean_Expr_Validator_Successive_And_Or,invalidOperator:this.$Labels.MLB_Boolean_Expr_Validator_Invalid_Operator,unmatchedParentheses:this.$Labels.MLB_Boolean_Expr_Validator_Unmatched_Parentheses}}},computed:{conditionLength(){return this.conditions.length},isPolymorphic(){return this.store.local.hasPolymorphicBaseObject}},watch:{conditionLength(){this.validateBooleanExpression(this.$props.filterLogic)}},async created(){this.$props.filters.length?(await this.initExistingCondition(),this.checkFiltersForPolymorphicField()):this.onAddCondition()},unmounted(){this.$props.filters.length=0},methods:{setMode(e){this.mode=e},reset(){this.$emit("update:filterLogic",""),this.$emit("update:useFilterLogic",!1),this.filterLogicErrors=[],this.v$.isFilterLogicValid.$model=!0,setTimeout(()=>{this.conditions.length=0,this.$props.filters.length=0,this.mode=oe.ALL,this.disableFilterLogic=!1,this.onAddCondition()},1)},onCustomLogicUpdate(e){this.$emit("update:filterLogic",e),this.filterLogicErrors.length&&(this.filterLogicErrors=[],this.v$.isFilterLogicValid.$model=!0)},onCustomLogicChange(e){this.validateBooleanExpression(e.target.value)},validateBooleanExpression(e){if(this.filterLogicErrors=[],!e)return;const t=new _i(e,this.booleanExpressionValidatorlabels),l=t.tokenize();if(this.v$.isFilterLogicValid.$model=l.success,!l.success){l.invalidTokens.forEach(({token:a})=>this.filterLogicErrors.push(Yt(this.$Labels.MLB_Boolean_Expr_Validator_Invalid_Token,[a])));return}const o=t.parse();this.v$.isFilterLogicValid.$model=o.success,o.success||this.filterLogicErrors.push(o.error);try{t.getOperands().forEach(a=>{if(a>this.conditions.length)throw new SyntaxError(Yt(this.$Labels.MLB_Boolean_Expr_Validator_Invalid_Filter,[a]))})}catch(a){this.v$.isFilterLogicValid.$model=!1,this.filterLogicErrors.push(a.message)}},onAddCondition(){const e=this.conditions;this.conditions=[],e.push(this.buildDefaultCondition()),this.conditions=e;const t=this.$props.filters;this.$emit("update:filters",[]),t.push(yt(this.$props.baseObject,this.conditions.length-1)),this.$emit("update:filters",t)},checkFiltersForPolymorphicField(){if(this.disableFilterLogic=!1,!this.isPolymorphic)return;const{filters:e=[]}=this.$props;for(let t=0;t<e.length;t++)if(e[t].fieldName===this.store.layer.baseObjectAddressObject){this.disableFilterLogic=!0,this.$emit("update:filterLogic",""),this.mode=oe.ALL;break}},async initExistingCondition(){this.$props.useFilterLogic&&(this.mode=oe.CUSTOM);const e=this.$props.filters.map((l,o)=>({...yt(this.$props.baseObject,o),...l}));this.$props.filters.length=0,this.$props.filters.push(...e);const t=[];this.$props.filters.forEach((l,o)=>{const a=[];l.fieldName&&a.push(l.parentFieldName?`${l.fieldName}.lookup`:l.fieldName),l.parentFieldName&&a.push(l.grandparentFieldName?`${l.parentFieldName}.lookup`:l.parentFieldName),l.grandparentFieldName&&a.push(l.grandparentFieldName);const{fieldSObjectTypes:s,parentSObjectTypes:u}=l,d=[];if(s&&s.length&&l.parentFieldName){const y=l.parentFieldName!==null&&l.parentFieldName!=="";d.push(ae({sobject:s,includeDedicatedLookupOptions:y,excludeUnsupportedDisplayTypes:!0}))}if(u&&u.length&&l.grandparentFieldName){const y=l.grandparentFieldName!==null&&l.grandparentFieldName!=="";d.push(ae({sobject:u,includeDedicatedLookupOptions:y,excludeUnsupportedDisplayTypes:!0}))}this.conditions.push({id:V(),resource:a,resources:[this.$props.fields]}),this.store.callouts+=d.length,t.push(Promise.all(d).then(y=>{this.conditions[o].resources=this.conditions[o].resources.concat(y);const g=this.conditions[o].resources[this.conditions[o].resources.length-1].find(A=>A.apiName===a[a.length-1]),m=Qe(g.displayType);this.conditions[o].displayType=m,this.conditions[o].operators=q[m],this.conditions[o].option=g,(O.PICKLIST.equals(m)||O.MULTIPICKLIST.equals(m))&&(this.conditions[o].picklistOptions=g.picklistOptions),this.store.callouts-=d.length}))}),await Promise.allSettled(t)},getDefaultFilterLogicString(){return this.conditions.reduce((e,t,l)=>l===0?e:`${e} AND ${l+1}`,"1")},buildDefaultCondition(){return{...Ua(),resource:[],displayType:O.STRING,resources:[this.$props.fields]}},onOperatorChange({index:e}){this.$props.filters[e].value2=""},async onResourceChange({index:e,ancestralIndex:t,option:l,cleared:o}){if(o){this.onResetCondition({index:e,ancestralIndex:t});return}if(l.isLookup)try{this.store.callouts++;const a=2,s=this.conditions[e].resource.length<a;if(this.conditions[e].resources.push(await ae({sobject:l.referenceSObjects,includeDedicatedLookupOptions:s,excludeUnsupportedDisplayTypes:!0})),this.isPolymorphic&&!this.disableFilterLogic){const[u]=String(l?.apiName).split(".");u===this.store.layer.baseObjectAddressObject&&(this.disableFilterLogic=!0,this.$emit("update:filterLogic",""),this.mode=oe.ALL)}}catch(a){this.genericExceptionHandler(a)}finally{this.store.callouts--}else{const a=Qe(l.displayType);this.conditions[e].displayType=a,this.conditions[e].operators=q[a],this.conditions[e].option=l,this.setFilterFields(e),this.checkFiltersForPolymorphicField()}},onResetCondition({index:e,ancestralIndex:t}){this.conditions[e].resource.splice(t,this.conditions[e].resource.length),this.conditions[e].operators=[],this.conditions[e].displayType=O.STRING,this.conditions[e].option=null,this.$props.filters[e].value="",this.$props.filters[e].value2="",this.$props.filters[e].operator=null,this.setFilterFields(e),this.checkFiltersForPolymorphicField()},onDeleteCondition({index:e}){this.conditions.splice(e,1),this.$props.filters.splice(e,1),this.$props.filters.forEach((t,l)=>{t.index=l,t.indexLabel=`${l+1}`}),this.checkFiltersForPolymorphicField()},onModeChange(e){this.isFilterLogicValid=!0,this.filterLogicErrors=[],this.$emit("update:useFilterLogic",e===oe.CUSTOM),this.$emit("update:filterLogic",e===oe.CUSTOM?this.getDefaultFilterLogicString():"")},getDefaultFilterOperator(e){const t=this.conditions[e].operators||[],[l={}]=t;return l.id||""},setFilterFields(e){this.$props.filters[e].fieldType=this.conditions[e].displayType.toString(),this.$props.filters[e].operator=this.getDefaultFilterOperator(e),[this.$props.filters[e].fieldName=null,this.$props.filters[e].parentFieldName=null,this.$props.filters[e].grandparentFieldName=null]=[...this.conditions[e].resource.map(t=>t.split(".")[0])]}}};function Ar(e,t,l,o,a,s){const u=c("ConditionValue"),d=c("Condition"),b=c("Expression");return h(),L(b,{id:"mlbExpressionResource",mode:a.mode,"onUpdate:mode":[t[0]||(t[0]=_=>a.mode=_),s.onModeChange],customLogic:e.$props.filterLogic,customLogicErrors:a.filterLogicErrors,customLogicListeners:{change:s.onCustomLogicChange},labels:a.expressionLabels,disableLogic:a.disableFilterLogic,modes:a.modes,noGutter:e.$props.noGutter,noLogic:e.$props.noLogic,disableA11y:"",noTitle:"",onAddCondition:s.onAddCondition,"onUpdate:customLogic":s.onCustomLogicUpdate},{default:n(()=>[(h(!0),k(Y,null,se(e.$props.filters,(_,y)=>(h(),L(d,{id:a.conditions[y].id,key:a.conditions[y].id,resource:a.conditions[y].resource,"onUpdate:resource":g=>a.conditions[y].resource=g,resources:a.conditions[y].resources,"onUpdate:resources":g=>a.conditions[y].resources=g,operator:_.operator,"onUpdate:operator":g=>_.operator=g,operators:a.conditions[y].operators,"onUpdate:operators":g=>a.conditions[y].operators=g,assistiveText:a.conditionAssistiveText,labels:a.conditionLabels,ancestral:"",resourceIdKey:"apiName",resourceTitleKey:"label",onDeleteCondition:s.onDeleteCondition,onOperatorChange:s.onOperatorChange,onResetCondition:s.onResetCondition,onResourceChange:s.onResourceChange},{value:n(()=>[i(u,{id:"mlbConditionValueResource",value:_.value,"onUpdate:value":g=>_.value=g,value2:_.value2,"onUpdate:value2":g=>_.value2=g,displayType:a.conditions[y].displayType,option:a.conditions[y].option,range:_.operator==="range",disabled:a.conditions[y].resource.length!==a.conditions[y].resources.length,class:"slds-col",disableDynamicOptions:l.disableDynamicVariables},null,8,["value","onUpdate:value","value2","onUpdate:value2","displayType","option","range","disabled","disableDynamicOptions"])]),_:2},1032,["id","resource","onUpdate:resource","resources","onUpdate:resources","operator","onUpdate:operator","operators","onUpdate:operators","assistiveText","labels","onDeleteCondition","onOperatorChange","onResetCondition","onResourceChange"]))),128))]),_:1},8,["mode","customLogic","customLogicErrors","customLogicListeners","labels","disableLogic","modes","noGutter","noLogic","onAddCondition","onUpdate:mode","onUpdate:customLogic"])}const tt=$(Mr,[["render",Ar]]),kr=e=>{const t={Case:{label:"Case Number",apiName:"CaseNumber"},WorkOrder:{label:"Subject",apiName:"Subject"},Task:{label:"Subject",apiName:"Subject"}};let l=e.metadata.fields[0];if(t[e.layer.baseObjectName])l=t[e.layer.baseObjectName];else{const o=e.metadata.fields.length;for(let a=0;a<o;a++){const s=e.metadata.fields[a];if(s.isNameField)if(s.apiName==="Name"){l=s;break}else l&&(l=s)}}e.layer.tooltip1=l.apiName,e.layer.tooltip1Label=l.label};function Br(e){Reflect.defineProperty(e.layer,"baseObjectId",{enumerable:!0,get(){return e.local.baseObjectId},set(t){return e.local.baseObjectId=t,(async()=>{try{e.callouts++;const l={sobject:e.layer.baseObject,includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0};e.metadata.fields=await ae(l),e.local.hasPolymorphicBaseObject&&e.metadata.fields.forEach(o=>{o.apiName&&o.apiName===`${e.layer.baseObjectAddressObject}.lookup`&&(o.referenceSObjects=[e.layer.baseObjectPolymorphicObject])}),Q.CREATE.equals(e.metadata.mode)&&kr(e)}catch{let o="";e.relatedSObjectExists?o=MASystem.Labels.Common_Refresh_And_Try_Again:o=MASystem.Labels.Marker_Layer_SObject_Deleted_Error,e.toasts.push({message:o,state:"error"})}finally{e.callouts--}})()}}),Reflect.defineProperty(e.local,"markerLimit",{get(){if(e.metadata.isPolyline)return 100;const t=us(),{maxExternal:l,max:o}=t.settings.query;return e.local.hasExternalBaseObject?l:o}}),Reflect.defineProperty(e.local,"hasExternalBaseObject",{get(){return e.layer.baseObject.endsWith("__x")}}),Reflect.defineProperty(e.local,"hasPolymorphicBaseObject",{get(){return!!e.layer.baseObjectPolymorphicObject}}),Reflect.defineProperty(e.layer,"rowLimit",{enumerable:!0,get(){return e.local.rowLimit||(e.local.rowLimit=e.local.markerLimit),e.local.rowLimit},set(t){e.local.rowLimit=t}}),Reflect.defineProperty(e.metadata,"isMarkerLayer",{get(){return J.MARKER.equals(e.metadata.type)}}),Reflect.defineProperty(e.metadata,"isPolyline",{get(){return J.POLYLINE.equals(e.metadata.type)}}),Reflect.defineProperty(e.layer,"filters",{enumerable:!0,get(){return e.local.filters.filter(t=>t.fieldName!==null&&t.fieldName!=="").map(t=>({value:"",...t}))},set(t){e.local.filters=t}}),Reflect.defineProperty(e.layer,"activitySubfilters",{enumerable:!0,get(){const t=e.local.taskFilters.filter(o=>o.fieldName!==null&&o.fieldName!==""),l=e.local.eventFilters.filter(o=>o.fieldName!==null&&o.fieldName!=="");return[...t,...l]},set(t){t.length===0?(e.local.taskFilters=t,e.local.eventFilters=t):t.forEach(l=>{const{baseObject:o}=l;o==="Task"&&e.local.taskFilters.push(l),o==="Event"&&e.local.eventFilters.push(l)})}}),Reflect.defineProperty(e.layer,"crossFilters",{enumerable:!0,get(){return e.local.crossFilters.map((t,l)=>{const o=t.filters.filter(a=>a.fieldName!==null&&a.fieldName!=="");return{crossFieldName:null,index:l,indexLabel:l+1,...t,filters:o}}).filter(t=>t.crossObjectName)},set(t){const o=t.slice().map(a=>{const s={crossFilterLogicString:"",...a};return s.filters=s.filters.map((u,d)=>({...yt(e.layer.baseObject,d),...u})),s});t.length=0,o.forEach(a=>t.push(a)),e.local.crossFilters=t}})}const is=()=>{const e=ya({toasts:[],callouts:0,local:{baseObjectId:"",layerTypeOptions:"",baseObjectSettings:{},filters:[],crossFilters:[],eventFilters:[],taskFilters:[],rowLimit:0},metadata:{mode:Q.CREATE,type:J.MARKER,fields:[],customMarkerImageOptions:[],markerStyle:{fieldDataType:"",fieldLabel:"",shapeFieldDataType:"",shapeFieldLabel:"",colorPicklistOptions:[],shapePicklistOptions:[]},relatedObjects:[],crossObjects:[],crossObjectFields0:[],crossObjectFields1:[],taskFields:[],eventFields:[]},layer:{advancedOptions:{address:"",aggregateType:"",automaticassign:!1,defaultLiveTab:"live",defaultRenderArea:"EntireMap",defaultRenderMode:"Default",defaultTab:"info",distance:"",dynamicLabelTitleField:"",dynamicLabelTitleFieldType:"",enableHide:!1,enableLimit:!1,enableMapUpdates:!1,enableProxLimit:!1,heatmapDissipating:!0,heatmapGradient:[],heatmapMaxIntensity:"5",heatmapOpacity:"0.80",heatmapRadius:"15",heatmapWeightedValue:"None",layerTypeOptions:"",mapUpdateUnits:"min",markerLabelBackgroundColor:"#16325C",markerLabelTextColor:"#FFFFFF",markerShapeType:"dynamic",otherthreshold:".001",selectType:"MILES",markerShapeValue:null,updateEvery:"",waypointsBefore:"",waypointsAfter:"",isPolyline:!1},baseObject:"",relatedSObjectExists:!0,baseObjectName:"",baseObjectPlural:"",baseObjectAddressObject:"",baseObjectPolymorphicObject:"",colorAssignment:[],colorAssignmentType:W.UNIFORM,createdBy:"",createdDate:"",crossFilters:[],description:"",filterByActivity:{task:"all",event:"all",operator:"AND"},filterByOwner:"All",filterLogicString:"",filters:[],folderId:"",folderType:"",iconColor:"#46E71B:accessStandardPin",id:"",modifiedBy:"",modifiedDate:"",name:"",picklistField:"",proximityOptions:{affectVisibility:!0,border:"#16325C",enabled:!1,fill:"#3083D3",hideMarkers:!1,measurementType:"MILES",opacity:"0.60",radius:"15",selectType:"circle"},refreshInterval:"",relatedLists:[],rowOrder:"",rowOrderDirection:"asc",scopeFilterOptions:{},shapeAssignment:[],shapePicklistField:"",tooltip1:"",tooltip1Label:"",tooltip2:"",tooltip3:"",tooltip4:"",tooltip5:"",tooltip6:"",tooltip7:"",tooltip8:"",tooltip9:"",tooltip10:"",tooltip11:"",tooltip12:"",tooltip13:"",tooltip14:"",tooltip15:"",useFilterLogic:!1,layerType:""}});return e.setBaseObject=function(l){this.layer.baseObject=l.Name,this.layer.baseObjectName=l.Name__c,this.layer.baseObjectPlural=l.PluralLabel,this.local.baseObjectSettings=JSON.parse(l.Settings__c),this.layer.baseObjectAddressObject=l.AddressObject__c,this.layer.baseObjectPolymorphicObject=l.PolymorphicObject,this.layer.baseObjectId=l.Id},Br(e),e};const $r={name:"MarkerLayerBuilderDetails",components:{Modal:ps,Picklist:H,ScopedNotification:Ze,TextInput:Z},extends:D,validations(){return{baseObjectId:{required:C.withMessage(this.$Labels.MA_This_Field_Is_Required,z)},store:{layer:{name:{required:C.withMessage(this.$Labels.MA_A_NAME_IS_REQUIRED_TO_CONTINUE,z),maxLength:C.withMessage(this.$Labels.MA_Max_Length_80_Name,ms(80))}}}}},emits:["reset-store"],setup(){return{v$:K()}},data(){return{showConfirmChange:!1,baseObjectId:"",hasExternalObj:!1,hasPolymorphic:!1,coreBaseObjects:[],liveBaseObjects:[],cachedSelectedBaseObject:{}}},computed:{availableBaseOjects(){if(this.isEditMode)return[{Id:this.store.layer.baseObjectId,Name__c:this.store.layer.baseObjectName}];let e=this.store.metadata.type.equals(J.LIVE)?this.liveBaseObjects:this.coreBaseObjects;if(this.store.metadata.isPolyline){const t=[];this.coreBaseObjects.forEach(l=>{l.PolylineVertices__c&&(JSON.parse(l.PolylineVertices__c).vertices||[]).forEach(a=>{!t.includes(l)&&a&&a!==""&&t.push(l)})}),e=t}return e},isEditMode(){return!this.store.metadata.mode.equals(Q.CREATE)}},watch:{"store.layer.baseObjectId":{handler(e){this.baseObjectId=e,this.hasExternalObj=this.store.local.hasExternalBaseObject,this.hasPolymorphic=this.store.local.hasPolymorphicBaseObject},immediate:!0}},async created(){this.isEditMode||(await this.loadBaseObjects(),this.hasExternalObj=this.store.local.hasExternalBaseObject,this.hasPolymorphic=this.store.local.hasPolymorphicBaseObject)},methods:{getInstructions(){return this.store.metadata.isPolyline?this.$Labels.modal_MLB_option_polyline_header_help_text:this.$Labels.modal_MLB_option_ND_header_help_text},async loadBaseObjects(){try{this.store.callouts++;const{success:e,data:t,error:l,securityError:o,message:a}=await MAPS.Utils.Apex.invoke("maps.MarkerLayerBuilderController.getAvailableBaseObjects");o?this.showWarningToast(a):e?(this.coreBaseObjects=t.core,this.liveBaseObjects=t.live):this.showErrorToast(l.message)}catch{this.genericExceptionHandler(this.$Labels.Common_Refresh_And_Try_Again)}finally{this.store.callouts--}},validateBaseObjectChange(e){this.cachedSelectedBaseObject=e,this.store.layer.baseObjectId&&this.baseObjectId!==this.store.layer.baseObjectId?this.showConfirmChange=!0:this.store.setBaseObject(e)},async onConfirmBaseObjectChange(){this.$emit("reset-store",this.cachedSelectedBaseObject),this.showConfirmChange=!1},cancelBaseObjectSelection(){this.showConfirmChange=!1,this.baseObjectId=this.store.layer.baseObjectId}}},Fr={class:"slds-text-heading_medium"},Cr={class:"slds-text-title slds-m-top_xx-small slds-m-bottom_large"},Dr={class:"slds-text-heading_medium"},Rr={class:"slds-text-title slds-m-top_xx-small slds-m-bottom_large"};function Er(e,t,l,o,a,s){const u=c("TextInput"),d=c("LayoutItem"),b=c("Layout"),_=c("Picklist"),y=c("ScopedNotification"),g=c("Modal");return h(),k("div",null,[i(b,{vertical:""},{default:n(()=>[i(d,{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"},{default:n(()=>[v("h2",Fr,[v("b",null,M(e.$Labels.modal_MLB_option_ND_Name),1)]),v("div",Cr,M(s.getInstructions()),1),i(u,{modelValue:o.v$.store.layer.name.$model,"onUpdate:modelValue":t[0]||(t[0]=m=>o.v$.store.layer.name.$model=m),inputAttrs:{id:"mlbNameResource"},errors:e.$getErrorsByField(o.v$.store.layer.name),labels:{name:e.$Labels.modal_MLB_option_ND_input_Name},required:""},null,8,["modelValue","errors","labels"])]),_:1}),i(d,{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"},{default:n(()=>[i(u,{modelValue:e.store.layer.description,"onUpdate:modelValue":t[1]||(t[1]=m=>e.store.layer.description=m),inputAttrs:{id:"mlbDescResource"},labels:{name:e.$Labels.modal_MLB_option_ND_input_Description},useTextArea:""},null,8,["modelValue","labels"])]),_:1})]),_:1}),i(b,{vertical:"",class:"slds-m-top_large"},{default:n(()=>[i(d,{largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"},{default:n(()=>[v("h2",Dr,[v("b",null,M(e.$Labels.modal_MLB_option_BOF_section_BaseObject),1)]),v("div",Rr,M(e.store.metadata.isPolyline?e.$Labels.modal_MLB_option_BOF_section_BaseObject_polyline_description:e.$Labels.modal_MLB_option_BOF_section_BaseObject_description),1),i(_,{modelValue:o.v$.baseObjectId.$model,"onUpdate:modelValue":t[2]||(t[2]=m=>o.v$.baseObjectId.$model=m),inputAttrs:{id:"mlbBaseObjectOptionResource"},disabled:s.isEditMode,options:s.availableBaseOjects,labels:{name:e.$Labels.MA_Base_Object},errors:e.$getErrorsByField(o.v$.baseObjectId),detach:"",required:"",idKey:"Id",titleKey:"Name__c",onSelectedOption:s.validateBaseObjectChange},null,8,["modelValue","disabled","options","labels","errors","onSelectedOption"])]),_:1}),a.hasExternalObj||a.hasPolymorphic?(h(),L(d,{key:0,largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12",class:"slds-m-top_small"},{default:n(()=>[i(y,null,{content:n(()=>[v("p",null,M(a.hasExternalObj?e.$Labels.modal_MLB_External_Object_Notification:e.$Labels.BaseObject_PolymorphicMessage),1)]),_:1})]),_:1})):S("",!0)]),_:1}),a.showConfirmChange?(h(),L(g,{key:0,title:e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Change_header,size:"small",class:"modal-force-top",onClose:s.cancelBaseObjectSelection},{content:n(()=>[v("div",null,M(e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Confirm_text),1)]),footer:n(()=>[v("div",null,[v("button",{id:"mlbCancelBaseObjectBtnResource",class:"slds-button slds-button_neutral",onClick:t[3]||(t[3]=(...m)=>s.cancelBaseObjectSelection&&s.cancelBaseObjectSelection(...m))},M(e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Confirm_button_Cancel),1),v("button",{id:"mlbConfirmBaseObjectChangeBtnResource",class:"slds-button slds-button_brand",onClick:t[4]||(t[4]=(...m)=>s.onConfirmBaseObjectChange&&s.onConfirmBaseObjectChange(...m))},M(e.$Labels.modal_MLB_option_BOF_section_BaseObject_modal_Confirm_button_Change),1)])]),_:1},8,["title","onClose"])):S("",!0)])}const Vr=$($r,[["render",Er],["__scopeId","data-v-fde26a7d"]]),Ir={name:"ActivityFilters",components:{Button:ie,ExpandableSection:Ee,ObjectFieldFilteringConfig:tt,Picklist:H},extends:D,data(){return{metadataLoaded:!1,eventFields:[],taskFields:[],selectedTask:"",selectedEvent:"",selectedOperator:"",condition:[{id:"AND",title:this.$Labels.modal_MLB_Activity_Filter_Condition_Op_And},{id:"OR",title:this.$Labels.modal_MLB_Activity_Filter_Condition_Op_Or}],taskOperators:[{id:"with",title:this.$Labels.modal_MLB_Activity_Filter_With_Tasks},{id:"all",title:this.$Labels.modal_MLB_Activity_Filter_With_Or_Without_Tasks},{id:"without",title:this.$Labels.modal_MLB_Activity_Filter_Without_Tasks}],eventOperators:[{id:"with",title:this.$Labels.modal_MLB_Activity_Filter_With_Events},{id:"all",title:this.$Labels.modal_MLB_Activity_Filter_With_Or_Without_Events},{id:"without",title:this.$Labels.modal_MLB_Activity_Filter_Without_Events}]}},computed:{computedEventConditionSelected(){return this.selectedEvent!=="all"},computedTaskConditionSelected(){return this.selectedTask!=="all"},computedTaskEventConditionPicklistLabels(){return{name:`${this.$Labels.modal_MLB_Activity_Filter_Picklist_Label_Show} ${this.store.layer.baseObjectPlural}`,placeholder:this.$Labels.modal_MLB_Activity_Filter_Placeholder_Select}},computedCollapsedOnLoad(){return!this.computedTaskConditionSelected&&!this.computedEventConditionSelected},taskSelected:{get(){return this.selectedTask},set(e){this.store.layer.filterByActivity.task=e,this.selectedTask=e,this.computedCollapsedOnLoad,e==="all"&&(this.store.local.taskFilters=[])}},eventSelected:{get(){return this.selectedEvent},set(e){this.store.layer.filterByActivity.event=e,this.selectedEvent=e,this.computedCollapsedOnLoad,e==="all"&&(this.store.local.eventFilters=[])}},operatorSelected:{get(){return this.selectedOperator},set(e){this.store.layer.filterByActivity.operator=e,this.selectedOperator=e}}},created(){this.computedCollapsedOnLoad||(this.selectedTask=this.store.layer.filterByActivity.task,this.selectedEvent=this.store.layer.filterByActivity.event,this.selectedOperator=this.store.layer.filterByActivity.operator,this.loadMetadata())},methods:{onSectionExpand(){this.metadataLoaded||this.loadMetadata()},async loadMetadata(){try{this.store.callouts++;const[e=[],t=[]]=await Promise.all([ae({sobject:"Task",includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0}),ae({sobject:"Event",includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0})]);this.store.metadata.taskFields=Xe(e),this.store.metadata.eventFields=Xe(t)}catch(e){this.genericExceptionHandler(e)}finally{this.metadataLoaded=!0,this.store.callouts--}},resetActivityFilters(){this.store.layer.filterByActivity.event="all",this.store.layer.filterByActivity.operator="AND",this.store.layer.filterByActivity.task="all",this.store.layer.activitySubfilters=[],this.selectedTask=this.store.layer.filterByActivity.task,this.selectedEvent=this.store.layer.filterByActivity.event,this.selectedOperator=this.store.layer.filterByActivity.operator,this.$refs.section.collapse()}}};function Pr(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("Layout"),_=c("ObjectFieldFilteringConfig"),y=c("ExpandableSection"),g=c("Button");return h(),L(b,{class:"slds-box slds-m-vertical--small",style:{padding:"0.5rem 1rem"}},{default:n(()=>[i(d,{size:"12"},{default:n(()=>[i(b,null,{default:n(()=>[i(d,{size:"10"},{default:n(()=>[i(y,{ref:"section",disabled:e.store.local.hasExternalBaseObject,title:e.$Labels.modal_MLB_Activity_Filter_Title,collapsedOnLoad:s.computedCollapsedOnLoad,helpText:e.$Labels.MLB_Activity_Filters_Help_Text,transparent:"",onExpanded:s.onSectionExpand},{default:n(()=>[i(b,null,{default:n(()=>[i(d,{size:"4"},{default:n(()=>[i(u,{modelValue:s.taskSelected,"onUpdate:modelValue":t[0]||(t[0]=m=>s.taskSelected=m),inputAttrs:{id:"mlbTaskSelectedResource"},options:a.taskOperators,labels:s.computedTaskEventConditionPicklistLabels},null,8,["modelValue","options","labels"])]),_:1})]),_:1}),s.computedTaskConditionSelected?(h(),L(b,{key:0},{default:n(()=>[i(d,{size:"12",class:"slds-m-left_xx-large"},{default:n(()=>[a.metadataLoaded?(h(),L(_,{key:0,fields:e.store.metadata.taskFields,filters:e.store.local.taskFilters,noGutter:"",noLogic:"",disableDynamicVariables:"",baseObject:"Task"},null,8,["fields","filters"])):S("",!0)]),_:1})]),_:1})):S("",!0),i(b,null,{default:n(()=>[i(d,{size:"3",class:X({"slds-m-bottom_x-large":s.computedEventConditionSelected,"slds-m-top_x-large":s.computedTaskConditionSelected})},{default:n(()=>[i(u,{modelValue:s.operatorSelected,"onUpdate:modelValue":t[1]||(t[1]=m=>s.operatorSelected=m),inputAttrs:{id:"mlbConditionOptionResource"},options:a.condition,labels:{name:e.$Labels.modal_MLB_Activity_Filter_Label_Condition,placeholder:e.$Labels.modal_MLB_Activity_Filter_Placeholder_Select}},null,8,["modelValue","options","labels"])]),_:1},8,["class"])]),_:1}),i(b,null,{default:n(()=>[i(d,{size:"4"},{default:n(()=>[i(u,{modelValue:s.eventSelected,"onUpdate:modelValue":t[2]||(t[2]=m=>s.eventSelected=m),inputAttrs:{id:"mlbShowEventOptionResource"},options:a.eventOperators,labels:s.computedTaskEventConditionPicklistLabels},null,8,["modelValue","options","labels"])]),_:1})]),_:1}),s.computedEventConditionSelected?(h(),L(b,{key:1},{default:n(()=>[i(d,{size:"12",class:"slds-m-left_xx-large"},{default:n(()=>[a.metadataLoaded?(h(),L(_,{key:0,fields:e.store.metadata.eventFields,filters:e.store.local.eventFilters,noGutter:"",noLogic:"",disableDynamicVariables:"",baseObject:"Event"},null,8,["fields","filters"])):S("",!0)]),_:1})]),_:1})):S("",!0)]),_:1},8,["disabled","title","collapsedOnLoad","helpText","onExpanded"])]),_:1}),i(d,{size:"2",class:"slds-clearfix"},{default:n(()=>[i(g,{id:"mlbFilterResetBtnResource",label:e.$Labels.modal_MLB_ActivityFilters_Button_Reset,title:e.$Labels.modal_MLB_ActivityFilters_Button_Reset,class:"slds-m-top_x-small slds-m-right--x-small slds-float_right",onClick:s.resetActivityFilters},null,8,["label","title","onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}const wr=$(Ir,[["render",Pr]]),{MASystem:Nr}=window,Os={methods:{async getRelatedObjects(){if(Array.isArray(this.store.metadata.crossObjects)&&this.store.metadata.crossObjects.length===0){this.store.callouts++;try{const{data:e,error:t,success:l}=await MAPS.Utils.Apex.invoke("maps.MarkerLayerBuilderController.getRelatedsObjects",[this.store.layer.baseObject]);if(l){const{relatedLists:o=[],crossObjects:a=[]}=e;this.store.metadata.relatedObjects=o,this.store.metadata.crossObjects=a}else this.showErrorToast(t.message),console.error(e,t)}catch{this.genericExceptionHandler(Nr.Labels.Common_Refresh_And_Try_Again)}finally{this.store.callouts--}}}}};const xr={components:{ObjectFieldFilteringConfig:tt,Picklist:H,SLDSButton:ie,ExpandableSection:Ee},extends:D,mixins:[Os],data(){return{metadataLoaded:!1,operators:[{id:"with",title:this.$Labels.modal_MLB_CrossFilters_Picklist_Option_With},{id:"without",title:this.$Labels.modal_MLB_CrossFilters_Picklist_Option_Without}]}},async created(){this.store.local.crossFilters.length?this.initExistingFilters():this.addCrossFilter()},methods:{onSectionExpand(){this.metadataLoaded||this.getRelatedObjects()},addCrossFilter(){const e=this.store.local.crossFilters;e.push(this.buildDefaultCrossFilter()),this.store.local.crossFilters=[],this.store.local.crossFilters=e},buildDefaultCrossFilter(){return{id:V(),useCrossFilterLogic:!1,operator:"with",indexLabel:"0",index:this.store.local.crossFilters.length,filters:[],fieldName:"Id",crossBaseObject:"",crossObjectName:"",crossFilterLogicString:"",baseObject:this.store.layer.baseObject}},resetCrossFilter(e){this.store.local.crossFilters[e]={...this.buildDefaultCrossFilter(),index:e},this.store.metadata[`crossObjectFields${e}`]=[]},deleteCrossFilter(e){const t=this.store.local.crossFilters;t.splice(e,1),this.store.local.crossFilters=[],this.store.local.crossFilters=t,this.store.metadata[`crossObjectFields${e}`]=[]},async initExistingFilters(){await this.getRelatedObjects();const e=[];this.store.local.crossFilters.forEach(t=>{const{crossObjectName:l}=t,[o]=l.split("~~");t.crossBaseObject=o,e.push(ae({sobject:o,includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0}))});try{this.store.callouts++,(await Promise.all(e)).forEach((l,o)=>{this.store.metadata[`crossObjectFields${o}`].push(...l)})}catch{this.genericExceptionHandler(this.$Labels.Common_Refresh_And_Try_Again)}finally{this.store.callouts--}},async onCrossObjectSelect(e){try{this.store.callouts++;const[t]=this.store.local.crossFilters[e].crossObjectName.split("~~"),l=this.buildDefaultCrossFilter(),o={crossObjectName:this.store.local.crossFilters[e].crossObjectName,crossBaseObject:t};this.store.local.crossFilters[e]={...l,...o};const a=await ae({sobject:t,includeDedicatedLookupOptions:!0,excludeUnsupportedDisplayTypes:!0});this.store.metadata[`crossObjectFields${e}`].length=0,this.store.metadata[`crossObjectFields${e}`].push(...a)}catch(t){this.genericExceptionHandler(t)}finally{this.store.callouts--}}}};function Ur(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("ObjectFieldFilteringConfig"),_=c("Layout"),y=c("ExpandableSection"),g=c("SLDSButton");return h(),L(_,null,{default:n(()=>[i(d,{size:"12"},{default:n(()=>[(h(!0),k(Y,null,se(e.store.local.crossFilters,(m,A)=>(h(),L(_,{key:m.id,class:X(["slds-box",{"slds-m-top_small":A===1}])},{default:n(()=>[i(d,{size:"9",largeDeviceSize:"8",mediumDeviceSize:"6"},{default:n(()=>[i(y,{collapsedOnLoad:!m.filters.length&&!m.crossObjectName,transparent:"",title:e.$Labels.modal_MLB_CrossFilters_Label,helpText:e.$Labels.MLB_Cross_Filters_Set_Help_Text,onExpanded:s.onSectionExpand},{default:n(()=>[i(_,{multipleRows:""},{default:n(()=>[i(d,{size:"3"},{default:n(()=>[i(u,{modelValue:m.operator,"onUpdate:modelValue":B=>m.operator=B,inputAttrs:{id:"mlbCrossFilterWithOptionResource"},labels:{name:`${e.$Labels.modal_MLB_Cross_Object_Filter_Picklist_Label_Show} ${e.store.layer.baseObjectPlural}`,placeholder:e.$Labels.modal_MLB_Cross_Object_Filter_Placeholder_Select},options:a.operators},null,8,["modelValue","onUpdate:modelValue","labels","options"])]),_:2},1024),i(d,{size:"4",class:"slds-m-left_x-small"},{default:n(()=>[i(u,{modelValue:m.crossObjectName,"onUpdate:modelValue":B=>m.crossObjectName=B,inputAttrs:{id:"mlbCrossFilterSelectOptionResource"},labels:{name:e.$Labels.modal_MLB_Cross_Object_Filter_Picklist_Label,placeholder:e.$Labels.modal_MLB_Cross_Object_Filter_Placeholder_Select},options:e.store.metadata.crossObjects,onSelectedOption:B=>s.onCrossObjectSelect(A)},null,8,["modelValue","onUpdate:modelValue","labels","options","onSelectedOption"])]),_:2},1024),e.store.metadata[`crossObjectFields${A}`].length?(h(),L(d,{key:0,size:"12",class:"slds-m-top_large"},{default:n(()=>[i(b,{filterLogic:m.crossFilterLogicString,"onUpdate:filterLogic":B=>m.crossFilterLogicString=B,useFilterLogic:m.useCrossFilterLogic,"onUpdate:useFilterLogic":B=>m.useCrossFilterLogic=B,fields:e.store.metadata[`crossObjectFields${A}`],filters:m.filters,baseObject:m.crossBaseObject},null,8,["filterLogic","onUpdate:filterLogic","useFilterLogic","onUpdate:useFilterLogic","fields","filters","baseObject"])]),_:2},1024)):S("",!0)]),_:2},1024)]),_:2},1032,["collapsedOnLoad","title","helpText","onExpanded"])]),_:2},1024),i(d,{size:"3",largeDeviceSize:"4",mediumDeviceSize:"6",class:"slds-clearfix"},{default:n(()=>[i(g,{id:"mlbCrossFilterDeleteBtnResource",label:e.$Labels.modal_MLB_CrossFilters_Button_Delete,title:e.$Labels.modal_MLB_CrossFilters_Button_Delete,disabled:A===0,class:"slds-m-top_x-small slds-float_right",onClick:B=>s.deleteCrossFilter(A)},null,8,["label","title","disabled","onClick"]),i(g,{id:"mlbCrossFilterResetBtnResource",label:e.$Labels.modal_MLB_CrossFilters_Button_Reset,title:e.$Labels.modal_MLB_CrossFilters_Button_Reset,class:"slds-m-top_x-small slds-m-right--x-small slds-float_right",onClick:B=>s.resetCrossFilter(A)},null,8,["label","title","onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128)),e.store.local.crossFilters.length!==2?(h(),L(g,{key:0,id:"mlbCrossFilterAddBtnResource",variant:"neutral",iconCategory:"utility",iconName:"add",class:"slds-m-top_small",label:e.$Labels.modal_MLB_CrossFilters_Button_Add,title:e.$Labels.modal_MLB_CrossFilters_Button_Add,onClick:s.addCrossFilter},null,8,["label","title","onClick"])):S("",!0)]),_:1})]),_:1})}const jr=$(xr,[["render",Ur],["__scopeId","data-v-dfa034c2"]]),Gr={components:{SLDSButton:ie,ExpandableSection:Ee,ObjectFieldFilteringConfig:tt,ScopedNotification:Ze},extends:D,computed:{computedDisableFilterLogic(){return this.store.local.filters.some(e=>e.parentFieldName&&this.store.layer.baseObjectPolymorphicObject&&e.fieldName===this.store.layer.baseObjectAddressObject)}},watch:{computedDisableFilterLogic(e){e&&(this.$refs.filter.setMode(oe.ALL),this.store.layer.useFilterLogic=!1)}},methods:{resetFilters(){this.$refs.filter.reset()},filterUnsupportedFields:Xe}};function zr(e,t,l,o,a,s){const u=c("ScopedNotification"),d=c("ObjectFieldFilteringConfig"),b=c("ExpandableSection"),_=c("LayoutItem"),y=c("SLDSButton"),g=c("Layout");return h(),L(g,{multipleRows:"",class:"slds-box slds-m-top_xx-small",style:{"padding-top":"0.5rem"}},{default:n(()=>[i(_,{size:"10"},{default:n(()=>[i(b,{title:e.$Labels.modal_MLB_Filters_Field_Expression_Title,helpText:e.$Labels.MLB_Field_Filters_Help_Text,disabled:"",transparent:""},{default:n(()=>[s.computedDisableFilterLogic?(h(),L(u,{key:0,class:"slds-m-bottom_small"},{content:n(()=>[v("p",null,M(e.$Labels.modal_MLB_Hide_Filter_Config_Notification),1)]),_:1})):S("",!0),i(d,{ref:"filter",filterLogic:e.store.layer.filterLogicString,"onUpdate:filterLogic":t[0]||(t[0]=m=>e.store.layer.filterLogicString=m),useFilterLogic:e.store.layer.useFilterLogic,"onUpdate:useFilterLogic":t[1]||(t[1]=m=>e.store.layer.useFilterLogic=m),fields:s.filterUnsupportedFields(e.store.metadata.fields),filters:e.store.local.filters,baseObject:e.store.layer.baseObject,disableLogic:s.computedDisableFilterLogic},null,8,["filterLogic","useFilterLogic","fields","filters","baseObject","disableLogic"])]),_:1},8,["title","helpText"])]),_:1}),i(_,{size:"2",class:"slds-clearfix"},{default:n(()=>[i(y,{id:"mlbFieldResetBtnResource",label:e.$Labels.modal_MLB_Filters_Button_Reset,title:e.$Labels.modal_MLB_Filters_Button_Reset,class:"slds-m-top_x-small slds-m-right--x-small slds-float_right",onClick:$e(s.resetFilters,["stop"])},null,8,["label","title","onClick"])]),_:1})]),_:1})}const Hr=$(Gr,[["render",zr]]),Ts=":",qr=e=>e?e.split(Ts):[],Yr=e=>e.join(Ts),Kr={name:"ScopeFilter",components:{Picklist:H},extends:D,data(){return{filterByOwnerValues:[],userIdOptions:[{id:"UserId",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_UserIds_CurrentUserId}`},{id:"DirectReportIds",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_UserIds_Current_Direct}`},{id:"SubordinateIds",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_UserIds_CurrentUser_Subordinate}`}]}},computed:{filterOptions(){const e=[{id:"All",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_All.replace("{0}",this.store.layer.baseObjectPlural)}`},{id:"My",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_My.replace("{0}",this.store.layer.baseObjectPlural)}`},{id:"Team",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_MyTeams.replace("{0}",this.store.layer.baseObjectPlural)}`}];return this.store.local.baseObjectSettings.MyTerritoryScope&&e.push({id:"MINE",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_MyTerritories.replace("{0}",this.store.layer.baseObjectPlural)}`}),this.store.local.baseObjectSettings.MyTerritoryTeamScope&&e.push({id:"MYTEAM",title:`${this.$Labels.modal_MLB_Scope_Filter_picklist_option_CreateFilters_MyTerritoryTeam.replace("{0}",this.store.layer.baseObjectPlural)}`}),e},showAdditionalFilters(){return this.filterByOwnerValues[0]==="My"},dynamicIdFields(){return this.store.metadata.fields.filter(e=>e.referenceSObjects&&(e.referenceSObjects.includes("User")||e.referenceSObjects.includes("Group"))&&!e.isLookup)}},created(){this.filterByOwnerValues=qr(this.store.layer.filterByOwner)},methods:{updateFilterByOwner(){this.showAdditionalFilters?(this.filterByOwnerValues[1]||(this.filterByOwnerValues[1]="UserId"),this.filterByOwnerValues[2]||(this.filterByOwnerValues[2]=this.dynamicIdFields[0].apiName)):this.filterByOwnerValues.splice(1,2),this.store.layer.filterByOwner=Yr(this.filterByOwnerValues)}}};function Wr(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("Layout");return h(),L(b,{multipleRows:"",class:"slds-m-top_medium"},{default:n(()=>[i(d,{size:"4"},{default:n(()=>[i(b,{multipleRows:""},{default:n(()=>[i(d,{size:"6"},{default:n(()=>[i(u,{modelValue:a.filterByOwnerValues[0],"onUpdate:modelValue":t[0]||(t[0]=_=>a.filterByOwnerValues[0]=_),inputAttrs:{id:"mlbCreateFilterByOptionResource"},labels:{name:e.$Labels.modal_MLB_Scope_Filter_Create_Filters_Picklist},options:s.filterOptions,readonly:e.store.local.hasExternalBaseObject,onSelectedOption:s.updateFilterByOwner},null,8,["modelValue","labels","options","readonly","onSelectedOption"])]),_:1})]),_:1}),s.showAdditionalFilters?(h(),L(b,{key:0,multipleRows:""},{default:n(()=>[i(d,{size:"6",class:"slds-p-top_xx-small slds-p-right_small"},{default:n(()=>[i(u,{modelValue:a.filterByOwnerValues[1],"onUpdate:modelValue":t[1]||(t[1]=_=>a.filterByOwnerValues[1]=_),inputAttrs:{id:"mlbAdditionalFilterOptionResource"},options:a.userIdOptions,labels:{name:e.$Labels.modal_MLB_Scope_Filter_User_IDS_Included_Picklist},onSelectedOption:s.updateFilterByOwner},null,8,["modelValue","options","labels","onSelectedOption"])]),_:1}),i(d,{size:"6",class:"slds-p-top_xx-small"},{default:n(()=>[i(u,{modelValue:a.filterByOwnerValues[2],"onUpdate:modelValue":t[2]||(t[2]=_=>a.filterByOwnerValues[2]=_),inputAttrs:{id:"mlbScopeFilterOptionResource"},options:s.dynamicIdFields,labels:{name:e.$Labels.modal_MLB_Scope_Filter_ID_Field},idKey:"apiName",titleKey:"label",onSelectedOption:s.updateFilterByOwner},null,8,["modelValue","options","labels","onSelectedOption"])]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1})}const Xr=$(Kr,[["render",Wr]]),Qr={name:"MarkerLayerBuilderFilters",components:{ActivityFilters:wr,CrossFilters:jr,FieldFilters:Hr,ScopeFilter:Xr,ScopedNotification:Ze},extends:D},Jr={class:"slds-text-heading_medium"},Zr={class:"slds-text-title slds-m-top_xx-small"};function en(e,t,l,o,a,s){const u=c("ScopedNotification"),d=c("LayoutItem"),b=c("Layout"),_=c("ScopeFilter"),y=c("FieldFilters"),g=c("ActivityFilters"),m=c("CrossFilters");return h(),k("div",null,[v("h2",Jr,[v("b",null,M(e.$Labels.modal_MLB_Filters_Title),1)]),v("div",Zr,M(e.store.metadata.isPolyline?e.$Labels.modal_MLB_Polyline_Filters_Description:e.$Labels.modal_MLB_Filters_Description),1),i(b,{vertical:"",class:"slds-m-top_medium"},{default:n(()=>[e.store.local.hasExternalBaseObject||e.store.local.hasPolymorphicBaseObject?(h(),L(d,{key:0,largeDeviceSize:"6",mediumDeviceSize:"8",smallDeviceSize:"10",size:"12"},{default:n(()=>[i(u,null,{content:n(()=>[v("p",null,M(e.store.local.hasExternalBaseObject?e.$Labels.modal_MLB_External_Object_Notification:e.$Labels.BaseObject_PolymorphicMessage),1)]),_:1})]),_:1})):S("",!0)]),_:1}),i(_),i(y),i(g),i(m)])}const tn=$(Qr,[["render",en]]),sn={name:"MapUpdates",components:{Card:gt,Checkbox:ye,TextInput:Z,Picklist:H},extends:D,validations(){const e={store:{layer:{advancedOptions:{updateEvery:{}}}}};return this.updatesEnabled&&(e.store.layer.advancedOptions.updateEvery={minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))}),e},setup(){return{v$:K()}},data(){return{isLoading:!1,updatesEnabled:!1,unitSelected:"",unitOptions:[{id:"sec",title:this.$Labels.modal_MLB_option_MapUpdates_dropdown_sec_option},{id:"min",title:this.$Labels.modal_MLB_option_MapUpdates_dropdown_min_option}]}},computed:{updatesEnabledCom:{get(){return this.updatesEnabled},set(e){this.store.layer.advancedOptions.enableMapUpdates=e,this.updatesEnabled=e}},selectedUnit:{get(){return this.unitSelected},set(e){this.unitSelected=e,this.store.layer.advancedOptions.mapUpdateUnits=e}}},created(){this.updatesEnabled=this.store.layer.advancedOptions.enableMapUpdates,this.unitSelected=this.store.layer.advancedOptions.mapUpdateUnits}},ln={class:"slds-p-left_medium slds-p-right_medium slds-grow-none"};function an(e,t,l,o,a,s){const u=c("Checkbox"),d=c("TextInput"),b=c("LayoutItem"),_=c("Picklist"),y=c("Layout"),g=c("Card");return h(),L(g,{title:e.$Labels.modal_MLB_option_MapUpdates_card_label,class:"slds-p-around_x-small",style:{"box-shadow":"none"}},{body:n(()=>[v("div",ln,[i(u,{modelValue:s.updatesEnabledCom,"onUpdate:modelValue":t[0]||(t[0]=m=>s.updatesEnabledCom=m),inputAttrs:{id:"mlbTurnOnUpdateChxResource"},labels:{name:e.$Labels.modal_MLB_option_MapUpdates_checkbox_label}},null,8,["modelValue","labels"]),i(y,{multipleRows:""},{default:n(()=>[i(b,{class:"slds-m-right_medium slds-col slds-grow-none"},{default:n(()=>[i(d,{modelValue:o.v$.store.layer.advancedOptions.updateEvery.$model,"onUpdate:modelValue":t[1]||(t[1]=m=>o.v$.store.layer.advancedOptions.updateEvery.$model=m),inputAttrs:{id:"mlbUpdateEveryResource"},labels:{name:e.$Labels.modal_MLB_option_MapUpdates_numerical_input_option},disabled:!s.updatesEnabledCom,errors:e.$getErrorsByField(o.v$.store.layer.advancedOptions.updateEvery)},null,8,["modelValue","labels","disabled","errors"])]),_:1}),i(b,{class:"slds-grow-none slds-col"},{default:n(()=>[i(_,{modelValue:s.selectedUnit,"onUpdate:modelValue":t[2]||(t[2]=m=>s.selectedUnit=m),inputAttrs:{id:"mlbUnitsOptionResource"},labels:{name:e.$Labels.modal_MLB_option_MapUpdates_dropdown_unit_of_measurement_option},options:a.unitOptions,disabled:!s.updatesEnabledCom},null,8,["modelValue","labels","options","disabled"])]),_:1})]),_:1})])]),_:1},8,["title"])}const on=$(sn,[["render",an]]),rn={lastReport:[{id:"all",title:MASystem.Labels.modal_MLB_Live_Last_Report_DateTime_All},{id:"today",title:MASystem.Labels.modal_MLB_DateTime_Literal_Today},{id:"yesterday",title:MASystem.Labels.modal_MLB_DateTime_Literal_Yesterday},{id:"date",title:MASystem.Labels.modal_MLB_Live_dropdown_date_range_option},{id:"duration",title:MASystem.Labels.modal_MLB_Live_dropdown_time_option}],relationOptions:[{value:"in",label:MASystem.Labels.modal_MLB_Live_radio_live_device_reported_within},{value:"not_in",label:MASystem.Labels.modal_MLB_Live_radio_live_device_not_reported_within}],timeMeasurements:[{id:"hours",title:MASystem.Labels.modal_MLB_Live_dropdown_hours_option},{id:"minutes",title:MASystem.Labels.modal_MLB_option_MapUpdates_dropdown_min_option}]};const Je="M/D/YYYY",os=()=>({live:{filterByLastReportDateAndTime:{dateTime:[{dateTimeRange:"all",fromDate:window.moment(),toDate:window.moment(),dateInputFormat:Je,dateTimeRelation:"in",timeUnits:"hours",duration:1}]}}}),rs=e=>{let t=window.moment(e,Je);return t.isValid()||(t=window.moment()),t},nn={name:"LiveReportDateTime",components:{DatePicker:hs,Picklist:H,RadioGroup:_s,TextInput:Z},extends:D,validations(){const e={lastReportData:{live:{filterByLastReportDateAndTime:{dateTime:[{duration:{},fromDate:{},toDate:{}}]}}}},t=this.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange;return t==="duration"?e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].duration={required:C.withMessage(MAPS.app.config.globalProperties.$Labels.MA_Field_Req,z),minIntegerValue:C.withMessage(MASystem.Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))}:t==="date"&&(e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].fromDate={required:C.withMessage(MAPS.app.config.globalProperties.$Labels.MA_Field_Req,z),maxFromDate:C.withMessage(MASystem.Labels.modal_MLB_Live_Last_Report_Date_StartDate_not_greater_than_today,l=>t==="date"&&window.moment(l).isSameOrBefore(window.moment())),maxFromDateBeforeEnd:C.withMessage(MASystem.Labels.modal_MLB_Live_Last_Report_Date_StartDate_after_End_Date,l=>t==="date"&&window.moment(l).isSameOrBefore(window.moment(this.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].toDate.$model)))},e.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].toDate={required:C.withMessage(MAPS.app.config.globalProperties.$Labels.MA_Field_Req,z),minToDate:C.withMessage(MASystem.Labels.modal_MLB_Live_Last_Report_Date_EndDate_before_Start_Date,l=>t==="date"&&window.moment(l).isSameOrAfter(window.moment(this.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].fromDate.$model))),maxToDate:C.withMessage(MASystem.Labels.modal_MLB_Live_Last_Report_Date_EndDate_not_greater_than_today,l=>t==="date"&&window.moment(l).isSameOrBefore(window.moment()))}),e},setup(){return{v$:K()}},data(){return{liveOptions:rn,dateFormat:MAPS.currentUser.dateFormat.toUpperCase(),lastReportData:os(),firstDayOfWeek:MAPS.currentUser.StartOfWeekIndex,userLocale:MAPS.currentUser.Locale.replace("sh_ME_USD","sh-ME").replace("_","-").slice(0,5)}},created(){if(this.store.layer.advancedOptions.layerTypeOptions){const{dateTime:e}=this.store.layer.advancedOptions.layerTypeOptions.live.filterByLastReportDateAndTime;this.lastReportData.live.filterByLastReportDateAndTime.dateTime=[{...e[0],fromDate:rs(e[0].fromDate),toDate:rs(e[0].toDate)}]}else this.store.layer.advancedOptions.layerTypeOptions=os(),this.updateStoreValue()},mounted(){this.v$.$touch()},methods:{$getErrorsByField(e){return e.$touch(),e.$errors.length?[e.$errors[0].$message]:[]},resetValid(e){this.v$.$reset(),e==="date"&&(this.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].fromDate.$touch(),this.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].toDate.$touch()),e==="duration"&&this.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].duration.$touch()},updateStoreValue(){const{dateTime:e}=this.lastReportData.live.filterByLastReportDateAndTime;this.store.layer.advancedOptions.layerTypeOptions.live.filterByLastReportDateAndTime.dateTime=[{...e[0],fromDate:window.moment(e[0].fromDate).format(Je),toDate:window.moment(e[0].toDate).format(Je)}]}}};function dn(e,t,l,o,a,s){const u=c("Picklist"),d=c("DatePicker"),b=c("LayoutItem"),_=c("Layout"),y=c("RadioGroup"),g=c("TextInput");return h(),k("div",null,[i(u,{modelValue:a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange,"onUpdate:modelValue":t[0]||(t[0]=m=>a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange=m),inputAttrs:{id:"mlbLastReportDateOptionResource"},labels:{name:e.$Labels.modal_MLB_Live_picklist_last_report_date},options:a.liveOptions.lastReport,style:{width:"15rem"},onSelectedOption:s.updateStoreValue,onChanged:s.resetValid},null,8,["modelValue","labels","options","onSelectedOption","onChanged"]),a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange==="date"?(h(),L(_,{key:0},{default:n(()=>[i(b,{class:"slds-m-right_large"},{default:n(()=>[i(d,{modelValue:o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].fromDate.$model,"onUpdate:modelValue":[t[1]||(t[1]=m=>o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].fromDate.$model=m),s.updateStoreValue],dateFormat:a.dateFormat,labels:{name:e.$Labels.modal_MLB_DateTime_Date_Component_Start_Label},errors:s.$getErrorsByField(o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].fromDate),firstDayOfWeek:a.firstDayOfWeek,locale:a.userLocale,numYearsInPast:1,numYearsInFuture:0,class:"normalizeWidth",detach:""},null,8,["modelValue","dateFormat","labels","errors","firstDayOfWeek","locale","onUpdate:modelValue"])]),_:1}),i(b,null,{default:n(()=>[i(d,{modelValue:o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].toDate.$model,"onUpdate:modelValue":[t[2]||(t[2]=m=>o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].toDate.$model=m),s.updateStoreValue],dateFormat:a.dateFormat,labels:{name:e.$Labels.modal_MLB_DateTime_Date_Component_End_Label},errors:s.$getErrorsByField(o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].toDate),firstDayOfWeek:a.firstDayOfWeek,locale:a.userLocale,numYearsInPast:1,numYearsInFuture:0,class:"normalizeWidth",detach:""},null,8,["modelValue","dateFormat","labels","errors","firstDayOfWeek","locale","onUpdate:modelValue"])]),_:1})]),_:1})):S("",!0),a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRange==="duration"?(h(),k(Y,{key:1},[i(y,{modelValue:a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRelation,"onUpdate:modelValue":[t[3]||(t[3]=m=>a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].dateTimeRelation=m),s.updateStoreValue],labels:{name:e.$Labels.modal_MLB_Live_radio_live_device_reported_status},options:a.liveOptions.relationOptions},null,8,["modelValue","labels","options","onUpdate:modelValue"]),i(_,null,{default:n(()=>[i(b,{class:"slds-m-right_medium"},{default:n(()=>[i(g,{modelValue:o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].duration.$model,"onUpdate:modelValue":[t[4]||(t[4]=m=>o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].duration.$model=m),s.updateStoreValue],inputAttrs:{id:"mlbLiveUnitFieldResource"},labels:{name:e.$Labels.modal_MLB_Live_picklist_unit_field},errors:s.$getErrorsByField(o.v$.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].duration),type:"number",style:{width:"6rem"}},null,8,["modelValue","labels","errors","onUpdate:modelValue"])]),_:1}),i(b,null,{default:n(()=>[i(u,{modelValue:a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].timeUnits,"onUpdate:modelValue":t[5]||(t[5]=m=>a.lastReportData.live.filterByLastReportDateAndTime.dateTime[0].timeUnits=m),inputAttrs:{id:"mlbTimeMeasurementsOptionResource"},options:a.liveOptions.timeMeasurements,labels:{name:e.$Labels.modal_MLB_Live_picklist_time_measure},resizeToFitContent:"",onSelectedOption:s.updateStoreValue},null,8,["modelValue","options","labels","onSelectedOption"])]),_:1})]),_:1})],64)):S("",!0)])}const cn=$(nn,[["render",dn],["__scopeId","data-v-70b8c568"]]),un={name:"MLBGeneral",components:{Checkbox:ye,TextInput:Z,Picklist:H,LiveReportDateTime:cn},extends:D,validations(){const e={store:{layer:{advancedOptions:{waypointsBefore:{},waypointsAfter:{}}}}};return this.enableHide&&(e.store.layer.advancedOptions={waypointsBefore:{minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))},waypointsAfter:{minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))}}),e},setup(){return{v$:K()}},data(){return{isLoading:!1,defaultTabSelected:"",defaultLiveTabSelected:"",renderModeSelected:"",renderAreaSelected:"",enableHide:!1,tooltipOptions:[{id:"info",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_info},{id:"actions",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_actions},{id:"chatter",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_chatter},{id:"MarkerLayerRelatedList",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_related_lists},{id:"weather",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_weather}],liveTooltipOptions:[{id:"live",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_live},{id:"history",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_history},{id:"info",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_info},{id:"actions",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_actions},{id:"chatter",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_chatter},{id:"MarkerLayerRelatedList",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_related_lists},{id:"weather",title:this.$Labels.modal_MLB_option_General_tooltip_default_picklist_weather}],renderModeOptions:[{id:"Default",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_default},{id:"Markers",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_markers},{id:"Heatmap",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_heatmap},{id:"Cluster",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_clusters},{id:"Scatter",title:this.$Labels.modal_MLB_option_General_picklist_default_render_mode_scatter}],renderAreaOptions:[{id:"EntireMap",title:this.$Labels.modal_MLB_option_General_picklist_default_render_area_entire_map},{id:"VisibleArea",title:this.$Labels.modal_MLB_option_General_picklist_default_render_area_in_visible_area}]}},computed:{selectedDefaultTab:{get(){return this.defaultTabSelected},set(e){this.store.layer.advancedOptions.defaultTab=e,this.defaultTabSelected=e}},selectedDefaultLiveTab:{get(){return this.defaultLiveTabSelected},set(e){this.store.layer.advancedOptions.defaultLiveTab=e,this.defaultLiveTabSelected=e}},selectedRenderMode:{get(){return this.renderModeSelected},set(e){this.renderModeSelected=e,this.store.layer.advancedOptions.defaultRenderMode=e}},selectedRenderArea:{get(){return this.renderAreaSelected},set(e){this.renderAreaSelected=e,this.store.layer.advancedOptions.defaultRenderArea=e}},enableHideCom:{get(){return this.enableHide},set(e){this.enableHide=e,this.store.layer.advancedOptions.enableHide=e}}},created(){this.defaultLiveTabSelected=this.store.layer.advancedOptions.defaultLiveTab,this.defaultTabSelected=this.store.layer.advancedOptions.defaultTab||"info",this.enableHide=this.store.layer.advancedOptions.enableHide,this.renderModeSelected=this.store.layer.advancedOptions.defaultRenderMode,this.renderAreaSelected=this.store.layer.advancedOptions.defaultRenderArea}},pn={class:"slds-m-around_large slds-grow-none"};function mn(e,t,l,o,a,s){const u=c("Picklist"),d=c("Checkbox"),b=c("TextInput"),_=c("LayoutItem"),y=c("Layout"),g=c("LiveReportDateTime");return h(),k("div",pn,[e.store.metadata.isMarkerLayer||e.store.metadata.isPolyline?(h(),L(u,{key:0,modelValue:s.selectedDefaultTab,"onUpdate:modelValue":t[0]||(t[0]=m=>s.selectedDefaultTab=m),inputAttrs:{id:"mlbTooltipOptionResource"},labels:{name:e.$Labels.modal_MLB_option_General_dropdown_label_tooltip_default_tab},options:a.tooltipOptions,style:{width:"15rem"}},null,8,["modelValue","labels","options"])):(h(),L(u,{key:1,modelValue:s.selectedDefaultLiveTab,"onUpdate:modelValue":t[1]||(t[1]=m=>s.selectedDefaultLiveTab=m),inputAttrs:{id:"mlbTooltipDefaultOptionResource"},labels:{name:e.$Labels.modal_MLB_option_General_dropdown_label_tooltip_default_tab},options:a.liveTooltipOptions,style:{width:"15rem"}},null,8,["modelValue","labels","options"])),e.store.metadata.isMarkerLayer?(h(),L(d,{key:2,modelValue:s.enableHideCom,"onUpdate:modelValue":t[2]||(t[2]=m=>s.enableHideCom=m),inputAttrs:{id:"mlbHideRoutedMarkerChxResource"},labels:{name:e.$Labels.modal_MLB_option_General_checkbox_option_hide_markers_outside_window},style:{"padding-top":"0.5rem"}},null,8,["modelValue","labels"])):S("",!0),e.store.metadata.isPolyline?(h(),L(d,{key:3,modelValue:s.enableHideCom,"onUpdate:modelValue":t[3]||(t[3]=m=>s.enableHideCom=m),inputAttrs:{id:"mlbHideRoutedPolylineChxResource"},labels:{name:e.$Labels.modal_MLB_option_General_checkbox_option_hide_polylines_outside_window},style:{"padding-top":"0.5rem"}},null,8,["modelValue","labels"])):S("",!0),e.store.metadata.isMarkerLayer||e.store.metadata.isPolyline?(h(),L(y,{key:4,multipleRows:"",class:"slds-grow-none"},{default:n(()=>[i(_,{class:"slds-p-right_large slds-col slds-grow-none"},{default:n(()=>[i(b,{modelValue:o.v$.store.layer.advancedOptions.waypointsBefore.$model,"onUpdate:modelValue":t[4]||(t[4]=m=>o.v$.store.layer.advancedOptions.waypointsBefore.$model=m),inputAttrs:{id:"mlbDaysBeforeResource"},disabled:!s.enableHideCom,errors:e.$getErrorsByField(o.v$.store.layer.advancedOptions.waypointsBefore),labels:{name:e.$Labels.modal_MLB_option_General_numerical_input_days_before}},null,8,["modelValue","disabled","errors","labels"])]),_:1}),i(_,{class:"slds-col slds-grow-none"},{default:n(()=>[i(b,{modelValue:o.v$.store.layer.advancedOptions.waypointsAfter.$model,"onUpdate:modelValue":t[5]||(t[5]=m=>o.v$.store.layer.advancedOptions.waypointsAfter.$model=m),inputAttrs:{id:"mlbDaysAfterResource"},disabled:!s.enableHideCom,errors:e.$getErrorsByField(o.v$.store.layer.advancedOptions.waypointsAfter),labels:{name:e.$Labels.modal_MLB_option_General_numerical_input_days_after}},null,8,["modelValue","disabled","errors","labels"])]),_:1})]),_:1})):S("",!0),e.store.metadata.isMarkerLayer?(h(),L(u,{key:5,modelValue:s.selectedRenderMode,"onUpdate:modelValue":t[6]||(t[6]=m=>s.selectedRenderMode=m),inputAttrs:{id:"mlbDefaultRenderModeOptionResource"},labels:{name:e.$Labels.modal_MLB_option_General_picklist_default_render_mode},options:a.renderModeOptions,style:{width:"15rem"}},null,8,["modelValue","labels","options"])):S("",!0),i(u,{modelValue:s.selectedRenderArea,"onUpdate:modelValue":t[7]||(t[7]=m=>s.selectedRenderArea=m),inputAttrs:{id:"mlbDefaultRenderAreaOptionResource"},labels:{name:e.$Labels.modal_MLB_option_General_picklist_default_render_area},options:a.renderAreaOptions,style:{width:"15rem"}},null,8,["modelValue","labels","options"]),!e.store.metadata.isMarkerLayer&&!e.store.metadata.isPolyline?(h(),L(g,{key:6})):S("",!0)])}const _n=$(un,[["render",mn]]),hn={name:"MarkerLimits",components:{Card:gt,Checkbox:ye,TextInput:Z,Picklist:H},extends:D,validations(){const e={searchTerm:{},store:{layer:{rowLimit:{},advancedOptions:{distance:{}}}}};return this.enableLimit&&(e.store.layer.rowLimit={maxValue:C.withMessage(this.computedLabels.maxValue,Aa(this.store.local.markerLimit)),minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))}),this.enableProximityLimit&&(e.searchTerm={required:C.withMessage(this.$Labels.modal_MLB_option_MarkerLimits_proximity_center_address_empty_error,z)},e.store.layer.advancedOptions.distance={minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))}),e},setup(){return{v$:K()}},data(){return{isLoading:!1,enableLimit:!1,enableProximityLimit:!1,selectedUnit:"",distanceOptions:[{id:"MILES",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_miles},{id:"METERS",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_meters},{id:"YARDS",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_yards},{id:"KM",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_kilometers},{id:"FEET",title:this.$Labels.modal_MLB_option_MarkerLimits_picklist_distance_units_option_feet}],searchTerm:"",proximityOptions:[{options:async e=>fa({term:e,excludeType:"query"})}]}},computed:{computedLabels(){return this.store.metadata.isPolyline?{cardLabel:this.$Labels.modal_MLB_option_PolylineLimits_card_label,rowLimit:this.$Labels.modal_MLB_option_PolylineLimits_numerical_input_max_polylines,limitCheckbox:this.$Labels.modal_MLB_option_PolylineLimits_checkbox_option_limit_polylines_on_map,maxValue:this.$Labels.Marker_Limits_Max_Polyline_Valid_Number.replace("{0}",this.store.local.markerLimit)}:{cardLabel:this.$Labels.modal_MLB_option_MarkerLimits_card_label,rowLimit:this.$Labels.modal_MLB_option_MarkerLimits_numerical_input_max_markers,limitCheckbox:this.$Labels.modal_MLB_option_MarkerLimits_checkbox_option_limit_markers_on_map,maxValue:this.$Labels.Marker_Limits_Max_Marker_Valid_Number.replace("{0}",this.store.local.markerLimit)}},unitSelected:{get(){return this.selectedUnit},set(e){this.selectedUnit=e,this.store.layer.advancedOptions.selectType=e}},enableLimitCom:{get(){return this.enableLimit},set(e){this.enableLimit=e,this.store.layer.advancedOptions.enableLimit=e}},enableProximityLimitCom:{get(){return this.enableProximityLimit},set(e){this.enableProximityLimit=e,this.store.layer.advancedOptions.enableProxLimit=e}}},created(){this.searchTerm=this.store.layer.advancedOptions.address,this.enableLimit=this.store.layer.advancedOptions.enableLimit,this.enableProximityLimit=this.store.layer.advancedOptions.enableProxLimit,this.selectedUnit=this.store.layer.advancedOptions.selectType,this.store.metadata.isPolyline&&!this.store.layer.rowLimit&&(this.store.layer.rowLimit=100)},methods:{async selected(e){const{poi:t}=e;this.searchTerm=e.longTitle,this.store.layer.advancedOptions.address=t.addressLabelFormatted,this.store.layer.advancedOptions.distanceLat=t.position.lat,this.store.layer.advancedOptions.distanceLong=t.position.lng},clearSearch(){this.searchTerm="",this.store.layer.advancedOptions.address="",this.store.layer.advancedOptions.distanceLat="",this.store.layer.advancedOptions.distanceLong="",this.store.layer.advancedOptions.distanceMinLat="",this.store.layer.advancedOptions.distanceMaxLat="",this.store.layer.advancedOptions.distanceMinLong="",this.store.layer.advancedOptions.distanceMaxLong=""}}},bn={class:"slds-p-left_medium slds-p-right_medium"};function yn(e,t,l,o,a,s){const u=c("Checkbox"),d=c("TextInput"),b=c("Layout"),_=c("Picklist"),y=c("LayoutItem"),g=c("Card");return h(),L(g,{title:s.computedLabels.cardLabel,class:"slds-p-around_x-small",style:{"box-shadow":"none"}},{body:n(()=>[v("div",bn,[i(u,{modelValue:s.enableLimitCom,"onUpdate:modelValue":t[0]||(t[0]=m=>s.enableLimitCom=m),inputAttrs:{id:"mlbLimitMarkersChxResource"},labels:{name:s.computedLabels.limitCheckbox}},null,8,["modelValue","labels"]),i(b,null,{default:n(()=>[i(d,{modelValue:o.v$.store.layer.rowLimit.$model,"onUpdate:modelValue":t[1]||(t[1]=m=>o.v$.store.layer.rowLimit.$model=m),inputAttrs:{id:"mlbLimitMaxMarkersResource"},errors:e.$getErrorsByField(o.v$.store.layer.rowLimit),disabled:!s.enableLimitCom,labels:{name:s.computedLabels.rowLimit}},null,8,["modelValue","errors","disabled","labels"])]),_:1}),e.store.metadata.isMarkerLayer?(h(),L(u,{key:0,modelValue:s.enableProximityLimitCom,"onUpdate:modelValue":t[2]||(t[2]=m=>s.enableProximityLimitCom=m),inputAttrs:{id:"mlbLimitMarkersProximityChxResource"},labels:{name:e.$Labels.modal_MLB_option_MarkerLimits_checkbox_option_limit_markers_in_proximity},style:{"padding-top":"0.5rem"}},null,8,["modelValue","labels"])):S("",!0),e.store.metadata.isMarkerLayer?(h(),L(y,{key:1,size:"6",class:"slds-grow-none"},{default:n(()=>[i(_,{modelValue:o.v$.searchTerm.$model,"onUpdate:modelValue":t[3]||(t[3]=m=>o.v$.searchTerm.$model=m),inputAttrs:{id:"mlbLimitAddressProximityOptionResource"},disabled:!s.enableProximityLimitCom,labels:{name:e.$Labels.modal_MLB_option_MarkerLimits_proximity_center_address_search},filterable:"",idKey:"id",titleKey:"longTitle",options:a.proximityOptions,errors:e.$getErrorsByField(o.v$.searchTerm),onSelectedOption:s.selected,onClear:s.clearSearch},null,8,["modelValue","disabled","labels","options","errors","onSelectedOption","onClear"])]),_:1})):S("",!0),e.store.metadata.isMarkerLayer?(h(),L(b,{key:2,multipleRows:""},{default:n(()=>[i(y,{class:"slds-m-right_medium slds-grow-none"},{default:n(()=>[i(d,{modelValue:o.v$.store.layer.advancedOptions.distance.$model,"onUpdate:modelValue":t[4]||(t[4]=m=>o.v$.store.layer.advancedOptions.distance.$model=m),inputAttrs:{id:"mlbLimitBoundaryRadiusResource"},disabled:!s.enableProximityLimitCom,labels:{name:e.$Labels.modal_MLB_numerical_input_boundary_radius},errors:e.$getErrorsByField(o.v$.store.layer.advancedOptions.distance)},null,8,["modelValue","disabled","labels","errors"])]),_:1}),i(y,{class:"slds-grow-none"},{default:n(()=>[i(_,{modelValue:s.unitSelected,"onUpdate:modelValue":t[5]||(t[5]=m=>s.unitSelected=m),inputAttrs:{id:"mlbLimitDistanceUnitsOptionResource"},disabled:!s.enableProximityLimitCom,labels:{name:e.$Labels.modal_MLB_picklist_distance_units},options:a.distanceOptions},null,8,["modelValue","disabled","labels","options"])]),_:1})]),_:1})):S("",!0)])]),_:1},8,["title"])}const fn=$(hn,[["render",yn]]),Ln={name:"MarkerSorting",components:{Card:gt,Picklist:H},extends:D,data(){return{sortOptions:[{title:this.$Labels.modal_MLB_option_DO_section_Markers_modal_Sort_PL_Opt_Desc,id:"desc"},{title:this.$Labels.modal_MLB_option_DO_section_Markers_modal_Sort_PL_Opt_Asc,id:"asc"}]}},computed:{sortableFields(){return this.store.metadata.fields.filter(e=>e.isSortable&&!e.isLookup)}}},gn={class:"slds-p-left_medium slds-p-right_medium"};function vn(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("Layout"),_=c("Card");return h(),L(_,{title:e.store.metadata.isPolyline?e.$Labels.modal_MLB_option_PolylineSorting_card_label:e.$Labels.modal_MLB_option_MarkerSorting_card_label,class:"slds-p-around_x-small",style:{"box-shadow":"none"}},{body:n(()=>[v("div",gn,[i(b,null,{default:n(()=>[i(d,{size:"6"},{default:n(()=>[i(u,{modelValue:e.store.layer.rowOrder,"onUpdate:modelValue":t[0]||(t[0]=y=>e.store.layer.rowOrder=y),inputAttrs:{id:"mlbMarkerFieldToOrderOptionResource"},labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_OrderBy_PL_Label},options:s.sortableFields,idKey:"apiName",titleKey:"label",style:{"max-width":"15rem"},resizeToFitContent:"",filterable:""},null,8,["modelValue","labels","options"]),i(u,{modelValue:e.store.layer.rowOrderDirection,"onUpdate:modelValue":t[1]||(t[1]=y=>e.store.layer.rowOrderDirection=y),inputAttrs:{id:"mlbMarkerSortOptionResource"},disabled:!e.store.layer.rowOrder,labels:{name:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Sort_PL_Label},options:a.sortOptions,style:{"max-width":"15rem"}},null,8,["modelValue","disabled","labels","options"])]),_:1})]),_:1})])]),_:1},8,["title"])}const Sn=$(Ln,[["render",vn]]),On={name:"MLBDisplayAdvanced",components:{MapUpdates:on,General:_n,MarkerLimits:fn,MarkerSorting:Sn},extends:D,created(){Q.CREATE.equals(this.store.metadata.mode)&&J.LIVE.equals(this.store.metadata.type)&&(this.store.layer.advancedOptions.enableMapUpdates=!0,this.store.layer.advancedOptions.updateEvery=30,this.store.layer.advancedOptions.mapUpdateUnits="sec")}};function Tn(e,t,l,o,a,s){const u=c("MapUpdates"),d=c("LayoutItem"),b=c("General"),_=c("Layout"),y=c("MarkerLimits"),g=c("MarkerSorting");return h(),k("div",null,[i(_,{class:"slds-m-top_medium"},{default:n(()=>[i(d,{class:"slds-m-right_large",size:"5"},{default:n(()=>[i(_,{multipleRows:""},{default:n(()=>[i(d,{size:"12"},{default:n(()=>[i(u)]),_:1}),i(d,{size:"12"},{default:n(()=>[i(b)]),_:1})]),_:1})]),_:1}),i(d,{class:"slds-m-right_large",size:"5"},{default:n(()=>[i(_,{multipleRows:""},{default:n(()=>[i(d,{size:"12"},{default:n(()=>[i(y)]),_:1}),i(d,{class:"slds-m-top_medium",size:"12"},{default:n(()=>[i(g)]),_:1})]),_:1})]),_:1})]),_:1})])}const Mn=$(On,[["render",Tn]]);var An={name:"ValidateEach",props:{rules:{type:Object,required:!0},state:{type:Object,required:!0},options:{type:Object,default:()=>({})},index:{type:Number,default:0}},setup(e,t){let{slots:l}=t;const o=K(e.rules,La(e,"state"),e.options);return()=>l.default({v:o.value})}};const kn={name:"ColorGradients",components:{ColorPicker:Ve,SLDSButton:ie,ButtonIcon:de,ValidateEach:An},extends:D,setup(){return{v$:K()}},data(){return{checkHexCode:[],gradients:[],rules:{value:{required:z,validHexValue:C.withMessage("",Re)}}}},computed:{heatmapGradient(){return this.gradients.map(e=>e.value)}},watch:{heatmapGradient(e){this.store.layer.advancedOptions.heatmapGradient=e}},created(){this.createGradientOptions()},methods:{createGradientOptions(){this.gradients=(this.store.layer.advancedOptions.heatmapGradient||[]).map(e=>({id:V(),value:e}))},setColor(e,t){typeof e=="string"&&(this.gradients[t]=e,this.store.layer.advancedOptions.heatmapGradient[t]=this.gradients[t])},moveGradient(e,t){let l;t==="up"?l=e-1:t==="down"&&(l=e+1);const o=this.checkHexCode[l];this.checkHexCode.splice(l,1,this.checkHexCode[e]),this.checkHexCode.splice(e,1,o);const a=this.gradients;[a[e],a[l]]=[a[l],a[e]],this.gradients=[...a],this.$nextTick(()=>{this.$refs[`color-${l}`][0].focus()})},removeGradient(e){this.checkHexCode.splice(e,1),this.gradients.splice(e,1),this.$nextTick(()=>{if(this.gradients.length){let t=e;e===this.gradients.length&&(t=e-1),this.$refs[`color-${t}`][0].focus()}})},addGradient(){this.checkHexCode.splice(this.checkHexCode.length,0,!1),this.gradients.push({id:V(),value:"#FFFFFF"}),this.$nextTick(()=>{this.$refs[`color-${this.gradients.length-1}`][0].focus()})},handleHex(e,t){this.checkHexCode[t]=e}}},Bn={class:"slds-text-title"},$n={class:"slds-box slds-p-around_none"},Fn={class:"slds-text-title"},Cn=["for"],Dn={class:"slds-text-title"},Rn={key:0,class:"slds-border_top slds-p-horizontal_x-small slds-p-vertical_medium"},En={class:"slds-text-title empty-state-text"},Vn={class:"slds-border_top slds-p-horizontal_x-small slds-p-vertical_medium"},In={class:"slds-text-title"};function Pn(e,t,l,o,a,s){const u=c("LayoutItem"),d=c("SLDSButton"),b=c("Layout"),_=c("ButtonIcon"),y=c("ColorPicker"),g=c("ValidateEach");return h(),L(b,null,{default:n(()=>[i(u,{size:"11"},{default:n(()=>[v("p",Bn,M(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Label),1),v("div",$n,[i(b,{verticalAlign:"center",horizontalAlign:"spread",class:"slds-p-around_x-small"},{default:n(()=>[i(u,null,{default:n(()=>[v("p",Fn,M(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Header_section),1)]),_:1}),i(u,null,{default:n(()=>[i(d,{id:"mlbGradientAddColorBtnResource",variant:"neutral",iconName:"add",iconCategory:"utility",title:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_button_Add,onClick:t[0]||(t[0]=m=>s.addGradient())},{default:n(()=>[le(M(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_button_Add),1)]),_:1},8,["title"])]),_:1})]),_:1}),(h(!0),k(Y,null,se(a.gradients,(m,A)=>(h(),L(g,{key:m.id,state:m,rules:a.rules},{default:n(({v:B})=>[i(b,{verticalAlign:"center",horizontalAlign:"spread",class:"slds-border_top"},{default:n(()=>[i(u,{class:"slds-p-left_x-small"},{default:n(()=>[i(_,{id:"mlbGradientUpOuterColorBtnResource",iconCategory:"utility",iconName:"arrowup",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Up_Btn_Assist_Text,disabled:A===0,title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Up_Btn_Assist_Text,onClick:F=>s.moveGradient(A,"up")},null,8,["assistiveText","disabled","title","onClick"]),i(_,{id:"mlbGradientDownOuterColorBtnResource",iconCategory:"utility",iconName:"arrowdown",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Down_Btn_Assist_Text,disabled:A===a.gradients.length-1,title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Arr_Down_Btn_Assist_Text,onClick:F=>s.moveGradient(A,"down")},null,8,["assistiveText","disabled","title","onClick"])]),_:2},1024),i(u,{size:"3"},{default:n(()=>[v("label",{for:m.id},[v("p",Dn,M(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Color_Label)+" "+M(A+1),1)],8,Cn)]),_:2},1024),i(u,{class:"slds-p-right_x-small"},{default:n(()=>[i(b,{verticalAlign:"center",horizontalAlign:"spread"},{default:n(()=>[i(u,{class:"slds-p-right_x-small slds-m-vertical_x-small"},{default:n(()=>[i(y,{id:"mlbColorPickerGradientResource",ref_for:!0,ref:`color-${A}`,modelValue:B.value.$model,"onUpdate:modelValue":F=>B.value.$model=F,errors:e.$getErrorsByField(B.value),labels:{chooseColor:""},labelForId:m.id},null,8,["modelValue","onUpdate:modelValue","errors","labelForId"])]),_:2},1024),i(u,null,{default:n(()=>[i(_,{id:"mlbGradientRemoveBtnResource",iconCategory:"utility",iconName:"delete",variant:"border-filled",assistiveText:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Delete_Btn_Assist_Text,title:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Custom_Marker_Delete_Btn_Assist_Text,onClick:F=>s.removeGradient(A)},null,8,["assistiveText","title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["state","rules"]))),128)),a.gradients.length===0?(h(),k("div",Rn,[v("p",En,M(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_No_Color_Message),1)])):S("",!0),v("div",Vn,[v("p",In,M(e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Color_Picker_Footer_section),1)])])]),_:1})]),_:1})}const wn=$(kn,[["render",Pn],["__scopeId","data-v-a379cb35"]]),Nn={name:"MLBDisplayHeatmap",components:{HeatMapOptions:$a,ColorGradients:wn},extends:D};function xn(e,t,l,o,a,s){const u=c("HeatMapOptions"),d=c("LayoutItem"),b=c("ColorGradients"),_=c("Layout");return h(),L(_,{class:"slds-p-around_medium"},{default:n(()=>[i(d,{size:"6"},{default:n(()=>[i(d,{size:"7"},{default:n(()=>[i(u,{options:e.store.layer.advancedOptions,metadataBaseObjectFields:e.store.metadata.fields},null,8,["options","metadataBaseObjectFields"])]),_:1})]),_:1}),i(d,{size:"6"},{default:n(()=>[i(b)]),_:1})]),_:1})}const Un=$(Nn,[["render",xn]]),jn={name:"MLBDisplayProximity",components:{Checkbox:ye,ColorPicker:Ve,Picklist:H,TextInput:Z},extends:D,validations(){const e={store:{layer:{proximityOptions:{radius:{},border:{},fill:{}}}},checkHexCode1:{hasError:t=>t===!1},checkHexCode2:{hasError:t=>t===!1}};return this.proximityEnabled&&(e.store.layer.proximityOptions.radius={minIntegerValue:C.withMessage(this.$Labels.modal_MLB_Input_Error_Positive_Integer,ue(1))},e.store.layer.proximityOptions.border={required:C.withMessage(this.$Labels.MLB_Required_Field_Error,z),validHexValue:C.withMessage("",Re)},e.store.layer.proximityOptions.fill={required:C.withMessage(this.$Labels.MLB_Required_Field_Error,z),validHexValue:C.withMessage("",Re)}),e},setup(){return{v$:K()}},data(){return{isLoading:!1,distance:0,selectedOpacity:"",selectedMeasurement:"",proximityEnabled:!1,opacity:[],units:[{id:"MILES",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Miles},{id:"METERS",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Meters},{id:"FEET",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Feet},{id:"YARDS",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Yards},{id:"KM",title:this.$Labels.Marker_Layer_Proximity_PickList_Options_DistanceUnits_Kilometers}],checkHexCode1:!1,checkHexCode2:!1}},computed:{proxEnabled:{get(){return this.proximityEnabled},set(e){this.proximityEnabled=e,this.store.layer.proximityOptions.enabled=this.proximityEnabled}},opacitySelected:{get(){return this.selectedOpacity},set(e){this.selectedOpacity=e,this.store.layer.proximityOptions.opacity=e}},measurementSelected:{get(){return this.selectedMeasurement},set(e){this.selectedMeasurement=e,this.store.layer.proximityOptions.measurementType=e}}},created(){for(let e=0;e<100;e+=5)this.opacity.push({id:(e/100).toFixed(2),title:`${e}%`});this.proximityEnabled=this.store.layer.proximityOptions.enabled,this.selectedOpacity=this.store.layer.proximityOptions.opacity,this.selectedMeasurement=this.store.layer.proximityOptions.measurementType}};function Gn(e,t,l,o,a,s){const u=c("Checkbox"),d=c("LayoutItem"),b=c("TextInput"),_=c("Picklist"),y=c("Layout"),g=c("ColorPicker");return h(),L(y,null,{default:n(()=>[i(d,{class:"slds-p-around_large",size:"6"},{default:n(()=>[i(u,{modelValue:s.proxEnabled,"onUpdate:modelValue":t[0]||(t[0]=m=>s.proxEnabled=m),inputAttrs:{id:"mlbProximityShowEnableChxResource"},labels:{name:e.$Labels.Marker_Layer_Proximity_Enable_Around}},null,8,["modelValue","labels"]),i(u,{modelValue:e.store.layer.proximityOptions.hideMarkers,"onUpdate:modelValue":t[1]||(t[1]=m=>e.store.layer.proximityOptions.hideMarkers=m),inputAttrs:{id:"mlbProximityHideMarkerChxResource"},labels:{name:e.$Labels.Marker_Layer_Proximity_Center_Markers},disabled:!s.proxEnabled},null,8,["modelValue","labels","disabled"]),i(u,{modelValue:e.store.layer.proximityOptions.affectVisibility,"onUpdate:modelValue":t[2]||(t[2]=m=>e.store.layer.proximityOptions.affectVisibility=m),inputAttrs:{id:"mlbProximityAffectChxResource"},labels:{name:e.$Labels.Marker_Layer_Proximity_Markers_Outside},disabled:!s.proxEnabled},null,8,["modelValue","labels","disabled"])]),_:1}),i(d,{class:"slds-p-around_large",size:"6"},{default:n(()=>[i(y,null,{default:n(()=>[i(d,{class:"slds-p-right_large"},{default:n(()=>[i(b,{modelValue:o.v$.store.layer.proximityOptions.radius.$model,"onUpdate:modelValue":t[3]||(t[3]=m=>o.v$.store.layer.proximityOptions.radius.$model=m),inputAttrs:{id:"mlbProximityRadioDistanceResource"},errors:e.$getErrorsByField(o.v$.store.layer.proximityOptions.radius),labels:{name:e.$Labels.Marker_Layer_Proximity_Radius_Distance},disabled:!s.proxEnabled},null,8,["modelValue","errors","labels","disabled"])]),_:1}),i(d,null,{default:n(()=>[i(_,{modelValue:s.measurementSelected,"onUpdate:modelValue":t[4]||(t[4]=m=>s.measurementSelected=m),inputAttrs:{id:"mlbProximityDistanceUnitResource"},options:a.units,labels:{name:e.$Labels.Marker_Layer_Proximity_Radius_Units,placeholder:e.$Labels.MA_Select},disabled:!s.proxEnabled},null,8,["modelValue","options","labels","disabled"])]),_:1})]),_:1}),i(g,{id:"mlbColorPickerFillColorResource",modelValue:o.v$.store.layer.proximityOptions.fill.$model,"onUpdate:modelValue":t[5]||(t[5]=m=>o.v$.store.layer.proximityOptions.fill.$model=m),labels:{chooseColor:e.$Labels.Marker_Layer_Proximity_Fill_Color},errors:e.$getErrorsByField(o.v$.store.layer.proximityOptions.fill),disabled:!s.proxEnabled},null,8,["modelValue","labels","errors","disabled"]),i(g,{id:"mlbColorPickerBorderColorResource",modelValue:o.v$.store.layer.proximityOptions.border.$model,"onUpdate:modelValue":t[6]||(t[6]=m=>o.v$.store.layer.proximityOptions.border.$model=m),labels:{chooseColor:e.$Labels.Marker_Layer_Proximity_Border_Color},errors:e.$getErrorsByField(o.v$.store.layer.proximityOptions.border),disabled:!s.proxEnabled},null,8,["modelValue","labels","errors","disabled"]),i(_,{modelValue:s.opacitySelected,"onUpdate:modelValue":t[7]||(t[7]=m=>s.opacitySelected=m),inputAttrs:{id:"mlbProximityOpacityOptionResource"},class:"slds-size_4-of-12",options:a.opacity,labels:{name:e.$Labels.Marker_Layer_Proximity_Opacity,placeholder:e.$Labels.MA_Select},disabled:!s.proxEnabled},null,8,["modelValue","options","labels","disabled"])]),_:1})]),_:1})}const zn=$(jn,[["render",Gn]]),Hn={name:"MarkerLayerBuilderDisplay",components:{Advanced:Mn,ExpandableSection:Ee,Heatmap:Un,Markers:Tr,Proximity:zn},extends:D},qn={class:"slds-text-heading_medium"},Yn={class:"slds-text-title slds-m-top_xx-small"};function Kn(e,t,l,o,a,s){const u=c("LayoutItem"),d=c("Markers"),b=c("ExpandableSection"),_=c("Heatmap"),y=c("Proximity"),g=c("Advanced"),m=c("Layout");return h(),L(m,{multipleRows:""},{default:n(()=>[i(u,{size:"12"},{default:n(()=>[v("h2",qn,[v("b",null,M(e.$Labels.modal_MLB_Display_Title),1)]),v("div",Yn,M(e.$Labels.modal_MLB_Display_Title_Info),1)]),_:1}),i(u,{size:"12",class:"slds-m-top_large"},{default:n(()=>[i(b,{title:e.store.metadata.isPolyline?e.$Labels.MA_Polylines:e.$Labels.modal_MLB_option_DO_section_Markers_modal_Section_Text},{default:n(()=>[i(d)]),_:1},8,["title"]),e.store.metadata.isMarkerLayer?(h(),L(b,{key:0,title:e.$Labels.modal_MLB_option_DO_section_HeatMap_modal_Section_Text,collapsedOnLoad:""},{default:n(()=>[i(_)]),_:1},8,["title"])):S("",!0),e.store.metadata.isMarkerLayer?(h(),L(b,{key:1,title:e.$Labels.modal_MLB_option_section_Proximity_modal_Section_Text,collapsedOnLoad:""},{default:n(()=>[i(y)]),_:1},8,["title"])):S("",!0),i(b,{title:e.$Labels.modal_MLB_option_section_Advanced_Options_modal_Section_Text,collapsedOnLoad:""},{default:n(()=>[i(g)]),_:1},8,["title"])]),_:1})]),_:1})}const Wn=$(Hn,[["render",Kn]]),Xn=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/tooltip_info.9a335323.png"}),Qn={name:"MLBPopupsDetails",components:{ButtonIcon:de,FieldSelection:et,Button:ie},extends:D,data(){return{tooltips:[]}},computed:{totalRows(){return this.tooltips.length},disableAddRow(){return this.totalRows===14}},watch:{tooltips:{handler(){this.syncStoreTooltipValues()},deep:!0}},created(){for(let e=2;e<16;e++){const t=this.store.layer[`tooltip${e}`];t&&this.tooltips.push({value:t,uid:V()})}},methods:{deleteTooltip(e){this.tooltips.splice(e,1),this.$nextTick(()=>{if(this.tooltips.length){let t=e;e===this.tooltips.length&&(t=e-1),this.$refs[`tooltip-${t}`][0].focus()}})},addTooltip(){this.tooltips.push({value:"",uid:V()}),this.$nextTick(()=>{this.$refs[`tooltip-${this.tooltips.length-1}`][0].focus()})},moveUp(e){let t=e-1;t<=0&&(t=0);const l=this.tooltips[e];this.tooltips.splice(e,1),this.tooltips.splice(t,0,l),this.setFocusOnMovedElement(t)},moveDown(e){let t=e+1;t>=13&&(t=13);const l=this.tooltips[e];this.tooltips.splice(e,1),this.tooltips.splice(t,0,l),this.setFocusOnMovedElement(t)},setFocusOnMovedElement(e){this.$nextTick(()=>{this.$refs[`tooltip-${e}`][0].focus()})},createFieldLabel(e){return this.$Labels.modal_MLB_option_MP_Text_Field.replace("{0}",e+1)},syncStoreTooltipValues(){for(let e=0;e<15;e++){const t=this.tooltips[e];let l="";t&&t.value&&(l=t.value),this.store.layer[`tooltip${e+2}`]=l}}}},Jn=["for"],Zn=["alt"];function ed(e,t,l,o,a,s){const u=c("LayoutItem"),d=c("ButtonIcon"),b=c("FieldSelection"),_=c("Layout"),y=c("Button");return h(),L(_,{class:"slds-m-horizontal_medium"},{default:n(()=>[i(u,{size:"8"},{default:n(()=>[i(_,{vertical:""},{default:n(()=>[i(u,{class:"slds-m-top_x-small slds-m-bottom_x-small"},{default:n(()=>[le(M(e.$Labels.modal_MLB_option_MP_Fields_Display),1)]),_:1}),(h(!0),k(Y,null,se(a.tooltips,(g,m)=>(h(),L(_,{key:g.uid,class:"slds-m-vertical_xx-small"},{default:n(()=>[i(u,{class:"slds-m-top_x-small slds-m-right_x-small",flexibility:"no-grow"},{default:n(()=>[i(d,{id:"mlbPopupUpBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,disabled:m===0,iconCategory:"utility",iconName:"arrowup",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,variant:"border-filled",onClick:A=>s.moveUp(m)},null,8,["assistiveText","disabled","title","onClick"])]),_:2},1024),i(u,{class:"slds-m-top_x-small",flexibility:"no-grow"},{default:n(()=>[i(d,{id:"mlbPopupDownBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,disabled:m+1===s.totalRows,iconCategory:"utility",iconName:"arrowdown",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,variant:"border-filled",onClick:A=>s.moveDown(m)},null,8,["assistiveText","disabled","title","onClick"])]),_:2},1024),i(u,{class:"slds-m-left_medium slds-m-top_medium",size:"2"},{default:n(()=>[v("label",{for:g.uid},M(s.createFieldLabel(m)),9,Jn)]),_:2},1024),i(b,{ref_for:!0,ref:`tooltip-${m}`,modelValue:g.value,"onUpdate:modelValue":A=>g.value=A,baseObject:e.store.layer.baseObject,size:4,class:"slds-m-top_x-small",labelForId:g.uid,showCompoundAddress:!0},null,8,["modelValue","onUpdate:modelValue","baseObject","labelForId"]),i(u,{class:"slds-m-left_x-small slds-m-top_x-small"},{default:n(()=>[i(d,{id:"mlbPopupRemoveBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,iconCategory:"utility",iconName:"delete",title:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,variant:"border-filled",onClick:A=>s.deleteTooltip(m)},null,8,["assistiveText","title","onClick"])]),_:2},1024)]),_:2},1024))),128)),i(_,null,{default:n(()=>[i(u,{class:X({"slds-m-top_small":a.tooltips.length,"slds-m-top_x-small":!a.tooltips.length})},{default:n(()=>[i(y,{id:"mlbPopupAddBtnResource",variant:"neutral",iconCategory:"utility",iconName:"add",disabled:s.disableAddRow,label:e.$Labels.modal_MLB_option_MP_button_Add,title:e.$Labels.modal_MLB_option_MP_button_Add,onClick:s.addTooltip},null,8,["disabled","label","title","onClick"])]),_:1},8,["class"])]),_:1})]),_:1})]),_:1}),i(u,{size:"4"},{default:n(()=>[v("img",{src:Xn,alt:e.$Labels.modal_MLB_option_MP_Tooltip_Alt_Text},null,8,Zn)]),_:1})]),_:1})}const td=$(Qn,[["render",ed]]),sd={name:"FieldSelectRow",components:{ButtonIcon:de,Picklist:H},extends:D,props:{fieldIndex:{type:Number,required:!0},relatedField:{type:Object,default:()=>{}},totalRows:{type:Number,default:0},fields:{type:Array,default:()=>[]},labelForId:{type:String,default:""}},emits:["delete-row","move-down","move-up"],setup(){return{v$:K()}},validations(){return{relatedField:{id:{required:C.withMessage(this.$Labels.MLB_Required_Field_Error,z)}}}},methods:{deleteRow(){this.$emit("delete-row")},createFieldLabel(){return this.$Labels.modal_MLB_option_MP_Text_Field.replace("{0}",this.fieldIndex+1)},focus(){this.$refs.fieldSelect.focus()},moveDown(){this.$emit("move-down")},moveUp(){this.$emit("move-up")}}},ld=["for"];function ad(e,t,l,o,a,s){const u=c("ButtonIcon"),d=c("LayoutItem"),b=c("Picklist"),_=c("Layout");return h(),L(_,{class:"slds-m-vertical_xx-small"},{default:n(()=>[i(d,{class:"slds-m-top_x-small slds-m-right_x-small",flexibility:"no-grow"},{default:n(()=>[i(u,{id:"mlbPopupRelatedUpBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,disabled:l.fieldIndex===0,iconCategory:"utility",iconName:"arrowup",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Up_Btn_Assist_Text,variant:"border-filled",onClick:t[0]||(t[0]=y=>s.moveUp(l.fieldIndex))},null,8,["assistiveText","disabled","title"])]),_:1}),i(d,{class:"slds-m-top_x-small",flexibility:"no-grow"},{default:n(()=>[i(u,{id:"mlbPopupRelatedDownBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,disabled:l.fieldIndex+1===l.totalRows,iconCategory:"utility",iconName:"arrowdown",title:e.$Labels.modal_MLB_option_MP_button_Add_Arr_Down_Btn_Assist_Text,variant:"border-filled",onClick:t[1]||(t[1]=y=>s.moveDown(l.fieldIndex))},null,8,["assistiveText","disabled","title"])]),_:1}),i(d,{class:"slds-m-left_medium slds-m-top_medium",size:"2"},{default:n(()=>[v("label",{for:e.$props.labelForId},M(s.createFieldLabel(l.fieldIndex)),9,ld)]),_:1}),i(d,{class:"slds-m-top_x-small",size:"4"},{default:n(()=>[i(b,{ref:"fieldSelect",modelValue:o.v$.relatedField.id.$model,"onUpdate:modelValue":t[2]||(t[2]=y=>o.v$.relatedField.id.$model=y),inputAttrs:{id:"mlbPopupRelatedOperatingHourOptionResource"},options:l.fields,errors:e.$getErrorsByField(o.v$.relatedField.id),labelForId:e.$props.labelForId,idKey:"apiName",titleKey:"label",filterable:""},null,8,["modelValue","options","errors","labelForId"])]),_:1}),i(d,{class:"slds-m-left_x-small slds-m-top_x-small"},{default:n(()=>[i(u,{id:"mlbPopupFieldRemoveBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,iconCategory:"utility",iconName:"delete",title:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,variant:"border-filled",onClick:t[3]||(t[3]=y=>s.deleteRow(l.fieldIndex))},null,8,["assistiveText","title"])]),_:1})]),_:1})}const id=$(sd,[["render",ad]]),od=(e,t)=>{let l=!0;return t.selectedObject&&(l=z.$validator(e)),l},rd={name:"RelatedListGroup",components:{ButtonIcon:de,TextInput:Z,FieldSelectRow:id,Picklist:H,SLDSButton:ie,ObjectFieldFilteringConfig:tt},extends:D,props:{relatedList:{type:Object,required:!0},listIndex:{type:Number,required:!0}},emits:["delete-related-list"],setup(){return{v$:K()}},validations(){return{relatedList:{relatedlistname:{required:C.withMessage(this.$Labels.MA_This_Field_Is_Required,z),maxLength:C.withMessage(this.$Labels.MA_Character_Limit,ms(255))}},sortField:{orderByRequired:C.withMessage(this.$Labels.MA_This_Field_Is_Required,od)},selectedObject:{required:C.withMessage(this.$Labels.MA_This_Field_Is_Required,z)}}},data(){return{relatedListFields:[],numToDisplayOptions:["1","2","3","4","5","6","7","8","9","10"],sortableFields:[],sortDirection:[{id:"ASC",title:this.$Labels.modal_MLB_Related_Tab_Picklist_Ascending},{id:"DESC",title:this.$Labels.modal_MLB_Related_Tab_Picklist_Descending}],isLoaded:!1,fields:[],sortFieldDirection:"",sortField:"",numToDisplay:String(this.relatedList.numtodisplay)}},computed:{listIsDisabled(){return!this.relatedList.relatedobject||!this.relatedList.referencefield},disableAddField(){return this.fields.length>=5},storeSortField(){return`${this.sortField} ${this.sortFieldDirection}`},supportedFields(){return this.relatedListFields.filter(e=>e.apiName.indexOf(".lookup")===-1)},selectedObject:{get(){let e="";return this.relatedList.relatedobject&&this.relatedList.referencefield&&(e=`${this.relatedList.relatedobject}~~${this.relatedList.referencefield}`),e},set(e){const[t="",l=""]=e.split("~~");this.relatedList.relatedobject=t,this.relatedList.referencefield=l}}},watch:{fields:{handler(){this.syncRelatedListDataWithStore()},deep:!0},storeSortField(e){this.relatedList.relatedlistsort=e},numToDisplay(e){this.relatedList.numtodisplay=e}},created(){for(let l=1;l<6;l++){const o=this.relatedList[`field${l}`];o&&this.fields.push({id:o,uid:V()})}const[e="",t="DESC"]=this.relatedList.relatedlistsort.split(" ");this.sortField=e,this.sortFieldDirection=t,this.getFieldsForRelatedList()},methods:{filterUnsupportedFields:Xe,deleteFieldRow(e){this.fields.splice(e,1),this.focusFieldRow(e)},moveFieldUp(e){let t=e-1;t<=0&&(t=0);const l=this.fields[e];this.fields.splice(e,1),this.fields.splice(t,0,l),this.setFocusOnMovedElement(t)},moveFieldDown(e){let t=e+1;t>=5&&(t=5);const l=this.fields[e];this.fields.splice(e,1),this.fields.splice(t,0,l),this.setFocusOnMovedElement(t)},setFocusOnMovedElement(e){this.$nextTick(()=>{this.$refs[`fieldrow_${e}`][0].focus()})},async getFieldsForRelatedList(){if(!!this.relatedList.relatedobject)try{this.store.callouts++,this.relatedListFields=await ae({sobject:this.relatedList.relatedobject,excludeUnsupportedDisplayTypes:!0,excludeWhatIdWhoId:!1}),this.sortableFields=this.relatedListFields.filter(e=>e.isSortable),this.fields.length===0&&this.addField()}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--,this.isLoaded=!0}},addField(){this.fields.push({id:"",uid:V()}),this.focusFieldRow()},async focusFieldRow(e){await this.$nextTick();try{this.fields.length===0?this.$refs.addFieldButton.$el.focus():((!e||e>this.fields.length-1)&&(e=this.fields.length-1),this.$refs[`fieldrow_${e}`][0].$refs.fieldSelect.focus())}catch{}},syncRelatedListDataWithStore(){for(let e=0;e<5;e++){const t=this.fields[e];let l="";t&&(l=t.id),this.relatedList[`field${e+1}`]=l}},deleteGroup(){this.$emit("delete-related-list",this.listIndex)},async updateRelatedList(e){if(this.resetRelatedList(),await this.getFieldsForRelatedList(),this.relatedList.relatedlistname||(this.relatedList.relatedlistname=e.title),this.sortableFields.find(l=>String(l?.apiName||"").toLowerCase()==="createddate"))this.sortField="CreatedDate";else{const[l={}]=this.sortableFields;this.sortField=l?.apiName||""}},resetRelatedList(){this.fields=[],this.relatedList.filters=[],this.sortField="",this.v$.sortField.$reset()}}};function nd(e,t,l,o,a,s){const u=c("Picklist"),d=c("LayoutItem"),b=c("TextInput"),_=c("ButtonIcon"),y=c("Layout"),g=c("FieldSelectRow"),m=c("SLDSButton"),A=c("ObjectFieldFilteringConfig");return h(),L(d,{size:"11",class:"slds-m-bottom_xx-large"},{default:n(()=>[i(y,{class:"slds-border_top slds-border_right slds-border_left slds-border_bottom slds-p-around_medium",style:{background:"#f3f2f2"}},{default:n(()=>[i(d,{class:"slds-m-right_small",size:"4"},{default:n(()=>[i(u,{ref:"relatedListSelect",modelValue:o.v$.selectedObject.$model,"onUpdate:modelValue":t[0]||(t[0]=B=>o.v$.selectedObject.$model=B),inputAttrs:{id:"mlbPopupRelatedObjectOptionResource"},filterable:"",required:"",detach:"",options:e.store.metadata.relatedObjects,errors:e.$getErrorsByField(o.v$.selectedObject),labels:{name:e.$Labels.modal_MLB_Related_List_Object_Select_Text},onSelectedOption:s.updateRelatedList,onClear:s.resetRelatedList},null,8,["modelValue","options","errors","labels","onSelectedOption","onClear"])]),_:1}),i(d,{size:"4",class:"slds-col_bump-right"},{default:n(()=>[i(b,{ref:"relatedListName",modelValue:o.v$.relatedList.relatedlistname.$model,"onUpdate:modelValue":t[1]||(t[1]=B=>o.v$.relatedList.relatedlistname.$model=B),inputAttrs:{id:"mlbPopupRelatedDisplayNameResource"},labels:{name:e.$Labels.modal_MLB_Related_List_Name_Input_Text},errors:e.$getErrorsByField(o.v$.relatedList.relatedlistname),required:"",class:X(["slds-input-has-icon","slds-input-has-icon_right"])},null,8,["modelValue","labels","errors"])]),_:1}),i(d,{class:"slds-m-top_large",alignmentBump:"left",flexibility:"no-grow"},{default:n(()=>[i(_,{id:"mlbPopupRelatedRemoveBtnResource",assistiveText:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,iconCategory:"utility",iconName:"delete",title:e.$Labels.modal_MLB_option_MP_button_Delete_Btn_Assist_Text,variant:"border-filled",onClick:s.deleteGroup},null,8,["assistiveText","title","onClick"])]),_:1})]),_:1}),i(y,{vertical:"",class:"slds-border_right slds-border_left slds-border_bottom slds-p-around_medium"},{default:n(()=>[i(d,null,{default:n(()=>[le(M(e.$Labels.modal_MLB_option_MP_Fields_Display),1)]),_:1}),(h(!0),k(Y,null,se(a.fields,(B,F)=>(h(),L(d,{key:B.uid},{default:n(()=>[i(g,{ref_for:!0,ref:`fieldrow_${F}`,fieldIndex:F,relatedField:B,fields:s.supportedFields,totalRows:a.fields.length,labelForId:B.uid,onDeleteRow:j=>s.deleteFieldRow(F),onMoveUp:j=>s.moveFieldUp(F),onMoveDown:j=>s.moveFieldDown(F)},null,8,["fieldIndex","relatedField","fields","totalRows","labelForId","onDeleteRow","onMoveUp","onMoveDown"])]),_:2},1024))),128)),i(d,{class:"slds-m-top_small"},{default:n(()=>[i(m,{id:"mlbPopupRelatedAddFieldBtnResource",ref:"addFieldButton",variant:"neutral",iconCategory:"utility",iconName:"add",disabled:s.disableAddField||s.listIsDisabled,label:e.$Labels.modal_MLB_Related_List_Add_Field_Btn,title:e.$Labels.modal_MLB_Related_List_Add_Field_Btn,onClick:s.addField},null,8,["disabled","label","title","onClick"])]),_:1})]),_:1}),i(y,{vertical:"",class:"slds-border_right slds-border_left slds-border_bottom slds-p-around_large"},{default:n(()=>[i(y,{class:"slds-size_12-of-12 slds-p-bottom_x-small"},{default:n(()=>[i(d,{size:"5",class:"slds-m-right_medium"},{default:n(()=>[i(u,{modelValue:o.v$.sortField.$model,"onUpdate:modelValue":t[2]||(t[2]=B=>o.v$.sortField.$model=B),inputAttrs:{id:"mlbPopupRelatedCreatedDateOptionResource"},options:a.sortableFields,labels:{name:e.$Labels.modal_MLB_Related_List_OrderRecordsBy_Input},errors:e.$getErrorsByField(o.v$.sortField),disabled:s.listIsDisabled,titleKey:"label",idKey:"apiName",filterable:""},null,8,["modelValue","options","labels","errors","disabled"])]),_:1}),i(d,{size:"5"},{default:n(()=>[i(u,{modelValue:a.numToDisplay,"onUpdate:modelValue":t[3]||(t[3]=B=>a.numToDisplay=B),inputAttrs:{id:"mlbPopupRelatedLimitRecordOptionResource"},options:a.numToDisplayOptions,labels:{name:e.$Labels.modal_MLB_Related_List_LimitRecords_Input},disabled:s.listIsDisabled},null,8,["modelValue","options","labels","disabled"])]),_:1})]),_:1}),i(y,{class:"slds-size_12-of-12 slds-p-bottom_x-small"},{default:n(()=>[i(d,{size:"5"},{default:n(()=>[i(u,{modelValue:a.sortFieldDirection,"onUpdate:modelValue":t[4]||(t[4]=B=>a.sortFieldDirection=B),inputAttrs:{id:"mlbPopupRelatedAscendingOptionResource"},options:a.sortDirection,labels:{name:e.$Labels.modal_MLB_Related_List_OrderBy_Input},disabled:s.listIsDisabled},null,8,["modelValue","options","labels","disabled"])]),_:1})]),_:1}),i(d,null,{default:n(()=>[a.isLoaded?(h(),L(A,{key:0,ref:"filter",fields:s.filterUnsupportedFields(a.relatedListFields),filters:l.relatedList.filters,baseObject:l.relatedList.relatedobject,noLogic:"",disableDynamicVariables:""},null,8,["fields","filters","baseObject"])):S("",!0)]),_:1})]),_:1})]),_:1})}const dd=$(rd,[["render",nd]]),cd=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/related_info.e7ddcaab.png"}),ud={name:"MLBPopupsRelated",components:{RelatedListGroup:dd,SLDSButton:ie},extends:D,mixins:[Os],computed:{relatedListsArray:{get(){return this.store.layer.relatedLists},set(e){this.store.layer.relatedLists=e}}},created(){this.init()},methods:{init(){this.formatRelatedListInfo(),this.getRelatedObjects()},formatRelatedListInfo(){const e=[];this.relatedListsArray.forEach((t,l)=>{e.push({...t,uid:V(),index:l,numtodisplay:String(t.numtodisplay)})}),this.relatedListsArray=e},async createNewRelatedList(){const e=this.relatedListsArray;e.push({baseObject:this.store.layer.baseObject,filters:[],numtodisplay:1,referencefield:"",relatedlistname:"",relatedlistsort:" ASC",relatedobject:"",uid:V(),index:this.store.layer.relatedLists.length}),this.relatedListsArray=e,await this.$nextTick();const t=this.relatedListsArray.length;this.$refs[`relatedListGroup_${t-1}`][0].$refs.relatedListSelect.focus()},async deleteRelatedList(e){this.store.layer.relatedLists.splice(e,1);const t=this.store.layer.relatedLists.length;if(this.store.layer.relatedLists.forEach((l,o)=>{l.index=o}),this.relatedListsArray=this.store.layer.relatedLists,await this.$nextTick(),t===0)this.$refs.relatedListAddButton.$el.focus();else try{this.$refs[`relatedListGroup_${t-1}`][0].$refs.relatedListSelect.focus()}catch{}}}},pd=["alt"];function md(e,t,l,o,a,s){const u=c("LayoutItem"),d=c("RelatedListGroup"),b=c("SLDSButton"),_=c("Layout");return h(),L(_,{class:"slds-m-horizontal_medium"},{default:n(()=>[i(u,{size:"8"},{default:n(()=>[i(_,{vertical:""},{default:n(()=>[i(u,{class:"slds-m-vertical_medium",size:"8"},{default:n(()=>[le(M(e.$Labels.modal_MLB_Related_List_SubHeader),1)]),_:1}),(h(!0),k(Y,null,se(s.relatedListsArray,(y,g)=>(h(),L(d,{key:y.uid,ref_for:!0,ref:`relatedListGroup_${g}`,listIndex:g,relatedList:y,onDeleteRelatedList:s.deleteRelatedList},null,8,["listIndex","relatedList","onDeleteRelatedList"]))),128)),i(u,{class:"slds-m-bottom_medium",size:"4"},{default:n(()=>[i(b,{id:"mlbAddRelatedObjectBtnResource",ref:"relatedListAddButton",variant:"neutral",iconCategory:"utility",iconName:"add",label:e.$Labels.modal_MLB_Related_List_Button_Add_New,title:e.$Labels.modal_MLB_Related_List_Button_Add_New,onClick:s.createNewRelatedList},null,8,["label","title","onClick"])]),_:1})]),_:1})]),_:1}),i(u,{size:"4"},{default:n(()=>[v("img",{src:cd,alt:e.$Labels.modal_MLB_Related_List_Image_Alt_Text},null,8,pd)]),_:1})]),_:1})}const _d=$(ud,[["render",md]]),hd={name:"MarkerLayerBuilderPopups",components:{Details:td,ExpandableSection:Ee,Related:_d,FieldSelection:et},extends:D,methods:{onFieldSelectionChanged(e){this.store.layer.tooltip1Label=e.field.label}}},bd={class:"slds-text-heading_medium"},yd={class:"slds-text-title slds-m-top_xx-small slds-m-bottom_large"};function fd(e,t,l,o,a,s){const u=c("FieldSelection"),d=c("LayoutItem"),b=c("Details"),_=c("ExpandableSection"),y=c("Related"),g=c("Layout");return h(),L(g,{multipleRows:""},{default:n(()=>[i(d,{size:"12"},{default:n(()=>[v("h2",bd,[v("b",null,M(e.store.metadata.isPolyline?e.$Labels.modal_MLB_option_MP_polyline:e.$Labels.modal_MLB_option_MP),1)]),v("div",yd,M(e.store.metadata.isPolyline?e.$Labels.modal_MLB_option_MP_polyline_help:e.$Labels.modal_MLB_option_MP_help),1),i(u,{modelValue:e.store.layer.tooltip1,"onUpdate:modelValue":t[0]||(t[0]=m=>e.store.layer.tooltip1=m),size:4,baseObject:e.store.layer.baseObject,labels:{name:e.$Labels.modal_MLB_option_MP_picklist_Title},onChanged:s.onFieldSelectionChanged},null,8,["modelValue","baseObject","labels","onChanged"])]),_:1}),i(d,{size:"12",class:"slds-m-top_xx-small"},{default:n(()=>[i(_,{title:e.$Labels.modal_MLB_option_MP_section_Details},{default:n(()=>[i(b)]),_:1},8,["title"]),i(_,{title:e.$Labels.modal_MLB_option_Related_Tab_section_Details,class:"slds-m-top_large"},{default:n(()=>[i(y)]),_:1},8,["title"])]),_:1})]),_:1})}const Ld=$(hd,[["render",fd]]);const Be=Object.freeze({SAVE:Symbol("save"),SAVE_PLOT:Symbol("plot"),SAVE_REFRESH:Symbol("refresh")}),gd={components:{ButtonIcon:de,Modal:ps,Popover:Lt,ProgressIndicator:mi,Spinner:ga,Tab:cs,Tabs:ds,DetailsPanel:Vr,FiltersPanel:tn,DisplayPanel:Wn,PopupsPanel:Ld,Toasts:va},mixins:[fs],provide(){return{getStore:()=>this.store}},props:{modalOptions:{type:Object,required:!0}},emits:["close-modal"],setup(){const e=us(),t=K(),l=Sa();return{mainStore:e,v$:t,layerStore:l}},data(){return{mode:"",type:"",currentStepIndex:0,getGUID:V,bindTo:null,modalShow:!1,modalTitle:"",previouslyRenderedSteps:[],renderErrorIcon:!1,renderPopover:!1,isDirty:!1,showUnsavedChangesPrompt:!1,store:is(),steps:[{id:V(),label:this.$Labels.modal_MLB_option_ND,tabId:"panel-details"},{id:V(),label:this.$Labels.modal_MLB_option_BOF,tabId:"panel-object-filters"},{id:V(),label:this.$Labels.modal_MLB_option_DO,tabId:"panel-display-options"},{id:V(),label:this.getPopupsTitle(),tabId:"panel-marker-popups"}],activeTabId:"panel-details"}},computed:{isCreateMode(){return this.mode.equals(Q.CREATE.name)},isEditMode(){return this.mode.equals(Q.CREATE.name)},onLastStep(){return this.currentStepIndex===this.steps.length-1},disableNextButton(){return this.onLastStep},showPreviousButton(){return this.isCreateMode&&this.currentStepIndex>0},showSavePlotButton(){return!Q.PLOTTED_EDIT.equals(this.mode)},showSaveRefreshButton(){return Q.PLOTTED_EDIT.equals(this.mode)},loading(){return this.store.callouts>0},currentPanelId(){return this.isEditMode?this.activeTabId:this.currentStepIndex}},created(){this.init(),this.setupStoreProxy()},unmounted(){yi()},methods:{init(){const{mode:e,type:t}=this.$props.modalOptions;switch(this.mode=e,this.type=t,this.modalTitle=this.getModalTitle(),this.mode.name){case Q.CREATE.name:this.applyDefaults(),this.applyOptions();break;case Q.EDIT.name:case Q.PLOTTED_EDIT.name:J.POLYLINE.equals(this.type)&&(this.store.layer.iconColor="#86baf3:accessCircle"),this.loadLayer();break}},setupStoreProxy(){const e=this.store,t={get:(l,o)=>{let a=Reflect.get(l,o);return typeof a=="object"&&a!==null?new Proxy(a,t):(typeof a=="function"&&(a=a.bind(l)),a)},set:(l,o,a)=>{const s=["length","folderId","folderType","relatedLists"];return l[o]=a,s.includes(o)||e.callouts>0||(this.isDirty=!0),!0}};this.store.layer=new Proxy(this.store.layer,t),this.store.metadata.type=this.type},onResetStore(e){const t=is();t.layer.name=this.store.layer.name,t.layer.description=this.store.layer.description,t.layer.folderId=this.store.layer.folderId,t.layer.folderType=this.store.layer.folderType,t.metadata.type=J[this.store.metadata.type.name],t.layer.advancedOptions.isPolyline=this.store.layer.advancedOptions.isPolyline,t.setBaseObject(e),this.store=t,this.applyDefaults(),this.previouslyRenderedSteps.length=0},applyDefaults(){this.store.layer.advancedOptions.heatmapGradient=["#68FFD7","#01BFBF","#2C2ED0"],J.POLYLINE.equals(this.type)&&(this.store.layer.advancedOptions.isPolyline=!0,this.store.layer.iconColor="#86baf3:accessCircle")},applyOptions(){const{options:e}=this.$props.modalOptions;this.store.layer.folderId=e.id,this.store.layer.folderType=e.nodeType||e.id,this.store.metadata.mode=this.mode},getModalTitle(){let e="Marker Layer Builder";return J.MARKER.equals(this.type)&&(e=Q.CREATE.equals(this.mode)?this.$Labels.modal_MLB_header_new_marker:this.$Labels.modal_MLB_header_Edit_marker),J.LIVE.equals(this.type)&&(e=Q.CREATE.equals(this.mode)?this.$Labels.modal_MLB_header_new_live:this.$Labels.modal_MLB_header_Edit_live),J.POLYLINE.equals(this.type)&&(e=Q.CREATE.equals(this.mode)?this.$Labels.modal_MLB_header_new_polyline:this.$Labels.modal_MLB_header_Edit_polyline),e},getPopupsTitle(){let e=this.$Labels.modal_MLB_option_MP;const{type:t}=this.$props.modalOptions;return J.POLYLINE.equals(t)&&(e=this.$Labels.modal_MLB_option_MP_polyline),e},async loadLayer(){try{this.store.callouts++;const{options:e,isClone:t}=this.$props.modalOptions,{data:l,error:o,success:a}=await MAPS.Utils.Apex.invoke("maps.MarkerLayerBuilderController.getLayerInfo",[e.id,t||!1]);a?(this.parseLayerJSON(l.query),l.query.colorAssignmentType==="Dynamic-Order"&&(this.store.layer.colorAssignment={}),this.store.layer=hi(this.store.layer,l.query),Array.isArray(this.store.layer.colorAssignment)&&(this.store.layer.colorAssignment=this.store.layer.colorAssignment.slice(0,this.store.layer.colorAssignment.length)),Array.isArray(this.store.layer.shapeAssignment)&&(this.store.layer.shapeAssignment=this.store.layer.shapeAssignment.slice(0,this.store.layer.shapeAssignment.length)),this.store.local.baseObjectId=l.query.baseObjectId,this.store.local.baseObjectSettings=JSON.parse(l.query.baseObjectSettings),this.store.metadata.mode=this.mode,this.store.layer.relatedSObjectExists=l.relatedObjExists):(this.showErrorToast(o.message),console.error(l,o))}catch(e){this.genericExceptionHandler(e)}finally{this.store.callouts--}},parseLayerJSON(e){e.advancedOptions.heatmapGradient&&(e.advancedOptions.heatmapGradient=JSON.parse(e.advancedOptions.heatmapGradient)),e.advancedOptions.layerTypeOptions&&(e.advancedOptions.layerTypeOptions=JSON.parse(e.advancedOptions.layerTypeOptions)),e.colorAssignment&&(e.colorAssignmentType==="Dynamic-Order"?e.colorAssignment=JSON.parse(e.colorAssignment):e.colorAssignment=JSON.parse(e.colorAssignment).map(t=>({...t,id:V()}))),e.shapeAssignment&&(e.shapeAssignment=JSON.parse(e.shapeAssignment).map(t=>({...t,id:V()}))),e.advancedOptions.waypointsAfter&&e.advancedOptions.waypointsBefore&&e.advancedOptions.waypointsAfter!==null&&e.advancedOptions.waypointsBefore!==null?e.advancedOptions.enableHide=!0:e.advancedOptions.enableHide=!1,e.refreshInterval!==void 0&&e.refreshInterval!==null?(e.advancedOptions.enableMapUpdates=!0,[e.advancedOptions.updateEvery,e.advancedOptions.mapUpdateUnits]=e.refreshInterval.trim().split(" ")):e.advancedOptions.enableMapUpdates=!1,Object.entries(e.advancedOptions).forEach(([t,l])=>{l==="true"?e.advancedOptions[t]=!0:l==="false"&&(e.advancedOptions[t]=!1)}),Object.entries(e.proximityOptions).forEach(([t,l])=>{l==="true"?e.proximityOptions[t]=!0:l==="false"&&(e.proximityOptions[t]=!1)})},changeStep(e){this.currentStepIndex=e,this.previouslyRenderedSteps.push(e)},handlePrevious(){this.$refs.progressIndicator.previous()},handleNext(){this.$refs.progressIndicator.next()},handleSave(){this.save(Be.SAVE)},handleSavePlot(){this.save(Be.SAVE_PLOT)},handleSaveRefresh(){this.save(Be.SAVE_REFRESH)},async save(e){if(!!this.isCurrentPanelValid())try{this.store.callouts++;const t=Oa(this.store.layer);if(t.advancedOptions.heatmapGradient=JSON.stringify(t.advancedOptions.heatmapGradient),t.advancedOptions.layerTypeOptions=JSON.stringify(t.advancedOptions.layerTypeOptions),new Set([W.ONE_VARIED,W.LABELED,W.TWO_VARIED]).has(this.store.layer.colorAssignmentType)){let u=this.store.layer.colorAssignmentType===W.LABELED?"#16325C":"#46E71B:accessStandardPin";this.store.layer.colorAssignmentType===W.TWO_VARIED&&(t.shapeAssignment.length===0&&(t.shapeAssignment=[{id:V(),operator:"contains",comparevalue:"<Other>",toVal:"<Other>",value:"accessStandardPin"}]),u="#46E71B"),t.colorAssignment.length===0&&(t.colorAssignment=[{id:V(),operator:"contains",comparevalue:"<Other>",toVal:"<Other>",value:u}]),this.store.layer.colorAssignmentType===W.ONE_VARIED&&t.colorAssignment.forEach(d=>{const{value:b=""}=d,[_="#46E71B",y="accessStandardPin"]=String(b).split(":");d.value=`${_}:${y}`})}if(t.colorAssignment=JSON.stringify(t.colorAssignment),t.shapeAssignment=JSON.stringify(t.shapeAssignment),t.advancedOptions.enableProxLimit&&t.advancedOptions.distance&&t.advancedOptions.distance!==""&&t.advancedOptions.selectType&&t.advancedOptions.selectType!==""&&t.advancedOptions.distanceLat&&t.advancedOptions.distanceLat!==""&&t.advancedOptions.distanceLong&&t.advancedOptions.distanceLong!==""){const u=t.advancedOptions.distance,d=t.advancedOptions.selectType,_={MILES:1609.344,KM:1e3,YARDS:.9144,FEET:.3048}[d]||1;t.advancedOptions.distanceMeters=u*_;const y={type:"point",longitude:Number(t.advancedOptions.distanceLong),latitude:Number(t.advancedOptions.distanceLat)},g=Number(Kt.computeOffset(y,t.advancedOptions.distanceMeters,0).latitude)-y.latitude,m=Number(Kt.computeOffset(y,t.advancedOptions.distanceMeters,90).longitude)-y.longitude;t.advancedOptions.distanceMinLat=y.latitude-g,t.advancedOptions.distanceMaxLat=y.latitude+g,t.advancedOptions.distanceMinLong=y.longitude-m,t.advancedOptions.distanceMaxLong=y.longitude+m}else t.advancedOptions.enableProxLimit=!1;t.advancedOptions.enableLimit||(t.rowLimit=this.mainStore?.settings?.query?.max||5e3),(!t.advancedOptions.enableHide||t.advancedOptions.waypointsAfter===null||t.advancedOptions.waypointsBefore===null||t.advancedOptions.waypointsAfter===""||t.advancedOptions.waypointsBefore==="")&&(t.advancedOptions.waypointsAfter=null,t.advancedOptions.waypointsBefore=null),t.advancedOptions.enableMapUpdates&&t.advancedOptions.updateEvery!==null&&t.advancedOptions.updateEvery!==""?t.refreshInterval=`${t.advancedOptions.updateEvery} ${t.advancedOptions.mapUpdateUnits}`:t.refreshInterval=null,this.isCreateMode&&Ta.trackFeature({logPayload:{featureName:"marker_layer_created",subType:String(J?.[this.type]?.name||"").toLowerCase(),colorAssignment:String(t?.colorAssignmentType||"").toLowerCase(),filters:String((t?.filters||[]).length),crossFilters:String((t?.crossFilters||[]).length),relatedLists:String((t?.relatedLists||[]).length),queryLimit:String(t?.rowLimit),proximityEnabled:t?.proximityOptions?.enabled,isPolymorphic:this.store.local.hasPolymorphicBaseObject,isExternalObject:this.store.local.hasExternalBaseObject}});const{data:o,error:a,success:s}=await MAPS.Utils.Apex.invoke("maps.MarkerLayerBuilderController.upsertLayer",[JSON.stringify(t)]);if(s){this.store.layer.id=o.id,this.store.layer.layerType=o.layerType;const u=t.advancedOptions.defaultRenderArea!=="EntireMap",d={};if(e===Be.SAVE_REFRESH&&(d.refreshLayer=!0,d.visibleAreaOnly=u),e===Be.SAVE_PLOT){const b={...o,qid:V()};b.visibleAreaOnly=u,b.isLoading=!0,b.analyticsType="Marker Layer",b.type=J.POLYLINE.equals(this.type)?"polyline":"marker",b.component="MarkerLayer",d.layer=b,d.plotOnSave=!0}this.$props.modalOptions.callback(d),this.$emit("close-modal")}else{let u=a.message;this.store.layer.tooltip1||(u=this.$Labels.modal_MLB_no_tooltip1_error),this.showErrorToast(u),console.error(o,a)}}catch(t){this.genericExceptionHandler(t)}finally{this.store.callouts--}},cancel(){this.isDirty===!0?this.showUnsavedChangesPrompt=!0:this.$emit("close-modal")},confirmPrompt(){this.showUnsavedChangesPrompt=!1,this.$emit("close-modal")},isCurrentPanelValid(){let e=!0;return this.v$.$touch(),e=!this.v$.$invalid,e?(this.renderErrorIcon=!1,this.renderPopover=!1):(this.bindTo=this.$refs.errorIcon.$el,this.renderErrorIcon=!0,this.renderPopover=!0),e},togglePopover(){this.bindTo=this.$refs.errorIcon.$el,this.renderPopover=!this.renderPopover}}},vd=["title"],Sd={class:"slds-nav-vertical slds-border_right slds-p-vertical_small slds-p-horizontal_large","aria-label":"modal nav",style:{height:"100%"}},Od={class:"slds-p-around_medium slds-scrollable",style:{width:"100%"}},Td=["disabled"],Md={class:"slds-grid slds-gutters slds-align_absolute-center slds-p-around_medium"};function Ad(e,t,l,o,a,s){const u=c("Spinner"),d=c("Popover"),b=c("Toasts"),_=c("ProgressIndicator"),y=c("LayoutItem"),g=c("DetailsPanel"),m=c("FiltersPanel"),A=c("DisplayPanel"),B=c("PopupsPanel"),F=c("Tab"),j=c("Tabs"),x=c("Layout"),Ie=c("ButtonIcon"),Pe=c("Modal");return h(),k("div",null,[i(Pe,{title:a.modalTitle,size:"x-large",class:"modal-no-padding",footless:s.loading,onClose:s.cancel},{content:n(()=>[i(x,{style:{height:"100%"}},{default:n(()=>[s.loading?(h(),L(u,{key:0})):S("",!0),a.renderPopover?(h(),L(d,{key:1,bindTo:a.bindTo,theme:"error",width:"large",position:"fixed",onClose:s.togglePopover},{header:n(()=>[v("span",{title:e.$Labels.modal_MLB_popover_Snag_Error_Button_Text},M(e.$Labels.modal_MLB_popover_Snag_Error_Button_Text),9,vd)]),content:n(()=>[le(M(e.$Labels.modal_MLB_popover_Review_Fields_Button_Text),1)]),_:1},8,["bindTo","onClose"])):S("",!0),i(b,{modelValue:a.store.toasts,"onUpdate:modelValue":t[0]||(t[0]=G=>a.store.toasts=G)},null,8,["modelValue"]),i(x,{style:{width:"100%"}},{default:n(()=>[s.isCreateMode?(h(),k(Y,{key:0},[i(y,{style:{width:"245px"}},{default:n(()=>[v("nav",Sd,[i(_,{ref:"progressIndicator",orientation:"vertical",onRequestStepChange:s.isCurrentPanelValid,steps:a.steps,onStepChange:s.changeStep},null,8,["onRequestStepChange","steps","onStepChange"])])]),_:1}),v("div",Od,[a.currentStepIndex===0?(h(),L(g,{key:0,onResetStore:s.onResetStore},null,8,["onResetStore"])):S("",!0),a.previouslyRenderedSteps.includes(1)?ge((h(),L(m,{key:1,ref:`root-${1}`},null,512)),[[Ce,a.currentStepIndex===1]]):S("",!0),a.previouslyRenderedSteps.includes(2)?ge((h(),L(A,{key:2,ref:`root-${2}`},null,512)),[[Ce,a.currentStepIndex===2]]):S("",!0),a.previouslyRenderedSteps.includes(3)?ge((h(),L(B,{key:3,ref:`root-${3}`},null,512)),[[Ce,a.currentStepIndex===3]]):S("",!0)])],64)):(h(),L(j,{key:1,modelValue:a.activeTabId,"onUpdate:modelValue":t[1]||(t[1]=G=>a.activeTabId=G),vertical:"",onRequestTabChange:s.isCurrentPanelValid,style:{width:"100%"}},{default:n(()=>[i(F,{id:a.steps[0].tabId,title:a.steps[0].label,class:"slds-scrollable"},{default:n(()=>[i(g)]),_:1},8,["id","title"]),i(F,{id:a.steps[1].tabId,title:a.steps[1].label,class:"slds-scrollable"},{default:n(()=>[i(m)]),_:1},8,["id","title"]),i(F,{id:a.steps[2].tabId,title:a.steps[2].label,class:"slds-scrollable"},{default:n(()=>[i(A)]),_:1},8,["id","title"]),i(F,{id:a.steps[3].tabId,title:a.steps[3].label,class:"slds-scrollable"},{default:n(()=>[i(B)]),_:1},8,["id","title"])]),_:1},8,["modelValue","onRequestTabChange"]))]),_:1})]),_:1})]),footer:n(()=>[ge(i(Ie,{id:"mlbTogglePopoverBtnResource",ref:"errorIcon",assistiveText:e.$Labels.MA_Error,title:e.$Labels.MA_Error,iconCategory:"utility",iconName:"error",iconSize:"large",class:"slds-button_icon-error",onClick:s.togglePopover},null,8,["assistiveText","title","onClick"]),[[Ce,a.renderErrorIcon]]),v("button",{id:"mlbCancelBtnResource",class:"slds-button slds-button_neutral slds-float_left",onClick:t[2]||(t[2]=(...G)=>s.cancel&&s.cancel(...G))},M(e.$Labels.modal_MLB_Cancel_Button),1),s.showPreviousButton?(h(),k("button",{key:0,id:"mlbShowPreviousBtnResource",class:"slds-button slds-button_neutral",onClick:t[3]||(t[3]=(...G)=>s.handlePrevious&&s.handlePrevious(...G))},M(e.$Labels.modal_MLB_Previous_Button),1)):S("",!0),s.isCreateMode?(h(),k("button",{key:1,id:"mlbDisableNextBtnResource",class:"slds-button slds-button_neutral",disabled:s.disableNextButton,onClick:t[4]||(t[4]=(...G)=>s.handleNext&&s.handleNext(...G))},M(e.$Labels.modal_MLB_Next_Button),9,Td)):S("",!0),v("button",{id:"mlbSaveBtnResource",class:"slds-button slds-button_neutral",onClick:t[5]||(t[5]=(...G)=>s.handleSave&&s.handleSave(...G))},M(e.$Labels.modal_MLB_Save_Button),1),s.showSavePlotButton?(h(),k("button",{key:2,id:"mlbSaveAndPlotBtnResource",class:"slds-button slds-button_brand",onClick:t[6]||(t[6]=(...G)=>s.handleSavePlot&&s.handleSavePlot(...G))},M(e.$Labels.modal_MLB_Save_and_Plot_Button),1)):S("",!0),s.showSaveRefreshButton?(h(),k("button",{key:3,id:"mlbSaveRefreshBtnResource",class:"slds-button slds-button_brand",onClick:t[7]||(t[7]=(...G)=>s.handleSaveRefresh&&s.handleSaveRefresh(...G))},M(e.$Labels.MA_SAVE_AND_REFRESH),1)):S("",!0)]),_:1},8,["title","footless","onClose"]),a.showUnsavedChangesPrompt?(h(),L(Pe,{key:0,id:"confirmModal",size:"base",title:e.$Labels.discardUnsavedChanges,detach:"",onClose:t[10]||(t[10]=G=>a.showUnsavedChangesPrompt=!1)},{content:n(()=>[v("div",Md,M(e.$Labels.modal_MLB_Are_You_Sure_Discard_Changes),1)]),footer:n(()=>[v("button",{id:"mlbShowUnsavedPromptBtnResource",class:"slds-button slds-button_neutral",onClick:t[8]||(t[8]=G=>a.showUnsavedChangesPrompt=!1)},M(e.$Labels.MA_Cancel),1),v("button",{id:"mlbConfirmPromptBtnResource",class:"slds-button slds-button_brand",onClick:t[9]||(t[9]=(...G)=>s.confirmPrompt&&s.confirmPrompt(...G))},M(e.$Labels.MA_Confirm),1)]),_:1},8,["title"])):S("",!0)])}const jd=$(gd,[["render",Ad],["__scopeId","data-v-344fe502"]]);export{Be as SaveTypes,jd as default};

import{_ as d,S as b,r as g,o as n,c as s,b as m,e as M,F as _,h as e,t,j as A,q as f}from"../bundle.js";const W={name:"MarkerPopupWeather",components:{Spinner:b},props:{location:{type:Object,required:!0}},data(){return{isLoading:!1,currenWeather:{},futureWeather:[],weatherError:"",labels:{MA_Future_Forecast:MAPS.app.config.globalProperties.$Labels.MA_Future_Forecast,MA_Current_Forecast:MAPS.app.config.globalProperties.$Labels.MA_Current_Forecast,MA_Feels_Like:MAPS.app.config.globalProperties.$Labels.MA_Feels_Like,MA_High:MAPS.app.config.globalProperties.$Labels.MA_High,MA_Low:MAPS.app.config.globalProperties.$Labels.MA_Low,MA_Precipitation:MAPS.app.config.globalProperties.$Labels.MA_Precipitation,MAWeather_Humidity:MAPS.app.config.globalProperties.$Labels.MAWeather_Humidity,MAWeather_Winds:MAPS.app.config.globalProperties.$Labels.MAWeather_Winds}}},computed:{weatherIconURL(){return`${MAPS.app.config.globalProperties.resourceURL}/maps__Maps3rdPartyPlugins/WeatherIcons`}},created(){this.getWeather()},methods:{async getWeather(){this.isLoading=!0;const u=`https://api.aerisapi.com/forecasts/closest?p=${this.location.latitude},${this.location.longitude}&client_id=aMmtNIJO93b1YWgxPPzjw&client_secret=N4Bbg4p2hMMhXgO7NgNwGxTjHxbG0DbMeq9YZhPo`;try{const{status:i,data:c}=await MAPS.Utils.HTTP.get({url:u});if(i===200&&c.success){const{response:p}=c,[l={}]=p,{periods:o=[]}=l,[a,...r]=o;this.currenWeather=a,this.futureWeather=r}}catch{this.weatherError="Unable to get weather in this area.",console.warn("Weather not found")}finally{this.isLoading=!1}}}},P={style:{"min-height":"50px"}},w={style:{"font-size":"18px"}},F={border:"0",style:{width:"400px","margin-bottom":"20px"}},L={style:{"font-weight":"bold","font-size":"14px"},colspan:"3"},x={style:{width:"120px","vertical-align":"middle"}},y=["src"],S={style:{"text-align":"center","vertical-align":"middle"}},T={style:{"font-weight":"bold","font-size":"20px"}},C=e("br",null,null,-1),k={border:"0",cellpadding:"3",cellspacing:"0"},H={style:{"font-size":"18px"}},v={border:"0",class:"slds-border_bottom"},N={style:{width:"120px","vertical-align":"middle"}},U=["src"],z={border:"0",cellpadding:"3",cellspacing:"0"},B={colspan:"4",style:{"font-weight":"bold","font-size":"14px"}},D={colspan:"4"},E={style:{"padding-left":"10px"}},I={style:{"padding-left":"10px"}},R={colspan:"3"},j={key:2};function q(u,i,c,p,l,o){const a=g("Spinner");return n(),s("div",P,[l.isLoading?(n(),m(a,{key:0})):M("",!0),!l.weatherError&&!l.isLoading?(n(),s(_,{key:1},[e("div",null,[e("b",w,t(l.labels.MA_Current_Forecast),1),e("table",F,[e("tr",null,[e("td",L,t(l.currenWeather.weather),1)]),e("tr",null,[e("td",x,[e("img",{src:`${o.weatherIconURL}/${l.currenWeather.icon}`},null,8,y)]),e("td",S,[e("span",T,t(l.currenWeather.avgTempF)+"\xB0F",1),C,A(t(l.labels.MA_Feels_Like)+" "+t(l.currenWeather.feelslikeF)+"\xB0F ",1)]),e("td",null,[e("table",k,[e("tr",null,[e("td",null,[e("b",null,t(l.labels.MA_High),1)]),e("td",null,t(l.currenWeather.maxTempF)+"\xB0F ("+t(l.currenWeather.maxTempC)+"\xB0C)",1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MA_Low),1)]),e("td",null,t(l.currenWeather.minTempF)+"\xB0F ("+t(l.currenWeather.minTempC)+"\xB0C)",1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MA_Precipitation),1)]),e("td",null,t(l.currenWeather.pop)+"%",1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MAWeather_Humidity),1)]),e("td",null,t(l.currenWeather.humidity)+"%",1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MAWeather_Winds),1)]),e("td",null,t(l.currenWeather.windDir)+" at "+t(l.currenWeather.windSpeedMPH)+" mph",1)])])])])])]),e("b",H,t(l.labels.MA_Future_Forecast),1),(n(!0),s(_,null,f(l.futureWeather,(r,h)=>(n(),s("div",{key:`${h}_future`},[e("table",v,[e("tr",null,[e("td",N,[e("img",{src:`${o.weatherIconURL}/${r.icon}`},null,8,U)]),e("td",null,[e("table",z,[e("tr",null,[e("td",B,t(r.date),1)]),e("tr",null,[e("td",D,t(r.weather),1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MA_High),1)]),e("td",null,t(r.maxTempF)+"\xB0F ("+t(r.maxTempC)+"\xB0C)",1),e("td",E,[e("b",null,t(l.labels.MA_Precipitation),1)]),e("td",null,t(r.pop)+"%",1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MA_Low),1)]),e("td",null,t(r.minTempF)+"\xB0F ("+t(r.minTempC)+"\xB0C)",1),e("td",I,[e("b",null,t(l.labels.MAWeather_Humidity),1)]),e("td",null,t(r.humidity)+"%",1)]),e("tr",null,[e("td",null,[e("b",null,t(l.labels.MAWeather_Winds),1)]),e("td",R,t(r.windDir)+" at "+t(r.windSpeedMPH)+" mph",1)])])])])])]))),128))],64)):(n(),s("div",j,t(l.weatherError),1))])}const V=d(W,[["render",q]]);export{V as default};

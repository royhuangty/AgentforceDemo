import{_ as p,B as _,ai as y,ac as g,r as E,o as a,c as n,h as r,a0 as u,b as v,e as i,t as f,a7 as m,a8 as c,j as k,a6 as h}from"../bundle.js";const B=()=>({prompt:"Okay",closeTitle:"Close",closeAssistiveText:"Close"}),C={name:"Modal",components:{ButtonIcon:_},mixins:[y],props:{bodyless:Boolean,detach:{type:Boolean,default:!0},headless:Boolean,hideCloseButton:Boolean,footless:Boolean,labels:{type:Object,default:()=>{}},prompt:Boolean,size:{type:String,default:"medium",validator:e=>{const t=["small","base","medium","large","x-large"];return!e||!t.includes(e)?(console.error(`Valid size prop values are ${t.join(", ")}`),!1):!0}},title:{type:String,required:!0}},data(){return{container:null,focusableElements:[],modalId:g(),triggerElement:null}},computed:{computedLabels(){const e=Object.hasOwn(this,"$__getGlobalLabels")?this.$__getGlobalLabels().modal||{}:{};return{...B(),...e,...this.$props.labels}},headerClasses(){const e=[];return this.prompt&&e.push("slds-theme_alert-texture slds-theme_error"),this.headless&&e.push("slds-modal__header_empty"),e},footerClasses(){const e=[];return this.prompt&&e.push("slds-theme_default"),this.bodyless&&e.push("footer-bodyless"),e},modalClass(){const e=[];return this.size!=="base"&&e.push(`slds-modal_${this.size}`),this.prompt&&e.push("slds-modal_prompt"),e}},mounted(){this.triggerElement=document.activeElement||document.body,this.detach&&(this._detach(),Array.from(this.container.parentNode.children).filter(e=>e!==this.container&&!(e instanceof HTMLScriptElement)).forEach(e=>{e.setAttribute("aria-hidden",!0)})),this.getFocusableElements(),this.setFocusOnFirstFocusableItem(),this.$emit("mounted")},beforeUnmount(){this.container&&(this.container.remove(),this.container=null),this.triggerElement.focus()},updated(){this.getFocusableElements()},methods:{_detach(){this.container=document.createElement("div"),this.container.className=`slds-scope ${this.$el.className}`,this.container.appendChild(this.$el),document.body.appendChild(this.container)},getFocusableElements(){this.focusableElements=[...this.$refs.section.querySelectorAll("a, button, input, textarea, select, details")].filter(e=>!e.hasAttribute("disabled")&&e.tabIndex!==-1)},setFocusOnFirstFocusableItem(){!this.focusableElements.length||(this.focusableElements.length>1&&this.focusableElements[0]===this.$refs.closeButton.$el?this.focusableElements[1].focus():this.focusableElements[0].focus())},tab(e){!this.focusableElements.length||this.focusableElements[this.focusableElements.length-1]===document.activeElement&&(e.preventDefault(),this.focusableElements[0].focus())},shiftTab(e){!this.focusableElements.length||this.focusableElements[0]===document.activeElement&&(e.preventDefault(),this.focusableElements[this.focusableElements.length-1].focus())}}},I={appear:"",name:"fade"},T=["role","tabindex","aria-labelledby","aria-describedby"],x={class:"slds-modal__container"},F=["id"],L=["id"],S={key:1},z={ref:"backdrop",key:"backdrop",class:"slds-backdrop-custom"};function N(e,t,s,$,d,l){const b=E("ButtonIcon");return a(),n("div",I,[r("section",{ref:"section",key:"section",role:s.prompt?"alertdialog":"dialog",tabindex:s.prompt?"0":null,class:u(["slds-modal-custom",l.modalClass]),"aria-labelledby":s.headless?null:`modal-heading-${d.modalId}`,"aria-describedby":`modal-content-${d.modalId}`,onKeydown:[t[3]||(t[3]=c(h((...o)=>l.tab&&l.tab(...o),["exact"]),["tab"])),t[4]||(t[4]=c(h((...o)=>l.shiftTab&&l.shiftTab(...o),["shift"]),["tab"])),t[5]||(t[5]=c(h(o=>e.$emit("close"),["stop"]),["esc"]))]},[r("div",x,[r("header",{class:u([l.headerClasses,"slds-modal__header"])},[s.hideCloseButton?i("",!0):(a(),v(b,{key:0,ref:"closeButton",iconCategory:"utility",iconName:"close",iconSize:"large",class:"slds-modal__close slds-button_icon-inverse",assistiveText:l.computedLabels.closeAssistiveText,title:l.computedLabels.closeTitle,onClick:t[0]||(t[0]=o=>e.$emit("close"))},null,8,["assistiveText","title"])),s.headless?i("",!0):(a(),n("h2",{key:1,id:`modal-heading-${d.modalId}`,class:"slds-text-heading_medium slds-hyphenate"},f(e.decodeHtml(s.title)),9,F)),s.headless?i("",!0):m(e.$slots,"tagline",{key:2},void 0,!0)],2),s.bodyless?i("",!0):(a(),n("div",{key:0,id:`modal-content-${d.modalId}`,ref:"content",class:"slds-modal__content slds-p-around_medium slds-is-relative",onKeydown:t[1]||(t[1]=c(o=>e.$emit("submit"),["enter"]))},[m(e.$slots,"content",{},()=>[k("default content")],!0)],40,L)),s.footless?i("",!0):(a(),n("footer",{key:1,class:u(["slds-modal__footer",l.footerClasses])},[m(e.$slots,"footer",{},()=>[s.prompt?(a(),n("button",{key:0,class:"slds-button slds-button_neutral",onClick:t[2]||(t[2]=o=>e.$emit("close"))},f(l.computedLabels.prompt),1)):(a(),n("span",S," default footer "))],!0)],2))])],42,T),r("div",z,null,512)])}const O=p(C,[["render",N],["__scopeId","data-v-8677fc93"]]);export{O as M};

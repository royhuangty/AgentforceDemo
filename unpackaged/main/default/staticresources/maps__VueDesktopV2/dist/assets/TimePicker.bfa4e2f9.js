import{_ as c,P as m,I as u,r,o as d,b as h,w as f,i as b,Y as T}from"../bundle.js";const $={components:{Picklist:m,Icon:u},props:{combobox:Boolean,disabled:Boolean,errors:{type:Array,default:()=>[]},filterable:Boolean,helpText:{type:String,default:""},inputAttrs:{type:Object,default:()=>{}},interval:{type:Object,default:()=>({hours:1,minutes:0}),validator(e){return!e||e.hours===void 0||e.minutes===void 0?(console.warn("Interval must contain h and m properties"),e.hours=1,e.minutes=0,-1):e.hours===0&&e.minutes===0?(e.hours=1,-1):1}},labelForId:{type:String,default:""},labels:{type:Object,default:()=>{}},locale:{type:String,default:"en-US"},modelValue:{type:Object,default:null},readonly:Boolean,required:Boolean,resizeToFitContent:Boolean},data(){return{time:"",times:[],timeLocaleMap:new Map}},computed:{proxiedProps(){return{combobox:this.$props.combobox,disabled:this.$props.disabled,errors:this.$props.errors,filterable:this.$props.filterable,helpText:this.$props.helpText,inputAttrs:this.$props.inputAttrs,labelForId:this.$props.labelForId,labels:this.$props.labels,readonly:this.$props.readonly,required:this.$props.required,resizeToFitContent:this.$props.resizeToFitContent}}},watch:{"$props.modelValue":{handler(){this.setTime()},immediate:!0,deep:!0},"$props.locale":{async handler(){this.initTimePicker(),await this.$nextTick(),this.setTime()}}},created(){this.initTimePicker()},methods:{initTimePicker(){const{localeMap:e,intervalOptions:t}=this.buildTimeData();this.timeLocaleMap=e,this.times=t},setTime(){try{if(!this.$props.modelValue){this.time="";return}const e={hours:0,minutes:0,seconds:0,milliseconds:0,...this.$props.modelValue},t=new Date;t.setHours(e.hours,e.minutes,e.seconds,e.milliseconds),this.time=new Intl.DateTimeFormat(this.$props.locale,{hour:"numeric",minute:"numeric"}).format(t)}catch{this.time="Invalid Time"}},buildTimeData(){const e=new Map,t=new Date("12/1/1971"),s=new Date(t.getTime()),n=[],i=new Date("12/2/1971");for(;t<i;){const o=new Intl.DateTimeFormat(this.$props.locale,{hour:"numeric",minute:"numeric"}).format(t);e.set(o,{hours:t.getHours(),minutes:t.getMinutes()}),t.getTime()===s.getTime()&&(n.push(o),s.setHours(s.getHours()+this.interval.hours),s.setMinutes(s.getMinutes()+this.interval.minutes)),t.setMinutes(t.getMinutes()+1)}return{localeMap:e,intervalOptions:n}},onSelectOption(){let e=null;if(this.time)if(this.timeLocaleMap.has(this.time)){const{hours:t,minutes:s}=this.timeLocaleMap.get(this.time);e={hours:t,minutes:s,seconds:0,milliseconds:0}}else{const t=new Date(`12/1/1971 ${this.time}`);e={hours:t.getHours(),minutes:t.getMinutes(),seconds:t.getSeconds(),milliseconds:t.getMilliseconds()}}this.$emit("update:modelValue",e)}}};function g(e,t,s,n,i,o){const l=r("Icon"),a=r("Picklist");return d(),h(a,T({modelValue:i.time,"onUpdate:modelValue":t[0]||(t[0]=p=>i.time=p)},o.proxiedProps,{options:i.times,onSelectedOption:o.onSelectOption}),{icon:f(()=>[b(l,{category:"utility",name:"clock",class:"slds-input__icon",size:"x-small"})]),_:1},16,["modelValue","options","onSelectedOption"])}const x=c($,[["render",g]]);export{x as T};

import{_ as O,B as C,J as q,K as U,g as H,aH as oe,r as y,o as b,c as S,h as r,j as le,t as g,e as $,i as _,w as L,s as T,n as w,v as A,aI as ae,F as W,q as G,b as P,Y as ne,p as Y,k as J,I as re,aB as ie,aJ as ce,aK as de,aD as he,aE as ue,a0 as R,aL as I,aM as F,d as E,a as B,S as D,$ as pe,Z as _e,f as me,u as ye,ac as j}from"../bundle.js";import{L as fe}from"./layer-actions.075222c3.js";const ge={components:{ButtonIcon:C,ActionMenu:q,ActionMenuItem:U},props:{layer:{type:Object,required:!0},isSearch:{type:Boolean,default:!1}},emits:["run-action"],setup(){return{layersStore:H()}},data(){return{arrowStyle:{top:"inherit"},innerArrowStyle:{},tooltipStyle:{left:"440px",top:"inherit",bottom:"inherit"},tooltipVisible:!1,hoverTimeout:null,iconSize:{shape:{height:"20px",width:"20px"}},icons:oe()}},computed:{isPlotOnLoad(){return this.layersStore.polLayers.find(e=>e.id===this.layer.id)!==void 0}},methods:{runLayerFunction(e,s){s!==!1&&this.$emit("run-action",{action:e,layer:this.layer})},async calculateTooltipInfo(){const e=this.$refs,t=e.folderItem.getBoundingClientRect(),n=t.top;await this.$nextTick();const o=e.tooltip.getBoundingClientRect();this.tooltipStyle.top=`${t.bottom-o.height}px`,await this.$nextTick();const a=n+8;this.arrowStyle.top=`${a}px`,this.innerArrowStyle.top=`${a+2}px`},showTooltipInfo(){this.hoverTimeout&&clearTimeout(this.hoverTimeout),this.hoverTimeout=setTimeout(()=>{this.tooltipVisible=!0,this.calculateTooltipInfo()},500)},hideTooltipInfo(){this.hoverTimeout&&clearTimeout(this.hoverTimeout),this.tooltipVisible=!1}}},be=e=>(Y("data-v-f3b91408"),e=e(),J(),e),ve=["id","nodetype","type"],Le=["action"],Se={class:"slds-col slds-size_1-of-12 slds-grow-none",style:{"justify-content":"center",display:"flex"}},ke=["type"],Te=["src"],Me=be(()=>r("div",{class:"ftu-plotonload"},null,-1)),we={class:"layerName slds-col layer-text slds-truncate"},Ae={key:0,class:"layer-subtext","data-test-id":"tooltip-folder-path"},Ie={class:"maps-tooltip-body"},xe={class:"slds-grid slds-grid_vertical slds-p-horizontal_medium slds-p-vertical_small slds-border_bottom maps-tooltip-top-section"},Re={class:"slds-text-heading_small slds-p-bottom_x-small slds-truncate","data-test-id":"tooltip-name"},Oe={class:"slds-text-body_small slds-p-bottom_xx-small","data-test-id":"tooltip-description"},Ce={class:"slds-grid slds-grid_vertical slds-p-top_x-small"},Pe={class:"slds-grid"},Fe={class:"slds-col slds-size_4-of-12 layer-text"},Ee={class:"layer-text","data-test-id":"tooltip-base-object"},Be={class:"slds-grid"},De={class:"slds-col slds-size_4-of-12 layer-text"},Ke={class:"layer-text"},Ne={class:"slds-p-horizontal_medium slds-p-vertical_small maps-tooltip-bottom-section"},Ve={class:"slds-grid slds-grid_vertical"},je={class:"slds-grid"},ze={class:"slds-col slds-size_4-of-12 layer-text"},qe={class:"layer-text"},Ue={class:"slds-grid"},He={class:"slds-col slds-size_4-of-12 layer-text"},$e={class:"layer-text"},We={key:0},Ge={key:1};function Ye(e,s,t,n,l,o){const c=y("ButtonIcon"),a=y("ActionMenuItem"),h=y("ActionMenu");return b(),S("div",ne({id:t.layer.id,ref:"folderItem",class:["folderItem slds-grid slds-grid_vertical-align-center",{"is-plot-on-load":o.isPlotOnLoad}],nodetype:t.layer.nodetype,type:t.layer.type},{"data-id":t.layer.id,"perm-create":t.layer.create,"perm-delete":t.layer.delete,qid:t.layer.qid,"perm-export":t.layer.export,"perm-modify":t.layer.modify,"perm-read":t.layer.read,"perm-setpermissions":t.layer.setpermissions}),[r("div",{class:"slds-grid slds-col slds-size_11-of-12 slds-p-around_x-small slds-grid_vertical-align-center maps-layer-click-area",action:t.layer.defaultAction,"data-test-id":"layer-default-click-container",onClick:s[0]||(s[0]=d=>o.runLayerFunction(t.layer.defaultAction)),onMouseover:s[1]||(s[1]=(...d)=>o.showTooltipInfo&&o.showTooltipInfo(...d)),onMouseleave:s[2]||(s[2]=(...d)=>o.hideTooltipInfo&&o.hideTooltipInfo(...d))},[r("div",Se,[r("div",{class:"layer-icon slds-grid slds-grid_align-center",type:t.layer.type,style:{width:"20px"}},[r("img",{src:l.icons[t.layer.type]},null,8,Te),Me],8,ke)]),r("div",we,[le(g(t.layer.name)+" ",1),t.isSearch?(b(),S("div",Ae,g(t.layer.folderPath),1)):$("",!0)]),_(ae,{name:"fade"},{default:L(()=>[T(r("div",{ref:"tooltip",class:"maps-tooltip-wrapper",style:w(l.tooltipStyle)},[r("div",{ref:"arrow",style:w(l.arrowStyle),class:"maps-tooltip-arrow"},[r("div",{class:"maps-tooltip-inner-arrow",style:w(l.innerArrowStyle)},null,4)],4),r("div",Ie,[r("div",xe,[r("div",Re,g(t.layer.name),1),r("div",Oe,g(t.layer.description),1),r("div",Ce,[r("div",Pe,[r("div",Fe,g(e.$Labels.Layers_On_The_Map_Base_Object),1),r("div",Ee,g(t.layer.baseObjectLabel),1)]),r("div",Be,[r("div",De,g(e.$Labels.MA_Plot_On_Load),1),r("div",Ke,g(t.layer.plotOnLoad),1)])])]),r("div",Ne,[r("div",Ve,[r("div",je,[r("div",ze,g(e.$Labels.Layers_On_The_Map_Created),1),r("div",qe,g(t.layer.createdInfo),1)]),r("div",Ue,[r("div",He,g(e.$Labels.lastModifiedDate),1),r("div",$e,g(t.layer.modifiedInfo),1)])])])])],4),[[A,l.tooltipVisible&&t.layer.type!=="folder"]])]),_:1})],40,Le),_(h,{maxHeight:"300px",class:"slds-p-left_xx-small"},{button:L(()=>[_(c,{"data-q3-id":"action-folder-menu-button",iconCategory:"utility",iconName:"threedots_vertical",variant:"bare",size:"small",assistiveText:e.$Labels.Layers_Recent_Tab_OverFlow_Header_Options,title:e.$Labels.Layers_Recent_Tab_OverFlow_Header_Options},null,8,["assistiveText","title"])]),default:L(()=>[t.layer.actions.length?(b(),S("div",We,[(b(!0),S(W,null,G(t.layer.actions,(d,i)=>(b(),P(a,{key:`action_${i}`,header:d.type==="header",label:d.label,disabled:d.enabled===!1,style:{"min-width":"136px"},onClick:u=>o.runLayerFunction(d.action,d.enabled)},null,8,["header","label","disabled","onClick"]))),128))])):(b(),S("div",Ge,[_(a,{header:"",label:e.$Labels.Layers_Saved_Tab_Folders_Hover_Text_No_Actions},null,8,["label"])]))]),_:1})],16,ve)}const Q=O(ge,[["render",Ye],["__scopeId","data-v-f3b91408"]]),It=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));const Je={components:{LayerRow:Q,Icon:re,ButtonIcon:C},directives:{"click-outside":ie},props:{showSearchMask:{type:Boolean,default:!1}},emits:["update:showSearchMask","handle-action","move-to-tab"],data(){return{searchVisible:!1,searchTimeout:null,searchSuggestion:"",searchLoading:!1,searchResults:[],folderResultsCss:{"max-height":"inherit"},searchMinChar:2}},computed:{clickOutsideOptions(){return{active:this.searchVisible,handler:this.hideSearch}}},methods:{hideSearch(){this.$emit("update:showSearchMask",!1),this.searchVisible=!1},showSearch(){this.searchVisible=!0,this.$emit("update:showSearchMask",!0);const s=document.getElementById("mapdiv").clientHeight;this.folderResultsCss={"max-height":`${s-65}px`}},debounceSearch(){if(this.searchTimeout!==null&&clearTimeout(this.searchTimeout),this.searchSuggestion.length<2){this.searchResults=[],this.searchLoading=!1;return}this.searchLoading=!0,this.searchTimeout=setTimeout(()=>{this.searchTimeout=null,this.getSuggestions()},500)},async getSuggestions(){try{const e=await ce(this.searchSuggestion);this.searchSuggestion.length>=2&&(this.searchResults=de(e))}catch(e){console.error(e)}this.searchLoading=!1},clearSearch(){this.searchResults=[],this.searchSuggestion="",this.hideSearch()},handleAction(e){this.hideSearch();const{action:s=""}=e;s==="open-folder"&&this.$emit("move-to-tab","saved"),this.$emit("handle-action",e)}}},Z=e=>(Y("data-v-17d7935c"),e=e(),J(),e),Qe={class:"slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right",style:{"z-index":"110"}},Ze=["placeholder"],Xe={class:"slds-input__icon-group slds-input__icon-group_right"},et={id:"folder-search-loading",role:"status",class:"slds-spinner slds-spinner_brand slds-spinner_x-small slds-input__spinner"},tt={class:"slds-assistive-text"},st=Z(()=>r("div",{class:"slds-spinner__dot-a"},null,-1)),ot=Z(()=>r("div",{class:"slds-spinner__dot-b"},null,-1)),lt={class:"folder-search-results-positioning"},at={class:"foldersearch-wrap"};function nt(e,s,t,n,l,o){const c=y("Icon"),a=y("ButtonIcon"),h=y("layerRow"),d=he("click-outside");return b(),S("div",null,[r("div",{id:"folderSearchWrapper",class:R([{"results-visible":l.searchVisible},"folder-search-wrapper slds-p-top_small slds-p-bottom_x-small slds-p-horizontal_medium"])},[r("div",Qe,[_(c,{category:"utility",name:"search",size:"x-small",style:{position:"absolute",left:"0.5rem",top:"0.5rem"}}),T(r("input",{id:"foldersearchInput","onUpdate:modelValue":s[0]||(s[0]=i=>l.searchSuggestion=i),type:"text",placeholder:e.$Labels.Layers_Saved_Tab_Search_Layers_Input,autocomplete:"off",class:"slds-input",onClick:s[1]||(s[1]=(...i)=>o.showSearch&&o.showSearch(...i)),onKeyup:s[2]||(s[2]=(...i)=>o.debounceSearch&&o.debounceSearch(...i))},null,40,Ze),[[ue,l.searchSuggestion]]),r("div",Xe,[T(r("div",et,[r("span",tt,g(e.$Labels.Layers_On_The_Map_Loading),1),st,ot],512),[[A,l.searchLoading]]),T(_(a,{iconCategory:"utility",iconName:"clear",size:"small",style:{position:"absolute",right:"4px",bottom:"-5px"},title:e.$Labels.Layers_On_The_Map_Clear,assistiveText:e.$Labels.Layers_On_The_Map_Clear,onClick:o.clearSearch},null,8,["title","assistiveText","onClick"]),[[A,!l.searchLoading]])])])],2),r("div",lt,[T((b(),S("div",{class:R([{"results-visible":l.searchVisible},"foldersearch-results"])},[r("div",at,[r("div",{id:"foldersearch-results-contents",style:w([{"min-height":"0 !important"},l.folderResultsCss])},[(b(!0),S(W,null,G(l.searchResults,(i,u)=>(b(),P(h,{key:`search_${u}-${i.id}`,ref_for:!0,ref:`search_${i.id}`,isSearch:!0,layer:i,onRunAction:o.handleAction},null,8,["layer","onRunAction"]))),128)),T(r("div",{class:"searchresults-placeholder slds-text-align_center slds-p-top_medium"},g(e.$Labels.MA_char_search),513),[[A,l.searchResults.length===0]])],4)])],2)),[[d,void 0,o.clickOutsideOptions]])])])}const rt=O(Je,[["render",nt],["__scopeId","data-v-17d7935c"]]);async function it(e,s,t){const n=[];if(!e.visible)return n;const l=e.qid,o=e.allLayers.find(d=>d.id===`records-${l}`);if(!o.visible)return n;const c=Math.min(10,s.length),a=await o.queryFeatures(),{features:h}=a;return h.forEach(d=>{if(!d.visible)return;const i=I(d),{attributes:u}=d,{latitude:m,longitude:p}=i,{objectId:f,tooltip1:v}=u;if(!m||!p||!f||!t.has(f))return;const k=t.get(f),M=[];for(let x=0;x<c;x++){const ee=s[x];try{const{ActualFieldName:N,FieldLabel:te}=ee,V=MAPS.Utils.Obj.get(k,N,!1),se=V.formatted||V.raw;M.push({label:te,value:se})}catch{}}const X={kmlType:"point",name:v,markerLatitude:m,markerLongitude:p,tooltips:M};n.push(X)}),n}function ct(e,s){const t=[];if(!["circle","rectangle","polygon"].includes(e))throw new Error("Unknown Layer Type for KML Export");return s.visible&&s.graphics.forEach(l=>{if(!l.visible)return;const o=F(l),c=I(l),a={kmlType:"polygon",name:"Polygon",markerLongitude:c.longitude,markerLatitude:c.latitude,rings:c.rings,holeIndices:c.holeIndices,fillColor:o.fillColor||"#3083d3",fillOpacity:o.fillOpacity||"0.6",strokeColor:o.strokeColor||"#16325C",strokeWeight:o.strokeWeight||4};e==="circle"?a.name="Circle":e==="rectangle"&&(a.name="Rectangle"),t.push(a)}),t}function dt(e,s){const t=[];if(!["traveltime","traveldistance"].includes(e))throw new Error("Unknown Layer Type for KML Export");if(!s.visible)return t;const o={kmlType:"polygon",name:e==="traveltime"?"Travel Time":"Travel Distance"};return s.graphics.forEach(c=>{if(!c.visible)return;const a=F(c),h=I(c);h.type==="point"?(o.markerLatitude=h.latitude,o.markerLongitude=h.longitude):(o.rings=h.rings,o.holeIndices=h.holeIndices,o.fillColor=a.fillColor||"#3083d3",o.fillOpacity=a.fillOpacity||"0.6",o.strokeColor=a.strokeColor||"#16325C",o.strokeWeight=a.strokeWeight||4)}),[o]}async function ht(e){const s=[];if(!e.visible)return s;const t=await e.queryFeatures(),n=F(e.renderer),{features:l}=t;return l.forEach(o=>{if(!o.visible)return;const{label:c="Merged Polygon"}=o.attributes,a=I(o),h={kmlType:"polygon",name:c,markerLongitude:a.longitude,markerLatitude:a.latitude,rings:a.rings,holeIndices:a.holeIndices,fillColor:n.fillColor||"#3083d3",fillOpacity:n.fillOpacity||"0.6",strokeColor:n.strokeColor||"#16325C",strokeWeight:n.strokeWeight||4};s.push(h)}),s}function ut(e){if(!Array.isArray(e)||e.length===0)return null;const s=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
 <Document>
  <name>Salesforce Maps Export</name>
`,t=` </Document>
</kml>`;let n={},l="",o="",c="",a="";for(let i=0;i<e.length;i++){const u=e[i],{type:m,name:p,geometries:f,isSketch:v}=u;if(m==="points"){const k=pt(p,f);a+=k}else if(m==="polygons"){const{kmlFolder:k,styles:M}=_t(p,f);n={...n,...M},v===!0?c+=k:o+=k}else throw new Error(`Unexpected KML processing type:: ${m}`)}const h=`  <Folder>
    <name>All Shapes</name>
    <Folder>
      <name>Drawn Shapes</name>
`+c+`    </Folder>
    <Folder>
      <name>Saved Shapes</name>
`+o+`    </Folder>
  </Folder>
`;Object.values(n).forEach(i=>{l+=i});let d=s+l;return a&&(d+=a),(c||o)&&(d+=h),d+=t,d}function pt(e,s){let t="";return s.forEach(l=>{t+=mt(l)}),`  <Folder>
    <name>`+K(e)+`</name>
`+t+`  </Folder>
`}function _t(e,s){const t={};let n="";return s.forEach(o=>{const{fillColor:c,fillOpacity:a,strokeColor:h,strokeWeight:d}=o,i=ft(c,a,h,d);if(!t[i]){const u=z(h,a),m=z(c,a),p='  <Style id="'+i+'"><LineStyle><width>'+d+"</width><color>"+u+"</color></LineStyle><PolyStyle><color>"+m+`</color><fill>1</fill></PolyStyle></Style>
`;t[i]=p}n+=yt(i,o)}),{kmlFolder:`      <Folder>
        <name>`+K(e)+`</name>
`+n+`      </Folder>
`,styles:t}}function mt(e){const s=`    <Placemark>
      <name>::NAME::</name>
      <description>::DESCRIPTION::</description>
      <Point><coordinates>::COORDS::</coordinates></Point>
    </Placemark>
`,{name:t,markerLatitude:n,markerLongitude:l,tooltips:o}=e,c=K(t);let a="<![CDATA[<table>";for(let d=0;d<o.length;d++){const i=o[d],{label:u,value:m}=i;a+='<tr><td style="padding-right: 10px;">'+u+":</td><td>"+m+"</td></tr>"}return a+="</table>]]>",s.replace("::NAME::",c).replace("::COORDS::",l+","+n+",0").replace("::DESCRIPTION::",a)}function yt(e,s){const t=`        <Placemark>
          <styleUrl>#::STYLEID::</styleUrl>
          <name>::NAME::</name>
          <MultiGeometry>::MARKER::::RINGS::
          </MultiGeometry>
        </Placemark>
`,{rings:n,holeIndices:l,name:o,markerLatitude:c,markerLongitude:a}=s,h=`
            <Point><coordinates>`+a+","+c+",0</coordinates></Point>",d=n.filter((m,p)=>!l[p]);let i="";return d.forEach(m=>{i+=`
            <Polygon><outerBoundaryIs><LinearRing><coordinates>
`,m.forEach(p=>{const f=p[0],v=p[1];i+="              "+f+","+v+`
`}),i+="            </coordinates></LinearRing></outerBoundaryIs></Polygon>"}),t.replace("::STYLEID::",e).replace("::NAME::",o).replace("::MARKER::",h).replace("::RINGS::",i)}function ft(e,s,t,n){const l=e.replace("#",""),o=s.toString().replace(".",""),c=t.replace("#","");return l+o+c+n.toString()}function K(e){return typeof e=="string"?String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e}function z(e,s){e=e.replace("#",""),s=s||.5;let t={r:e.substr(0,2)||"00",g:e.substr(2,2)||"00",b:e.substr(4,2)||"00"};const n={r:parseInt(t.r,16),g:parseInt(t.g,16),b:parseInt(t.b,16),a:s};return t={r:n.r,g:n.g||0,b:n.b||0},s=parseInt(s*255,10),s=s.toString(16),t.b=t.b.toString(16),t.g=t.g.toString(16),t.r=t.r.toString(16),s.length<2&&(s="0"+s),t.b.length<2&&(t.b="0"+t.b),t.g.length<2&&(t.g="0"+t.g),t.r.length<2&&(t.r="0"+t.r),s+t.b+t.g+t.r}const gt=E({loader:()=>B(()=>import("./Recent.16eaceab.js"),[MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/Recent.16eaceab.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "bundle.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/main.feeda730.css" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/layer-actions.075222c3.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/enums.445299a0.js" })],import.meta.url),loadingComponent:D}),bt=E({loader:()=>B(()=>import("./Saved.99096d42.js"),[MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/Saved.99096d42.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "bundle.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/main.feeda730.css" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/layer-actions.075222c3.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/enums.445299a0.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/Saved.c460881f.css" })],import.meta.url),loadingComponent:D}),vt=E({loader:()=>B(()=>import("./OnTheMap.2bc52708.js"),[MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/OnTheMap.2bc52708.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "bundle.js" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/main.feeda730.css" }),MAPS.getURLPath({ base: '/resource/1730379547462/maps__VueDesktopV2/dist/', path: "assets/OnTheMap.7fec03b7.css" })],import.meta.url),loadingComponent:D}),Lt={components:{Tabs:pe,Tab:_e,Recent:gt,Saved:bt,OnTheMap:vt,Search:rt,ButtonIcon:C,ActionMenu:q,ActionMenuItem:U},setup(){const e=me(),s=H(),t=ye();return{mainStore:e,layersStore:s,listStore:t}},data(){return{selectedTabId:"recent",showSearchMask:!1,showLayerOptions:!1,tabLoaded:{recent:!0,saved:!1,onthemap:!1},savedTabLoaded:!1,recentTabLoaded:!1}},computed:{exportAllowed(){return this.mainStore.settings.export.enabled||!1}},methods:{addProximityLayer(){const e={id:`custom_${j()}`,qid:j(),type:"",name:"",description:"",component:"BoundaryLayer"};this.layersStore.addPlottedLayer(e)},async removeAllLayers(){const e=this.layersStore.plottedLayers||[];await MAPS.Utils.Async.forEachParallel(e,async s=>{this.layersStore.removePlottedLayer(s.qid)}),this.layersStore.markerSelection.renderSelectionLayer=!1},async exportKML(){const e=this.prepDataForKML();this.mainStore.toast({message:this.$Labels.MA_Export,subMessage:this.$Labels.MA_Loading,position:"bottom-right",state:"async",when:e});const s=await e,t=ut(s);t?await this.saveKML(t):this.mainStore.toast({message:this.$Labels.MA_Export,subMessage:this.$Labels.MA_No_Supported_Layer_Map,position:"bottom-right",state:"warning"})},async prepDataForKML(){const e=[],s=[];(this.layersStore.plottedLayers||[]).forEach(l=>{const{qid:o,type:c,name:a,isSketch:h=!1}=l,d=MAPS.view.map.findLayerById(o);if(c==="marker"){const{tooltips:i,savedQueryName:u}=l.queryData;if(!this.listStore.listMap.has(o))return;const{recordMap:m}=this.listStore.listMap.get(o),p=it(d,i,m).then(f=>Promise.resolve({type:"points",name:u,geometries:f,isSketch:!1})).catch(f=>Promise.reject(f));s.push(p)}else if(["circle","rectangle","polygon"].includes(c)){const i=a||"Boundary",u=ct(c,d);e.push({type:"polygons",name:i,geometries:u,isSketch:h})}else if(["traveltime","traveldistance"].includes(c)){const i=a||"Boundary",u=dt(c,d);e.push({type:"polygons",name:i,geometries:u,isSketch:h})}else if(c==="shape"){const i=ht(d).then(u=>Promise.resolve({type:"polygons",name:a,geometries:u,isSketch:h})).catch(u=>Promise.reject(u));s.push(i)}});const n=await Promise.all(s);return e.concat(n)},async saveKML(e){const s=new Blob([e],{type:"application/vnd.google-earth.kml+xml;"}),t=window.URL.createObjectURL(s),n=document.createElement("a");n.href=t,n.setAttribute("download","Maps_Export.kml"),n.click()},handleAction({action:e,layer:s}){fe.handleAction({action:e,layerData:s})},setActiveTab(e){this.layersStore.activeTab=e}}},St={class:"slds-border_right"},kt={style:{height:"calc(100% - 52px)",position:"relative"}};function Tt(e,s,t,n,l,o){const c=y("Search"),a=y("Recent"),h=y("Tab"),d=y("Saved"),i=y("OnTheMap"),u=y("Tabs"),m=y("ButtonIcon"),p=y("ActionMenuItem"),f=y("ActionMenu");return b(),S("div",St,[_(c,{showSearchMask:l.showSearchMask,"onUpdate:showSearchMask":s[0]||(s[0]=v=>l.showSearchMask=v),onHandleAction:o.handleAction,onMoveToTab:o.setActiveTab},null,8,["showSearchMask","onHandleAction","onMoveToTab"]),r("div",{id:"folder-search-mask",class:R({active:l.showSearchMask})},null,2),r("div",kt,[_(u,{modelValue:n.layersStore.activeTab,"onUpdate:modelValue":s[1]||(s[1]=v=>n.layersStore.activeTab=v),style:{height:"100%"}},{default:L(()=>[_(h,{id:"recent",style:{height:"calc(100% - 41px)"},class:"slds-p-bottom_none",title:e.$Labels.Layers_Recent_Tab},{default:L(()=>[_(a)]),_:1},8,["title"]),_(h,{id:"saved",style:{height:"calc(100% - 41px)"},title:e.$Labels.Layers_Saved_Tab,class:"slds-p-bottom_none"},{default:L(()=>[_(d)]),_:1},8,["title"]),_(h,{id:"onthemap",style:{height:"calc(100% - 41px)","background-color":"#f3f2f2",padding:"0"},class:"slds-p-around_none",title:e.$Labels.Layers_On_The_Map_Tab},{default:L(()=>[_(i)]),_:1},8,["title"])]),_:1},8,["modelValue"]),_(f,{style:{position:"absolute",top:"8px",right:"5px"}},{button:L(()=>[_(m,{"data-q3-id":"action-menu-button",iconCategory:"utility",iconName:"threedots_vertical",size:"small",title:e.$Labels.Layers_Recent_Tab_OverFlow_Header_Options,assistiveText:e.$Labels.Layers_Recent_Tab_OverFlow_Header_Options},null,8,["title","assistiveText"])]),default:L(()=>[_(p,{header:"",class:"slds-border_bottom",label:e.$Labels.Layers_Recent_Tab_OverFlow_Header_Options},null,8,["label"]),_(p,{label:e.$Labels.Layers_Recent_Tab_OverFlow_Option_Add_Boundary,onClick:o.addProximityLayer},null,8,["label","onClick"]),_(p,{label:e.$Labels.Layers_Recent_Tab_OverFlow_Option_Remove_All_Layers,onClick:o.removeAllLayers},null,8,["label","onClick"]),o.exportAllowed?(b(),P(p,{key:0,label:e.$Labels.Layers_Recent_Tab_OverFlow_Option_Export_All_Layers,onClick:o.exportKML},null,8,["label","onClick"])):$("",!0)]),_:1})])])}const Mt=O(Lt,[["render",Tt],["__scopeId","data-v-4a780737"]]),xt=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"}));export{It as L,xt as a};

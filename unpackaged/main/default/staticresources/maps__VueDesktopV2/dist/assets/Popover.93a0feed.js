import{_ as E,B as I,I as w,aB as T,ac as k,aC as O,r as f,aD as C,s as L,o as l,c as n,i as $,a6 as c,h as i,a7 as r,e as u,F as x,b as B,a0 as S,a8 as m,p as H,k as D}from"../bundle.js";const p={top:"top","top left":"top-end","top right":"top-start",right:"right","right top":"right-end","right bottom":"right-start",bottom:"bottom","bottom left":"bottom-end","bottom right":"bottom-start",left:"left","left top":"left-end","left bottom":"left-start"},P=()=>({closeTitle:"Close Dialog",closeAssistiveText:"Close Dialog"}),g=e=>Object.keys(p).find(t=>t===e),V={name:"Popover",description:"Renders a SLDS-themed popover dialog",components:{ButtonIcon:I,Icon:w},directives:{"click-outside":T},props:{alignment:{type:String,default:"top",validator(e){return g(e)}},ariaLabel:{type:String,default:null},bindTo:{type:HTMLElement,default:null},bindToRect:{type:Object,default:()=>{},validator:e=>e.x&&e.y},closeOnClickOutside:Boolean,labels:{type:Object,default:()=>{}},nubbinREM:{type:Number,default:1.8},overflowPadding:{type:Number,default:5},position:{type:String,default:"fixed",validator(e){return["absolute","fixed"].find(t=>t===e)}},scrollElementsToIgnore:{type:Array,default:()=>[]},theme:{type:String,default:"base",validator:e=>{const t=["base","error","warning"],o=!e||t.includes(e);return o||console.error(`Valid theme prop values are ${t.join(", ")}`),o}},width:{type:String,default:"small",validator:e=>{const t=["small","medium","large","x-large","full-width"],o=!e||t.includes(e);return o||console.error(`Valid width prop values are ${t.join(", ")}`),o}}},data(){return{container:null,el:null,focusableElements:[],triggerElement:null,popoverId:k(),observer:null,popperInstance:()=>{}}},computed:{computedLabels(){const e=Object.hasOwn(this,"$__getGlobalLabels")?this.$__getGlobalLabels().popover||{}:{};return{...P(),...e,...this.$props.labels}},widthClass(){return`slds-popover_${this.width}`},popoverClass(){return this.theme!=="base"?`slds-popover_${this.theme}`:""},showHeader(){return this.$slots.header||this.$slots.custom},showFooter(){return this.$slots.footer},clickOutsideOptions(){return{active:this.closeOnClickOutside,handler:this.doHide}}},watch:{alignment(){g(this.$props.alignment)&&this.popperInstance.setOptions({placement:p[this.$props.alignment]})},width(){this.popperInstance.setOptions({placement:p[this.$props.alignment]})},"$props.bindTo":{handler(){!this.$props.bindTo||(this.popperInstance.state.elements.reference=this.$props.bindTo,this.popperInstance.update())}}},mounted(){this.triggerElement=this.bindTo||document.activeElement||document.body,this.getFocusableElements(),this.popperInstance=O(this.triggerElement,this.$refs.popover,{strategy:this.position,placement:p[this.alignment],modifiers:[{name:"offset",options:{offset:({placement:e})=>e.includes("end")?[16,16]:e.includes("start")?[-16,16]:[0,16]}},{name:"preventOverflow",options:{padding:this.$props.overflowPadding}}]}),this.observer=new MutationObserver(()=>this.popperInstance.update()),this.observer.observe(this.triggerElement,{attributes:!0,childList:!0,subtree:!0}),this.focusableElements.length&&(this.focusableElements.length>1&&this.focusableElements[0]===this.$refs.closeButton?this.focusableElements[1].focus():this.focusableElements[0].focus())},updated(){this.getFocusableElements()},beforeUnmount(){this.destroy()},methods:{doHide(e){if(e)if(e.type!=="scroll"){if(this.bindTo&&this.bindTo.contains(e.target))return}else{const t=this.$refs.popover.contains(e.target),o=this.scrollElementsToIgnore.includes(e.target)||this.scrollElementsToIgnore.some(h=>h&&h.contains(e.target));if(t||o)return}this.$emit("close",e)},destroy(){this.el&&this.el.remove(),this.container&&this.container.remove(),this.el=null,this.container=null,window.removeEventListener("scroll",this.doHide,!0),this.triggerElement.focus(),this.observer.disconnect(),this.observer=null},getFocusableElements(){this.focusableElements=[...this.$refs.popover.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')].filter(e=>!e.hasAttribute("disabled"))},tab(e){!this.focusableElements.length||this.focusableElements[this.focusableElements.length-1]===document.activeElement&&(e.preventDefault(),this.focusableElements[0].focus())},shiftTab(e){!this.focusableElements.length||this.focusableElements[0]===document.activeElement&&(e.preventDefault(),this.focusableElements[this.focusableElements.length-1].focus())}}},b=e=>(H("data-v-51efade9"),e=e(),D(),e),F=["aria-describedby","aria-labelledby","aria-label"],j=["id"],A={class:"slds-media"},N={class:"slds-media__body"},M=["id"],q={class:"slds-text-heading_small"},G=b(()=>i("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",-1)),R=["id"],z={class:"slds-media slds-media_center slds-has-flexi-truncate"},K={class:"slds-media__figure"},U={class:"slds-media__body"},J={class:"slds-truncate slds-text-heading_medium"},Q=["id"],W=b(()=>i("p",null,"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",-1)),X={key:2,class:"slds-popover__footer"},Y=b(()=>i("div",{id:"arrow","data-popper-arrow":""},null,-1));function Z(e,t,o,h,a,s){const v=f("ButtonIcon"),_=f("Icon"),y=C("click-outside");return L((l(),n("section",{ref:"popover",role:"dialog","aria-describedby":`dialog-body-${a.popoverId}`,"aria-labelledby":s.showHeader?`dialog-heading-${a.popoverId}`:null,"aria-label":o.ariaLabel,tabindex:"-1",class:S([[s.popoverClass,s.widthClass],"slds-popover"]),onKeydown:[t[0]||(t[0]=m(c((...d)=>s.tab&&s.tab(...d),["exact","stop"]),["tab"])),t[1]||(t[1]=m(c((...d)=>s.shiftTab&&s.shiftTab(...d),["shift","stop"]),["tab"])),t[2]||(t[2]=m(c((...d)=>s.doHide&&s.doHide(...d),["stop"]),["esc"]))]},[$(v,{ref:"closeButton",variant:o.theme==="error"?"inverse":"bare",title:s.computedLabels.closeTitle,class:"slds-float_right slds-popover__close",iconCategory:"utility",size:"small",iconName:"close",assistiveText:s.computedLabels.closeAssistiveText,onClick:c(s.doHide,["stop"])},null,8,["variant","title","assistiveText","onClick"]),o.theme==="base"?(l(),n("div",{key:0,id:`dialog-body-${a.popoverId}`,class:"slds-popover__body"},[i("div",A,[i("div",N,[s.showHeader?(l(),n("header",{key:0,id:`dialog-heading-${a.popoverId}`,class:"slds-popover__header"},[r(e.$slots,"custom",{},()=>[i("h2",q,[r(e.$slots,"header",{},void 0,!0)])],!0)],8,M)):u("",!0)])]),r(e.$slots,"content",{},()=>[G],!0)],8,j)):(l(),n(x,{key:1},[s.showHeader?(l(),n("header",{key:0,id:`dialog-heading-${a.popoverId}`,class:"slds-popover__header"},[i("div",z,[r(e.$slots,"custom",{},()=>[i("div",K,[o.theme!=="base"?(l(),B(_,{key:0,category:"utility",name:e.$props.theme,variant:"inverse",iconClass:["slds-icon","slds-icon_x-small"]},null,8,["name"])):u("",!0)]),i("div",U,[i("h2",J,[r(e.$slots,"header",{},void 0,!0)])])],!0)])],8,R)):u("",!0),i("div",{id:`dialog-body-${a.popoverId}`,class:"slds-popover__body"},[r(e.$slots,"content",{},()=>[W],!0)],8,Q)],64)),s.showFooter?(l(),n("footer",X,[r(e.$slots,"footer",{},void 0,!0)])):u("",!0),Y],42,F)),[[y,void 0,s.clickOutsideOptions]])}const te=E(V,[["render",Z],["__scopeId","data-v-51efade9"]]);export{te as P};

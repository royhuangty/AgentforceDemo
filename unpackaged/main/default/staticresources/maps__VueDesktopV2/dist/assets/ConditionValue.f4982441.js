import{_ as c,r as m,o as u,b,c as v,h as _,i as p,e as D,a3 as d,D as n,P as k,O as B,n as T,aj as A,ak as C,w as R,a9 as S,af as x,ag as U}from"../bundle.js";import{R as N}from"./Group.7e0cb254.js";import{u as g}from"./index.d251dbc7.js";import{D as w}from"./DatePicker.899772b4.js";import{T as M}from"./TimePicker.bfa4e2f9.js";import{c as L,r as O,d as h}from"./index.0172543b.js";const F={name:"BooleanValueType",components:{RadioGroup:N},data(){return{options:[],value:""}},computed:{computedLabels(){return{...MAPS?.app?.config?.globalProperties?.$Labels||{},...this.$attrs.labels}}},watch:{"$attrs.value":{handler(e){this.value=e},immediate:!0}},created(){this.options=[{label:this.computedLabels.modal_MLB_Boolean_True,value:"true",disabled:!1},{label:this.computedLabels.modal_MLB_Boolean_False,value:"false",disabled:!1}]}};function G(e,t,i,o,s,l){const r=m("RadioGroup");return u(),b(r,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=a=>s.value=a),labels:{name:l.computedLabels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,options:s.options,onInput:t[1]||(t[1]=a=>e.$emit("update:value",a.target.value))},null,8,["modelValue","labels","disabled","options"])}const q=c(F,[["render",G],["__scopeId","data-v-1ce26bb4"]]);const j={name:"DateTimeValueTypeInstance",components:{DatePicker:w,TimePicker:M},inheritAttrs:!1,validations(){const e={binding:{date:{}}};return this.$attrs.range&&(e.binding.date={required:L.withMessage(MASystem.Labels.modal_MLB_Date_Required,O)}),e},data(){return{binding:{date:null,time:null},locale:MAPS.currentUser.Locale.replace("_","-"),firstDayOfWeek:MAPS.currentUser.StartOfWeekIndex,v$:g()}},computed:{computedLabels(){return{...MAPS?.app?.config?.globalProperties?.$Labels||{},...this.$attrs.labels}}},watch:{"$attrs.value":{handler(e){e?this.binding={...e}:this.binding={date:null,time:null}},immediate:!0}},methods:{onBindingChange(){this.$emit(`update:${this.$attrs.valueString}`,this.binding)},$getErrorsByField(e){return e.$errors.map(t=>t.$message)}}},z={class:"slds-grid slds-gutters_xx-small"},W={class:"slds-col slds-grow-none"},H={key:0,class:"slds-col slds-grow-none"};function K(e,t,i,o,s,l){const r=m("DatePicker"),a=m("TimePicker");return u(),v("div",z,[_("div",W,[p(r,{modelValue:s.v$.binding.date.$model,"onUpdate:modelValue":[t[0]||(t[0]=$=>s.v$.binding.date.$model=$),l.onBindingChange],errors:l.$getErrorsByField(s.v$.binding.date),labels:{name:e.$attrs.labels.date},firstDayOfWeek:s.firstDayOfWeek,locale:s.locale},null,8,["modelValue","errors","labels","firstDayOfWeek","locale","onUpdate:modelValue"])]),e.$attrs.dateOnly?D("",!0):(u(),v("div",H,[p(a,{modelValue:s.binding.time,"onUpdate:modelValue":[t[1]||(t[1]=$=>s.binding.time=$),l.onBindingChange],disabled:!e.$attrs.hasTime||!s.binding.date,combobox:"",labels:{name:e.$attrs.labels.time},locale:s.locale,resizeToFitContent:""},null,8,["modelValue","disabled","labels","locale","onUpdate:modelValue"])]))])}const P=c(j,[["render",K],["__scopeId","data-v-948ce714"]]),f=function(t,i){return d(P,{...this.$attrs,hasTime:this.$attrs.displayType.equals(n.DATETIME),labels:i,value:this.$attrs[t],valueString:t,"onChange-value":o=>{!this.$attrs.range||(this.v$.range.value.$model=o)},"onChange-value2":o=>{this.v$.range.value2.$model=o}})},I=(e,t)=>{if(t.value===t.value2)return!0;const{value:i,value2:o}=t,s=new Date(i).setSeconds(0),l=new Date(o).setSeconds(0);return!(s>l)},X={name:"DateTimeValueType",components:{Instance:P},inheritAttrs:!1,validations(){const e={};return this.$attrs.range&&(e.range={value:{validDateRange:I},value2:{validDateRange:I}}),e},data(){return{range:{value:this.$attrs.value,value2:this.$attrs.value2},v$:g(),validRange:!0}},computed:{computedLabels(){return{...MAPS.app.config.globalProperties.$Labels||{},...this.$attrs.labels}}},render(){if(this.$attrs.range){const e=[d("label",{class:"slds-form-element__label"},[this.computedLabels.modal_MLB_DateTime_Range_Label]),d("div",{class:{"slds-col slds-grow-none margin-top-auto slds-box":!0},style:"background: #eee; padding: 4px 10px 12px 10px;"},[f.call(this,"value",{type:this.computedLabels.modal_MLB_DateTime_Mode_Picklist_Start_Label,date:this.computedLabels.modal_MLB_DateTime_Date_Component_Start_Label,time:this.computedLabels.modal_MLB_DateTime_Time_Component_Start_Label}),f.call(this,"value2",{type:this.computedLabels.modal_MLB_DateTime_Mode_Picklist_End_Label,date:this.computedLabels.modal_MLB_DateTime_Date_Component_End_Label,time:this.computedLabels.modal_MLB_DateTime_Time_Component_End_Label})])];return d("div",{class:"slds-form-element"},e)}return f.call(this,"value",{type:this.computedLabels.modal_MLB_DateTime_Mode_Picklist_Label,date:this.computedLabels.modal_MLB_DateTime_Date_Component_Label,time:this.computedLabels.modal_MLB_DateTime_Time_Component_Label})}},Y={name:"PicklistValueType",components:{Picklist:k},inheritAttrs:!1,data(){return{doDetach:!(document.fullscreen&&document.fullscreenElement.id==="mapdiv"),value:this.setValue()}},computed:{computedLabels(){return{...MAPS?.app?.config?.globalProperties?.$Labels||{},...this.$attrs.labels}}},watch:{"$attrs.value":{handler(){this.value=this.setValue()},immediate:!0}},methods:{setValue(){return this.$attrs.multiselectDialog?[this.$attrs.value]:this.$attrs.value},async getSearchResults(e){const t={action:"get_lookup_options",ajaxResource:"TooltipAJAXResources",baseObject:this.$attrs.plottedObject,fieldName:this.$attrs.updateField,term:e},i=await MAPS.Utils.Apex.invoke("maps.RemoteFunctions.processAJAXRequest",[t]),{success:o,lookupOptions:s}=i;if(o){const l=[];return s.forEach(r=>l.push({Id:r.value,Name:r.label})),l}return[]}}};function J(e,t,i,o,s,l){const r=m("Picklist",!0);return e.$attrs.useTypeAhead?(u(),b(r,{key:0,modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=a=>s.value=a),t[1]||(t[1]=a=>e.$emit("update:value",a))],labels:{name:l.computedLabels.modal_MLB_Condition_Value},options:[{options:l.getSearchResults}],titleKey:"Name",idKey:"Id",asyncDelay:250,filterable:"",combobox:"",resizeToFitContent:"",detach:s.doDetach},null,8,["modelValue","labels","options","detach"])):(u(),b(r,{key:1,modelValue:s.value,"onUpdate:modelValue":[t[2]||(t[2]=a=>s.value=a),t[3]||(t[3]=a=>e.$emit("update:value",a))],labels:{name:l.computedLabels.modal_MLB_Condition_Value},options:e.$attrs.picklistOptions,combobox:!e.$attrs.multiselectDialog,filterable:!e.$attrs.multiselectDialog,multiselectDialog:e.$attrs.multiselectDialog,disabled:e.$attrs.picklistOptions?.length===0,helpText:e.$attrs.picklistOptions?.length===0?"No picklist options available to select.":null,resizeToFitContent:"",detach:s.doDetach},null,8,["modelValue","labels","options","combobox","filterable","multiselectDialog","disabled","helpText","detach"]))}const Q=c(Y,[["render",J]]),Z=[n.CURRENCY,n.DOUBLE,n.INTEGER,n.PERCENT],ee={name:"TextValueType",components:{TextInput:B},inheritAttrs:!1,emits:["update:value","update:value2"],data(){return{v$:g(),value:"",value2:""}},computed:{computedLabels(){return{...MAPS?.app?.config?.globalProperties?.$Labels||{},...this.$attrs.labels}}},watch:{"$attrs.value":{handler(e){this.value=e},immediate:!0},"$attrs.value2":{handler(e){this.value2=e},immediate:!0}},validations(){let e={value:{},value2:{}};return Z.some(t=>this.$attrs.displayType.equals(t))&&(e={value:{decimal:L.withMessage(MASystem.Labels.modal_MLB_Input_Error_Number,h)},value2:{decimal:L.withMessage(MASystem.Labels.modal_MLB_Input_Error_Number,h)}}),e},methods:{$getErrorsByField(e){return e.$errors.map(t=>t.$message)}}},te={class:"slds-grid slds-gutters_xx-small"},se={class:"slds-col",style:{"min-width":"12rem"}},ae={key:0,class:"slds-col",style:{"min-width":"12rem"}};function le(e,t,i,o,s,l){const r=m("TextInput",!0);return u(),v("div",te,[_("div",se,[p(r,{modelValue:s.v$.value.$model,"onUpdate:modelValue":t[0]||(t[0]=a=>s.v$.value.$model=a),labels:{name:e.$attrs.range?l.computedLabels.modal_MLB_Condition_Value_From:l.computedLabels.modal_MLB_Condition_Value},disabled:e.$attrs.disabled,errors:l.$getErrorsByField(s.v$.value),useTextArea:e.$attrs.useTextArea,onInput:t[1]||(t[1]=a=>e.$emit("update:value",a.target.value))},null,8,["modelValue","labels","disabled","errors","useTextArea"])]),e.$attrs.range?(u(),v("div",ae,[p(r,{modelValue:s.v$.value2.$model,"onUpdate:modelValue":t[2]||(t[2]=a=>s.v$.value2.$model=a),labels:{name:l.computedLabels.modal_MLB_Condition_Value_To},disabled:e.$attrs.disabled,errors:l.$getErrorsByField(s.v$.value2),useTextArea:e.$attrs.useTextArea,onInput:t[3]||(t[3]=a=>e.$emit("update:value2",a.target.value))},null,8,["modelValue","labels","disabled","errors","useTextArea"])])):D("",!0)])}const ne=c(ee,[["render",le]]);const oe={components:{TextInput:B},emits:["update:value","update:value2"],data(){return{binding:{days:null,hours:null,minutes:null}}},watch:{"$attrs.value":{handler(e){e?this.binding=this.convertBindingFrom(e):this.binding={distance:null,unit:"mi"}},immediate:!0}},methods:{onBindingChange(){this.$emit(`update:${this.$attrs.valueString}`,this.convertBindingTo())},convertBindingFrom(e=0){const t=Math.floor(e/1440),i=Math.floor(e%(24*60)/60);return{minutes:e%60,hours:i,days:t}},convertBindingTo(){const{days:e,hours:t,minutes:i}=this.binding;return parseInt(e||0,10)*24*60+parseInt(t||0,10)*60+parseInt(i||0,10)}}},ie={class:"slds-grid slds-gutters_xx-small"};function re(e,t,i,o,s,l){const r=m("TextInput");return u(),v("div",ie,[_("div",{class:"slds-col",style:T({width:e.$attrs.range?"6rem":"4rem"})},[p(r,{modelValue:s.binding.days,"onUpdate:modelValue":t[0]||(t[0]=a=>s.binding.days=a),type:"number",inputAttrs:{step:1,min:0},labels:{name:e.$attrs.labels.days},onInput:l.onBindingChange},null,8,["modelValue","labels","onInput"])],4),_("div",{class:"slds-col",style:T({width:e.$attrs.range?"6rem":"4rem"})},[p(r,{modelValue:s.binding.hours,"onUpdate:modelValue":t[1]||(t[1]=a=>s.binding.hours=a),type:"number",inputAttrs:{step:1,min:0,max:24},labels:{name:e.$attrs.labels.hours},onInput:l.onBindingChange},null,8,["modelValue","labels","onInput"])],4),_("div",{class:"slds-col",style:T({width:e.$attrs.range?"6rem":"4rem"})},[p(r,{modelValue:s.binding.minutes,"onUpdate:modelValue":t[2]||(t[2]=a=>s.binding.minutes=a),type:"number",inputAttrs:{step:1,min:0,max:60},labels:{name:e.$attrs.labels.minutes},onInput:l.onBindingChange},null,8,["modelValue","labels","onInput"])],4)])}const E=c(oe,[["render",re],["__scopeId","data-v-780d4e35"]]),y=function(t,i){return d(E,{...this.$attrs,labels:i,value:this.$attrs[t],valueString:t,"onUpdate:value":o=>{this.$emit("update:value",o),this.$attrs.range&&(this.v$.range.value.$model=o)},"onUpdate:value2":o=>{this.$emit("update:value2",o),this.v$.range.value2.$model=o}})},V=(e,t)=>{if(t.value===t.value2)return!0;const{value:i,value2:o}=t;return!(i>o)},ue={name:"DurationValueType",components:{Instance:E},inheritAttrs:!1,validations(){const e={};return this.$attrs.range&&(e.range={value:{decimal:h,validRange:V},value2:{decimal:h,validRange:V}}),e},data(){return{range:{value:this.$attrs.value,value2:this.$attrs.value2},v$:g(),validRange:!0}},render(){if(this.$attrs.range){const e=[d("label",{class:"slds-form-element__label"},[this.$Labels.modal_MLB_DateTime_Range_Label]),d("div",{class:{"slds-col slds-grow-none margin-top-auto slds-box":!0,"slds-box-has-error":this.v$.$invalid&&this.v$.$dirty},style:"background: #eee; padding: 4px 10px 12px 10px;"},[y.call(this,"value",{days:"Start Days",hours:"Start Hours",minutes:"Start Minutes",range:!0}),y.call(this,"value2",{days:"End Days",hours:"End Hours",minutes:"End Minutes",range:!0})])];return this.v$.$invalid&&this.v$.$dirty&&e.push(d("div",{class:"slds-text-color_destructive"},["Start duration must be before or equal to end duration."])),d("div",{class:"slds-form-element"},e)}return y.call(this,"value",{days:"Days",hours:"Hours",minutes:"Minutes"})}},de={name:"TimeInput",components:{TimePicker:M},inheritAttrs:!1,emits:["update:value"],data(){return{value:this.$attrs.value||{},locale:MAPS.currentUser.Locale.replace("_","-")}},computed:{computedLabels(){return{...MAPS?.app?.config?.globalProperties?.$Labels||{},...this.$attrs.labels}}}};function me(e,t,i,o,s,l){const r=m("TimePicker");return u(),b(r,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=a=>s.value=a),t[1]||(t[1]=a=>e.$emit("update:value",a))],combobox:"",disabled:e.$attrs.disabled,interval:{hours:0,minutes:30},labels:{name:l.computedLabels.modal_MLB_Condition_Value},locale:s.locale},null,8,["modelValue","disabled","labels","locale"])}const pe=c(de,[["render",me]]),ce={[n.BOOLEAN]:"Boolean",[n.CURRENCY]:"TextInput",[n.DOUBLE]:"TextInput",[n.DATE]:"DateTime",[n.DATETIME]:"DateTime",[n.EMAIL]:"TextInput",[n.ENCRYPTEDSTRING]:"TextInput",[n.ID]:"TextInput",[n.INTEGER]:"TextInput",[n.MULTIPICKLIST]:"Picklist",[n.PICKLIST]:"Picklist",[n.PHONE]:"TextInput",[n.PERCENT]:"TextInput",[n.REFERENCE]:"TextInput",[n.STRING]:"TextInput",[n.TEXTAREA]:"TextInput",[n.URL]:"TextInput",[n.DURATION]:"Duration",[n.DISTANCE]:"TextInput",[n.TIME]:"TimePicker"},be={name:"ConditionValue",components:{Boolean:q,DateTime:X,Duration:ue,Picklist:Q,TextInput:ne,IconSettings:A,TimePicker:pe},inheritAttrs:!1,props:{displayType:{type:C,default:()=>n.STRING},labels:{type:Object,default:()=>{}}},data(){return{cmp:null,localResourceURL:MAPS.app.config.globalProperties.resourceURL}},watch:{displayType:{handler(){this.cmp=ce[this.$props.displayType]},immediate:!0}}};function _e(e,t,i,o,s,l){const r=m("IconSettings");return u(),b(r,{iconPath:`${s.localResourceURL}/maps__MapsIcons/icons`},{default:R(()=>[(u(),b(S(s.cmp),x(U({...e.$attrs,...e.$props})),null,16))]),_:1},8,["iconPath"])}const ye=c(be,[["render",_e]]);export{ye as C};

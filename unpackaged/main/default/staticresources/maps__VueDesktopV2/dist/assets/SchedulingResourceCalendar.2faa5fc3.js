import{_ as Y,a5 as Zt,B as Se,aT as Z,f as ve,Q as Kt,r as w,o as y,c as M,i as b,h as R,t as G,a3 as te,c2 as Jt,aP as B,I as it,T as Re,b as L,w as x,n as $,e as T,a0 as q,F as Ce,J as ot,K as lt,a6 as Fe,l as Qt,aB as es,aU as Ge,aQ as ts,ac as je,bS as ss,aD as rs,s as ns,p as is,k as os}from"../bundle.js";import{X as oe,y as d,_ as D,ai as ls,e as at,aj as U,u as I,ak as ae,R as O,al as as,am as cs,an as ds,ao as de,ap as us,aq as hs,ar as fs,as as Ve,at as ms,au as K,av as ps,aw as gs,ax as j,A as ue,ay as be,b as V,az as Ss,g as k,aA as vs,aB as Rs,aC as Cs,aD as bs,aE as ys,aF as qe,aG as Es,aH as ws,aI as _s,aJ as $e,aK as Is,aL as xs,c as ct,aM as J,aN as dt,a0 as re,a2 as X,a1 as he,aa as ye,aO as Ds,aP as Ts,aQ as ks,aR as Ee,$ as we,U as _e,l as Ie,m as A,p as ut,q as ht,V as ft,a as mt,aS as ce,a8 as Ms,B as Ls,n as xe,r as Ps,o as As,Q as Hs,J as Ns,I as Os,s as Ws,ab as pt,ac as gt,t as fe,aT as Bs,aU as De,aV as St,aW as vt,aX as Rt,Z as N,C as Us,P as me,aY as zs,a9 as Fs,K as Gs,ad as js,v as Vs,T as qs,aZ as Ct,a7 as Bo,a_ as Uo,a$ as zo,a5 as $s,b0 as bt,b1 as Te,b2 as Xs,b3 as Ys,b4 as ke,O as Fo,b5 as Go,b6 as Zs,b7 as Ks,b8 as C,b9 as Js,ba as Q,bb as yt,bc as Qs,bd as er,be as tr,bf as sr,bg as rr,bh as nr,bi as ir,bj as Et,i as or,F as lr}from"./index.2826ab44.js";import{i as ar,E as Me,R as cr,C as dr,Q as ur,L as hr,_ as fr}from"./SchedulingLaborLawNotify.91219a8b.js";import Le from"./RouteTimeAndDistance.72398a00.js";import"./routing.d6c1f97a.js";import"./DatePicker.899772b4.js";const mr=365+7,pr="https://fullcalendar.io/docs/schedulerLicenseKey#invalid",gr="https://fullcalendar.io/docs/schedulerLicenseKey#outdated",Sr=["GPL-My-Project-Is-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"],vr={position:"absolute",zIndex:99999,bottom:"1px",left:"1px",background:"#eee",borderColor:"#ddd",borderStyle:"solid",borderWidth:"1px 1px 0 0",padding:"2px 4px",fontSize:"12px",borderTopRightRadius:"3px"};function Rr(t){let e=t.options.schedulerLicenseKey,s=typeof window<"u"?window.location.href:"";if(!br(s)){let r=Cr(e,t.pluginHooks.premiumReleaseDate);if(r!=="valid")return d("div",{className:"fc-license-message",style:vr},r==="outdated"?d(D,null,"Your license key is too old to work with this version. ",d("a",{href:gr},"More Info")):d(D,null,"Your license key is invalid. ",d("a",{href:pr},"More Info")))}return null}function Cr(t,e){if(Sr.indexOf(t)!==-1)return"valid";const s=(t||"").match(/^(\d+)-fcs-(\d+)$/);if(s&&s[1].length===10){const r=new Date(parseInt(s[2],10)*1e3),n=U.mockSchedulerReleaseDate||e;if(ls(n))return at(n,-mr)<r?"valid":"outdated"}return"invalid"}function br(t){return/\w+:\/\/fullcalendar\.io\/|\/examples\/[\w-]+\.html$/.test(t)}const yr={schedulerLicenseKey:String};var Pe=oe({name:"@fullcalendar/premium-common",premiumReleaseDate:"2023-09-21",optionRefiners:yr,viewContainerAppends:[Rr]});function Er(t){let e=t.getBoundingClientRect(),s=xs(t);return{left:e.left+s.borderLeft+s.scrollbarLeft-wr(t),top:e.top+s.borderTop-t.scrollTop}}function wr(t){let e=t.scrollLeft;if(window.getComputedStyle(t).direction==="rtl")switch(wt()){case"negative":e*=-1;case"reverse":e=t.scrollWidth-e-t.clientWidth}return e}function _r(t,e){if(window.getComputedStyle(t).direction==="rtl")switch(wt()){case"reverse":e=t.scrollWidth-e;break;case"negative":e=-(t.scrollWidth-e);break}t.scrollLeft=e}let Xe;function wt(){return Xe||(Xe=Ir())}function Ir(){let t=document.createElement("div");t.style.position="absolute",t.style.top="-1000px",t.style.width="1px",t.style.height="1px",t.style.overflow="scroll",t.style.direction="rtl",t.style.fontSize="100px",t.innerHTML="A",document.body.appendChild(t);let e;return t.scrollLeft>0?e="positive":(t.scrollLeft=1,t.scrollLeft>0?e="reverse":e="negative"),ys(t),e}const xr=".fc-sticky";class Dr{constructor(e,s){this.scrollEl=e,this.isRtl=s,this.updateSize=()=>{let{scrollEl:r}=this,n=K(r,xr),i=this.queryElGeoms(n),o=r.clientWidth;Tr(n,i,o)}}queryElGeoms(e){let{scrollEl:s,isRtl:r}=this,n=Er(s),i=[];for(let o of e){let l=qe(Es(o.parentNode,!0,!0),-n.left,-n.top),a=o.getBoundingClientRect(),c=window.getComputedStyle(o),u=window.getComputedStyle(o.parentNode).textAlign,h=null;u==="start"?u=r?"right":"left":u==="end"&&(u=r?"left":"right"),c.position!=="sticky"&&(h=qe(a,-n.left-(parseFloat(c.left)||0),-n.top-(parseFloat(c.top)||0))),i.push({parentBound:l,naturalBound:h,elWidth:a.width,elHeight:a.height,textAlign:u})}return i}}function Tr(t,e,s){t.forEach((r,n)=>{let{textAlign:i,elWidth:o,parentBound:l}=e[n],a=l.right-l.left,c;i==="center"&&a>s?c=(s-o)/2:c="",ws(r,{left:c,right:c,top:0})})}class kr extends I{constructor(){super(...arguments),this.elRef=k(),this.state={xScrollbarWidth:0,yScrollbarWidth:0},this.handleScroller=e=>{this.scroller=e,ue(this.props.scrollerRef,e)},this.handleSizing=()=>{let{props:e}=this;e.overflowY==="scroll-hidden"&&this.setState({yScrollbarWidth:this.scroller.getYScrollbarWidth()}),e.overflowX==="scroll-hidden"&&this.setState({xScrollbarWidth:this.scroller.getXScrollbarWidth()})}}render(){let{props:e,state:s,context:r}=this,n=r.isRtl&&de(),i=0,o=0,l=0,{overflowX:a,overflowY:c}=e;return e.forPrint&&(a="visible",c="visible"),a==="scroll-hidden"&&(l=s.xScrollbarWidth),c==="scroll-hidden"&&s.yScrollbarWidth!=null&&(n?i=s.yScrollbarWidth:o=s.yScrollbarWidth),d("div",{ref:this.elRef,className:"fc-scroller-harness"+(e.liquid?" fc-scroller-harness-liquid":"")},d(vs,{ref:this.handleScroller,elRef:this.props.scrollerElRef,overflowX:a==="scroll-hidden"?"scroll":a,overflowY:c==="scroll-hidden"?"scroll":c,overcomeLeft:i,overcomeRight:o,overcomeBottom:l,maxHeight:typeof e.maxHeight=="number"?e.maxHeight+(a==="scroll-hidden"?s.xScrollbarWidth:0):"",liquid:e.liquid,liquidIsAbsolute:!0},e.children))}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}getSnapshotBeforeUpdate(e){return this.props.forPrint&&!e.forPrint?{simulateScrollLeft:this.scroller.el.scrollLeft}:{}}componentDidUpdate(e,s,r){const{props:n,scroller:{el:i}}=this;if(V(e,n)||this.handleSizing(),r.simulateScrollLeft!==void 0)i.style.left=-r.simulateScrollLeft+"px";else if(!n.forPrint&&e.forPrint){const o=-parseInt(i.style.left);i.style.left="",i.scrollLeft=o}}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}needsXScrolling(){return this.scroller.needsXScrolling()}needsYScrolling(){return this.scroller.needsYScrolling()}}const Ye="wheel mousewheel DomMouseScroll MozMousePixelScroll".split(" ");class Mr{constructor(e){this.el=e,this.emitter=new _s,this.isScrolling=!1,this.isTouching=!1,this.isRecentlyWheeled=!1,this.isRecentlyScrolled=!1,this.wheelWaiter=new $e(this._handleWheelWaited.bind(this)),this.scrollWaiter=new $e(this._handleScrollWaited.bind(this)),this.handleScroll=()=>{this.startScroll(),this.emitter.trigger("scroll",this.isRecentlyWheeled,this.isTouching),this.isRecentlyScrolled=!0,this.scrollWaiter.request(500)},this.handleWheel=()=>{this.isRecentlyWheeled=!0,this.wheelWaiter.request(500)},this.handleTouchStart=()=>{this.isTouching=!0},this.handleTouchEnd=()=>{this.isTouching=!1,this.isRecentlyScrolled||this.endScroll()},e.addEventListener("scroll",this.handleScroll),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),e.addEventListener("touchend",this.handleTouchEnd);for(let s of Ye)e.addEventListener(s,this.handleWheel)}destroy(){let{el:e}=this;e.removeEventListener("scroll",this.handleScroll),e.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),e.removeEventListener("touchend",this.handleTouchEnd);for(let s of Ye)e.removeEventListener(s,this.handleWheel)}startScroll(){this.isScrolling||(this.isScrolling=!0,this.emitter.trigger("scrollStart",this.isRecentlyWheeled,this.isTouching))}endScroll(){this.isScrolling&&(this.emitter.trigger("scrollEnd"),this.isScrolling=!1,this.isRecentlyScrolled=!0,this.isRecentlyWheeled=!1,this.scrollWaiter.clear(),this.wheelWaiter.clear())}_handleScrollWaited(){this.isRecentlyScrolled=!1,this.isTouching||this.endScroll()}_handleWheelWaited(){this.isRecentlyWheeled=!1}}class Lr{constructor(e,s){this.isVertical=e,this.scrollEls=s,this.isPaused=!1,this.scrollListeners=s.map(r=>this.bindScroller(r))}destroy(){for(let e of this.scrollListeners)e.destroy()}bindScroller(e){let{scrollEls:s,isVertical:r}=this,n=new Mr(e);const i=(l,a)=>{if(!this.isPaused&&((!this.masterEl||this.masterEl!==e&&(l||a))&&this.assignMaster(e),this.masterEl===e))for(let c of s)c!==e&&(r?c.scrollTop=e.scrollTop:c.scrollLeft=e.scrollLeft)},o=()=>{this.masterEl===e&&(this.masterEl=null)};return n.emitter.on("scroll",i),n.emitter.on("scrollEnd",o),n}assignMaster(e){this.masterEl=e;for(let s of this.scrollListeners)s.el!==e&&s.endScroll()}forceScrollLeft(e){this.isPaused=!0;for(let s of this.scrollListeners)_r(s.el,e);this.isPaused=!1}forceScrollTop(e){this.isPaused=!0;for(let s of this.scrollListeners)s.el.scrollTop=e;this.isPaused=!1}}U.SCROLLGRID_RESIZE_INTERVAL=500;class Ae extends I{constructor(){super(...arguments),this.compileColGroupStats=ae(Nr,Wr),this.renderMicroColGroups=ae(Rs),this.clippedScrollerRefs=new O,this.scrollerElRefs=new O(this._handleScrollerEl.bind(this)),this.chunkElRefs=new O(this._handleChunkEl.bind(this)),this.scrollSyncersBySection={},this.scrollSyncersByColumn={},this.rowUnstableMap=new Map,this.rowInnerMaxHeightMap=new Map,this.anyRowHeightsChanged=!1,this.recentSizingCnt=0,this.state={shrinkWidths:[],forceYScrollbars:!1,forceXScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{},sectionRowMaxHeights:[]},this.handleSizing=(e,s)=>{if(!this.allowSizing())return;s||(this.anyRowHeightsChanged=!0);let r={};(e||!s&&!this.rowUnstableMap.size)&&(r.sectionRowMaxHeights=this.computeSectionRowMaxHeights()),this.setState(Object.assign(Object.assign({shrinkWidths:this.computeShrinkWidths()},this.computeScrollerDims()),r),()=>{this.rowUnstableMap.size||this.updateStickyScrolling()})},this.handleRowHeightChange=(e,s)=>{let{rowUnstableMap:r,rowInnerMaxHeightMap:n}=this;if(!s)r.set(e,!0);else{r.delete(e);let i=Ze(e);(!n.has(e)||n.get(e)!==i)&&(n.set(e,i),this.anyRowHeightsChanged=!0),!r.size&&this.anyRowHeightsChanged&&(this.anyRowHeightsChanged=!1,this.setState({sectionRowMaxHeights:this.computeSectionRowMaxHeights()}))}}}render(){let{props:e,state:s,context:r}=this,{shrinkWidths:n}=s,i=this.compileColGroupStats(e.colGroups.map(_=>[_])),o=this.renderMicroColGroups(i.map((_,v)=>[_.cols,n[v]])),l=as(e.liquid,r);this.getDims();let a=e.sections,c=a.length,u=0,h,f=[],m=[],g=[];for(;u<c&&(h=a[u]).type==="header";)f.push(this.renderSection(h,u,i,o,s.sectionRowMaxHeights,!0)),u+=1;for(;u<c&&(h=a[u]).type==="body";)m.push(this.renderSection(h,u,i,o,s.sectionRowMaxHeights,!1)),u+=1;for(;u<c&&(h=a[u]).type==="footer";)g.push(this.renderSection(h,u,i,o,s.sectionRowMaxHeights,!0)),u+=1;const p=!cs(),S={role:"rowgroup"};return d("table",{ref:e.elRef,role:"grid",className:l.join(" ")},Hr(i,n),Boolean(!p&&f.length)&&d("thead",S,...f),Boolean(!p&&m.length)&&d("tbody",S,...m),Boolean(!p&&g.length)&&d("tfoot",S,...g),p&&d("tbody",S,...f,...m,...g))}renderSection(e,s,r,n,i,o){return"outerContent"in e?d(D,{key:e.key},e.outerContent):d("tr",{key:e.key,role:"presentation",className:ds(e,this.props.liquid).join(" ")},e.chunks.map((l,a)=>this.renderChunk(e,s,r[a],n[a],l,a,(i[s]||[])[a]||[],o)))}renderChunk(e,s,r,n,i,o,l,a){if("outerContent"in i)return d(D,{key:i.key},i.outerContent);let{state:c}=this,{scrollerClientWidths:u,scrollerClientHeights:h}=c,[f,m]=this.getDims(),g=s*m+o,p=!this.context.isRtl||de()?m-1:0,S=o===p,_=s===f-1,v=_&&c.forceXScrollbars,E=S&&c.forceYScrollbars,H=r&&r.allowXScrolling,W=us(this.props,e),z=hs(this.props,e),qt=e.expandRows&&z,$t=r&&r.totalColMinWidth||"",le=fs(e,i,{tableColGroupNode:n,tableMinWidth:$t,clientWidth:u[g]!==void 0?u[g]:null,clientHeight:h[g]!==void 0?h[g]:null,expandRows:qt,syncRowHeights:Boolean(e.syncRowHeights),rowSyncHeights:l,reportRowHeightChange:this.handleRowHeightChange},a),Xt=v?_?"scroll":"scroll-hidden":H?_?"auto":"scroll-hidden":"hidden",Yt=E?S?"scroll":"scroll-hidden":W?S?"auto":"scroll-hidden":"hidden";return le=d(kr,{ref:this.clippedScrollerRefs.createRef(g),scrollerElRef:this.scrollerElRefs.createRef(g),overflowX:Xt,overflowY:Yt,forPrint:this.props.forPrint,liquid:z,maxHeight:e.maxHeight},le),d(a?"th":"td",{key:i.key,ref:this.chunkElRefs.createRef(g),role:"presentation"},le)}componentDidMount(){this.getStickyScrolling=ae(Br),this.getScrollSyncersBySection=Ve(Je.bind(this,!0),null,ee),this.getScrollSyncersByColumn=Ve(Je.bind(this,!1),null,ee),this.updateScrollSyncers(),this.handleSizing(!1),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(e,s){this.updateScrollSyncers(),this.handleSizing(!1,s.sectionRowMaxHeights!==this.state.sectionRowMaxHeights)}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing),this.destroyScrollSyncers()}allowSizing(){let e=new Date;return!this.lastSizingDate||e.valueOf()>this.lastSizingDate.valueOf()+U.SCROLLGRID_RESIZE_INTERVAL?(this.lastSizingDate=e,this.recentSizingCnt=0,!0):(this.recentSizingCnt+=1)<=10}computeShrinkWidths(){let e=this.compileColGroupStats(this.props.colGroups.map(o=>[o])),[s,r]=this.getDims(),n=s*r,i=[];return e.forEach((o,l)=>{if(o.hasShrinkCol){let a=this.chunkElRefs.collect(l,n,r);i[l]=ms(a)}}),i}computeSectionRowMaxHeights(){let e=new Map,[s,r]=this.getDims(),n=[];for(let i=0;i<s;i+=1){let o=this.props.sections[i],l=[];if(o&&o.syncRowHeights){let a=[];for(let h=0;h<r;h+=1){let f=i*r+h,m=[],g=this.chunkElRefs.currentMap[f];g?m=K(g,".fc-scrollgrid-sync-table tr").map(p=>{let S=Ze(p);return e.set(p,S),S}):m=[],a.push(m)}let c=a[0].length,u=!0;for(let h=1;h<r;h+=1)if(!(o.chunks[h]&&o.chunks[h].outerContent!==void 0)&&a[h].length!==c){u=!1;break}if(u){for(let h=0;h<r;h+=1)l.push([]);for(let h=0;h<c;h+=1){let f=[];for(let g=0;g<r;g+=1){let p=a[g][h];p!=null&&f.push(p)}let m=Math.max(...f);for(let g=0;g<r;g+=1)l[g].push(m)}}else{let h=[];for(let m=0;m<r;m+=1)h.push(Pr(a[m])+a[m].length);let f=Math.max(...h);for(let m=0;m<r;m+=1){let g=a[m].length,p=f-g,S=Math.floor(p/g),_=p-S*(g-1),v=[],E=0;for(E<g&&(v.push(_),E+=1);E<g;)v.push(S),E+=1;l.push(v)}}}n.push(l)}return this.rowInnerMaxHeightMap=e,n}computeScrollerDims(){let e=ps(),[s,r]=this.getDims(),n=!this.context.isRtl||de()?r-1:0,i=s-1,o=this.clippedScrollerRefs.currentMap,l=this.scrollerElRefs.currentMap,a=!1,c=!1,u={},h={};for(let f=0;f<s;f+=1){let m=f*r+n,g=o[m];if(g&&g.needsYScrolling()){a=!0;break}}for(let f=0;f<r;f+=1){let m=i*r+f,g=o[m];if(g&&g.needsXScrolling()){c=!0;break}}for(let f=0;f<s;f+=1)for(let m=0;m<r;m+=1){let g=f*r+m,p=l[g];if(p){let S=p.parentNode;u[g]=Math.floor(S.getBoundingClientRect().width-(m===n&&a?e.y:0)),h[g]=Math.floor(S.getBoundingClientRect().height-(f===i&&c?e.x:0))}}return{forceYScrollbars:a,forceXScrollbars:c,scrollerClientWidths:u,scrollerClientHeights:h}}updateStickyScrolling(){let{isRtl:e}=this.context,s=this.scrollerElRefs.getAll().map(r=>[r,e]);this.getStickyScrolling(s).forEach(r=>r.updateSize())}updateScrollSyncers(){let[e,s]=this.getDims(),r=e*s,n={},i={},o=this.scrollerElRefs.currentMap;for(let l=0;l<e;l+=1){let a=l*s,c=a+s;n[l]=gs(o,a,c,1)}for(let l=0;l<s;l+=1)i[l]=this.scrollerElRefs.collect(l,r,s);this.scrollSyncersBySection=this.getScrollSyncersBySection(n),this.scrollSyncersByColumn=this.getScrollSyncersByColumn(i)}destroyScrollSyncers(){j(this.scrollSyncersBySection,ee),j(this.scrollSyncersByColumn,ee)}getChunkConfigByIndex(e){let s=this.getDims()[1],r=Math.floor(e/s),n=e%s,i=this.props.sections[r];return i&&i.chunks[n]}forceScrollLeft(e,s){let r=this.scrollSyncersByColumn[e];r&&r.forceScrollLeft(s)}forceScrollTop(e,s){let r=this.scrollSyncersBySection[e];r&&r.forceScrollTop(s)}_handleChunkEl(e,s){let r=this.getChunkConfigByIndex(parseInt(s,10));r&&ue(r.elRef,e)}_handleScrollerEl(e,s){let r=this.getChunkConfigByIndex(parseInt(s,10));r&&ue(r.scrollerElRef,e)}getDims(){let e=this.props.sections.length,s=e?this.props.sections[0].chunks.length:0;return[e,s]}}Ae.addStateEquality({shrinkWidths:be,scrollerClientWidths:V,scrollerClientHeights:V});function Pr(t){let e=0;for(let s of t)e+=s;return e}function Ze(t){let e=K(t,".fc-scrollgrid-sync-inner").map(Ar);return e.length?Math.max(...e):0}function Ar(t){return t.offsetHeight}function Hr(t,e){let s=t.map((r,n)=>{let i=r.width;return i==="shrink"&&(i=r.totalColWidth+Ss(e[n])+1),d("col",{style:{width:i}})});return d("colgroup",{},...s)}function Nr(t){let e=Ke(t.cols,"width"),s=Ke(t.cols,"minWidth"),r=Cs(t.cols),n=t.width!=="shrink"&&Boolean(e||s||r);return{hasShrinkCol:r,totalColWidth:e,totalColMinWidth:s,allowXScrolling:n,cols:t.cols,width:t.width}}function Ke(t,e){let s=0;for(let r of t){let n=r[e];typeof n=="number"&&(s+=n*(r.span||1))}return s}const Or={cols:Is};function Wr(t,e){return bs(t,e,Or)}function Je(t,...e){return new Lr(t,e)}function ee(t){t.destroy()}function Br(t,e){return new Dr(t,e)}const Ur=18,ne=6,zr=200;U.MAX_TIMELINE_SLOTS=1e3;const pe=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}];function _t(t,e,s,r){let n={labelInterval:s.slotLabelInterval,slotDuration:s.slotDuration};Gr(n,t,e),It(n,t,e),jr(n,t,e);let i=s.slotLabelFormat,o=Array.isArray(i)?i:i!=null?[i]:Vr(n,t,e,s);n.headerFormats=o.map(H=>ct(H)),n.isTimeScale=Boolean(n.slotDuration.milliseconds);let l=null;if(!n.isTimeScale){const H=J(n.slotDuration).unit;/year|month|week/.test(H)&&(l=H)}n.largeUnit=l,n.emphasizeWeeks=dt(n.slotDuration)===1&&F("weeks",t,e)>=2&&!s.businessHours;let a=s.snapDuration,c,u;a&&(c=re(a),u=X(n.slotDuration,c)),u==null&&(c=n.slotDuration,u=1),n.snapDuration=c,n.snapsPerSlot=u;let h=he(t.slotMaxTime)-he(t.slotMinTime),f=Qe(t.renderRange.start,n,e),m=Qe(t.renderRange.end,n,e);n.isTimeScale&&(f=e.add(f,t.slotMinTime),m=e.add(at(m,-1),t.slotMaxTime)),n.timeWindowMs=h,n.normalizedRange={start:f,end:m};let g=[],p=f;for(;p<m;)ie(p,n,t,r)&&g.push(p),p=e.add(p,n.slotDuration);n.slotDates=g;let S=-1,_=0;const v=[],E=[];for(p=f;p<m;)ie(p,n,t,r)?(S+=1,v.push(S),E.push(_)):v.push(S+.5),p=e.add(p,n.snapDuration),_+=1;return n.snapDiffToIndex=v,n.snapIndexToDiff=E,n.snapCnt=S+1,n.slotCnt=n.snapCnt/n.snapsPerSlot,n.isWeekStarts=qr(n,e),n.cellRows=$r(n,e),n.slotsPerLabel=X(n.labelInterval,n.slotDuration),n}function Qe(t,e,s){let r=t;return e.isTimeScale||(r=ye(r),e.largeUnit&&(r=s.startOf(r,e.largeUnit))),r}function Fr(t,e,s){if(!e.isTimeScale&&(t=Bs(t),e.largeUnit)){let r=t;t={start:s.startOf(t.start,e.largeUnit),end:s.startOf(t.end,e.largeUnit)},(t.end.valueOf()!==r.end.valueOf()||t.end<=t.start)&&(t={start:t.start,end:s.add(t.end,e.slotDuration)})}return t}function ie(t,e,s,r){if(r.isHiddenDay(t))return!1;if(e.isTimeScale){let n=ye(t),o=t.valueOf()-n.valueOf()-he(s.slotMinTime);return o=(o%864e5+864e5)%864e5,o<e.timeWindowMs}return!0}function Gr(t,e,s){const{currentRange:r}=e;if(t.labelInterval&&s.countDurationsBetween(r.start,r.end,t.labelInterval)>U.MAX_TIMELINE_SLOTS&&(console.warn("slotLabelInterval results in too many cells"),t.labelInterval=null),t.slotDuration&&s.countDurationsBetween(r.start,r.end,t.slotDuration)>U.MAX_TIMELINE_SLOTS&&(console.warn("slotDuration results in too many cells"),t.slotDuration=null),t.labelInterval&&t.slotDuration){const n=X(t.labelInterval,t.slotDuration);(n===null||n<1)&&(console.warn("slotLabelInterval must be a multiple of slotDuration"),t.slotDuration=null)}}function It(t,e,s){const{currentRange:r}=e;let{labelInterval:n}=t;if(!n){let i;if(t.slotDuration){for(i of pe){const o=re(i),l=X(o,t.slotDuration);if(l!==null&&l<=ne){n=o;break}}n||(n=t.slotDuration)}else for(i of pe)if(n=re(i),s.countDurationsBetween(r.start,r.end,n)>=Ur)break;t.labelInterval=n}return n}function jr(t,e,s){const{currentRange:r}=e;let{slotDuration:n}=t;if(!n){const i=It(t,e,s);for(let o of pe){const l=re(o),a=X(i,l);if(a!==null&&a>1&&a<=ne){n=l;break}}n&&s.countDurationsBetween(r.start,r.end,n)>zr&&(n=null),n||(n=i),t.slotDuration=n}return n}function Vr(t,e,s,r){let n,i;const{labelInterval:o}=t;let l=J(o).unit;const a=r.weekNumbers;let c=n=i=null;switch(l==="week"&&!a&&(l="day"),l){case"year":c={year:"numeric"};break;case"month":F("years",e,s)>1&&(c={year:"numeric"}),n={month:"short"};break;case"week":F("years",e,s)>1&&(c={year:"numeric"}),n={week:"narrow"};break;case"day":F("years",e,s)>1?c={year:"numeric",month:"long"}:F("months",e,s)>1&&(c={month:"long"}),a&&(n={week:"short"}),i={weekday:"narrow",day:"numeric"};break;case"hour":a&&(c={week:"short"}),F("days",e,s)>1&&(n={weekday:"short",day:"numeric",month:"numeric",omitCommas:!0}),i={hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"};break;case"minute":Ts(o)/60>=ne?(c={hour:"numeric",meridiem:"short"},n=u=>":"+ce(u.date.minute,2)):c={hour:"numeric",minute:"numeric",meridiem:"short"};break;case"second":Ds(o)/60>=ne?(c={hour:"numeric",minute:"2-digit",meridiem:"lowercase"},n=u=>":"+ce(u.date.second,2)):c={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"};break;case"millisecond":c={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"},n=u=>"."+ce(u.millisecond,3);break}return[].concat(c||[],n||[],i||[])}function F(t,e,s){let r=e.currentRange,n=null;return t==="years"?n=s.diffWholeYears(r.start,r.end):t==="months"||t==="weeks"?n=s.diffWholeMonths(r.start,r.end):t==="days"&&(n=ks(r.start,r.end)),n||0}function qr(t,e){let{slotDates:s,emphasizeWeeks:r}=t,n=null,i=[];for(let o of s){let l=e.computeWeekNumber(o),a=r&&n!==null&&n!==l;n=l,i.push(a)}return i}function $r(t,e){let s=t.slotDates,r=t.headerFormats,n=r.map(()=>[]),i=dt(t.slotDuration),o=i===7?"week":i===1?"day":null,l=r.map(a=>a.getLargestUnit?a.getLargestUnit():null);for(let a=0;a<s.length;a+=1){let c=s[a],u=t.isWeekStarts[a];for(let h=0;h<r.length;h+=1){let f=r[h],m=n[h],g=m[m.length-1],p=h===r.length-1,S=r.length>1&&!p,_=null,v=l[h]||(p?o:null);if(S){let E=e.format(c,f);!g||g.text!==E?_=et(c,E,v):g.colspan+=1}else if(!g||Ee(e.countDurationsBetween(t.normalizedRange.start,c,t.labelInterval))){let E=e.format(c,f);_=et(c,E,v)}else g.colspan+=1;_&&(_.weekStart=u,m.push(_))}}return n}function et(t,e,s){return{date:t,text:e,rowUnit:s,colspan:1,isWeekStart:!1}}class Xr extends I{constructor(){super(...arguments),this.refineRenderProps=De(Kr),this.buildCellNavLinkAttrs=A(Yr)}render(){let{props:e,context:s}=this,{dateEnv:r,options:n}=s,{cell:i,dateProfile:o,tDateProfile:l}=e,a=St(i.date,e.todayRange,e.nowDate,o),c=this.refineRenderProps({level:e.rowLevel,dateMarker:i.date,text:i.text,dateEnv:s.dateEnv,viewApi:s.viewApi});return d(N,{elTag:"th",elClasses:["fc-timeline-slot","fc-timeline-slot-label",i.isWeekStart&&"fc-timeline-slot-em",...i.rowUnit==="time"?vt(a,s.theme):Rt(a,s.theme)],elAttrs:{colSpan:i.colspan,"data-date":r.formatIso(i.date,{omitTime:!l.isTimeScale,omitTimeZoneOffset:!0})},renderProps:c,generatorName:"slotLabelContent",customGenerator:n.slotLabelContent,defaultGenerator:Zr,classNameGenerator:n.slotLabelClassNames,didMount:n.slotLabelDidMount,willUnmount:n.slotLabelWillUnmount},u=>d("div",{className:"fc-timeline-slot-frame",style:{height:e.rowInnerHeight}},d(u,{elTag:"a",elClasses:["fc-timeline-slot-cushion","fc-scrollgrid-sync-inner",e.isSticky&&"fc-sticky"],elAttrs:this.buildCellNavLinkAttrs(s,i.date,i.rowUnit)})))}}function Yr(t,e,s){return s&&s!=="time"?Us(t,e,s):{}}function Zr(t){return t.text}function Kr(t){return{level:t.level,date:t.dateEnv.toDate(t.dateMarker),view:t.viewApi,text:t.text}}class Jr extends I{render(){let{dateProfile:e,tDateProfile:s,rowInnerHeights:r,todayRange:n,nowDate:i}=this.props,{cellRows:o}=s;return d(D,null,o.map((l,a)=>{let c=a===o.length-1,h=["fc-timeline-header-row",s.isTimeScale&&c?"fc-timeline-header-row-chrono":""];return d("tr",{key:a,className:h.join(" ")},l.map(f=>d(Xr,{key:f.date.toISOString(),cell:f,rowLevel:a,dateProfile:e,tDateProfile:s,todayRange:n,nowDate:i,rowInnerHeight:r&&r[a],isSticky:!c})))}))}}class Qr{constructor(e,s,r,n,i,o){this.slatRootEl=e,this.dateProfile=r,this.tDateProfile=n,this.dateEnv=i,this.isRtl=o,this.outerCoordCache=new me(e,s,!0,!1),this.innerCoordCache=new me(e,zs(s,"div"),!0,!1)}isDateInRange(e){return Fs(this.dateProfile.currentRange,e)}dateToCoord(e){let{tDateProfile:s}=this,n=this.computeDateSnapCoverage(e)/s.snapsPerSlot,i=Math.floor(n);i=Math.min(i,s.slotCnt-1);let o=n-i,{innerCoordCache:l,outerCoordCache:a}=this;return this.isRtl?a.originClientRect.width-(a.rights[i]-l.getWidth(i)*o):a.lefts[i]+l.getWidth(i)*o}rangeToCoords(e){return{start:this.dateToCoord(e.start),end:this.dateToCoord(e.end)}}durationToCoord(e){let{dateProfile:s,tDateProfile:r,dateEnv:n,isRtl:i}=this,o=0;if(s){let l=n.add(s.activeRange.start,e);r.isTimeScale||(l=ye(l)),o=this.dateToCoord(l),!i&&o&&(o+=1)}return o}coordFromLeft(e){return this.isRtl?this.outerCoordCache.originClientRect.width-e:e}computeDateSnapCoverage(e){return ge(e,this.tDateProfile,this.dateEnv)}}function ge(t,e,s){let r=s.countDurationsBetween(e.normalizedRange.start,t,e.snapDuration);if(r<0)return 0;if(r>=e.snapDiffToIndex.length)return e.snapCnt;let n=Math.floor(r),i=e.snapDiffToIndex[n];return Ee(i)?i+=r-n:i=Math.ceil(i),i}function He(t,e){return t===null?{left:"",right:""}:e?{right:t,left:""}:{left:t,right:""}}function Ne(t,e){return t?e?{right:t.start,left:-t.end}:{left:t.start,right:-t.end}:{left:"",right:""}}class xt extends I{constructor(){super(...arguments),this.rootElRef=k()}render(){let{props:e,context:s}=this,r=J(e.tDateProfile.slotDuration).unit,n=e.slatCoords&&e.slatCoords.dateProfile===e.dateProfile?e.slatCoords:null;return d(_e,{unit:r},(i,o)=>d("div",{className:"fc-timeline-header",ref:this.rootElRef},d("table",{"aria-hidden":!0,className:"fc-scrollgrid-sync-table",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,d("tbody",null,d(Jr,{dateProfile:e.dateProfile,tDateProfile:e.tDateProfile,nowDate:i,todayRange:o,rowInnerHeights:e.rowInnerHeights}))),s.options.nowIndicator&&d("div",{className:"fc-timeline-now-indicator-container"},n&&n.isDateInRange(i)&&d(we,{elClasses:["fc-timeline-now-indicator-arrow"],elStyle:He(n.dateToCoord(i),s.isRtl),isAxis:!0,date:i}))))}componentDidMount(){this.updateSize()}componentDidUpdate(){this.updateSize()}updateSize(){this.props.onMaxCushionWidth&&this.props.onMaxCushionWidth(this.computeMaxCushionWidth())}computeMaxCushionWidth(){return Math.max(...K(this.rootElRef.current,".fc-timeline-header-row:last-child .fc-timeline-slot-cushion").map(e=>e.getBoundingClientRect().width))}}class en extends I{render(){let{props:e,context:s}=this,{dateEnv:r,options:n,theme:i}=s,{date:o,tDateProfile:l,isEm:a}=e,c=St(e.date,e.todayRange,e.nowDate,e.dateProfile),u=Object.assign(Object.assign({date:r.toDate(e.date)},c),{view:s.viewApi});return d(N,{elTag:"td",elRef:e.elRef,elClasses:["fc-timeline-slot","fc-timeline-slot-lane",a&&"fc-timeline-slot-em",l.isTimeScale?Ee(r.countDurationsBetween(l.normalizedRange.start,e.date,l.labelInterval))?"fc-timeline-slot-major":"fc-timeline-slot-minor":"",...e.isDay?Rt(c,i):vt(c,i)],elAttrs:{"data-date":r.formatIso(o,{omitTimeZoneOffset:!0,omitTime:!l.isTimeScale})},renderProps:u,generatorName:"slotLaneContent",customGenerator:n.slotLaneContent,classNameGenerator:n.slotLaneClassNames,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount},h=>d(h,{elTag:"div"}))}}class tn extends I{render(){let{props:e}=this,{tDateProfile:s,cellElRefs:r}=e,{slotDates:n,isWeekStarts:i}=s,o=!s.isTimeScale&&!s.largeUnit;return d("tbody",null,d("tr",null,n.map((l,a)=>{let c=l.toISOString();return d(en,{key:c,elRef:r.createRef(c),date:l,dateProfile:e.dateProfile,tDateProfile:s,nowDate:e.nowDate,todayRange:e.todayRange,isEm:i[a],isDay:o})})))}}class Dt extends I{constructor(){super(...arguments),this.rootElRef=k(),this.cellElRefs=new O,this.handleScrollRequest=e=>{let{onScrollLeftRequest:s}=this.props,{coords:r}=this;if(s&&r){if(e.time){let n=r.coordFromLeft(r.durationToCoord(e.time));s(n)}return!0}return null}}render(){let{props:e,context:s}=this;return d("div",{className:"fc-timeline-slots",ref:this.rootElRef},d("table",{"aria-hidden":!0,className:s.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,d(tn,{cellElRefs:this.cellElRefs,dateProfile:e.dateProfile,tDateProfile:e.tDateProfile,nowDate:e.nowDate,todayRange:e.todayRange})))}componentDidMount(){this.updateSizing(),this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.updateSizing(),this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach(),this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{props:e,context:s}=this;e.clientWidth!==null&&this.scrollResponder&&this.rootElRef.current.offsetWidth&&(this.coords=new Qr(this.rootElRef.current,sn(this.cellElRefs.currentMap,e.tDateProfile.slotDates),e.dateProfile,e.tDateProfile,s.dateEnv,s.isRtl),e.onCoords&&e.onCoords(this.coords),this.scrollResponder.update(!1))}positionToHit(e){let{outerCoordCache:s}=this.coords,{dateEnv:r,isRtl:n}=this.context,{tDateProfile:i}=this.props,o=s.leftToIndex(e);if(o!=null){let l=s.getWidth(o),a=n?(s.rights[o]-e)/l:(e-s.lefts[o])/l,c=Math.floor(a*i.snapsPerSlot),u=r.add(i.slotDates[o],Ms(i.snapDuration,c)),h=r.add(u,i.snapDuration);return{dateSpan:{range:{start:u,end:h},allDay:!this.props.tDateProfile.isTimeScale},dayEl:this.cellElRefs.currentMap[o],left:s.lefts[o],right:s.rights[o]}}return null}}function sn(t,e){return e.map(s=>{let r=s.toISOString();return t[r]})}function Tt(t,e,s){let r=[];if(s)for(let n of t){let i=s.rangeToCoords(n),o=Math.round(i.start),l=Math.round(i.end);l-o<e&&(l=o+e),r.push({start:o,end:l})}return r}function rn(t,e,s,r,n,i){let o=[],l=[];for(let v=0;v<t.length;v+=1){let E=t[v],H=E.eventRange.instance.instanceId,W=s[H],z=e[v];W&&z?o.push({index:v,span:z,thickness:W}):l.push({seg:E,hcoords:z,top:null})}let a=new Gs;n!=null&&(a.strictOrder=n),i!=null&&(a.maxStackCnt=i);let c=a.addSegs(o),u=c.map(v=>({seg:t[v.index],hcoords:v.span,top:null})),h=js(c),f=[],m=[];const g=v=>t[v.index];for(let v=0;v<h.length;v+=1){let E=h[v],H=E.entries.map(g),W=r[pt(gt(H))];W!=null?f.push({index:t.length+v,thickness:W,span:E.span}):m.push({seg:H,hcoords:E.span,top:null})}a.maxStackCnt=-1,a.addSegs(f);let p=a.toRects(),S=[],_=0;for(let v of p){let E=v.index;S.push({seg:E<t.length?t[E]:h[E-t.length].entries.map(g),hcoords:v.span,top:v.levelCoord}),_=Math.max(_,v.levelCoord+v.thickness)}return[S.concat(l,u,m),_]}class kt extends I{render(){let{props:e}=this,s=[].concat(e.eventResizeSegs,e.dateSelectionSegs);return e.timelineCoords&&d("div",{className:"fc-timeline-bg"},this.renderSegs(e.businessHourSegs||[],e.timelineCoords,"non-business"),this.renderSegs(e.bgEventSegs||[],e.timelineCoords,"bg-event"),this.renderSegs(s,e.timelineCoords,"highlight"))}renderSegs(e,s,r){let{todayRange:n,nowDate:i}=this.props,{isRtl:o}=this.context,l=Tt(e,0,s),a=e.map((c,u)=>{let h=l[u],f=Ne(h,o);return d("div",{key:As(c.eventRange),className:"fc-timeline-bg-harness",style:f},r==="bg-event"?d(Ls,Object.assign({seg:c},xe(c,n,i))):Ps(r))});return d(D,null,a)}}class Mt extends Hs{sliceRange(e,s,r,n,i){let o=Fr(e,n,i),l=[];if(ge(o.start,n,i)<ge(o.end,n,i)){let a=Ns(o,n.normalizedRange);a&&l.push({start:a.start,end:a.end,isStart:a.start.valueOf()===o.start.valueOf()&&ie(a.start,n,s,r),isEnd:a.end.valueOf()===o.end.valueOf()&&ie(Os(a.end,-1),n,s,r)})}return l}}const nn=ct({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});class Lt extends I{render(){let{props:e}=this;return d(Vs,Object.assign({},e,{elClasses:["fc-timeline-event","fc-h-event"],defaultTimeFormat:nn,defaultDisplayEventTime:!e.isTimeScale}))}}class on extends I{render(){let{props:e,context:s}=this,{hiddenSegs:r,placement:n,resourceId:i}=e,{top:o,hcoords:l}=n,a=l&&o!==null,c=Ne(l,s.isRtl),u=i?{resourceId:i}:{};return d(qs,{elRef:e.elRef,elClasses:["fc-timeline-more-link"],elStyle:Object.assign({visibility:a?"":"hidden",top:o||0},c),allDayDate:null,moreCnt:r.length,allSegs:r,hiddenSegs:r,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:u,popoverContent:()=>d(D,null,r.map(h=>{let f=h.eventRange.instance.instanceId;return d("div",{key:f,style:{visibility:e.isForcedInvisible[f]?"hidden":""}},d(Lt,Object.assign({isTimeScale:e.isTimeScale,seg:h,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:f===e.eventSelection},xe(h,e.todayRange,e.nowDate))))}))},h=>d(h,{elTag:"div",elClasses:["fc-timeline-more-link-inner","fc-sticky"]}))}}class Oe extends I{constructor(){super(...arguments),this.slicer=new Mt,this.sortEventSegs=A(Ws),this.harnessElRefs=new O,this.moreElRefs=new O,this.innerElRef=k(),this.state={eventInstanceHeights:{},moreLinkHeights:{}},this.handleResize=e=>{e&&this.updateSize()}}render(){let{props:e,state:s,context:r}=this,{options:n}=r,{dateProfile:i,tDateProfile:o}=e,l=this.slicer.sliceProps(e,i,o.isTimeScale?null:e.nextDayThreshold,r,i,r.dateProfileGenerator,o,r.dateEnv),a=(l.eventDrag?l.eventDrag.segs:null)||(l.eventResize?l.eventResize.segs:null)||[],c=this.sortEventSegs(l.fgEventSegs,n.eventOrder),u=Tt(c,n.eventMinWidth,e.timelineCoords),[h,f]=rn(c,u,s.eventInstanceHeights,s.moreLinkHeights,n.eventOrderStrict,n.eventMaxStack),m=(l.eventDrag?l.eventDrag.affectedInstances:null)||(l.eventResize?l.eventResize.affectedInstances:null)||{};return d(D,null,d(kt,{businessHourSegs:l.businessHourSegs,bgEventSegs:l.bgEventSegs,timelineCoords:e.timelineCoords,eventResizeSegs:l.eventResize?l.eventResize.segs:[],dateSelectionSegs:l.dateSelectionSegs,nowDate:e.nowDate,todayRange:e.todayRange}),d("div",{className:"fc-timeline-events fc-scrollgrid-sync-inner",ref:this.innerElRef,style:{height:f}},this.renderFgSegs(h,m,!1,!1,!1),this.renderFgSegs(ln(a,e.timelineCoords,h),{},Boolean(l.eventDrag),Boolean(l.eventResize),!1)))}componentDidMount(){this.updateSize(),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,s){(e.eventStore!==this.props.eventStore||e.timelineCoords!==this.props.timelineCoords||s.moreLinkHeights!==this.state.moreLinkHeights)&&this.updateSize()}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateSize(){let{props:e}=this,{timelineCoords:s}=e;const r=this.innerElRef.current;e.onHeightChange&&e.onHeightChange(r,!1),s&&this.setState({eventInstanceHeights:j(this.harnessElRefs.currentMap,n=>Math.round(n.getBoundingClientRect().height)),moreLinkHeights:j(this.moreElRefs.currentMap,n=>Math.round(n.getBoundingClientRect().height))},()=>{e.onHeightChange&&e.onHeightChange(r,!0)}),e.syncParentMinHeight&&(r.parentElement.style.minHeight=r.style.height)}renderFgSegs(e,s,r,n,i){let{harnessElRefs:o,moreElRefs:l,props:a,context:c}=this,u=r||n||i;return d(D,null,e.map(h=>{let{seg:f,hcoords:m,top:g}=h;if(Array.isArray(f)){let v=pt(gt(f));return d(on,{key:"m:"+v,elRef:l.createRef(v),hiddenSegs:f,placement:h,dateProfile:a.dateProfile,nowDate:a.nowDate,todayRange:a.todayRange,isTimeScale:a.tDateProfile.isTimeScale,eventSelection:a.eventSelection,resourceId:a.resourceId,isForcedInvisible:s})}let p=f.eventRange.instance.instanceId,S=u||Boolean(!s[p]&&m&&g!==null),_=Ne(m,c.isRtl);return d("div",{key:"e:"+p,ref:u?null:o.createRef(p),className:"fc-timeline-event-harness",style:Object.assign({visibility:S?"":"hidden",top:g||0},_)},d(Lt,Object.assign({isTimeScale:a.tDateProfile.isTimeScale,seg:f,isDragging:r,isResizing:n,isDateSelecting:i,isSelected:p===a.eventSelection},xe(f,a.todayRange,a.nowDate))))}))}}Oe.addStateEquality({eventInstanceHeights:V,moreLinkHeights:V});function ln(t,e,s){if(!t.length||!e)return[];let r=an(s);return t.map(n=>({seg:n,hcoords:e.rangeToCoords(n),top:r[n.eventRange.instance.instanceId]}))}function an(t){let e={};for(let s of t){let{seg:r}=s;Array.isArray(r)||(e[r.eventRange.instance.instanceId]=s.top)}return e}class cn extends Ie{constructor(){super(...arguments),this.slatsRef=k(),this.state={coords:null},this.handeEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)},this.handleCoords=e=>{this.setState({coords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:s,context:r}=this,{options:n}=r,{dateProfile:i,tDateProfile:o}=e,l=J(o.slotDuration).unit;return d("div",{className:"fc-timeline-body",ref:this.handeEl,style:{minWidth:e.tableMinWidth,height:e.clientHeight,width:e.clientWidth}},d(_e,{unit:l},(a,c)=>d(D,null,d(Dt,{ref:this.slatsRef,dateProfile:i,tDateProfile:o,nowDate:a,todayRange:c,clientWidth:e.clientWidth,tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,onCoords:this.handleCoords,onScrollLeftRequest:e.onScrollLeftRequest}),d(Oe,{dateProfile:i,tDateProfile:e.tDateProfile,nowDate:a,todayRange:c,nextDayThreshold:n.nextDayThreshold,businessHours:e.businessHours,eventStore:e.eventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,timelineCoords:s.coords,syncParentMinHeight:!0}),n.nowIndicator&&s.coords&&s.coords.isDateInRange(a)&&d("div",{className:"fc-timeline-now-indicator-container"},d(we,{elClasses:["fc-timeline-now-indicator-line"],elStyle:He(s.coords.dateToCoord(a),r.isRtl),isAxis:!1,date:a})))))}queryHit(e,s,r,n){let o=this.slatsRef.current.positionToHit(e);return o?{dateProfile:this.props.dateProfile,dateSpan:o.dateSpan,rect:{left:o.left,right:o.right,top:0,bottom:n},dayEl:o.dayEl,layer:0}:null}}class dn extends Ie{constructor(){super(...arguments),this.buildTimelineDateProfile=A(_t),this.scrollGridRef=k(),this.state={slatCoords:null,slotCushionMaxWidth:null},this.handleSlatCoords=e=>{this.setState({slatCoords:e})},this.handleScrollLeftRequest=e=>{this.scrollGridRef.current.forceScrollLeft(0,e)},this.handleMaxCushionWidth=e=>{this.setState({slotCushionMaxWidth:Math.ceil(e)})}}render(){let{props:e,state:s,context:r}=this,{options:n}=r,i=!e.forPrint&&ut(n),o=!e.forPrint&&ht(n),l=this.buildTimelineDateProfile(e.dateProfile,r.dateEnv,n,r.dateProfileGenerator),{slotMinWidth:a}=n,c=Pt(l,a||this.computeFallbackSlotMinWidth(l)),u=[{type:"header",key:"header",isSticky:i,chunks:[{key:"timeline",content:h=>d(xt,{dateProfile:e.dateProfile,clientWidth:h.clientWidth,clientHeight:h.clientHeight,tableMinWidth:h.tableMinWidth,tableColGroupNode:h.tableColGroupNode,tDateProfile:l,slatCoords:s.slatCoords,onMaxCushionWidth:a?null:this.handleMaxCushionWidth})}]},{type:"body",key:"body",liquid:!0,chunks:[{key:"timeline",content:h=>d(cn,Object.assign({},e,{clientWidth:h.clientWidth,clientHeight:h.clientHeight,tableMinWidth:h.tableMinWidth,tableColGroupNode:h.tableColGroupNode,tDateProfile:l,onSlatCoords:this.handleSlatCoords,onScrollLeftRequest:this.handleScrollLeftRequest}))}]}];return o&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"timeline",content:fe}]}),d(ft,{elClasses:["fc-timeline",n.eventOverlap===!1?"fc-timeline-overlap-disabled":""],viewSpec:r.viewSpec},d(Ae,{ref:this.scrollGridRef,liquid:!e.isHeightAuto&&!e.forPrint,forPrint:e.forPrint,collapsibleWidth:!1,colGroups:[{cols:c}],sections:u}))}computeFallbackSlotMinWidth(e){return Math.max(30,(this.state.slotCushionMaxWidth||0)/e.slotsPerLabel)}}function Pt(t,e){return[{span:t.slotCnt,minWidth:e||1}]}var un='.fc .fc-timeline-body{min-height:100%;position:relative;z-index:1}.fc .fc-timeline-slots{bottom:0;position:absolute;top:0;z-index:1}.fc .fc-timeline-slots>table{height:100%}.fc .fc-timeline-slot-minor{border-style:dotted}.fc .fc-timeline-slot-frame{align-items:center;display:flex;justify-content:center}.fc .fc-timeline-header-row-chrono .fc-timeline-slot-frame{justify-content:flex-start}.fc .fc-timeline-header-row:last-child .fc-timeline-slot-frame{overflow:hidden}.fc .fc-timeline-slot-cushion{padding:4px 5px;white-space:nowrap}.fc-direction-ltr .fc-timeline-slot{border-right:0!important}.fc-direction-rtl .fc-timeline-slot{border-left:0!important}.fc .fc-timeline-now-indicator-container{bottom:0;left:0;position:absolute;right:0;top:0;width:0;z-index:4}.fc .fc-timeline-now-indicator-arrow,.fc .fc-timeline-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;position:absolute;top:0}.fc .fc-timeline-now-indicator-arrow{border-left-color:transparent;border-right-color:transparent;border-width:6px 5px 0;margin:0 -6px}.fc .fc-timeline-now-indicator-line{border-width:0 0 0 1px;bottom:0;margin:0 -1px}.fc .fc-timeline-events{position:relative;width:0;z-index:3}.fc .fc-timeline-event-harness,.fc .fc-timeline-more-link{position:absolute;top:0}.fc-timeline-event{z-index:1}.fc-timeline-event.fc-event-mirror{z-index:2}.fc-timeline-event{align-items:center;border-radius:0;display:flex;font-size:var(--fc-small-font-size);margin-bottom:1px;padding:2px 1px;position:relative}.fc-timeline-event .fc-event-main{flex-grow:1;flex-shrink:1;min-width:0}.fc-timeline-event .fc-event-time{font-weight:700}.fc-timeline-event .fc-event-time,.fc-timeline-event .fc-event-title{padding:0 2px;white-space:nowrap}.fc-direction-ltr .fc-timeline-event.fc-event-end,.fc-direction-ltr .fc-timeline-more-link{margin-right:1px}.fc-direction-rtl .fc-timeline-event.fc-event-end,.fc-direction-rtl .fc-timeline-more-link{margin-left:1px}.fc-timeline-overlap-disabled .fc-timeline-event{margin-bottom:0;padding-bottom:5px;padding-top:5px}.fc-timeline-event:not(.fc-event-end):after,.fc-timeline-event:not(.fc-event-start):before{border-color:transparent #000;border-style:solid;border-width:5px;content:"";flex-grow:0;flex-shrink:0;height:0;margin:0 1px;opacity:.5;width:0}.fc-direction-ltr .fc-timeline-event:not(.fc-event-start):before,.fc-direction-rtl .fc-timeline-event:not(.fc-event-end):after{border-left:0}.fc-direction-ltr .fc-timeline-event:not(.fc-event-end):after,.fc-direction-rtl .fc-timeline-event:not(.fc-event-start):before{border-right:0}.fc-timeline-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;font-size:var(--fc-small-font-size);padding:1px}.fc-timeline-more-link-inner{display:inline-block;left:0;padding:2px;right:0}.fc .fc-timeline-bg{bottom:0;left:0;position:absolute;right:0;top:0;width:0;z-index:2}.fc .fc-timeline-bg .fc-non-business{z-index:1}.fc .fc-timeline-bg .fc-bg-event{z-index:2}.fc .fc-timeline-bg .fc-highlight{z-index:3}.fc .fc-timeline-bg-harness{bottom:0;position:absolute;top:0}';mt(un);var hn=oe({name:"@fullcalendar/timeline",premiumReleaseDate:"2023-09-21",deps:[Pe],initialView:"timelineDay",views:{timeline:{component:dn,usesMinMaxTime:!0,eventResizableFromStart:!0},timelineDay:{type:"timeline",duration:{days:1}},timelineWeek:{type:"timeline",duration:{weeks:1}},timelineMonth:{type:"timeline",duration:{months:1}},timelineYear:{type:"timeline",duration:{years:1}}}});const At="_fc:",fn={id:String,parentId:String,children:C,title:String,businessHours:C,extendedProps:C,eventEditable:Boolean,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventConstraint:C,eventOverlap:Boolean,eventAllow:C,eventClassNames:Js,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String};function We(t,e="",s,r){let{refined:n,extra:i}=bt(t,fn),o={id:n.id||At+Te(),parentId:n.parentId||e,title:n.title||"",businessHours:n.businessHours?Xs(n.businessHours,r):null,ui:Ys({editable:n.eventEditable,startEditable:n.eventStartEditable,durationEditable:n.eventDurationEditable,constraint:n.eventConstraint,overlap:n.eventOverlap,allow:n.eventAllow,classNames:n.eventClassNames,backgroundColor:n.eventBackgroundColor,borderColor:n.eventBorderColor,textColor:n.eventTextColor,color:n.eventColor},r),extendedProps:Object.assign(Object.assign({},i),n.extendedProps)};if(Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),!s[o.id]){if(s[o.id]=o,n.children)for(let l of n.children)We(l,o.id,s,r)}return o}function Ht(t){return t.indexOf(At)===0?"":t}class P{constructor(e,s){this._context=e,this._resource=s}setProp(e,s){let r=this._resource;this._context.dispatch({type:"SET_RESOURCE_PROP",resourceId:r.id,propName:e,propValue:s}),this.sync(r)}setExtendedProp(e,s){let r=this._resource;this._context.dispatch({type:"SET_RESOURCE_EXTENDED_PROP",resourceId:r.id,propName:e,propValue:s}),this.sync(r)}sync(e){let s=this._context,r=e.id;this._resource=s.getCurrentData().resourceStore[r],s.emitter.trigger("resourceChange",{oldResource:new P(s,e),resource:this,revert(){s.dispatch({type:"ADD_RESOURCE",resourceHash:{[r]:e}})}})}remove(){let e=this._context,s=this._resource,r=s.id;e.dispatch({type:"REMOVE_RESOURCE",resourceId:r}),e.emitter.trigger("resourceRemove",{resource:this,revert(){e.dispatch({type:"ADD_RESOURCE",resourceHash:{[r]:s}})}})}getParent(){let e=this._context,s=this._resource.parentId;return s?new P(e,e.getCurrentData().resourceStore[s]):null}getChildren(){let e=this._resource.id,s=this._context,{resourceStore:r}=s.getCurrentData(),n=[];for(let i in r)r[i].parentId===e&&n.push(new P(s,r[i]));return n}getEvents(){let e=this._resource.id,s=this._context,{defs:r,instances:n}=s.getCurrentData().eventStore,i=[];for(let o in n){let l=n[o],a=r[l.defId];a.resourceIds.indexOf(e)!==-1&&i.push(new ke(s,a,l))}return i}get id(){return Ht(this._resource.id)}get title(){return this._resource.title}get eventConstraint(){return this._resource.ui.constraints[0]||null}get eventOverlap(){return this._resource.ui.overlap}get eventAllow(){return this._resource.ui.allows[0]||null}get eventBackgroundColor(){return this._resource.ui.backgroundColor}get eventBorderColor(){return this._resource.ui.borderColor}get eventTextColor(){return this._resource.ui.textColor}get eventClassNames(){return this._resource.ui.classNames}get extendedProps(){return this._resource.extendedProps}toPlainObject(e={}){let s=this._resource,{ui:r}=s,n=this.id,i={};return n&&(i.id=n),s.title&&(i.title=s.title),e.collapseEventColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?i.eventColor=r.backgroundColor:(r.backgroundColor&&(i.eventBackgroundColor=r.backgroundColor),r.borderColor&&(i.eventBorderColor=r.borderColor)),r.textColor&&(i.eventTextColor=r.textColor),r.classNames.length&&(i.eventClassNames=r.classNames),Object.keys(s.extendedProps).length&&(e.collapseExtendedProps?Object.assign(i,s.extendedProps):i.extendedProps=s.extendedProps),i}toJSON(){return this.toPlainObject()}}function mn(t,e){let s=[];for(let r in t)s.push(new P(e,t[r]));return s}function pn(t){return{resource:new P(t.context,t.resource)}}const gn=Ct("id,title");function Sn(t,e){let{emitter:s}=e;s.hasHandlers("resourcesSet")&&s.trigger("resourcesSet",mn(t,e))}function vn(t,e,s,r,n,i){let o=Rn(t,r?-1:1,e,s),l=[];return se(o,l,r,[],0,n,i),l}function se(t,e,s,r,n,i,o){for(let l=0;l<t.length;l+=1){let a=t[l],c=a.group;if(c)if(s){let u=e.length,h=r.length;if(se(a.children,e,s,r.concat(0),n,i,o),u<e.length){let f=e[u],m=f.rowSpans=f.rowSpans.slice();m[h]=e.length-u}}else{let u=c.spec.field+":"+c.value,h=i[u]!=null?i[u]:o;e.push({id:u,group:c,isExpanded:h}),h&&se(a.children,e,s,r,n+1,i,o)}else if(a.resource){let u=a.resource.id,h=i[u]!=null?i[u]:o;e.push({id:u,rowSpans:r,depth:n,isExpanded:h,hasChildren:Boolean(a.children.length),resource:a.resource,resourceFields:a.resourceFields}),h&&se(a.children,e,s,r,n+1,i,o)}}}function Rn(t,e,s,r){let n=Cn(t,r),i=[];for(let o in n){let l=n[o];l.resource.parentId||Nt(l,i,s,0,e,r)}return i}function Cn(t,e){let s={};for(let r in t){let n=t[r];s[r]={resource:n,resourceFields:Wt(n),children:[]}}for(let r in t){let n=t[r];if(n.parentId){let i=s[n.parentId];i&&Ot(s[r],i.children,e)}}return s}function Nt(t,e,s,r,n,i){if(s.length&&(n===-1||r<=n)){let o=bn(t,e,s[0]);Nt(t,o.children,s.slice(1),r+1,n,i)}else Ot(t,e,i)}function bn(t,e,s){let r=t.resourceFields[s.field],n,i;if(s.order)for(i=0;i<e.length;i+=1){let o=e[i];if(o.group){let l=Zs(r,o.group.value)*s.order;if(l===0){n=o;break}else if(l<0)break}}else for(i=0;i<e.length;i+=1){let o=e[i];if(o.group&&r===o.group.value){n=o;break}}return n||(n={group:{value:r,spec:s},children:[]},e.splice(i,0,n)),n}function Ot(t,e,s){let r;for(r=0;r<e.length&&!(Ks(e[r].resourceFields,t.resourceFields,s)>0);r+=1);e.splice(r,0,t)}function Wt(t){let e=Object.assign(Object.assign(Object.assign({},t.extendedProps),t.ui),t);return delete e.ui,delete e.extendedProps,e}function yn(t,e){return t.spec===e.spec&&t.value===e.value}class Bt extends $s{getKeyInfo(e){return Object.assign({"":{}},e.resourceStore)}getKeysForDateSpan(e){return[e.resourceId||""]}getKeysForEventDef(e){let s=e.resourceIds;return s.length?s:[""]}}function En(t,e,s){let r=e.dateSpan.resourceId,n=s.dateSpan.resourceId;r&&n&&r!==n&&(t.resourceMutation={matchResourceId:r,setResourceId:n})}function wn(t,e,s){let r=e.resourceMutation;if(r&&Ut(t,s)){let n=t.resourceIds.indexOf(r.matchResourceId);if(n!==-1){let i=t.resourceIds.slice();i.splice(n,1),i.indexOf(r.setResourceId)===-1&&i.push(r.setResourceId),t.resourceIds=i}}}function Ut(t,e){let{resourceEditable:s}=t;if(s==null){let r=t.sourceId&&e.getCurrentData().eventSources[t.sourceId];r&&(s=r.extendedProps.resourceEditable),s==null&&(s=e.options.eventResourceEditable,s==null&&(s=e.options.editable))}return s}function _n(t,e){let{resourceMutation:s}=t;if(s){let{calendarApi:r}=e;return{oldResource:r.getResourceById(s.matchResourceId),newResource:r.getResourceById(s.setResourceId)}}return{oldResource:null,newResource:null}}class In{constructor(){this.filterResources=A(xn)}transform(e,s){return s.viewSpec.optionDefaults.needsResourceData?{resourceStore:this.filterResources(s.resourceStore,s.options.filterResourcesWithEvents,s.eventStore,s.dateProfile.activeRange),resourceEntityExpansions:s.resourceEntityExpansions}:null}}function xn(t,e,s,r){if(e){let n=Dn(s.instances,r),i=Tn(n,s.defs);return Object.assign(i,kn(i,t)),yt(t,(o,l)=>i[l])}return t}function Dn(t,e){return yt(t,s=>Qs(s.range,e))}function Tn(t,e){let s={};for(let r in t){let n=t[r];for(let i of e[n.defId].resourceIds)s[i]=!0}return s}function kn(t,e){let s={};for(let r in t){let n;for(;(n=e[r])&&(r=n.parentId,r);)s[r]=!0}return s}function Mn(t,e,s,r){if(!t){let n=r.getCurrentData();if(n.viewSpecs[n.currentViewType].optionDefaults.needsResourceData&&Ut(e,r))return!0}return t}class Ln{constructor(){this.buildResourceEventUis=A(Pn,V),this.injectResourceEventUis=A(An)}transform(e,s){return s.viewSpec.optionDefaults.needsResourceData?null:{eventUiBases:this.injectResourceEventUis(e.eventUiBases,e.eventStore.defs,this.buildResourceEventUis(s.resourceStore))}}}function Pn(t){return j(t,e=>e.ui)}function An(t,e,s){return j(t,(r,n)=>n?Hn(r,e[n],s):r)}function Hn(t,e,s){let r=[];for(let n of e.resourceIds)s[n]&&r.unshift(s[n]);return r.unshift(t),er(r)}let Be=[];function Ue(t){Be.push(t)}function zt(t){return Be[t]}function Nn(){return Be}const On={id:String,resources:C,url:String,method:String,startParam:String,endParam:String,timeZoneParam:String,extraParams:C};function Wn(t){let e;if(typeof t=="string"?e={url:t}:typeof t=="function"||Array.isArray(t)?e={resources:t}:typeof t=="object"&&t&&(e=t),e){let{refined:s,extra:r}=bt(e,On);Un(r);let n=Bn(s);if(n)return{_raw:t,sourceId:Te(),sourceDefId:n.sourceDefId,meta:n.meta,publicId:s.id||"",isFetching:!1,latestFetchId:"",fetchRange:null}}return null}function Bn(t){let e=Nn();for(let s=e.length-1;s>=0;s-=1){let n=e[s].parseMeta(t);if(n)return{meta:n,sourceDefId:s}}return null}function Un(t){for(let e in t)console.warn(`Unknown resource prop '${e}'`)}function zn(t,e,s){let{options:r,dateProfile:n}=s;if(!t||!e)return tt(r.initialResources||r.resources,n.activeRange,r.refetchResourcesOnNavigate,s);switch(e.type){case"RESET_RESOURCE_SOURCE":return tt(e.resourceSourceInput,n.activeRange,r.refetchResourcesOnNavigate,s);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return Fn(t,n.activeRange,r.refetchResourcesOnNavigate,s);case"RECEIVE_RESOURCES":case"RECEIVE_RESOURCE_ERROR":return jn(t,e.fetchId,e.fetchRange);case"REFETCH_RESOURCES":return ze(t,n.activeRange,s);default:return t}}function tt(t,e,s,r){if(t){let n=Wn(t);return n=ze(n,s?e:null,r),n}return null}function Fn(t,e,s,r){return s&&!Gn(t)&&(!t.fetchRange||!rr(t.fetchRange,e))?ze(t,e,r):t}function Gn(t){return Boolean(zt(t.sourceDefId).ignoreRange)}function ze(t,e,s){let r=zt(t.sourceDefId),n=Te();return r.fetch({resourceSource:t,range:e,context:s},i=>{s.dispatch({type:"RECEIVE_RESOURCES",fetchId:n,fetchRange:e,rawResources:i.rawResources})},i=>{s.dispatch({type:"RECEIVE_RESOURCE_ERROR",fetchId:n,fetchRange:e,error:i})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:n})}function jn(t,e,s){return e===t.latestFetchId?Object.assign(Object.assign({},t),{isFetching:!1,fetchRange:s}):t}function Vn(t,e,s,r){if(!t||!e)return{};switch(e.type){case"RECEIVE_RESOURCES":return qn(t,e.rawResources,e.fetchId,s,r);case"ADD_RESOURCE":return $n(t,e.resourceHash);case"REMOVE_RESOURCE":return Xn(t,e.resourceId);case"SET_RESOURCE_PROP":return Yn(t,e.resourceId,e.propName,e.propValue);case"SET_RESOURCE_EXTENDED_PROP":return Zn(t,e.resourceId,e.propName,e.propValue);default:return t}}function qn(t,e,s,r,n){if(r.latestFetchId===s){let i={};for(let o of e)We(o,"",i,n);return i}return t}function $n(t,e){return Object.assign(Object.assign({},t),e)}function Xn(t,e){let s=Object.assign({},t);delete s[e];for(let r in s)s[r].parentId===e&&(s[r]=Object.assign(Object.assign({},s[r]),{parentId:""}));return s}function Yn(t,e,s,r){let n=t[e];return n?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},n),{[s]:r})}):t}function Zn(t,e,s,r){let n=t[e];return n?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},n),{extendedProps:Object.assign(Object.assign({},n.extendedProps),{[s]:r})})}):t}function Kn(t,e){if(!t||!e)return{};switch(e.type){case"SET_RESOURCE_ENTITY_EXPANDED":return Object.assign(Object.assign({},t),{[e.id]:e.isExpanded});default:return t}}function Jn(t,e,s){let r=zn(t&&t.resourceSource,e,s),n=Vn(t&&t.resourceStore,e,r,s),i=Kn(t&&t.resourceEntityExpansions,e);return{resourceSource:r,resourceStore:n,resourceEntityExpansions:i}}const Qn={resourceId:String,resourceIds:C,resourceEditable:Boolean};function ei(t){return{resourceIds:ti(t.resourceIds).concat(t.resourceId?[t.resourceId]:[]),resourceEditable:t.resourceEditable}}function ti(t){return(t||[]).map(e=>String(e))}function si(t,e){let s=t.dateSpan.resourceId,r=e.dateSpan.resourceId;return s&&r?{resourceId:s}:null}Q.prototype.addResource=function(t,e=!0){let s=this.getCurrentData(),r,n;t instanceof P?(n=t._resource,r={[n.id]:n}):(r={},n=We(t,"",r,s)),this.dispatch({type:"ADD_RESOURCE",resourceHash:r}),e&&this.trigger("_scrollRequest",{resourceId:n.id});let i=new P(s,n);return s.emitter.trigger("resourceAdd",{resource:i,revert:()=>{this.dispatch({type:"REMOVE_RESOURCE",resourceId:n.id})}}),i};Q.prototype.getResourceById=function(t){t=String(t);let e=this.getCurrentData();if(e.resourceStore){let s=e.resourceStore[t];if(s)return new P(e,s)}return null};Q.prototype.getResources=function(){let t=this.getCurrentData(),{resourceStore:e}=t,s=[];if(e)for(let r in e)s.push(new P(t,e[r]));return s};Q.prototype.getTopLevelResources=function(){let t=this.getCurrentData(),{resourceStore:e}=t,s=[];if(e)for(let r in e)e[r].parentId||s.push(new P(t,e[r]));return s};Q.prototype.refetchResources=function(){this.dispatch({type:"REFETCH_RESOURCES"})};function ri(t,e){return t.resourceId?{resource:e.calendarApi.getResourceById(t.resourceId)}:{}}function ni(t,e){return t.resourceId?{resource:e.calendarApi.getResourceById(t.resourceId)}:{}}function ii(t,e){let r=new Bt().splitProps(Object.assign(Object.assign({},t),{resourceStore:e.getCurrentData().resourceStore}));for(let n in r){let i=r[n];if(n&&r[""]&&(i=Object.assign(Object.assign({},i),{eventStore:tr(r[""].eventStore,i.eventStore),eventUiBases:Object.assign(Object.assign({},r[""].eventUiBases),i.eventUiBases)})),!sr(i,e,{resourceId:n},oi.bind(null,n)))return!1}return!0}function oi(t,e){return Object.assign(Object.assign({},e),{constraints:li(t,e.constraints)})}function li(t,e){return e.map(s=>{let r=s.defs;if(r)for(let n in r){let i=r[n].resourceIds;if(i.length&&i.indexOf(t)===-1)return!1}return s})}function ai(t){return t.resourceId?{resourceId:t.resourceId}:{}}const ci={resources:di};function di(t,e){e.getCurrentData().resourceSource._raw!==t&&e.dispatch({type:"RESET_RESOURCE_SOURCE",resourceSourceInput:t})}const ui={initialResources:C,resources:C,eventResourceEditable:Boolean,refetchResourcesOnNavigate:Boolean,resourceOrder:Ct,filterResourcesWithEvents:Boolean,resourceGroupField:String,resourceAreaWidth:C,resourceAreaColumns:C,resourcesInitiallyExpanded:Boolean,datesAboveResources:Boolean,needsResourceData:Boolean,resourceAreaHeaderClassNames:C,resourceAreaHeaderContent:C,resourceAreaHeaderDidMount:C,resourceAreaHeaderWillUnmount:C,resourceGroupLabelClassNames:C,resourceGroupLabelContent:C,resourceGroupLabelDidMount:C,resourceGroupLabelWillUnmount:C,resourceLabelClassNames:C,resourceLabelContent:C,resourceLabelDidMount:C,resourceLabelWillUnmount:C,resourceLaneClassNames:C,resourceLaneContent:C,resourceLaneDidMount:C,resourceLaneWillUnmount:C,resourceGroupLaneClassNames:C,resourceGroupLaneContent:C,resourceGroupLaneDidMount:C,resourceGroupLaneWillUnmount:C},hi={resourcesSet:C,resourceAdd:C,resourceChange:C,resourceRemove:C};ke.prototype.getResources=function(){let{calendarApi:t}=this._context;return this._def.resourceIds.map(e=>t.getResourceById(e))};ke.prototype.setResources=function(t){let e=[];for(let s of t){let r=null;typeof s=="string"?r=s:typeof s=="number"?r=String(s):s instanceof P?r=s.id:console.warn("unknown resource type: "+s),r&&e.push(r)}this.mutate({standardProps:{resourceIds:e}})};Ue({ignoreRange:!0,parseMeta(t){return Array.isArray(t.resources)?t.resources:null},fetch(t,e){e({rawResources:t.resourceSource.meta})}});Ue({parseMeta(t){return typeof t.resources=="function"?t.resources:null},fetch(t,e,s){const r=t.context.dateEnv,n=t.resourceSource.meta,i=t.range?{start:r.toDate(t.range.start),end:r.toDate(t.range.end),startStr:r.formatIso(t.range.start),endStr:r.formatIso(t.range.end),timeZone:r.timeZone}:{};nr(n.bind(null,i),o=>e({rawResources:o}),s)}});Ue({parseMeta(t){return t.url?{url:t.url,method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams}:null},fetch(t,e,s){const r=t.resourceSource.meta,n=fi(r,t.range,t.context);ir(r.method,r.url,n).then(([i,o])=>{e({rawResources:i,response:o})},s)}});function fi(t,e,s){let{dateEnv:r,options:n}=s,i,o,l,a,c={};return e&&(i=t.startParam,i==null&&(i=n.startParam),o=t.endParam,o==null&&(o=n.endParam),l=t.timeZoneParam,l==null&&(l=n.timeZoneParam),c[i]=r.formatIso(e.start),c[o]=r.formatIso(e.end),r.timeZone!=="local"&&(c[l]=r.timeZone)),typeof t.extraParams=="function"?a=t.extraParams():a=t.extraParams||{},Object.assign(c,a),c}var mi=oe({name:"@fullcalendar/resource",premiumReleaseDate:"2023-09-21",deps:[Pe],reducers:[Jn],isLoadingFuncs:[t=>t.resourceSource&&t.resourceSource.isFetching],eventRefiners:Qn,eventDefMemberAdders:[ei],isDraggableTransformers:[Mn],eventDragMutationMassagers:[En],eventDefMutationAppliers:[wn],dateSelectionTransformers:[si],datePointTransforms:[ri],dateSpanTransforms:[ni],viewPropsTransformers:[In,Ln],isPropsValid:ii,externalDefTransforms:[ai],eventDropTransformers:[_n],optionChangeHandlers:ci,optionRefiners:ui,listenerRefiners:hi,propSetHandlers:{resourceStore:Sn}});function Ft({depth:t,hasChildren:e,isExpanded:s,onExpanderClick:r}){let n=[];for(let o=0;o<t;o+=1)n.push(d("span",{className:"fc-icon"}));let i=["fc-icon"];return e&&(s?i.push("fc-icon-minus-square"):i.push("fc-icon-plus-square")),n.push(d("span",{className:"fc-datagrid-expander"+(e?"":" fc-datagrid-expander-placeholder"),onClick:r},d("span",{className:i.join(" ")}))),d(D,{},...n)}class pi extends I{constructor(){super(...arguments),this.refineRenderProps=De(Si),this.onExpanderClick=e=>{let{props:s}=this;s.hasChildren&&this.context.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:s.resource.id,isExpanded:!s.isExpanded})}}render(){let{props:e,context:s}=this,{colSpec:r}=e,n=this.refineRenderProps({resource:e.resource,fieldValue:e.fieldValue,context:s});return d(N,{elTag:"td",elClasses:["fc-datagrid-cell","fc-resource"],elAttrs:{role:"gridcell","data-resource-id":e.resource.id},renderProps:n,generatorName:r.isMain?"resourceLabelContent":void 0,customGenerator:r.cellContent,defaultGenerator:gi,classNameGenerator:r.cellClassNames,didMount:r.cellDidMount,willUnmount:r.cellWillUnmount},i=>d("div",{className:"fc-datagrid-cell-frame",style:{height:e.innerHeight}},d("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner"},r.isMain&&d(Ft,{depth:e.depth,hasChildren:e.hasChildren,isExpanded:e.isExpanded,onExpanderClick:this.onExpanderClick}),d(i,{elTag:"span",elClasses:["fc-datagrid-cell-main"]}))))}}function gi(t){return t.fieldValue||d(D,null,"\xA0")}function Si(t){return{resource:new P(t.context,t.resource),fieldValue:t.fieldValue,view:t.context.viewApi}}class vi extends I{render(){let{props:e,context:s}=this,{colSpec:r}=e,n={groupValue:e.fieldValue,view:s.viewApi};return d(N,{elTag:"td",elClasses:["fc-datagrid-cell","fc-resource-group"],elAttrs:{role:"gridcell",rowSpan:e.rowSpan},renderProps:n,generatorName:"resourceGroupLabelContent",customGenerator:r.cellContent,defaultGenerator:Ri,classNameGenerator:r.cellClassNames,didMount:r.cellDidMount,willUnmount:r.cellWillUnmount},i=>d("div",{className:"fc-datagrid-cell-frame fc-datagrid-cell-frame-liquid"},d(i,{elTag:"div",elClasses:["fc-datagrid-cell-cushion","fc-sticky"]})))}}function Ri(t){return t.groupValue||d(D,null,"\xA0")}class Gt extends I{render(){let{props:e}=this,{resource:s,rowSpans:r,depth:n}=e,i=Wt(s);return d("tr",{role:"row"},e.colSpecs.map((o,l)=>{let a=r[l];if(a===0)return null;a==null&&(a=1);let c=o.field?i[o.field]:s.title||Ht(s.id);return a>1?d(vi,{key:l,colSpec:o,fieldValue:c,rowSpan:a}):d(pi,{key:l,colSpec:o,resource:s,fieldValue:c,depth:n,hasChildren:e.hasChildren,isExpanded:e.isExpanded,innerHeight:e.innerHeight})}))}}Gt.addPropsEquality({rowSpans:be});class jt extends I{constructor(){super(...arguments),this.innerInnerRef=k(),this.onExpanderClick=()=>{let{props:e}=this;this.context.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:e.id,isExpanded:!e.isExpanded})}}render(){let{props:e,context:s}=this,r={groupValue:e.group.value,view:s.viewApi},n=e.group.spec;return d("tr",{role:"row"},d(N,{elTag:"th",elClasses:["fc-datagrid-cell","fc-resource-group",s.theme.getClass("tableCellShaded")],elAttrs:{role:"columnheader",scope:"colgroup",colSpan:e.spreadsheetColCnt},renderProps:r,generatorName:"resourceGroupLabelContent",customGenerator:n.labelContent,defaultGenerator:Ci,classNameGenerator:n.labelClassNames,didMount:n.labelDidMount,willUnmount:n.labelWillUnmount},i=>d("div",{className:"fc-datagrid-cell-frame",style:{height:e.innerHeight}},d("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner",ref:this.innerInnerRef},d(Ft,{depth:0,hasChildren:!0,isExpanded:e.isExpanded,onExpanderClick:this.onExpanderClick}),d(i,{elTag:"span",elClasses:["fc-datagrid-cell-main"]})))))}}jt.addPropsEquality({group:yn});function Ci(t){return t.groupValue||d(D,null,"\xA0")}const bi=20;class yi extends I{constructor(){super(...arguments),this.resizerElRefs=new O(this._handleColResizerEl.bind(this)),this.colDraggings={}}render(){let{colSpecs:e,superHeaderRendering:s,rowInnerHeights:r}=this.props,n={view:this.context.viewApi},i=[];if(r=r.slice(),s){let l=r.shift();i.push(d("tr",{key:"row-super",role:"row"},d(N,{elTag:"th",elClasses:["fc-datagrid-cell","fc-datagrid-cell-super"],elAttrs:{role:"columnheader",scope:"colgroup",colSpan:e.length},renderProps:n,generatorName:"resourceAreaHeaderContent",customGenerator:s.headerContent,defaultGenerator:s.headerDefault,classNameGenerator:s.headerClassNames,didMount:s.headerDidMount,willUnmount:s.headerWillUnmount},a=>d("div",{className:"fc-datagrid-cell-frame",style:{height:l}},d(a,{elTag:"div",elClasses:["fc-datagrid-cell-cushion","fc-scrollgrid-sync-inner"]})))))}let o=r.shift();return i.push(d("tr",{key:"row",role:"row"},e.map((l,a)=>{let c=a===e.length-1;return d(N,{key:a,elTag:"th",elClasses:["fc-datagrid-cell"],elAttrs:{role:"columnheader"},renderProps:n,generatorName:"resourceAreaHeaderContent",customGenerator:l.headerContent,defaultGenerator:l.headerDefault,classNameGenerator:l.headerClassNames,didMount:l.headerDidMount,willUnmount:l.headerWillUnmount},u=>d("div",{className:"fc-datagrid-cell-frame",style:{height:o}},d("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner"},l.isMain&&d("span",{className:"fc-datagrid-expander fc-datagrid-expander-placeholder"},d("span",{className:"fc-icon"})),d(u,{elTag:"span",elClasses:["fc-datagrid-cell-main"]})),!c&&d("div",{className:"fc-datagrid-cell-resizer",ref:this.resizerElRefs.createRef(a)})))}))),d(D,null,i)}_handleColResizerEl(e,s){let{colDraggings:r}=this;if(e){let n=this.initColResizing(e,parseInt(s,10));n&&(r[s]=n)}else{let n=r[s];n&&(n.destroy(),delete r[s])}}initColResizing(e,s){let{pluginHooks:r,isRtl:n}=this.context,{onColWidthChange:i}=this.props,o=r.elementDraggingImpl;if(o){let l=new o(e),a,c;return l.emitter.on("dragstart",()=>{c=K(Et(e,"tr"),"th").map(h=>h.getBoundingClientRect().width),a=c[s]}),l.emitter.on("dragmove",u=>{c[s]=Math.max(a+u.deltaX*(n?-1:1),bi),i&&i(c.slice())}),l.setAutoScrollEnabled(!1),l}return null}}class Ei extends I{constructor(){super(...arguments),this.refineRenderProps=De(pn),this.handleHeightChange=(e,s)=>{this.props.onHeightChange&&this.props.onHeightChange(Et(e,"tr"),s)}}render(){let{props:e,context:s}=this,{options:r}=s,n=this.refineRenderProps({resource:e.resource,context:s});return d("tr",{ref:e.elRef},d(N,{elTag:"td",elClasses:["fc-timeline-lane","fc-resource"],elAttrs:{"data-resource-id":e.resource.id},renderProps:n,generatorName:"resourceLaneContent",customGenerator:r.resourceLaneContent,classNameGenerator:r.resourceLaneClassNames,didMount:r.resourceLaneDidMount,willUnmount:r.resourceLaneWillUnmount},i=>d("div",{className:"fc-timeline-lane-frame",style:{height:e.innerHeight}},d(i,{elTag:"div",elClasses:["fc-timeline-lane-misc"]}),d(Oe,{dateProfile:e.dateProfile,tDateProfile:e.tDateProfile,nowDate:e.nowDate,todayRange:e.todayRange,nextDayThreshold:e.nextDayThreshold,businessHours:e.businessHours,eventStore:e.eventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,timelineCoords:e.timelineCoords,onHeightChange:this.handleHeightChange,resourceId:e.resource.id}))))}}class wi extends I{render(){let{props:e,context:s}=this,{renderHooks:r}=e,n={groupValue:e.groupValue,view:s.viewApi};return d("tr",{ref:e.elRef},d(N,{elTag:"td",elRef:e.elRef,elClasses:["fc-timeline-lane","fc-resource-group",s.theme.getClass("tableCellShaded")],renderProps:n,generatorName:"resourceGroupLaneContent",customGenerator:r.laneContent,classNameGenerator:r.laneClassNames,didMount:r.laneDidMount,willUnmount:r.laneWillUnmount},i=>d(i,{elTag:"div",elStyle:{height:e.innerHeight}})))}}class _i extends I{render(){let{props:e,context:s}=this,{rowElRefs:r,innerHeights:n}=e;return d("tbody",null,e.rowNodes.map((i,o)=>{if(i.group)return d(wi,{key:i.id,elRef:r.createRef(i.id),groupValue:i.group.value,renderHooks:i.group.spec,innerHeight:n[o]||""});if(i.resource){let l=i.resource;return d(Ei,Object.assign({key:i.id,elRef:r.createRef(i.id)},e.splitProps[l.id],{resource:l,dateProfile:e.dateProfile,tDateProfile:e.tDateProfile,nowDate:e.nowDate,todayRange:e.todayRange,nextDayThreshold:s.options.nextDayThreshold,businessHours:l.businessHours||e.fallbackBusinessHours,innerHeight:n[o]||"",timelineCoords:e.slatCoords,onHeightChange:e.onRowHeightChange}))}return null}))}}class Ii extends I{constructor(){super(...arguments),this.rootElRef=k(),this.rowElRefs=new O}render(){let{props:e,context:s}=this;return d("table",{ref:this.rootElRef,"aria-hidden":!0,className:"fc-scrollgrid-sync-table "+s.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},d(_i,{rowElRefs:this.rowElRefs,rowNodes:e.rowNodes,dateProfile:e.dateProfile,tDateProfile:e.tDateProfile,nowDate:e.nowDate,todayRange:e.todayRange,splitProps:e.splitProps,fallbackBusinessHours:e.fallbackBusinessHours,slatCoords:e.slatCoords,innerHeights:e.innerHeights,onRowHeightChange:e.onRowHeightChange}))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}componentWillUnmount(){this.props.onRowCoords&&this.props.onRowCoords(null)}updateCoords(){let{props:e}=this;e.onRowCoords&&e.clientWidth!==null&&this.props.onRowCoords(new me(this.rootElRef.current,xi(this.rowElRefs.currentMap,e.rowNodes),!1,!0))}}function xi(t,e){return e.map(s=>t[s.id])}class Di extends Ie{constructor(){super(...arguments),this.computeHasResourceBusinessHours=A(Ti),this.resourceSplitter=new Bt,this.bgSlicer=new Mt,this.slatsRef=k(),this.state={slatCoords:null},this.handleEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)},this.handleRowCoords=e=>{this.rowCoords=e,this.props.onRowCoords&&this.props.onRowCoords(e)}}render(){let{props:e,state:s,context:r}=this,{dateProfile:n,tDateProfile:i}=e,o=J(i.slotDuration).unit,l=this.computeHasResourceBusinessHours(e.rowNodes),a=this.resourceSplitter.splitProps(e),c=a[""],u=this.bgSlicer.sliceProps(c,n,i.isTimeScale?null:e.nextDayThreshold,r,n,r.dateProfileGenerator,i,r.dateEnv),h=s.slatCoords&&s.slatCoords.dateProfile===e.dateProfile?s.slatCoords:null;return d("div",{ref:this.handleEl,className:["fc-timeline-body",e.expandRows?"fc-timeline-body-expandrows":""].join(" "),style:{minWidth:e.tableMinWidth}},d(_e,{unit:o},(f,m)=>d(D,null,d(Dt,{ref:this.slatsRef,dateProfile:n,tDateProfile:i,nowDate:f,todayRange:m,clientWidth:e.clientWidth,tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,onCoords:this.handleSlatCoords,onScrollLeftRequest:e.onScrollLeftRequest}),d(kt,{businessHourSegs:l?null:u.businessHourSegs,bgEventSegs:u.bgEventSegs,timelineCoords:h,eventResizeSegs:u.eventResize?u.eventResize.segs:[],dateSelectionSegs:u.dateSelectionSegs,nowDate:f,todayRange:m}),d(Ii,{rowNodes:e.rowNodes,dateProfile:n,tDateProfile:e.tDateProfile,nowDate:f,todayRange:m,splitProps:a,fallbackBusinessHours:l?e.businessHours:null,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,innerHeights:e.rowInnerHeights,slatCoords:h,onRowCoords:this.handleRowCoords,onRowHeightChange:e.onRowHeightChange}),r.options.nowIndicator&&h&&h.isDateInRange(f)&&d("div",{className:"fc-timeline-now-indicator-container"},d(we,{elClasses:["fc-timeline-now-indicator-line"],elStyle:He(h.dateToCoord(f),r.isRtl),isAxis:!1,date:f})))))}queryHit(e,s){let r=this.rowCoords,n=r.topToIndex(s);if(n!=null){let i=this.props.rowNodes[n].resource;if(i){let o=this.slatsRef.current.positionToHit(e);if(o)return{dateProfile:this.props.dateProfile,dateSpan:{range:o.dateSpan.range,allDay:o.dateSpan.allDay,resourceId:i.id},rect:{left:o.left,right:o.right,top:r.tops[n],bottom:r.bottoms[n]},dayEl:o.dayEl,layer:0}}}return null}}function Ti(t){for(let e of t){let s=e.resource;if(s&&s.businessHours)return!0}return!1}const st=30;class ki extends I{constructor(){super(...arguments),this.scrollGridRef=k(),this.timeBodyScrollerElRef=k(),this.spreadsheetHeaderChunkElRef=k(),this.rootElRef=k(),this.ensureScrollGridResizeId=0,this.state={resourceAreaWidthOverride:null},this.ensureScrollGridResize=()=>{this.ensureScrollGridResizeId&&clearTimeout(this.ensureScrollGridResizeId),this.ensureScrollGridResizeId=setTimeout(()=>{this.scrollGridRef.current.handleSizing(!1)},U.SCROLLGRID_RESIZE_INTERVAL+1)}}render(){let{props:e,state:s,context:r}=this,{options:n}=r,i=!e.forPrint&&ut(n),o=!e.forPrint&&ht(n),l=[{type:"header",key:"header",syncRowHeights:!0,isSticky:i,chunks:[{key:"datagrid",elRef:this.spreadsheetHeaderChunkElRef,tableClassName:"fc-datagrid-header",rowContent:e.spreadsheetHeaderRows},{key:"divider",outerContent:d("td",{role:"presentation",className:"fc-resource-timeline-divider "+r.theme.getClass("tableCellShaded")})},{key:"timeline",content:e.timeHeaderContent}]},{type:"body",key:"body",syncRowHeights:!0,liquid:!0,expandRows:Boolean(n.expandRows),chunks:[{key:"datagrid",tableClassName:"fc-datagrid-body",rowContent:e.spreadsheetBodyRows},{key:"divider",outerContent:d("td",{role:"presentation",className:"fc-resource-timeline-divider "+r.theme.getClass("tableCellShaded")})},{key:"timeline",scrollerElRef:this.timeBodyScrollerElRef,content:e.timeBodyContent}]}];o&&l.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"datagrid",content:fe},{key:"divider",outerContent:d("td",{role:"presentation",className:"fc-resource-timeline-divider "+r.theme.getClass("tableCellShaded")})},{key:"timeline",content:fe}]});let a=s.resourceAreaWidthOverride!=null?s.resourceAreaWidthOverride:n.resourceAreaWidth;return d(Ae,{ref:this.scrollGridRef,elRef:this.rootElRef,liquid:!e.isHeightAuto&&!e.forPrint,forPrint:e.forPrint,collapsibleWidth:!1,colGroups:[{cols:e.spreadsheetCols,width:a},{cols:[]},{cols:e.timeCols}],sections:l})}forceTimeScroll(e){this.scrollGridRef.current.forceScrollLeft(2,e)}forceResourceScroll(e){this.scrollGridRef.current.forceScrollTop(1,e)}getResourceScroll(){return this.timeBodyScrollerElRef.current.scrollTop}componentDidMount(){this.initSpreadsheetResizing()}componentWillUnmount(){this.destroySpreadsheetResizing()}initSpreadsheetResizing(){let{isRtl:e,pluginHooks:s}=this.context,r=s.elementDraggingImpl,n=this.spreadsheetHeaderChunkElRef.current;if(r){let i=this.rootElRef.current,o=this.spreadsheetResizerDragging=new r(i,".fc-resource-timeline-divider"),l,a;o.emitter.on("dragstart",()=>{l=n.getBoundingClientRect().width,a=i.getBoundingClientRect().width}),o.emitter.on("dragmove",c=>{let u=l+c.deltaX*(e?-1:1);u=Math.max(u,st),u=Math.min(u,a-st),this.setState({resourceAreaWidthOverride:u},this.ensureScrollGridResize)}),o.setAutoScrollEnabled(!1)}}destroySpreadsheetResizing(){this.spreadsheetResizerDragging&&this.spreadsheetResizerDragging.destroy()}}class Vt extends I{constructor(e,s){super(e,s),this.processColOptions=A(Ai),this.buildTimelineDateProfile=A(_t),this.hasNesting=A(Pi),this.buildRowNodes=A(vn),this.layoutRef=k(),this.rowNodes=[],this.renderedRowNodes=[],this.buildRowIndex=A(Mi),this.handleSlatCoords=r=>{this.setState({slatCoords:r})},this.handleRowCoords=r=>{this.rowCoords=r,this.scrollResponder.update(!1)},this.handleMaxCushionWidth=r=>{this.setState({slotCushionMaxWidth:Math.ceil(r)})},this.handleScrollLeftRequest=r=>{this.layoutRef.current.forceTimeScroll(r)},this.handleScrollRequest=r=>{let{rowCoords:n}=this,i=this.layoutRef.current,o=r.rowId||r.resourceId;if(n){if(o){let a=this.buildRowIndex(this.renderedRowNodes)[o];if(a!=null){let c=r.fromBottom!=null?n.bottoms[a]-r.fromBottom:n.tops[a];i.forceResourceScroll(c)}}return!0}return null},this.handleColWidthChange=r=>{this.setState({spreadsheetColWidths:r})},this.state={resourceAreaWidth:s.options.resourceAreaWidth,spreadsheetColWidths:[]}}render(){let{props:e,state:s,context:r}=this,{options:n,viewSpec:i}=r,{superHeaderRendering:o,groupSpecs:l,orderSpecs:a,isVGrouping:c,colSpecs:u}=this.processColOptions(r.options),h=this.buildTimelineDateProfile(e.dateProfile,r.dateEnv,n,r.dateProfileGenerator),f=this.rowNodes=this.buildRowNodes(e.resourceStore,l,a,c,e.resourceEntityExpansions,n.resourcesInitiallyExpanded),{slotMinWidth:m}=n,g=Pt(h,m||this.computeFallbackSlotMinWidth(h));return d(ft,{elClasses:["fc-resource-timeline",!this.hasNesting(f)&&"fc-resource-timeline-flat","fc-timeline",n.eventOverlap===!1?"fc-timeline-overlap-disabled":"fc-timeline-overlap-enabled"],viewSpec:i},d(ki,{ref:this.layoutRef,forPrint:e.forPrint,isHeightAuto:e.isHeightAuto,spreadsheetCols:Li(u,s.spreadsheetColWidths,""),spreadsheetHeaderRows:p=>d(yi,{superHeaderRendering:o,colSpecs:u,onColWidthChange:this.handleColWidthChange,rowInnerHeights:p.rowSyncHeights}),spreadsheetBodyRows:p=>d(D,null,this.renderSpreadsheetRows(f,u,p.rowSyncHeights)),timeCols:g,timeHeaderContent:p=>d(xt,{clientWidth:p.clientWidth,clientHeight:p.clientHeight,tableMinWidth:p.tableMinWidth,tableColGroupNode:p.tableColGroupNode,dateProfile:e.dateProfile,tDateProfile:h,slatCoords:s.slatCoords,rowInnerHeights:p.rowSyncHeights,onMaxCushionWidth:m?null:this.handleMaxCushionWidth}),timeBodyContent:p=>d(Di,{dateProfile:e.dateProfile,clientWidth:p.clientWidth,clientHeight:p.clientHeight,tableMinWidth:p.tableMinWidth,tableColGroupNode:p.tableColGroupNode,expandRows:p.expandRows,tDateProfile:h,rowNodes:f,businessHours:e.businessHours,dateSelection:e.dateSelection,eventStore:e.eventStore,eventUiBases:e.eventUiBases,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,resourceStore:e.resourceStore,nextDayThreshold:r.options.nextDayThreshold,rowInnerHeights:p.rowSyncHeights,onSlatCoords:this.handleSlatCoords,onRowCoords:this.handleRowCoords,onScrollLeftRequest:this.handleScrollLeftRequest,onRowHeightChange:p.reportRowHeightChange})}))}renderSpreadsheetRows(e,s,r){return e.map((n,i)=>n.group?d(jt,{key:n.id,id:n.id,spreadsheetColCnt:s.length,isExpanded:n.isExpanded,group:n.group,innerHeight:r[i]||""}):n.resource?d(Gt,{key:n.id,colSpecs:s,rowSpans:n.rowSpans,depth:n.depth,isExpanded:n.isExpanded,hasChildren:n.hasChildren,resource:n.resource,innerHeight:r[i]||""}):null)}componentDidMount(){this.renderedRowNodes=this.rowNodes,this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}getSnapshotBeforeUpdate(){return this.props.forPrint?{}:{resourceScroll:this.queryResourceScroll()}}componentDidUpdate(e,s,r){this.renderedRowNodes=this.rowNodes,this.scrollResponder.update(e.dateProfile!==this.props.dateProfile),r.resourceScroll&&this.handleScrollRequest(r.resourceScroll)}componentWillUnmount(){this.scrollResponder.detach()}computeFallbackSlotMinWidth(e){return Math.max(30,(this.state.slotCushionMaxWidth||0)/e.slotsPerLabel)}queryResourceScroll(){let{rowCoords:e,renderedRowNodes:s}=this;if(e){let r=this.layoutRef.current,n=e.bottoms,i=r.getResourceScroll(),o={};for(let l=0;l<n.length;l+=1){let a=s[l],c=n[l]-i;if(c>0){o.rowId=a.id,o.fromBottom=c;break}}return o}return null}}Vt.addStateEquality({spreadsheetColWidths:be});function Mi(t){let e={};for(let s=0;s<t.length;s+=1)e[t[s].id]=s;return e}function Li(t,e,s=""){return t.map((r,n)=>({className:r.isMain?"fc-main-col":"",width:e[n]||r.width||s}))}function Pi(t){for(let e of t)if(e.group||e.resource&&e.hasChildren)return!0;return!1}function Ai(t){let e=t.resourceAreaColumns||[],s=null;e.length?t.resourceAreaHeaderContent&&(s={headerClassNames:t.resourceAreaHeaderClassNames,headerContent:t.resourceAreaHeaderContent,headerDidMount:t.resourceAreaHeaderDidMount,headerWillUnmount:t.resourceAreaHeaderWillUnmount}):e.push({headerClassNames:t.resourceAreaHeaderClassNames,headerContent:t.resourceAreaHeaderContent,headerDefault:()=>"Resources",headerDidMount:t.resourceAreaHeaderDidMount,headerWillUnmount:t.resourceAreaHeaderWillUnmount});let r=[],n=[],i=[],o=!1;for(let u of e)u.group?n.push(Object.assign(Object.assign({},u),{cellClassNames:u.cellClassNames||t.resourceGroupLabelClassNames,cellContent:u.cellContent||t.resourceGroupLabelContent,cellDidMount:u.cellDidMount||t.resourceGroupLabelDidMount,cellWillUnmount:u.cellWillUnmount||t.resourceGroupLaneWillUnmount})):r.push(u);let l=r[0];if(l.isMain=!0,l.cellClassNames=l.cellClassNames||t.resourceLabelClassNames,l.cellContent=l.cellContent||t.resourceLabelContent,l.cellDidMount=l.cellDidMount||t.resourceLabelDidMount,l.cellWillUnmount=l.cellWillUnmount||t.resourceLabelWillUnmount,n.length)i=n,o=!0;else{let u=t.resourceGroupField;u&&i.push({field:u,labelClassNames:t.resourceGroupLabelClassNames,labelContent:t.resourceGroupLabelContent,labelDidMount:t.resourceGroupLabelDidMount,labelWillUnmount:t.resourceGroupLabelWillUnmount,laneClassNames:t.resourceGroupLaneClassNames,laneContent:t.resourceGroupLaneContent,laneDidMount:t.resourceGroupLaneDidMount,laneWillUnmount:t.resourceGroupLaneWillUnmount})}let a=t.resourceOrder||gn,c=[];for(let u of a){let h=!1;for(let f of i)if(f.field===u.field){f.order=u.order,h=!0;break}h||c.push(u)}return{superHeaderRendering:s,isVGrouping:o,groupSpecs:i,colSpecs:n.concat(r),orderSpecs:c}}var Hi=".fc .fc-resource-timeline-divider{cursor:col-resize;width:3px}.fc .fc-resource-group{font-weight:inherit;text-align:inherit}.fc .fc-resource-timeline .fc-resource-group:not([rowspan]){background:var(--fc-neutral-bg-color)}.fc .fc-timeline-lane-frame{position:relative}.fc .fc-timeline-overlap-enabled .fc-timeline-lane-frame .fc-timeline-events{box-sizing:content-box;padding-bottom:10px}.fc-timeline-body-expandrows td.fc-timeline-lane{position:relative}.fc-timeline-body-expandrows .fc-timeline-lane-frame{position:static}.fc-datagrid-cell-frame-liquid{height:100%}.fc-liquid-hack .fc-datagrid-cell-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-datagrid-header .fc-datagrid-cell-frame{align-items:center;display:flex;justify-content:flex-start;position:relative}.fc .fc-datagrid-cell-resizer{bottom:0;cursor:col-resize;position:absolute;top:0;width:5px;z-index:1}.fc .fc-datagrid-cell-cushion{overflow:hidden;padding:8px;white-space:nowrap}.fc .fc-datagrid-expander{cursor:pointer;opacity:.65}.fc .fc-datagrid-expander .fc-icon{display:inline-block;width:1em}.fc .fc-datagrid-expander-placeholder{cursor:auto}.fc .fc-resource-timeline-flat .fc-datagrid-expander-placeholder{display:none}.fc-direction-ltr .fc-datagrid-cell-resizer{right:-3px}.fc-direction-rtl .fc-datagrid-cell-resizer{left:-3px}.fc-direction-ltr .fc-datagrid-expander{margin-right:3px}.fc-direction-rtl .fc-datagrid-expander{margin-left:3px}";mt(Hi);var Ni=oe({name:"@fullcalendar/resource-timeline",premiumReleaseDate:"2023-09-21",deps:[Pe,mi,hn],initialView:"resourceTimelineDay",views:{resourceTimeline:{type:"timeline",component:Vt,needsResourceData:!0,resourceAreaWidth:"30%",resourcesInitiallyExpanded:!0,eventResizableFromStart:!0},resourceTimelineDay:{type:"resourceTimeline",duration:{days:1}},resourceTimelineWeek:{type:"resourceTimeline",duration:{weeks:1}},resourceTimelineMonth:{type:"resourceTimeline",duration:{months:1}},resourceTimelineYear:{type:"resourceTimeline",duration:{years:1}}}});const rt=25,Oi={name:"ResourceToggle",components:{Checkbox:Zt,ButtonIcon:Se},props:{fcData:{type:Object,required:!0}},setup(){const t=Z(),e=ve();return{scheduleStore:t,mainStore:e}},data(){return{resourceId:""}},computed:{resource(){return this.scheduleStore.resources.find(t=>t.id===this.resourceId)||{}}},created(){const{resource:t={}}=this.$props.fcData;this.resourceId=t.id},methods:{toggleResourceHandler(){this.scheduleStore.resources.filter(e=>e.isActive).length>rt&&this.$nextTick(()=>{this.resource.isActive=!1,this.mainStore.toast({message:Kt(this.$Labels.Schedule_Error_Max_Amount_Of_Resources,[rt]),state:"error"})}),this.$bus.emit("toggle-resource",{resourceId:this.resourceId})},deleteResource(){this.$bus.emit("remove-resources",[this.resource.id])}}},Wi={class:"slds-grid slds-grid_vertical-align-center",style:{"min-height":"24px"}},Bi=["title"];function Ui(t,e,s,r,n,i){const o=w("Checkbox"),l=w("ButtonIcon");return y(),M("div",Wi,[b(o,{ref:i.resource.id,modelValue:i.resource.isActive,"onUpdate:modelValue":e[0]||(e[0]=a=>i.resource.isActive=a),inputAttrs:{id:"scheduleResourceToggleChxResource"},slide:"",style:{"min-width":"50px"},labels:{name:i.resource.title},hideLabel:"",toggleBuffer:2e3,onChange:i.toggleResourceHandler},null,8,["modelValue","labels","onChange"]),R("div",{class:"slds-p-left_xx-small slds-col slds-col_bump-left slds-truncate",title:i.resource.title},G(i.resource.title),9,Bi),b(l,{id:"scheduleResourceCloseBtnResource",iconCategory:"utility",iconName:"close",size:"x-small",title:"Remove Resource",assistiveText:"Remove Resource",onClick:i.deleteResource},null,8,["onClick"])])}const zi=Y(Oi,[["render",Ui]]);function Fi(){return{plugins:[Ni,ar,or],headerToolbar:!1,height:"100%",resourceOrder:"index",eventOrderStrict:!0,eventOrder:["fullWidth","start"],slotDuration:"00:15:00",slotLabelInterval:{hours:1},editable:!0,lazyFetching:!1,droppable:!0,resourceAreaColumns:[{headerContent:MAPS.app.config.globalProperties.$Labels.MA_RESOURCES,width:"250px",cellContent(t){return te(zi,{fcData:t})}}],slotLabelFormat:this.getTimeFormat(),eventTimeFormat:this.getTimeFormat(),slotLabelContent:t=>({html:`<div class="slds-text-title_caps" style="min-width: 50px; font-size: 10px;">${t.text}</div>`}),eventContent:this.renderEvent.bind(this),initialDate:this.scheduleStore.calendarDate,nowIndicator:!0,schedulerLicenseKey:MAPS.fullcalendarKey,timeZone:MAPS.currentUser.TimeZone,locale:MAPS.currentUser.Locale.replace("sh_ME_USD","sh-ME").replace("_","-").slice(0,5),firstDay:MAPS.currentUser.StartOfWeekIndex||"0",navLinks:!1,initialView:Jt.TIMELINE_DAY,resourceAreaWidth:"250px",slotMinWidth:"40",forceEventDuration:!0,resources:[],now:()=>B.now().setZone(MAPS.currentUser.TimeZone).toJSDate(),events:[],eventResize:t=>{const{event:e}=t,{extendedProps:s}=e;this.scheduleStore.hasModifiedEvents=!0,this.scheduleStore.updatedEventsSet.add(s.id),this.removeRouteByShiftId(s.shiftId)},eventDragStart:t=>{const{event:e}=t,{extendedProps:s}=e;if(s.renderType==="calendar-event"){const r=this.scheduleStore.events.find(n=>n.id===s.id);r.hasError=!1}},eventReceive:t=>{const{event:e}=t;this.scheduleStore.updatedEventsSet.add(e.id),this.scheduleStore.hasModifiedEvents=!0,this.scheduleStore.numEventsReceived++;const s=this.scheduleStore.queue.find(i=>i.id===e.id);s.start=e.start,s.end=e.end,this.scheduleStore.events.push(s),this.scheduleStore.removeItemFromQueueById(e.id);const r=this.scheduleStore.events.find(i=>i.id===e.id),[n]=e.getResources();e.resourceId=n.id,this.base__setShiftIdOnEvents([e]),this.removeRouteByShiftId(r.shiftId),e.remove(),this.base__calendar.addEvent(r)},eventDrop:t=>{const{event:e}=t,[s]=e.getResources();e.resourceId=s.id;const{extendedProps:r={}}=e,{renderType:n}=r;if(n==="calendar-event"){this.scheduleStore.hasModifiedEvents=!0,this.scheduleStore.updatedEventsSet.add(r.id);const i=this.scheduleStore.events.find(u=>u.id===r.id),{spatial:o,excludeFromRoute:l}=i;i.end=e.end,i.start=e.start;const c=l||!o?"non-spatial-cell":"eventCell";e.setProp("classNames",c),this.base__setShiftIdOnEvents([e])}this.removeRouteByShiftId(r.shiftId)},eventClick:async t=>{const{event:e}=t,{extendedProps:s}=e,{shiftId:r}=s;if(r){const n=this.scheduleStore.resourceShifts.find(i=>i.id===r);if(n&&n.routing){const i=await n.routing.getWaypointMarker(e.id);await MAPS.view.openPopup({features:[i],location:i.geometry,shouldFocus:!0}),await MAPS.view.goTo(i)}}}}}const Gi={name:"ResourceStartLocation",components:{Icon:it,Tooltip:Re,EventError:Me,RouteTimeAndDistance:Le},props:{calendarEvent:{type:Object,required:!0}},setup(){return{scheduleStore:Z()}},data(){return{shiftId:""}},computed:{shift(){return this.scheduleStore.resourceShifts.find(t=>t.id===this.shiftId)||{startLocation:{}}}},created(){const{extendedProps:t}=this.$props.calendarEvent;this.shiftId=t.shiftId}},ji={class:"marker-popup-wrapper"},Vi={class:"slds-grid resource-drive-time",style:{"min-width":"100px"}};function qi(t,e,s,r,n,i){const o=w("RouteTimeAndDistance"),l=w("Tooltip"),a=w("Icon"),c=w("EventError");return y(),M(Ce,null,[R("div",ji,[i.shift.startLocation.timeInPixels?(y(),L(l,{key:0,assistiveText:t.$Labels.MA_HELP,style:$([{color:"white !important"},{width:`${i.shift.startLocation.timeInPixels}px`,"margin-top":"18px"}])},{source:x(()=>[R("div",{ref:`start-tooltip-${i.shift.id}`,class:"ma-drive-summary-line",style:$({width:`${i.shift.startLocation.timeInPixels}px`,"margin-top":"18px"})},null,4)]),default:x(()=>[i.shift.startLocation.timeInPixels?(y(),L(o,{key:0,distance:i.shift.startLocation.distance,totalTravelTime:i.shift.startLocation.totaltraveltime,travelMode:i.shift.startLocation.mode||"",units:i.shift.startLocation.units,class:"ma-time-distance"},null,8,["distance","totalTravelTime","travelMode","units"])):T("",!0)]),_:1},8,["assistiveText","style"])):T("",!0)]),R("div",{class:q(["ma-resource-location ma-resource-location-start",{"has-location-error":i.shift.startLocation.hasError}])},[i.shift.startLocation.hasError?(y(),L(l,{key:0,alignment:"bottom",assistiveText:t.$Labels.MA_HELP,style:{},class:"waypoint-error-tooltip"},{source:x(()=>[b(a,{category:"utility",name:"priority",variant:"inverse",size:"xx-small"})]),default:x(()=>[R("div",Vi,[b(c,{event:i.shift.startLocation},null,8,["event"])])]),_:1},8,["assistiveText"])):(y(),L(a,{key:1,category:"utility",name:"priority",variant:"inverse",size:"xx-small"}))],2)],64)}const $i=Y(Gi,[["render",qi]]);const Xi={name:"ResourceEndLocation",components:{Icon:it,Tooltip:Re,EventError:Me,RouteTimeAndDistance:Le},props:{calendarEvent:{type:Object,required:!0}},setup(){return{scheduleStore:Z()}},data(){return{shiftId:""}},computed:{shift(){return this.scheduleStore.resourceShifts.find(t=>t.id===this.shiftId)||{endLocation:{}}}},created(){const{extendedProps:t}=this.$props.calendarEvent;this.shiftId=t.shiftId}},Yi={class:"marker-popup-wrapper"},Zi={class:"slds-grid resource-drive-time",style:{"min-width":"150px"}};function Ki(t,e,s,r,n,i){const o=w("RouteTimeAndDistance"),l=w("Tooltip"),a=w("Icon"),c=w("EventError");return y(),M(Ce,null,[R("div",Yi,[i.shift.endLocation.timeInPixels?(y(),L(l,{key:0,assistiveText:t.$Labels.MA_HELP,style:$([{color:"white !important"},{width:`${i.shift.endLocation.timeInPixels}px`,"margin-left":"14px","margin-top":"18px"}])},{source:x(()=>[R("div",{ref:`end-tooltip-${i.shift.id}`,class:"ma-drive-summary-line",style:$({width:`${i.shift.endLocation.timeInPixels}px`,"margin-top":"18px"})},null,4)]),default:x(()=>[b(o,{distance:i.shift.endLocation.distance,totalTravelTime:i.shift.endLocation.totaltraveltime,travelMode:i.shift.endLocation.mode||"",units:i.shift.endLocation.units,class:"ma-time-distance"},null,8,["distance","totalTravelTime","travelMode","units"])]),_:1},8,["assistiveText","style"])):T("",!0)]),R("div",{class:q(["ma-resource-location ma-resource-location-end",{"has-location-error":i.shift.endLocation.hasError}])},[i.shift.endLocation.hasError?(y(),L(l,{key:0,alignment:"bottom",assistiveText:t.$Labels.MA_HELP,style:{},class:"waypoint-error-tooltip"},{source:x(()=>[b(a,{category:"utility",name:"priority",variant:"inverse",size:"xx-small"})]),default:x(()=>[R("div",Zi,[b(c,{event:i.shift.endLocation},null,8,["event"])])]),_:1},8,["assistiveText"])):(y(),L(a,{key:1,category:"utility",name:"priority",variant:"inverse",size:"xx-small"}))],2)],64)}const Ji=Y(Xi,[["render",Ki]]);const Qi={name:"ResourceCalendarEvent",components:{Tooltip:Re,ActionMenu:ot,ActionMenuItem:lt,RouteTimeAndDistance:Le,EventError:Me,ButtonIcon:Se},props:{calendarEvent:{type:Object,required:!0}},setup(){const t=Z(),e=ve();return{scheduleStore:t,mainStore:e}},data(){return{eventId:"",sfRecordId:"",columnId:"",showActionMenu:!1}},computed:{guideLicense(){return this.mainStore?.licensing?.guide||!1},nonSpatial(){return this.event.excludeFromRoute||!this.event.spatial},iconClass(){const{fontColor:t}=this.event,e="bare";return this.nonSpatial||t==="ffffff"?"inverse":e},event(){return this.scheduleStore.events.find(t=>t.id===this.eventId)||{}},shiftId(){return this.event.shiftId},shift(){return this.scheduleStore.resourceShifts.find(e=>e.id===this.shiftId)||{}},waypointOnMap(){return this.shift.routing!==null},textClass(){const{fontColor:t}=this.event,e="slds-text-color_default";return this.nonSpatial||t==="ffffff"?"slds-text-color_inverse":e}},created(){const{extendedProps:t}=this.$props.calendarEvent,{id:e,recordId:s,columnId:r}=t;this.eventId=e,this.sfRecordId=s,this.columnId=r},methods:{deleteEvent(){this.$bus.emit("delete-resource-event-from-calendar",{sfRecordId:this.sfRecordId,shiftId:this.shiftId,eventId:this.eventId})},setExcludeInclude(){this.$bus.emit("reset-route-by-shift-id",this.shiftId),this.event.excludeFromRoute=!this.event.excludeFromRoute;const t=this.event.excludeFromRoute?["non-spatial-cell"]:["eventCell"];this.$props.calendarEvent.setProp("classNames",t)},returnEventToQueue(){const e={...this.scheduleStore.events.find(s=>s.id===this.eventId)};this.deleteEvent(),this.scheduleStore.updatedEventsSet.delete(this.eventId),delete e.shiftId,delete e.recordId,delete e.resourceId,delete e.start,delete e.end,delete e.hasError,delete e.source,delete e.distance,delete e.totaltraveltime,delete e.errorMessage,delete e.errorTimeString,delete e.bgColorClass,delete e.backgroundColor,e.hasError=!1,e.excludeFromRoute=!1,this.scheduleStore.addItemToQueue(e),this.scheduleStore.hasModifiedEvents=!0}}},eo={class:"fc-content slds-grid slds-grid_vertical-align-center slds-grid_align-spread slds-size_1-of-1",style:{"padding-right":"0"}},to=["title"],so={class:"icon-wrapper slds-grid slds-grow-none"},ro={key:0,class:"ma-event-controls slds-col_bump-left"},no={key:1,class:"ma-icon ma-icon-nonspacial slds-p-right_xx-small",style:{"font-size":"12px","padding-top":"3px"}},io={key:1,class:"fc-content slds-grid slds-grid_vertical-align-center slds-grid_align-spread slds-size_1-of-1",style:{"padding-right":"0"}},oo=["title"],lo={class:"icon-wrapper slds-grid slds-grow-none"},ao={key:0,class:"ma-event-controls slds-col_bump-left"},co={key:1,class:"ma-icon ma-icon-nonspacial slds-p-right_xx-small",style:{"font-size":"12px","padding-top":"3px"}},uo={class:"marker-popup-wrapper"};function ho(t,e,s,r,n,i){const o=w("ButtonIcon"),l=w("ActionMenuItem"),a=w("ActionMenu"),c=w("EventError"),u=w("Tooltip"),h=w("RouteTimeAndDistance");return y(),M("div",{ref:i.event.id,class:q(["ma-resource-event slds-grid",{"has-error":i.event.hasError}])},[i.event.hasError?(y(),M(Ce,{key:0},[i.event.hasError?(y(),L(u,{key:0,assistiveText:t.$Labels.MA_HELP,class:"waypoint-error-tooltip"},{source:x(()=>[R("div",eo,[R("div",{class:q(["slds-p-left_xx-small slds-truncate slds-col_bump-right",[i.textClass]]),title:i.event.title,style:{"font-weight":"bold","font-size":"10px"}},G(s.calendarEvent.title),11,to),R("div",so,[i.event.isBreak?T("",!0):(y(),M("div",ro,[i.event.spatial?(y(),L(a,{key:0,doShowSync:n.showActionMenu,"onUpdate:doShowSync":e[2]||(e[2]=f=>n.showActionMenu=f),showMoreLabel:t.$Labels.MA_SHOW_MORE,class:"slds-button_last"},{button:x(()=>[b(o,{iconCategory:"utility",iconName:"threedots_vertical",size:"x-small",variant:i.iconClass,class:"schedule-event-options-button",title:"Event Action Menu",assistiveText:"Event Action Menu",onClick:e[0]||(e[0]=Fe(f=>n.showActionMenu=!0,["stop"]))},null,8,["variant"])]),default:x(()=>[b(l,{label:t.$Labels.MA_Delete,onClick:e[1]||(e[1]=f=>i.deleteEvent(i.event))},null,8,["label"]),b(l,{label:i.event.excludeFromRoute?t.$Labels.MA_INCLUDE_IN_OPTIMIZATION:t.$Labels.MA_EXCLUDE_FROM_OPTIMIZATION,onClick:i.setExcludeInclude},null,8,["label","onClick"]),b(l,{label:t.$Labels.MA_SCHEDULE_RETURN_TO_BE_SCHEDULED,onClick:i.returnEventToQueue},null,8,["label","onClick"])]),_:1},8,["doShowSync","showMoreLabel"])):T("",!0)])),i.event.excludeFromRoute?(y(),M("div",no)):T("",!0)])])]),default:x(()=>[b(c,{event:i.event},null,8,["event"])]),_:1},8,["assistiveText"])):T("",!0)],64)):(y(),M("div",io,[R("div",{class:q(["slds-p-left_xx-small slds-truncate slds-col_bump-right",[i.textClass]]),title:i.event.title,style:{"font-weight":"bold","font-size":"10px"}},G(s.calendarEvent.title),11,oo),R("div",lo,[i.event.isBreak?T("",!0):(y(),M("div",ao,[i.event.spatial?(y(),L(a,{key:0,doShowSync:n.showActionMenu,"onUpdate:doShowSync":e[5]||(e[5]=f=>n.showActionMenu=f),showMoreLabel:t.$Labels.MA_SHOW_MORE,class:"slds-button_last"},{button:x(()=>[b(o,{iconCategory:"utility",iconName:"threedots_vertical",size:"x-small",variant:i.iconClass,class:"schedule-event-options-button",title:"Event Action Menu",assistiveText:"Event Action Menu",onClick:e[3]||(e[3]=Fe(f=>n.showActionMenu=!0,["stop"]))},null,8,["variant"])]),default:x(()=>[b(l,{label:t.$Labels.MA_Delete,onClick:e[4]||(e[4]=f=>i.deleteEvent(i.event))},null,8,["label"]),b(l,{label:i.event.excludeFromRoute?t.$Labels.MA_INCLUDE_IN_OPTIMIZATION:t.$Labels.MA_EXCLUDE_FROM_OPTIMIZATION,onClick:i.setExcludeInclude},null,8,["label","onClick"]),b(l,{label:t.$Labels.MA_SCHEDULE_RETURN_TO_BE_SCHEDULED,onClick:i.returnEventToQueue},null,8,["label","onClick"])]),_:1},8,["doShowSync","showMoreLabel"])):T("",!0)])),i.event.excludeFromRoute?(y(),M("div",co)):T("",!0)])])),R("div",uo,[i.event.timeInPixels?(y(),L(u,{key:0,assistiveText:t.$Labels.MA_HELP,style:$({width:`${i.event.timeInPixels}px`,"margin-top":"10px"})},{source:x(()=>[R("div",{ref:`start-tooltip-${i.shift.id}`,class:"ma-drive-summary-line"},null,512)]),default:x(()=>[b(h,{distance:i.event.distance,totalTravelTime:i.event.totaltraveltime,travelMode:i.event.mode||"",units:i.event.units,class:"ma-time-distance"},null,8,["distance","totalTravelTime","travelMode","units"])]),_:1},8,["assistiveText","style"])):T("",!0)])],2)}const fo=Y(Qi,[["render",ho],["__scopeId","data-v-46efe3d8"]]),mo=""+MAPS.getURLPath({base:"/resource/1730379547462/maps__VueDesktopV2/dist/",path:"assets/resource-empty-state.e92dc87f.svg"});const nt=25,po=["2196F3","F44336","4CAF50","9C27B0","FFEB3B","00BCD4","E91E63","FF9800","009688","795548","263238","673AB7","CDDC39","B71C1C","0D47A1","8BC34A","03A9F4","9E9E9E","1B5E20","FFC107","4A148C","607D8B","F57F17","3F51B5","FF5722"],go={components:{ActionMenu:ot,ActionMenuItem:lt,SLDSButton:Qt,ButtonIcon:Se,ResourceSearch:cr,CalendarControls:dr,Queue:ur,LaborLawNotify:hr,FullCalendar:lr},directives:{"click-outside":es},extends:fr,emits:["toggle-full-screen","error"],setup(){const t=Z(),e=ve();return{scheduleStore:t,mainStore:e}},data(){return{didLoadResources:!1,resources:[],storedResourceSearchTerm:"",isAddResourcePopupOpen:!1,resourceIdToDayInstance:{},eventIdToHTMLElementMap:{},colorSet:new Set,calendarOptions:Fi.call(this)}},computed:{isFullScreen(){return this.scheduleStore.viewMode===Ge.FULLWIDTH_FULLHEIGHT},showEmptyStateSVG(){return!this.scheduleStore.resources.length},getShiftedBaseEvents(){return this.scheduleStore.events},clickOutsideOptions(){return{active:!0,handler:this.doHideResourceSearchPopup}}},watch:{"scheduleStore.calendarDate":{handler(t){this.base__calendar.gotoDate(t),this.init({skipGetResources:!0})}}},created(){this.isResourceView=!0,this.$bus.on("remove-resources",this.removeResourcebyIds),this.$bus.on("hide-plotted-schedule",this.removeAllRoutes),this.$bus.on("reset-route-by-shift-id",this.removeRouteByShiftId),this.$bus.on("delete-resource-event-from-calendar",this.deleteEventFromCalendar),this.$bus.on("toggle-resource",this.toggleResource),this.$bus.on("open-schedule",this.base__resizeCalendarDelayed)},unmounted(){this.$bus.off("remove-resources",this.removeResourcebyIds),this.$bus.off("hide-plotted-schedule",this.removeAllRoutes),this.$bus.off("reset-route-by-shift-id",this.removeRouteByShiftId),this.$bus.off("delete-resource-event-from-calendar",this.deleteEventFromCalendar),this.$bus.off("toggle-resource",this.toggleResource),this.$bus.off("open-schedule",this.base__resizeCalendarDelayed),this.base__calendar.destroy()},mounted(){this.base__calendar=this.$refs.calendar.getApi(),this.base__setDefaultDuration(this.base__convertStringToMinutes(ts.routeDefaults.duration)),this.init({skipGetResources:!1})},beforeUnmount(){this.removeAllRoutes(),this.cleanResources()},methods:{cleanResources(){this.scheduleStore.resources=[]},updateView(t){this.base__clearRoutes(),this.scheduleStore.setView(t),this.base__emitViewModeChangeEvent(t)},buildNonWorkingHourEvents(){const t=[];return Object.keys(this.resourceIdToDayInstance).forEach(e=>{this.resourceIdToDayInstance[e].shifts.forEach(r=>t.push({id:je(),resourceId:e,title:"",className:["non-working-hours"],renderType:"non-working-hours",start:r.startTime.toISOString(),end:r.endTime.toISOString(),display:"inverse-background"}))}),t},async init({skipGetResources:t=!1}){this.scheduleStore.callouts+=1,this.base__calendar.removeAllEvents(),this.scheduleStore.events=[],this.scheduleStore.resourceShifts=[];try{t||await this.fetchResources(),await this.loadAllResourceEvents(),await this.initializeShifts(),this.scheduleStore.events.forEach(r=>{this.base__calendar.addEvent(r)}),this.base__setShiftIdOnEvents(this.scheduleStore.events);const e=this.getShiftAnalysis();this.setTimeAxisRange(e),await this.$nextTick(),this.buildNonWorkingHourEvents().forEach(r=>{this.base__calendar.addEvent(r)}),this.renderShifts(),this.scrolllToFirstEvent()}catch(e){console.error(e),this.base__genericPromiseErrorHandler(e)}finally{this.scheduleStore.callouts-=1}},async initializeShifts(){const t=[];this.scheduleStore.buildColumnIdToDayInstance(),this.base__calendar.getResources().forEach(s=>{t.push(this.base__fetchRouteDefaultsByResource({id:s.id,name:s.title}))});const e=await Promise.all(t);this.buildInstancesByRouteDefaultsArr(e),await this.setShiftsOnInstances()},setShiftsOnInstances(){return new Promise(t=>{const e=Object.values(this.resourceIdToDayInstance).map(s=>this.base__fetchCalendarShifts(s.routeDefaults));Promise.all(e.map(s=>s.catch(r=>this.base__showMapToastError(r.message)))).then(s=>{s.forEach(r=>{const{request:{resourceId:n}={}}=r,i=this.resourceIdToDayInstance[n];this.base__setShiftsOnInstance(i,r),i.shifts.forEach(o=>this.scheduleStore.resourceShifts.push(o))}),t()})})},getShiftAnalysis(){const t={earliestShiftTime:null,latestShiftTime:null,hasOvernightShift:!1};return Object.keys(this.resourceIdToDayInstance).forEach(e=>{const s=this.resourceIdToDayInstance[e];(!t.earliestShiftTime||s.earliestShiftTime<t.earliestShiftTime)&&(t.earliestShiftTime=s.earliestShiftTime),(!t.latestShiftTime||s.latestShiftTime>t.latestShiftTime)&&(t.latestShiftTime=s.latestShiftTime),!t.hasOvernightShift&&s.hasOvernightShift&&(t.hasOvernightShift=!0)}),t},buildInstancesByRouteDefaultsArr(t){const{calendarDate:e}=this.scheduleStore;t.forEach(s=>{s.duration=this.base__convertStringToMinutes(s.duration);const r=s.resource.id,n={resourceId:r,calendarDate:e,routeDefaults:s,workingHours:s.workingHours};this.resourceIdToDayInstance[r]=n})},setTimeAxisRange({earliestShiftTime:t,latestShiftTime:e,hasOvernightShift:s}){if(this.base__skipTimeAxisCheck){this.base__skipTimeAxisCheck=!1;return}if(s){this.base__skipTimeAxisCheck=!0;const r=4,n=this.base__buildTimeAxisString(t,-r),i=this.base__buildTimeAxisString(e,24+r);this.base__setTimeAxisRange(n,i)}else this.base__skipTimeAxisCheck=!0,this.base__setTimeAxisRange("00:00:00","24:00:00")},renderShifts(){Object.values(this.resourceIdToDayInstance).forEach(t=>t.shifts.forEach(e=>{e.startLocation.isSpatial&&setTimeout(()=>{this.renderStartLocation(e),e.startLocation.doShow=!0},1),e.endLocation.isSpatial&&setTimeout(()=>{this.renderEndLocation(e),e.endLocation.doShow=!0},1)}))},renderStartLocation(t){const e=this.renderLocation({datetime:t.startTime,resourceId:t.resourceId,shiftId:t.id,location:t.startLocation});this.base__calendar.addEvent(e)},renderEndLocation(t){const e=this.renderLocation({datetime:t.endTime,resourceId:t.resourceId,shiftId:t.id,isEnd:!0,location:t.endLocation});this.base__calendar.addEvent(e)},renderLocation({datetime:t,resourceId:e,shiftId:s,isEnd:r,location:n}){const i=B.fromJSDate(t);let o=B.fromJSDate(t);o=o.plus({minutes:1});const l=n.id||je();return n.id=l,{id:l,durationEditable:!1,title:"",editable:!1,className:["ma-calendar-location",`ma-calendar-location-${r?"end":"start"}`],renderType:"location",isEnd:r,fullWidth:!0,resourceId:e,eventId:l,shiftId:s,start:i.toJSDate(),end:o.toJSDate()}},renderEvent(t){const{event:e,timeText:s}=t,{extendedProps:r={}}=e;return r.renderType==="location"?r.isEnd?te(Ji,{calendarEvent:e}):te($i,{calendarEvent:e}):r.renderType==="non-working-hours"?"":r.renderType==="calendar-event"||r.renderType==="floating-break"?te(fo,{calendarEvent:e,timeText:s}):(console.warn("found an event I do not have a template for.. just displaying time"),s)},removeAllResources(){this.removeResourcebyIds(this.scheduleStore.resources.map(t=>t.id))},softResetComponentState(){this.colorSet.clear(),this.scheduleStore.resources.forEach(t=>{t.isActive=!1}),this.unrenderRoutesFromMap(),this.eventIdToHTMLElementMap={}},resetComponentState(){this.base__resetComponentState(),this.softResetComponentState()},unrenderRoutesFromMap(){this.scheduleStore.resourceShifts.forEach(t=>{const e=this.getResourceById(t.resourceId);e&&(e.isActive=!1),t.routing&&this.removeRouteByShiftId(t.id)})},removeAllRoutes(){this.unrenderRoutesFromMap(),this.$bus.emit("set-calendar-view-mode",Ge.DEFAULT),this.$bus.emit("rerenderAgendaCalendar")},removeRouteByShiftId(t){const e=this.scheduleStore.resourceShifts.find(r=>r.id===t);if(!e||!e.routing)return;e.routing.clearRouteOnMap(),this.colorSet.delete(e.routing.strokeColor),this.setEventBackgroundColor(e.resourceId,""),this.removeTravelSummaryFromLocationWaypoints(t),this.removeTravelSummaryFromCalendarEventsByShiftId(t);const s=this.scheduleStore.resources.find(r=>r.id===e.resourceId);s&&(s.isActive=!1),e.routing=null},toggleResource({resourceId:t}){const e=this.scheduleStore.resources.find(r=>r.id===t),s=this.scheduleStore.resourceShifts.find(r=>r.resourceId===t);e.isActive?this.generateRouteByShift(s).catch(r=>{this.$nextTick(()=>{e.isActive=!1,this.base__showMapToastError(r)})}).finally(this.base__genericPromiseFinallyHandler):(MAPS.view.closePopup(),this.removeRouteByShiftId(s.id))},getResourceById(t){const[e]=this.scheduleStore.resources.filter(s=>s.id===t);return e},removeErrorsFromLocationWaypoints(t){const e=this.scheduleStore.resourceShifts.find(n=>n.id===t);if(!e)return;const{startLocation:s,endLocation:r}=e;s.hasError=!1,r.hasError=!1},removeTravelSummaryFromLocationWaypoints(t){const{startLocation:e}=this.scheduleStore.resourceShifts.find(s=>s.id===t);e.isSpatial&&(e.distance=0,e.totaltraveltime=0,e.timeInPixels=0)},removeTravelSummaryFromCalendarEventsByShiftId(t){this.scheduleStore.events.forEach(e=>{e.shiftId===t&&(delete e.distance,delete e.totaltraveltime,delete e.stopNumber,delete e.backgroundColor,delete e.timeInPixels,delete e.travelMode,delete e.units)})},setEventBackgroundColor(t,e){this.base__calendar.getEvents().forEach(s=>{const{extendedProps:r}=s,{renderType:n,resourceId:i}=r;if(i===t&&n==="calendar-event"){const o=this.scheduleStore.events.find(u=>u.id===r.id),{spatial:l,excludeFromRoute:a}=o;a||!l||s.setProp("backgroundColor",e)}})},async addResource(t){this.doHideResourceSearchPopup();try{if(this.scheduleStore.resources.length===nt){this.$emit("error",`You may only have ${nt} resources. Please remove a resource before adding another.`);return}if(this.isResourceAlreadyLoaded(t)){this.$emit("error",`The resource, ${t.name}, is already loaded.`);return}this.scheduleStore.callouts+=1;const e=this.scheduleStore.resources.length,s={id:t.id,index:e+1,name:MAPS.Utils.String.htmlDecode(t.name),title:MAPS.Utils.String.htmlDecode(t.name),timezone:t.timezone?MAPS.Utils.String.htmlDecode(t.timezone):MAPS.Utils.String.htmlDecode(MAPS.currentUser.TimeZone),isActive:!1};this.scheduleStore.resources.push(s),await this.saveResources(),this.base__calendar.getEvents().forEach(i=>{const{extendedProps:o}=i,{renderType:l}=o;(l==="non-working-hours"||l==="location")&&i.remove()}),this.base__calendar.addResource(s),await this.loadResourceEventsByResource(s),this.softResetComponentState(),await this.initializeShifts(),this.scheduleStore.events.filter(i=>i.resourceId===t.id).forEach(i=>{this.base__calendar.addEvent(i)}),this.base__setShiftIdOnEvents(this.scheduleStore.events.filter(i=>i.resourceId===t.id));const n=this.getShiftAnalysis();this.setTimeAxisRange(n),this.$nextTick(()=>{this.buildNonWorkingHourEvents().forEach(o=>{this.base__calendar.addEvent(o)}),this.renderShifts()})}catch(e){this.$emit("error",e)}finally{this.scheduleStore.callouts-=1}},getNextColor(){const t=po.find(e=>!this.colorSet.has(e));if(!t)throw new Error("No more colors available.");return this.colorSet.add(t),t},getTimeFormat(){const{timeFormat:t="hh:mm a"}=MAPS.currentUser.timeFormat,e={hour:"numeric",meridiem:"short",minute:"2-digit"};return t.indexOf("a")===-1&&(e.meridiem=!1),e},generateRouteByShift(t){return new Promise((e,s)=>{try{if(!t){e();return}t.routing=this.instantiateRouteByShift(t),this.scheduleStore.callouts+=1,t.routing.build("scheduling").then(()=>{const r=t.routing.getRoute();ss(r,n=>{this.processWaypoints(n.waypoints,t.routing.strokeColor,t),this.setEventBackgroundColor(t.resourceId,t.routing.strokeColor)}),e()}).catch(r=>{r&&r.maioCode&&r.details&&this.base__processResponseErrors(r,t),s(r.message),this.removeRouteByShiftId(t.id)})}catch(r){s(r)}})},processWaypoints(t,e,s){if(!t.length)return;const r=document.querySelector(".fc-timeline-header-row th:first-child").clientWidth;function n(a){return parseInt(a/3600*r,10)}const{routeDefaults:i={}}=this.resourceIdToDayInstance[s.resourceId],{mode:o,unit:l}=i;if(s.startLocation&&t[0].id===s.startLocation.id){const a=t.shift();s.startLocation.distance=a.distance,s.startLocation.totaltraveltime=a.totaltraveltime,s.startLocation.timeInPixels=n(a.totaltraveltime),s.startLocation.units=l,s.startLocation.mode=o}for(let a=0;a<t.length;a++){const c=t[a],u=this.scheduleStore.events.find(f=>f.id===c.id);if(!u)return;const h=n(c.totaltraveltime);u.stopNumber=a+1,u.backgroundColor=e,u.fontColor=MAPS.Utils.Color.getContrastingColor(e),u.distance=c.distance,u.totaltraveltime=c.totaltraveltime,u.timeInPixels=h,u.travelMode=o,u.unit=l}},instantiateRouteByShift(t){const e=this.base__calendar.getEvents(),s=[];e.forEach(o=>{const{extendedProps:l}=o,{renderType:a,shiftId:c}=l;a==="calendar-event"&&t.id===c&&s.push(o)});const r=this.base__buildWaypointsFromEvents(s,[t]),n=this.getNextColor(),i=this.base__instantiateRoute(t,r);return i.setStrokeColor(n),i.setWaypointColor(n),i},isResourceAlreadyLoaded(t){return this.base__calendar.getResourceById(t.id)},async removeResourcebyIds(t){this.scheduleStore.callouts+=1;try{this.scheduleStore.resources=this.scheduleStore.resources.filter(e=>!t.includes(e.id)),t.forEach(e=>{this.base__calendar.getResourceById(e).remove(),this.scheduleStore.resourceShifts.filter(n=>n.resourceId===e).forEach(n=>{this.removeRouteByShiftId(n.id)}),delete this.resourceIdToDayInstance[e]}),await this.saveResources(),this.init({skipGetResources:!1})}catch(e){this.$emit("error",e)}finally{this.scheduleStore.callouts-=1}},loadAllResourceEvents(){return this.loadResourceEvents(this.base__calendar.getResources())},loadResourceEventsByResource(t){return this.loadResourceEvents([t])},loadResourceEvents(t){return new Promise((e,s)=>{const r=B.fromJSDate(this.scheduleStore.calendarDate),n=r.startOf("day").toJSDate(),i=r.plus({days:1}).startOf("day").toJSDate(),o=MAPS.currentUser.TimeZone,l=[];t.forEach(a=>{const c=a.timezone?a.timezone:o;l.push(this.base__fetchEvents(n,i,c,a.id))}),Promise.all(l).then(a=>{a.forEach(c=>{this.scheduleStore.events=this.scheduleStore.events.concat(c)}),e()}).catch(a=>{s(a)})})},scrolllToFirstEvent(){const t=B.fromJSDate(new Date).setZone(this.base__getCorrectTimezone()),e=B.fromJSDate(this.scheduleStore.calendarDate).setZone(this.base__getCorrectTimezone());let s;t.toISODate()===e.toISODate()&&(s=t),this.base__calendar.getEvents().forEach(r=>{const{extendedProps:n}=r;if(n.renderType!=="non-working-hours"){const i=B.fromJSDate(r.start);s||(s=i),i.hour<s.hour&&(s=i)}}),s&&(s.hour!==0&&(s=s.minus({minutes:30})),this.base__calendar.scrollToTime({hour:s.hour,minute:s.minute}))},fetchResources(){return new Promise(async(t,e)=>{if(this.didLoadResources){t();return}const s=this.base__calendarId.startsWith("005")?this.base__calendarId:MAPS.currentUser.Id;try{const r=await MAPS.Utils.Apex.invoke("maps.RemoteFunctions.getCalendarResourcesByUserId",[s]);r.success?(r.data.forEach((n,i)=>{n.index=i,n.isActive=!1,n.title=typeof n.title=="string"?MAPS.Utils.String.htmlDecode(n.title):n.title,this.scheduleStore.resources.push(n),this.base__calendar.addResource(n)}),this.didLoadResources=!0,t()):e(new Error(r.message))}catch(r){this.base__handleRemoteActionError(r),e(new Error(r))}})},saveResources(){return new Promise(async(t,e)=>{function s(n){return{id:n.id,title:n.title,timezone:n.timezone?n.timezone:MAPS.currentUser.TimeZone}}const r=this.scheduleStore.resources.map(s);try{const n=await MAPS.Utils.Apex.invoke("maps.RemoteFunctions.saveCalendarResources",[r,this.scheduleStore.calendarId]);n.success?t():e(new Error(n.message))}catch(n){e(new Error(n))}})},save(){return this.base__save().then(()=>{this.softResetComponentState(),this.init({skipGetResources:!1})}).catch(()=>{})},setConfigId(t){this.base__setConfigId(t),this.base__save().then(()=>{this.base__storedNavigationAction&&typeof this.base__storedNavigationAction=="function"&&this.base__storedNavigationAction(),this.resetComponentState()})},deleteEventFromCalendar({eventId:t,shiftId:e,sfRecordId:s}){this.base__calendar.getEventById(t).remove(),s?(this.scheduleStore.eventIdsForDelete.push(s),this.scheduleStore.updatedEventsSet.delete(t),this.scheduleStore.hasModifiedEvents=!0):this.scheduleStore.numEventsReceived--,this.scheduleStore.events=this.scheduleStore.events.filter(n=>n.id!==t),!this.scheduleStore.numEventsReceived&&!this.scheduleStore.eventIdsForDelete.length&&(this.scheduleStore.hasModifiedEvents=!1,this.scheduleStore.updatedEventsSet.clear()),this.removeRouteByShiftId(e)},returnEventToQueue({eventId:t,shiftId:e,sfRecordId:s}){const n={...this.scheduleStore.events.find(i=>i.id===t)};this.deleteEventFromCalendar({eventId:t,shiftId:e,sfRecordId:s}),delete n.shiftId,delete n.recordId,delete n.resourceId,delete n.start,delete n.end,delete n.hasError,delete n.source,delete n.distance,delete n.totaltraveltime,delete n.errorMessage,delete n.errorTimeString,delete n.bgColorClass,n.hasError=!1,n.excludeFromRoute=!1,this.scheduleStore.addItemToQueue(n),this.scheduleStore.hasModifiedEvents=!0},setFocus(){this.$nextTick(()=>this.$el.querySelector("input").focus())},doHideResourceSearchPopup(){this.isAddResourcePopupOpen=!1,this.storedResourceSearchTerm=""}}},So=t=>(is("data-v-531ad328"),t=t(),os(),t),vo={class:"slds-grid slds-grid_vertical",style:{height:"100%"}},Ro={class:"slds-grid",style:{height:"100%"}},Co={class:"slds-grid slds-grid_vertical slds-col",style:{height:"100%"}},bo={id:"schedulePanelHeader",class:"schedule-week-header slds-p-left_medium slds-p-right_x-small slds-p-vertical_small"},yo={class:"slds-grid"},Eo={class:"slds-grid slds-col"},wo={class:"slds-p-left_medium ma-resource-right-menu"},_o={id:"schedulePanelBody",class:"slds-col slds-grid"},Io={class:"addResourceButtonPositioner"},xo={key:0,class:"slds-popover slds-nubbin_bottom-left"},Do={class:"slds-popover__body"},To={class:"slds-grid"},ko={class:"slds-col"},Mo={class:"slds-p-left_x-small"},Lo={id:"schedulePanelCalendarWrap",class:"slds-grid slds-grid_vertical slds-col"},Po={key:0,class:"resource-empty-state"},Ao={class:"slds-grid slds-grid_align-center slds-grid_vertical-align-center"},Ho=So(()=>R("div",null,[R("figure",{class:"slds-m-right_large"},[R("img",{src:mo})])],-1));function No(t,e,s,r,n,i){const o=w("LaborLawNotify"),l=w("CalendarControls"),a=w("SLDSButton"),c=w("ButtonIcon"),u=w("ActionMenuItem"),h=w("ActionMenu"),f=w("ResourceSearch"),m=w("FullCalendar"),g=w("Queue"),p=rs("click-outside");return y(),M("div",vo,[R("div",Ro,[R("div",Co,[t.base__laborLawNotify?(y(),L(o,{key:0})):T("",!0),R("div",bo,[R("div",yo,[R("div",Eo,[b(l,{onToday:e[0]||(e[0]=S=>t.base__navigationAction(t.base__today,S)),onPrevious:e[1]||(e[1]=S=>t.base__navigationAction(t.base__previous,S)),onNext:e[2]||(e[2]=S=>t.base__navigationAction(t.base__next,S)),onViewChange:e[3]||(e[3]=S=>t.base__navigationAction(i.updateView,S)),onDateChange:e[4]||(e[4]=S=>t.base__navigationAction(t.base__changeCalendarDate,S))})]),R("div",null,[b(a,{id:"scheduleSaveBtnResource",label:t.$Labels.MA_Save,variant:"success",disabled:t.base__doDisableSaveBtn,onClick:i.save},null,8,["label","disabled","onClick"])]),R("div",wo,[b(h,{showMoreLabel:t.$Labels.MA_SHOW_MORE},{button:x(()=>[b(c,{id:"scheduleDotAllFunctionsBtnResource",iconCategory:"utility",iconName:"threedots_vertical",size:"small",title:"Options",assistiveText:"Options"})]),default:x(()=>[b(u,{id:"scheduleRemoveAllBtnResource",label:t.$Labels.MA_REMOVE_ALL_RESOURCES,onClick:i.removeAllResources},null,8,["label","onClick"]),b(u,{id:"scheduleRemoveAllFromMapBtnResource",label:t.$Labels.MA_REMOVE_ALL_FROM_MAP,onClick:i.unrenderRoutesFromMap},null,8,["label","onClick"]),b(u,{id:"scheduleMoveEventBtnResource",label:t.$Labels.MA_SCHEDULE_RETURN_ALL_TO_BE_SCHEDULED,onClick:t.base__returnAllEventsToQueue},null,8,["label","onClick"])]),_:1},8,["showMoreLabel"])]),t.base__showFullScreenToggleControl?(y(),L(c,{key:0,id:"scheduleFullScreenToggleResource",iconCategory:"utility",iconName:i.isFullScreen?"contract":"expand",size:"small",title:"Display Types",assistiveText:"Display Types",onClick:e[5]||(e[5]=S=>t.$emit("toggle-full-screen"))},null,8,["iconName"])):T("",!0)])]),R("div",_o,[R("div",Io,[b(a,{id:"scheduleAddResourceBtnResource",label:t.$Labels.MA_Add,iconCategory:"utility",iconName:"add",class:"addResourceButton",iconPosition:"right",onClick:e[6]||(e[6]=S=>{n.isAddResourcePopupOpen=!0,i.setFocus()})},null,8,["label"]),n.isAddResourcePopupOpen?ns((y(),M("section",xo,[R("div",Do,[R("div",To,[R("div",ko,[b(f,{storedSearchTerm:n.storedResourceSearchTerm,onSelected:i.addResource},null,8,["storedSearchTerm","onSelected"])]),R("div",Mo,[R("button",{id:"scheduleCancelBtnResource",class:"slds-button slds-button_neutral",onClick:e[7]||(e[7]=(...S)=>i.doHideResourceSearchPopup&&i.doHideResourceSearchPopup(...S))},G(t.$Labels.MA_Cancel),1)])])])])),[[p,void 0,i.clickOutsideOptions]]):T("",!0)]),R("div",Lo,[b(m,{id:"schedule-resource-calendar",ref:"calendar",class:"ma-calendar slds-grid slds-grid_vertical slds-col",options:n.calendarOptions},null,8,["options"])]),i.showEmptyStateSVG?(y(),M("div",Po,[R("div",Ao,[Ho,R("div",null,[R("h4",null,G(t.$Labels.MA_RESOURCES_NO_RESOURCES_ADDED),1),R("p",null,G(t.$Labels.MA_RESOURCE_CLICK_THE_ADD_A_RESOURCE_BUTTON_GUIDE_TEXT),1)])])])):T("",!0)])]),b(g,{allowOptimization:!1,viewMode:r.scheduleStore.viewMode,class:"schedule-week-queue",onForceCalendarResize:t.base__resizeCalendar},null,8,["viewMode","onForceCalendarResize"])])])}const Xo=Y(go,[["render",No],["__scopeId","data-v-531ad328"]]);export{Xo as default};

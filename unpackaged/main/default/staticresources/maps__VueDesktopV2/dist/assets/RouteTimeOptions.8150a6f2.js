import{_ as M,O as y,l as g,f as v,Q as a,aP as S,bP as $,r as n,o as L,c as T,h as V,i as u,s as A,v as f,w as B,j as w,t as R}from"../bundle.js";import{T as k}from"./TimePicker.bfa4e2f9.js";import{c as r,r as c,b as h,a as p}from"./index.0172543b.js";import{u as q}from"./index.d251dbc7.js";const D={name:"RouteTimeOptions",components:{TextInput:y,TimePicker:k,SLDSButton:g},props:{start:{type:String,required:!0},duration:{type:String,required:!0},showEditMode:{type:Boolean,required:!0}},emits:["update:start","update:duration","save-route-time"],setup(){return{mainStore:v()}},data(){return{v$:q(),time:null,hour:0,minute:0,userLocale:MAPS.currentUser.LocaleFormatted}},validations(){return{hour:{required:r.withMessage(this.$Labels.MA_Field_Req,c),minValue:r.withMessage(a(this.$Labels.MA_Number_Greater_N_Message,[0]),h(0)),maxValue:r.withMessage(a(this.$Labels.MA_Number_Less_N_Message,[12]),p(12))},minute:{required:r.withMessage(this.$Labels.MA_Field_Req,c),minValue:r.withMessage(a(this.$Labels.MA_Number_Greater_N_Message,[0]),h(0)),maxValue:r.withMessage(a(this.$Labels.MA_Number_Less_N_Message,[59]),p(59))}}},computed:{durationOutput(){return`${this.hour} hr, ${this.minute} min`}},created(){this.parseStart(),this.parseDuration()},methods:{selectTime(e){if(!e){this.$emit("update:start",this.$Labels.MA_Set_Start);return}try{const t=S.fromObject(e);t.isValid?this.$emit("update:start",t.toFormat("hh:mm a")):this.time=this.start}catch(t){console.warn(`Failed to parse start time: ${t}`)}},selectMinute(){this.$emit("update:duration",this.durationOutput)},selectHour(){this.$emit("update:duration",this.durationOutput)},parseStart(){try{if(this.start===this.$Labels.MA_Set_Start){this.time=null;return}const e=$({time:this.start,force24Hr:!0});this.time={hours:e.hour,minutes:e.minute}}catch(e){console.warn(`Failed to parse start time: ${e}`)}},parseDuration(){try{const e=this.duration||this.mainStore?.settings?.routes?.duration?.value||"0 hr, 0 min",[t="0 hr",l="5 min"]=e.split(",");this.hour=t.replace(/\D/g,""),this.minute=l.replace(/\D/g,"")}catch{this.hour="0 hr",this.minute="5 min"}},saveRouteTime(){this.$emit("save-route-time")}}},P={class:"waypoint-wrapper slds-grid slds-grid_vertical"},N={class:"slds-grid slds-gutters slds-grid_vertical-align-start"};function O(e,t,l,d,s,i){const _=n("TimePicker"),m=n("TextInput"),b=n("SLDSButton");return L(),T("div",P,[V("div",N,[u(_,{id:"routeBodyWaypointTimePicklistResource",modelValue:s.time,"onUpdate:modelValue":[t[0]||(t[0]=o=>s.time=o),i.selectTime],inputAttrs:{"data-test-id":"routeBodyWaypointTimePicklistResource"},combobox:"",filterable:"",class:"slds-col slds-size_6-of-12",labels:{name:e.$Labels.MA_Set_Start},interval:{hours:0,minutes:15},locale:s.userLocale,onClear:i.selectTime},null,8,["modelValue","labels","locale","onUpdate:modelValue","onClear"]),u(m,{modelValue:s.v$.hour.$model,"onUpdate:modelValue":t[1]||(t[1]=o=>s.v$.hour.$model=o),required:"",type:"number",class:"slds-col",errors:e.$getErrorsByField(s.v$.hour),readonly:!d.mainStore.settings.routes.duration.unlocked,inputAttrs:{id:"routeBodyWaypointTimeHoursPicklistResource","data-test-id":"routeBodyWaypointTimeHoursPicklistResource"},labels:{name:e.$Labels.MA_hrs,required:e.$Labels.MA_Required,placeholder:e.$Labels.MA_hrs},onInput:i.selectHour},null,8,["modelValue","errors","readonly","labels","onInput"]),u(m,{modelValue:s.v$.minute.$model,"onUpdate:modelValue":t[2]||(t[2]=o=>s.v$.minute.$model=o),required:"",type:"number",class:"slds-col",errors:e.$getErrorsByField(s.v$.minute),readonly:!d.mainStore.settings.routes.duration.unlocked,inputAttrs:{id:"routeBodyWaypointTimeMinutesPicklistResource","data-test-id":"routeBodyWaypointTimeMinutesPicklistResource"},labels:{name:e.$Labels.MA_Mins,required:e.$Labels.MA_Required,placeholder:e.$Labels.MA_Mins},onInput:i.selectMinute},null,8,["modelValue","errors","readonly","labels","onInput"])]),A(u(b,{id:"routeBodyWaypointDoneBtnResource","data-test-id":"routeBodyWaypointDoneBtnResource",disabled:s.v$.$invalid,variant:"brand",class:"slds-m-top_x-small",onClick:i.saveRouteTime},{default:B(()=>[w(R(e.$Labels.MA_Done),1)]),_:1},8,["disabled","onClick"]),[[f,!l.showEditMode]])])}const E=M(D,[["render",O]]);export{E as default};

import{_ as v,I as y,B as T,aB as b,f as I,aG as R,r as _,aD as f,s as L,o as d,c as m,h as i,t as u,i as h,F as C,q as S,a0 as M,n as U,p as k,k as w}from"../bundle.js";const N={components:{Icon:y,ButtonIcon:T},directives:{"click-outside":b},props:{numberOfTilesInRow:{type:Number,default:4},visible:{type:String,required:!0}},emits:["update:visible"],setup(){return{mainStore:I()}},data(){return{tiles:[{testId:"Street",name:"esri_street",label:this.$Labels.NavBar_Map_Types_ESRI_Street,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/esri_streets.png`,isCustom:!1,tileURL:"streets-vector"},{testId:"Topography",name:"esri_topography",label:this.$Labels.NavBar_Map_Types_ESRI_Topography,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/esri_topographic.png`,isCustom:!1,tileURL:"topo-vector"},{testId:"Imagery",name:"esri_imagery",label:this.$Labels.NavBar_Map_Types_ESRI_Imagery,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/esri_imagery.png`,isCustom:!1,tileURL:"satellite"},{testId:"Navigation",name:"esri_navigation",label:this.$Labels.NavBar_Map_Types_ESRI_Navigation,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/esri_navigation.png`,isCustom:!1,tileURL:"streets-navigation-vector"},{testId:"Terrain",name:"terrain",label:this.$Labels.NavBar_Map_Types_ESRI_Terrain,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/esri_terrain.png`,isCustom:!1,tileURL:"terrain"},{testId:"Hybrid",name:"hybrid",label:this.$Labels.NavBar_Map_Types_ESRI_Hybrid,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/hybrid.png`,isCustom:!1,tileURL:"hybrid"}],activeTileNameOrId:"esri_street",tileRows:[],location:{right:"0px"}}},computed:{settings(){return this.mainStore.settings},tileClassObject(e){return{active:typeof e=="object"?e.name===this.activeTileNameOrId:!1}},clickOutsideOptions(){return{active:!0,handler:this.close}}},mounted(){const e=setInterval(()=>{if(this.mainStore.settings.loaded){clearInterval(e),this.formatCustomTiles();const a=this.settings?.map?.defaultTile||"esri_street";this.activeTileNameOrId=a.replace("google_","");const l=document.querySelector(".mapTypes"),o=document.getElementById("mapcontainer"),t=l.getBoundingClientRect(),{right:s}=t,r=o.clientWidth-s;this.location.right=`${r}px`,this.$bus.on("update-basemap",this.mapTypeTileClick)}},100)},unmounted(){this.$bus.off("update-basemap",this.mapTypeTileClick)},methods:{formatCustomTiles(){const e=this.settings.map.customTiles||[],a=[];for(let s=0;s<e.length;s++){const r=e[s],n=JSON.parse(r.maps__Options__c)||{},p=n&&typeof n=="object"?n.url:"";a.push({name:r.Id,label:r.Name,imageURL:`${this.resourceURL}/maps__MapsStyles/images/MapView/custom_tile.png`,isCustom:!0,tileURL:p})}const l=[...this.tiles,...a];this.tiles=l;const o=[];let t=[];for(let s=0;s<l.length;s++)t.push(l[s]),t.length===this.numberOfTilesInRow&&(o.push(t),t=[]);t.length>0&&o.push(t),this.tileRows=o},mapTypeTileClick(e){const a=this.tiles.find(o=>o.name===e)||this.tiles[0];let l=a.tileURL;a.isCustom&&(l=l.replace(/{zoom}/g,"{z}").replace(/{latitude}/g,"{x}").replace(/{longitude}/g,"{y}")),R.updateBaseMap({url:l,isCustom:a.isCustom}),this.activeTileNameOrId=a.name},close(){this.$emit("update:visible","")},mapTypeUpdated(e){e&&(this.activeTileNameOrId=e)}}},B=e=>(k("data-v-4dc42e36"),e=e(),w(),e),O={id:"mapTileDropdownInner",class:"slds-popover__body"},$={id:"mapTileDropdownMapWrap",class:"map-tile-group slds-grid slds-grid_vertical"},x={class:"map-type-header slds-grid slds-grid_vertical-align-center slds-border_bottom"},E={class:"slds-col"},V={class:"slds-align-middle slds-text-heading_small"},D={class:"map-type-body slds-col slds-grid slds-gutters slds-wrap"},z=["onClick"],j={class:"map-tile-image-wrap"},H=["src"],q={class:"map-tile-label"},W=B(()=>i("div",{class:"active-check"},null,-1));function F(e,a,l,o,t,s){const r=_("ButtonIcon"),n=_("Icon"),p=f("click-outside");return L((d(),m("section",{id:"mapTileDropdownWrap",class:"slds-dropdown",style:U(t.location)},[i("div",O,[i("div",$,[i("div",x,[i("div",E,[i("h2",V,u(e.$Labels.NavBar_Map_Types_Header),1)]),i("div",null,[h(r,{id:"toolbarTypeTileClosedBtnResource",iconCategory:"utility",iconName:"close",size:"small",title:"Close",assistiveText:"Close",onClick:s.close},null,8,["onClick"])])]),i("div",D,[(d(!0),m(C,null,S(t.tiles,(c,g)=>(d(),m("div",{key:g,class:"slds-col slds-grow-none"},[i("div",{class:M([{active:c.name==t.activeTileNameOrId},"map-tile-map-type"]),onClick:G=>s.mapTypeTileClick(c.name)},[i("div",j,[i("img",{src:c.imageURL},null,8,H)]),i("div",q,u(c.label),1),W,h(n,{id:`mtEsri-${c.testId}-TypesResource`,category:"utility",name:"check",size:"xx-small",class:"active-check-icon",variant:"inverse"},null,8,["id"])],10,z)]))),128))])])])],4)),[[p,void 0,s.clickOutsideOptions]])}const A=v(N,[["render",F],["__scopeId","data-v-4dc42e36"]]);export{A as default};

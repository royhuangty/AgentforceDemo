"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[2496],{8719:(e,t,s)=>{s.d(t,{K:()=>c,x:()=>r});var l=s(5735),i=s.n(l),o=s(257),a=s(5658);const{MASystem:n}=window,c=async({sobject:e="",permissionsToCheck:t={isAccessible:!0},updateProgress:s=(()=>{}),includeDedicatedLookupOptions:l=!1})=>(async({sobject:e="",permissionsToCheck:t={isAccessible:!0},fieldIndex:s,progressCallback:l=(()=>{}),includeDedicatedLookupOptions:c=!1})=>{const{success:r=!1,data:d={},message:_}=await(0,a.wX)("RemoteFunctions.GetGlobalDescribeFields",[e,t,s,c],{escape:!1,buffer:!1});if(r){const{hasMore:s=!1,index:a,availableFields:c=[],totalSize:r=0}=d;if(s){let s=c;return await(async(e="",t={isAccessible:!0},s,l=(()=>{}))=>new Promise((a=>{let c=[];const r={status:"Running Batch",total:0,complete:0,success:0,failure:0},d=i()(((e,t)=>{const{object:s,limits:i,index:a}=e;((e="",t={isAccessible:!0},s)=>new Promise(((l,i)=>{(new o.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeFields").setErrorHandler((e=>{i(new Error(e))})).invoke([e,t,s],(e=>{const{success:t=!1,data:s=[]}=e;t?l(s):(console.warn(n.Labels.Common_Refresh_And_Try_Again),i(new Error(n.Labels.Common_Refresh_And_Try_Again)))}),{escape:!1,buffer:!1,timeout:45e3})})))(s,i,a).then((e=>{const{hasMore:t=!1,availableFields:l=[]}=e,o=e.index;t&&d.push({object:s,limits:i,index:o}),c=[...c,...l],r.success+=l.length})).catch((e=>{console.warn("schema error",e),r.failure++})).finally((()=>{r.complete++,l(r),t()}))}),1);d.push({object:e,limits:t,index:s}),d.drain=()=>{const e=c.sort(((e,t)=>e.label>t.label?1:-1));a(e)}})))(e,t,a,(e=>{e.total=r,l(e)})).then((e=>{s=[...s,...e]})),s}return c}throw console.warn(n.Labels.Common_Refresh_And_Try_Again),new Error(_)})({sobject:e,permissionsToCheck:t,fieldIndex:0,updateProgress:e=>{s(e)},includeDedicatedLookupOptions:l}),r=async(e={},t=!1,s=(()=>{}))=>{const l=e.hideExtraObjects||!1;let a;return await(async(e=!1,t=!0,s={},l=0,a=(()=>{}))=>new Promise(((c,r)=>{const d=l;(new o.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeObjects").setErrorHandler((e=>{r(new Error(e))})).invoke([e,s,t,d],(async l=>{const{success:d=!1,data:_={}}=l;if(d){const{hasMore:l=!1,index:r,availableObjects:d=[],totalSize:u=0}=_;if(l){let l=d;await((e=!1,t=!0,s={},l=0,a=(()=>{}))=>new Promise((c=>{const r={status:"Running Batch",total:0,complete:0,success:0,failure:0};let d=[];const _=i()(((e,t)=>{const{removeExtra:s,limitedSet:l,limits:i,index:c}=e;((e=!1,t=!0,s={},l=0)=>new Promise(((i,a)=>{(new o.Z).setAction("maps.RemoteFunctions.GetGlobalDescribeObjects").setErrorHandler((e=>{a(new Error(e))})).invoke([e,s,t,l],(e=>{const{success:t=!1,data:s={}}=e;t?i(s):(console.warn(n.Labels.Common_Refresh_And_Try_Again),a(new Error(n.Labels.Common_Refresh_And_Try_Again)))}),{escape:!1,buffer:!1})})))(s,l,i,c).then((e=>{const{hasMore:t=!1,availableObjects:o=[]}=e,a=e.index;t&&_.push({removeExtra:s,limitedSet:l,limits:i,index:a}),d=[...d,...o],r.success+=o.length})).catch((e=>{r.failure++,console.warn("schema error",e)})).finally((()=>{r.complete++,a(r),t()}))}),1);_.push({removeExtra:e,limitedSet:t,limits:s,index:l}),_.drain=()=>{const e=d.sort(((e,t)=>e.name>t.name?1:-1));c(e)}})))(e,t,s,r,(e=>{e.total=u,a(e)})).then((e=>{l=[...l,...e]})),c(l)}else c(d)}else console.warn(n.Labels.Common_Refresh_And_Try_Again),r(new Error(n.Labels.Common_Refresh_And_Try_Again))}),{escape:!1,buffer:!1})})))(l,t,e,0,(e=>{s(e)})).then((e=>{a=e})),a}},7139:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});const l={props:{title:{type:String,required:!0}}},i=(0,s(1900).Z)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-section__title slds-theme--shade"},[t("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v(e._s(e.title))])])}),[],!1,null,null,null).exports},9990:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var l=s(5908),i=s.n(l),o=s(2646),a=s(5602),n=s(8719),c=s(7139);const{MAToastMessages:r}=window,d={components:{Picklist:o.Gp,MAHeader:c.default},data:()=>({showAllObjects:!1}),computed:{...(0,l.mapState)({store__isLoading:"isLoading",store__objectOptions:"objectOptions",store__selectedObject:"selectedObject",store__MAClick2CreateObj:"MAClick2CreateObj"}),selectedObject:{get(){return this.store__selectedObject},set(e){this.store__setSelectedObject(e)}}},watch:{showAllObjects(){this.getObjectOptions()}},created(){this.getObjectOptions()},methods:{...(0,l.mapMutations)({store__loadingToggle:"loadingToggle",store__updateObjectOptions:"updateObjectOptions",store__setSelectedObject:"setSelectedObject",store__populateMAClick2CreateObj:"populateMAClick2CreateObj"}),async getObjectOptions(){this.store__loadingToggle(!0);try{const e={isAccessible:!0,isQueryable:!0,hideExtraObjects:!0},t=!this.showAllObjects,s=await(0,n.x)(e,t);this.store__updateObjectOptions(s),this.$nextTick((()=>{this.store__setSelectedObject("Lead")})),this.store__loadingToggle(!1)}catch(e){console.warn(e),r.showError({message:this.$Labels.Could_Not_Get_Data}),this.store__loadingToggle(!1)}}}};var _=s(1900);const u=(0,_.Z)(d,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"slds-section slds-m-bottom_large slds-is-open"},[t("MAHeader",{attrs:{title:e.$Labels.MA_OBJECT}})],1),e._v(" "),t("Picklist",{staticClass:"objSelect",attrs:{detach:!0,options:e.store__objectOptions,labels:{name:e.$Labels.MA_OBJECT},idKey:"label",titleKey:"name",filterable:""},model:{value:e.selectedObject,callback:function(t){e.selectedObject=t},expression:"selectedObject"}}),e._v(" "),t("div",{staticClass:"slds-form-element__control"},[t("span",{staticClass:"slds-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.showAllObjects,expression:"showAllObjects"}],attrs:{id:"viewAll-2",type:"checkbox",name:"options"},domProps:{checked:Array.isArray(e.showAllObjects)?e._i(e.showAllObjects,null)>-1:e.showAllObjects},on:{change:function(t){var s=e.showAllObjects,l=t.target,i=!!l.checked;if(Array.isArray(s)){var o=e._i(s,null);l.checked?o<0&&(e.showAllObjects=s.concat([null])):o>-1&&(e.showAllObjects=s.slice(0,o).concat(s.slice(o+1)))}else e.showAllObjects=i}}}),e._v(" "),t("label",{staticClass:"slds-checkbox__label",attrs:{for:"viewAll-2"}},[t("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),t("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.MapsSetting_View_All_Salesforce_Objects))])])])])],1)}),[],!1,null,null,null).exports,p={state:{callouts:0,isLoading:!1,objectOptions:[],selectedObject:null,fieldMappings:{allFields:[],websiteFields:[],phoneFields:[],textFields:[],numberFields:[]},picklistFieldOptions:[],MAClick2CreateObj:{POIEnabled__c:!1,MyPositionEnabled__c:!1,MapClickEnabled__c:!1,POIStreet__c:null,MyPositionStreet__c:null,MapClickStreet__c:null,POICity__c:null,MyPositionCity__c:null,MapClickCity__c:null,POIState__c:null,MyPositionState__c:null,MapClickState__c:null,POIStateShort__c:null,POIPostalCode__c:null,MyPositionPostalCode__c:null,MapClickPostalCode__c:null,POICountry__c:null,MyPositionCountry__c:null,MapClickCountry__c:null,POICountryShort__c:null,POILatitude__c:null,MyPositionLatitude__c:null,MapClickLatitude__c:null,POILongitude__c:null,MyPositionLongitude__c:null,MapClickLongitude__c:null,POIName__c:null,MyPositionName__c:null,MapClickName__c:null,POIPhone__c:null,POIWebsite__c:null,DefaultField__c:null,POIDefaultValue__c:null,MyPositionDefaultValue__c:null,MapClickDefaultValue__c:null,ObjectAPIName__c:null,FieldSetOptions__c:null,Id:null},fieldSetRecords:[]},mutations:{loadingToggle(e,t){"boolean"==typeof t?t?(e.callouts+=1,e.isLoading=!0):(e.callouts-=1,e.callouts<=0&&(e.isLoading=!1,e.callouts=0)):(e.callouts-=1,e.isLoading=!1)},updateObjectOptions(e,t){e.objectOptions=t},setSelectedObject(e,t){e.selectedObject=t},updateFieldMappings(e,t){e.fieldMappings=t},updateMAClick2CreateObj(e,t){e.MAClick2CreateObj[t.field]=t.value},setPicklistFieldOptions(e,t){e.picklistFieldOptions=t},populateMAClick2CreateObj(e,t){Object.keys(e.MAClick2CreateObj).forEach((t=>{t.includes("Enabled")?e.MAClick2CreateObj[t]=!1:e.MAClick2CreateObj[t]=null})),Array.isArray(t)&&t.forEach((t=>{Object.keys(t).forEach((s=>{const l=s.replace("maps__","");"maps__FieldSetOptions__c"===s?JSON.parse(t[s]).forEach((t=>{e.fieldSetRecords.length>0&&e.fieldSetRecords.forEach((e=>{t.RecordTypeId===e.RecordTypeId&&(e.POIFieldSetAPIName=t.POIFieldSetAPIName,e.MyPositionFieldSetAPIName=t.MyPositionFieldSetAPIName,e.MapClickFieldSetAPIName=t.MapClickFieldSetAPIName)}))})):e.MAClick2CreateObj[l]=t[s]}))}))},updateFieldSetRecords(e,t){e.fieldSetRecords=t},updateFieldSetRecordValue(e,t){e.fieldSetRecords.forEach((e=>{e.RecordTypeId===t.id&&(e[t.updatedField]=t.updatedValue)}))}},getters:{isObjectSelected:e=>e.selectedObject,hasFieldSets:e=>e.fieldMappings.allFields.length>0},actions:{suggestFields({state:e,commit:t}){const s=e.MAClick2CreateObj,l=Object.keys(s),{fieldMappings:i={}}=e,{numberFields:o=[],textFields:a=[],phoneFields:n=[],websiteFields:c=[]}=i,r=["latitude__c","longitude__c"],d=["phone__c"],_=["website__c"],u=s.POIEnabled__c,p=s.MyPositionEnabled__c,b=s.MapClickEnabled__c;for(let e=0;e<l.length;e++){const i=l[e]||"";if("id"===i.toLowerCase())continue;const O=0===i.indexOf("POI"),h=0===i.indexOf("MyPosition"),m=0===i.indexOf("MapClick");if(!u&&O)continue;if(!p&&h)continue;if(!b&&m)continue;let g=i.replace("POI","").replace("MyPosition","").replace("MapClick","");if(g=String(g).toLowerCase(),!s[i]){let e=[];e=r.includes(g)?o:d.includes(g)?n:_.includes(g)?c:a,g=g.replace("__c","");const s=[];for(let t=0;t<e.length;t++){const l=e[t];String(l.label).toLowerCase().indexOf(g)>-1&&s.push(l)}if(1===s.length)t("updateMAClick2CreateObj",{field:i,value:s[0].value});else if(s.length>1){let[e]=s;for(let t=0;t<s.length;t++){const l=s[t];if(String(l.label).toLowerCase().indexOf("billing")>-1){e=l;break}}t("updateMAClick2CreateObj",{field:i,value:e.value})}}}}}},b={components:{Spinner:o.$j,BaseObjectSelection:u,FieldMappings:()=>({...(0,a.YH)(),component:s.e(9413).then(s.bind(s,972))})},computed:{...(0,l.mapState)({store__isLoading:"isLoading"}),...(0,l.mapGetters)({store__isObjectSelected:"isObjectSelected"})},beforeCreate(){this.$store=new(i().Store)(p)},methods:{...(0,l.mapMutations)({store__loadingToggle:"loadingToggle"})}},O=(0,_.Z)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-p-around_medium",staticStyle:{position:"relative"},attrs:{id:"dataLayerWrapper"}},[t("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.store__isLoading,expression:"store__isLoading"}]}),e._v(" "),t("BaseObjectSelection"),e._v(" "),t("FieldMappings",{directives:[{name:"show",rawName:"v-show",value:e.store__isObjectSelected&&0==e.store__isLoading,expression:"store__isObjectSelected && store__isLoading == false"}]})],1)}),[],!1,null,null,null).exports}}]);
(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[8576],{7607:(s,t,e)=>{s.exports=e.p+"images/e7ef49a382e454e4f675205eae05b3d7.svg"},1296:(s,t,e)=>{var i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,n=parseInt,l="object"==typeof e.g&&e.g&&e.g.Object===Object&&e.g,d="object"==typeof self&&self&&self.Object===Object&&self,c=l||d||Function("return this")(),_=Object.prototype.toString,u=Math.max,g=Math.min,h=function(){return c.Date.now()};function p(s){var t=typeof s;return!!s&&("object"==t||"function"==t)}function m(s){if("number"==typeof s)return s;if(function(s){return"symbol"==typeof s||function(s){return!!s&&"object"==typeof s}(s)&&"[object Symbol]"==_.call(s)}(s))return NaN;if(p(s)){var t="function"==typeof s.valueOf?s.valueOf():s;s=p(t)?t+"":t}if("string"!=typeof s)return 0===s?s:+s;s=s.replace(i,"");var e=r.test(s);return e||o.test(s)?n(s.slice(2),e?2:8):a.test(s)?NaN:+s}s.exports=function(s,t,e){var i,a,r,o,n,l,d=0,c=!1,_=!1,b=!0;if("function"!=typeof s)throw new TypeError("Expected a function");function f(t){var e=i,r=a;return i=a=void 0,d=t,o=s.apply(r,e)}function v(s){var e=s-l;return void 0===l||e>=t||e<0||_&&s-d>=r}function x(){var s=h();if(v(s))return C(s);n=setTimeout(x,function(s){var e=t-(s-l);return _?g(e,r-(s-d)):e}(s))}function C(s){return n=void 0,b&&i?f(s):(i=a=void 0,o)}function y(){var s=h(),e=v(s);if(i=arguments,a=this,l=s,e){if(void 0===n)return function(s){return d=s,n=setTimeout(x,t),c?f(s):o}(l);if(_)return n=setTimeout(x,t),f(l)}return void 0===n&&(n=setTimeout(x,t)),o}return t=m(t)||0,p(e)&&(c=!!e.leading,r=(_="maxWait"in e)?u(m(e.maxWait)||0,t):r,b="trailing"in e?!!e.trailing:b),y.cancel=function(){void 0!==n&&clearTimeout(n),d=0,i=l=a=n=void 0},y.flush=function(){return void 0===n?o:C(h())},y}},2010:(s,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>u});var i=e(5908),a=e(2646),r=e(7356),o=e(1296),n=e.n(o);const l=async function(){this.$emit("update:isLoading",!0),this.assignments=[];try{const{assignments:s=[],success:t=!1,error:e}=await this.$remote("maps.UserAJAXResources.getAssignmentsBySearchTerm",[this.searchTerm,this.store__toggle.searchType]);t?(s.forEach((s=>{s.disabled=!this.groupId&&s.id||s.id&&s.groupId!==this.groupId})),this.assignments=s):console.error(e)}catch(s){console.error(s)}finally{this.$emit("update:isLoading",!1)}},d={components:{TextInput:a.oi},props:{isLoading:{type:Boolean,default:!1},groupId:{type:String,default:""}},data:()=>({searchTerm:"",assignments:[]}),computed:{...(0,i.mapState)({store__settingsGroup:"settingsGroup",store__toggle:"toggle"}),searchLabel(){return"Profile"===this.store__toggle.searchType?this.$Labels.Permission_Group_Search_Profiles_Placeholder:this.$Labels.Permission_Group_Search_Users_Placeholder}},watch:{searchTerm(){this.debouncedGetAssignmentsBySearchTerm()}},mounted(){l.call(this)},methods:{debouncedGetAssignmentsBySearchTerm:n()(l,500),toggleSearch(){this.store__toggle.searchType="Profile"===this.store__toggle.searchType?"User":"Profile",this.searchTerm||l.call(this),this.searchTerm=""},select(s){s.assigned=!s.assigned,s.assigned?this.$emit("add",s):this.$emit("remove",s)}}};var c=e(1900);const _={components:{AssignmentGrid:(0,c.Z)(d,(function(){var s=this,t=s._self._c;return t("div",{staticClass:"slds-modal__content slds-grid slds-grow",attrs:{id:"settingsGroupDetailsModal"}},[t("div",{staticClass:"slds-grid slds-grid_vertical"},[t("div",{staticClass:"slds-p-vertical_x-small slds-p-horizontal_large slds-shrink-none slds-theme_shade"},[t("div",{staticClass:"slds-form-element slds-grid"},[t("label",{staticClass:"slds-form-element__label slds-assistive-text",attrs:{for:"combobox-unique-id-1"}},[s._v(s._s(s.$Labels.MA_Search))]),s._v(" "),t("div",{staticClass:"slds-form-element__control slds-col"},[t("div",{staticClass:"slds-combobox_container"},[t("div",{staticClass:"slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click",attrs:{"aria-expanded":"false","aria-haspopup":"listbox",role:"combobox"}},[t("TextInput",{staticClass:"slds-input-has-icon slds-input-has-icon_left",attrs:{id:"combobox-unique-id-1",type:"text",labels:{name:s.$Labels.MA_Search,placeholder:s.searchLabel}},model:{value:s.searchTerm,callback:function(t){s.searchTerm=t},expression:"searchTerm"}},[t("Icon",{attrs:{slot:"extendInput",src:e(7607),iconClass:["slds-icon","slds-input__icon","slds-input__icon_left","slds-icon-text-default"]},slot:"extendInput"})],1)],1)])])])]),s._v(" "),t("div",{staticClass:"slds-scrollable slds-grow"},[t("div",{staticClass:"slds-scrollable_none"},[t("table",{staticClass:"slds-table slds-no-row-hover slds-table_cell-buffer slds-table_bordered slds-table_fixed-layout",attrs:{"aria-multiselectable":"true",role:"grid"}},[t("thead",[s.assignments.length>0?t("tr",{staticClass:"slds-line-height_reset"},[t("th",{staticStyle:{width:"3.75rem"},attrs:{scope:"col"}}),s._v(" "),t("th",{staticClass:"slds-is-sortable",attrs:{"aria-label":"Profile"==s.store__toggle.searchType?s.$Labels.MA_Profile:s.$Labels.Permission_Group_User_Name_Text,"aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:"Profile"==s.store__toggle.searchType?s.$Labels.MA_Profile:s.$Labels.Permission_Group_User_Name_Text}},[s._v(s._s(s.$Labels.MA_Profile))])])])]),s._v(" "),t("th",{staticClass:"slds-is-sortable",attrs:{"aria-label":"Current Permission Group","aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:s.$Labels.Current_Permission_Group}},[s._v(" "+s._s(s.$Labels.Current_Permission_Group)+" ")])])])]),s._v(" "),t("th",{staticClass:"slds-is-sortable",attrs:{"aria-label":"Description","aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:s.$Labels.MA_Description}},[s._v(" "+s._s(s.$Labels.MA_Description)+" ")])])])])]):s._e()]),s._v(" "),t("tbody",s._l(s.assignments,(function(e,i){return t("tr",{key:i,staticClass:"slds-hint-parent",attrs:{"aria-selected":"false"}},[t("td",{staticClass:"slds-text-align_right",attrs:{role:"gridcell",tabindex:"0"}},["Default"!==s.store__settingsGroup.Name&&s.store__settingsGroup.Name!==s.$Labels.MA_DEFAULT?t("div",{staticClass:"slds-checkbox_add-button"},[t("input",{staticClass:"slds-assistive-text",attrs:{id:`add-checkbox-${i}`,type:"checkbox",tabindex:"-1",disabled:e.disabled},domProps:{value:`add-checkbox-${i}`,checked:e.assigned},on:{click:function(t){return s.select(e)}}}),s._v(" "),t("label",{staticClass:"slds-checkbox_faux",attrs:{for:`add-checkbox-${i}`}},[t("span",{staticClass:"slds-assistive-text"},[s._v("Select item 1")])])]):s._e()]),s._v(" "),t("td",{attrs:{scope:"row"}},[t("div",{staticClass:"slds-truncate",attrs:{title:"Profiles"}},[s._v("\n                                    "+s._s(s._f("decode")(e.name))+"\n                                ")])]),s._v(" "),t("td",{attrs:{scope:"row"}},[t("div",{staticClass:"slds-truncate",attrs:{title:"Current Permission Group"}},[s._v("\n                                    "+s._s(s._f("decode")(e.groupName))+"\n                                ")])]),s._v(" "),t("td",{attrs:{scope:"row"}},[t("div",{staticClass:"slds-truncate",attrs:{title:"Description"}},[s._v("\n                                    "+s._s(s._f("decode")(e.description))+"\n                                ")])])])})),0)])])])])])}),[],!1,null,"288eb29c",null).exports,Modal:a.u_},data:()=>({isLoading:!1}),computed:{...(0,i.mapState)({store__toggle:"toggle",store__settingsGroup:"settingsGroup",store__entityIdsForInsert:"entityIdsForInsert",store__assignmentIdsForDelete:"assignmentIdsForDelete"})},mounted(){this.$store.commit("resetAssignmentSelections")},methods:{close(){this.store__toggle.showSearchModal=!1,this.$store.commit("resetAssignmentSelections")},addAssignment({entityId:s,id:t}){this.store__assignmentIdsForDelete.has(t)?this.store__assignmentIdsForDelete.delete(t):this.store__entityIdsForInsert.add(s)},removeAssignment({entityId:s,id:t}){this.store__entityIdsForInsert.has(s)?this.store__entityIdsForInsert.delete(s):this.store__assignmentIdsForDelete.add(t)},async saveChanges(){this.isLoading=!0,await(0,r.C)(this.store__settingsGroup,this.store__entityIdsForInsert,this.store__assignmentIdsForDelete,!0)&&(this.store__toggle.showSearchModal=!1,this.$store.commit("resetAssignmentSelections"),this.store__toggle.refresh=!0),this.isLoading=!1}}},u=(0,c.Z)(_,(function(){var s=this,t=s._self._c;return t("Modal",{attrs:{title:s.$Labels.Permission_Group_Modify_Assignments_Header,isLoading:s.isLoading},on:{close:function(t){return s.close()}}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("AssignmentGrid",{attrs:{isLoading:s.isLoading,groupId:s.store__settingsGroup.Id},on:{"update:isLoading":function(t){s.isLoading=t},"update:is-loading":function(t){s.isLoading=t},add:s.addAssignment,remove:s.removeAssignment}})],1),s._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"slds-button slds-button_neutral",on:{click:function(t){return s.close()}}},[s._v("\n            "+s._s(s.$Labels.MA_Cancel)+"\n        ")]),s._v(" "),t("button",{staticClass:"slds-button slds-button_brand",on:{click:s.saveChanges}},[s._v("\n            "+s._s(s.$Labels.MA_Save)+"\n        ")])])])}),[],!1,null,"7ca83da6",null).exports}}]);
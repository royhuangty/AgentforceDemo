(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[7556],{4890:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var s=a(3088);const{MARemoting:r}=window;class i{static read(e=!1){return(0,s.wX)(r.NearbyMap.read,[e])}static save(e){return(0,s.wX)(r.NearbyMap.save,[JSON.stringify(e)])}static delete(e){return(0,s.wX)(r.NearbyMap.delete,[e])}static getAllowableSObjects(){return(0,s.wX)(r.NearbyMap.getAllowableSObjects,[])}static getSObjectInfoBySObjectName(e){return(0,s.wX)(r.NearbyMap.getSObjectInfoBySObjectName,[e])}static fieldHasDuplicateValue(e,t){return(0,s.wX)(r.NearbyMap.fieldHasDuplicateValue,[e,t])}}},1222:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s={};a.r(s),a.d(s,{circle:()=>r,pin:()=>i,square:()=>l,triangle:()=>o});const r={config:{name:"circle",size:{x:22,y:22},anchor:{x:11,y:22}},svg:'\n        <svg data-shape="circle" class="marker-legend-icon" id="markerCircle" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24">\n            <style type="text/css">.st0{fill:#FFFFFF;}.st1{fill:__COLOR__;}.st2{fill:url(#SVGID_1_);}.st3{opacity:0.7;fill:url(#SVGID_2_);enable-background:new;}.st4{opacity:0.6;}.st5{fill:url(#SVGID_3_);}.st6{fill:url(#SVGID_4_);}.st7{opacity:0.7;fill:url(#SVGID_5_);enable-background:new;}.st8{fill:url(#SVGID_6_);}.st9{fill:url(#SVGID_7_);}.st10{opacity:0.7;fill:url(#SVGID_8_);enable-background:new;}.st11{fill:url(#SVGID_9_);}.st12{fill:url(#SVGID_10_);}.st13{fill:url(#SVGID_11_);}.st14{opacity:0.7;fill:url(#SVGID_12_);enable-background:new;}</style>\n            <g>\n                <g>\n                    <path class="st0" d="M12,23.5C5.7,23.5,0.5,18.3,0.5,12S5.7,0.5,12,0.5S23.5,5.7,23.5,12S18.3,23.5,12,23.5z M12,1.5C6.2,1.5,1.5,6.2,1.5,12S6.2,22.5,12,22.5S22.5,17.8,22.5,12S17.8,1.5,12,1.5z"/>\n                </g>\n                <g>\n                    <circle class="st1" cx="12" cy="12" r="11"/>\n                    <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="12.0002" y1="1" x2="12.0002" y2="20.25">\n                        <stop offset="0.19" style="stop-color:#FFFFFF;stop-opacity:0.25"/>\n                        <stop offset="0.92" style="stop-color:#FFFFFF;stop-opacity:0"/>\n                    </linearGradient>\n                    <path class="st2" d="M23,12c0,11-22,11-22,0C1,5.9,5.9,1,12,1S23,5.9,23,12z"/>\n                </g>\n                <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="8.8502" y1="1118" x2="15.1502" y2="1118" gradientTransform="matrix(1 0 0 1 0 -1106)">\n                    <stop offset="0" style="stop-color:#000000"/>\n                    <stop offset="1" style="stop-color:#000000"/>\n                </linearGradient>\n                <ellipse class="st3" cx="12" cy="12" rx="3.1" ry="3.2"/>\n                <g class="st4">\n                    <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="1" y1="12" x2="23" y2="12">\n                        <stop offset="0" style="stop-color:#000000"/>\n                        <stop offset="1" style="stop-color:#000000"/>\n                    </linearGradient>\n                    <path class="st5" d="M12,23C5.9,23,1,18.1,1,12S5.9,1,12,1s11,4.9,11,11S18.1,23,12,23z M12,1.5C6.2,1.5,1.5,6.2,1.5,12S6.2,22.5,12,22.5S22.5,17.8,22.5,12S17.8,1.5,12,1.5z"/>\n                </g>\n            </g>\n        </svg>\n    '},i={config:{name:"pin",size:{x:22,y:36},anchor:{x:11,y:36}},svg:'\n        <svg data-shape="pin" class="marker-legend-icon" id="markerPin" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 26 42">\n            <defs>\n                <style>.cls-1{fill:#fff;}.cls-2{fill:__COLOR__;}.cls-3{fill:url(#linear-gradient);}.cls-4{opacity:0.7;isolation:isolate;fill:url(#linear-gradient-2);}.cls-5{opacity:0.6;}.cls-6{fill:url(#linear-gradient-3);}</style>\n                <linearGradient id="linear-gradient" x1="12.99" y1="1.51" x2="12.99" y2="23.9" gradientUnits="userSpaceOnUse">\n                    <stop offset="0.19" stop-color="#fff" stop-opacity="0.25"/>\n                    <stop offset="0.92" stop-color="#fff" stop-opacity="0"/>\n                </linearGradient>\n                <linearGradient id="linear-gradient-2" x1="9.85" y1="242.72" x2="16.15" y2="242.72" gradientTransform="translate(0 -230)" gradientUnits="userSpaceOnUse">\n                    <stop offset="0"/>\n                    <stop offset="1"/>\n                </linearGradient>\n                <linearGradient id="linear-gradient-3" x1="1.99" y1="-18.97" x2="23.99" y2="-18.97" gradientTransform="matrix(1, 0, 0, -1, 0, 2)" xlink:href="#linear-gradient-2"/>\n            </defs>\n            <path class="cls-1" d="M14.74,40.94H11.25v-1c0-9.38-3.73-14.92-6.19-18.58l-.79-1.12A13.67,13.67,0,0,1,1.5,12.62a11.5,11.5,0,1,1,23,0,13.68,13.68,0,0,1-2.78,7.63l-.78,1.17c-2.47,3.67-6.19,9.19-6.19,18.58v.95Zm-2.48-1h1.48c0-9.67,3.84-15.34,6.37-19.09l.79-1.17a12.75,12.75,0,0,0,2.6-7.07,10.5,10.5,0,1,0-21,0,12.74,12.74,0,0,0,2.6,7.07l.79,1.17c2.53,3.76,6.35,9.42,6.36,19.09Z"/>\n            <path class="cls-2" d="M13,1.51A11.06,11.06,0,0,0,2,12.62a13.21,13.21,0,0,0,2.7,7.32l.79,1.17C8,24.83,11.75,30.44,11.75,40v.45h2.48V40c0-9.54,3.78-15.15,6.28-18.86l.79-1.17A13.21,13.21,0,0,0,24,12.62,11.06,11.06,0,0,0,13,1.51Z"/>\n            <path class="cls-3" d="M13,1.51A11.06,11.06,0,0,0,2,12.62a13.21,13.21,0,0,0,2.7,7.32l.79,1.17c2.51,3.72,12.53,3.72,15,0l.79-1.17A13.21,13.21,0,0,0,24,12.62,11.06,11.06,0,0,0,13,1.51Z"/>\n            <ellipse class="cls-4" cx="13" cy="12.72" rx="3.15" ry="3.18"/>\n            <g class="cls-5">\n                <path class="cls-6" d="M14.24,40.43H11.75V40c0-9.54-3.78-15.15-6.28-18.86l-.78-1.18A13.21,13.21,0,0,1,2,12.62a11,11,0,1,1,22,0,13.21,13.21,0,0,1-2.69,7.33l-.79,1.17C18,24.83,14.24,30.44,14.24,40Zm-2-.51h1.48c0-9.67,3.84-15.33,6.37-19.09l.79-1.17a12.75,12.75,0,0,0,2.6-7.07,10.5,10.5,0,1,0-21,0,12.74,12.74,0,0,0,2.6,7.07l.81,1.17c2.53,3.76,6.35,9.42,6.36,19.09Z"/>\n            </g>\n        \'</svg>\n    '},l={config:{name:"square",size:{x:22,y:22},anchor:{x:11,y:22}},svg:'\n        <svg data-shape="square" class="marker-legend-icon" id="markerSquare" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24">\n            <style type="text/css">.st0{fill:#FFFFFF;}.st1{fill:__COLOR__;}.st2{fill:url(#SVGID_1_);}.st3{opacity:0.7;fill:url(#SVGID_2_);enable-background:new;}.st4{opacity:0.6;}.st5{fill:url(#SVGID_3_);}.st6{fill:url(#SVGID_4_);}.st7{opacity:0.7;fill:url(#SVGID_5_);enable-background:new;}.st8{fill:url(#SVGID_6_);}.st9{fill:url(#SVGID_7_);}.st10{opacity:0.7;fill:url(#SVGID_8_);enable-background:new;}.st11{fill:url(#SVGID_9_);}.st12{fill:url(#SVGID_10_);}.st13{fill:url(#SVGID_11_);}.st14{opacity:0.7;fill:url(#SVGID_12_);enable-background:new;}</style>\n            <g>\n                <g>\n                    <g>\n                        <path class="st0" d="M23.5,23.5h-23v-23h23V23.5z M1.5,22.5h21v-21h-21V22.5z"/>\n                    </g>\n                    <rect x="1" y="1" class="st1" width="22" height="22"/>\n                    <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="12" y1="1" x2="12" y2="20.0789">\n                        <stop offset="0.19" style="stop-color:#FFFFFF;stop-opacity:0.25"/>\n                        <stop offset="0.92" style="stop-color:#FFFFFF;stop-opacity:0"/>\n                    </linearGradient>\n                    <rect x="1" y="1" class="st2" width="22" height="19.1"/>\n                    <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="8.85" y1="1118" x2="15.15" y2="1118" gradientTransform="matrix(1 0 0 1 0 -1106)">\n                        <stop offset="0" style="stop-color:#000000"/>\n                        <stop offset="1" style="stop-color:#000000"/>\n                    </linearGradient>\n                    <ellipse class="st3" cx="12" cy="12" rx="3.1" ry="3.2"/>\n                </g>\n                <g class="st4">\n                    <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="1" y1="12" x2="23" y2="12">\n                        <stop offset="0" style="stop-color:#000000"/>\n                        <stop offset="1" style="stop-color:#000000"/>\n                    </linearGradient>\n                    <path class="st5" d="M23,23H1V1h22V23z M1.5,22.5h21v-21h-21V22.5z"/>\n                </g>\n            </g>\n        </svg>\n    '},o={config:{name:"triangle",size:{x:22,y:36},anchor:{x:11,y:36}},svg:'\n        <svg data-shape="triangle" class="marker-legend-icon" id="markerTriangle" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 26 23">\n            <style type="text/css">.st0{fill:#FFFFFF;}.st1{fill:__COLOR__;}.st2{fill:url(#SVGID_1_);}.st3{opacity:0.7;fill:url(#SVGID_2_);enable-background:new;}.st4{opacity:0.6;}.st5{fill:url(#SVGID_3_);}.st6{fill:url(#SVGID_4_);}.st7{opacity:0.7;fill:url(#SVGID_5_);enable-background:new;}.st8{fill:url(#SVGID_6_);}.st9{fill:url(#SVGID_7_);}.st10{opacity:0.7;fill:url(#SVGID_8_);enable-background:new;}.st11{fill:url(#SVGID_9_);}.st12{fill:url(#SVGID_10_);}.st13{fill:url(#SVGID_11_);}.st14{opacity:0.7;fill:url(#SVGID_12_);enable-background:new;}</style>\n            <g>\n                <g>\n                    <g>\n                        <g>\n                            <path class="st0" d="M25.5,22.5h-25L13,0.5L25.5,22.5z M2.3,21.5h21.4L13,2.6L2.3,21.5z"/>\n                        </g>\n                    </g>\n                    <g>\n                        <path class="st1" d="M24.6,22H1.4L13,1.6L24.6,22z"/>\n                    </g>\n                    <g>\n                        <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="13.0105" y1="1.5601" x2="13.0105" y2="18.95">\n                            <stop offset="0.19" style="stop-color:#FFFFFF;stop-opacity:0.25"/>\n                            <stop offset="0.92" style="stop-color:#FFFFFF;stop-opacity:0"/>\n                        </linearGradient>\n                        <path class="st2" d="M22.9,19H3.1L13,1.6L22.9,19z"/>\n                    </g>\n                    <g class="st4">\n                        <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="1.3924" y1="11.7748" x2="24.6076" y2="11.7748">\n                            <stop offset="0" style="stop-color:#000000"/>\n                            <stop offset="1" style="stop-color:#000000"/>\n                        </linearGradient>\n                        <path style="fill:url(#SVGID_2_);" d="M13,2.6l10.7,18.9H2.3L13,2.6 M13,1.6L1.4,22h23.2L13,1.6L13,1.6z"/>\n                    </g>\n                </g>\n                    <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="10.125" y1="1120.644" x2="15.875" y2="1120.644" gradientTransform="matrix(1 0 0 1 0 -1106)">\n                    <stop offset="0" style="stop-color:#000000"/>\n                    <stop offset="1" style="stop-color:#000000"/>\n                </linearGradient>\n                <ellipse style="opacity:0.7;fill:url(#SVGID_3_);enable-background:new;" cx="13" cy="14.6" rx="2.9" ry="2.9"/>\n            </g>\n        </svg>\n    '},n=class{constructor(e){return this.options={type:"pin",color:"#f44336"},this.options=Object.assign(this.options,e),this.shape=s[this.options.type.toLowerCase()],this}getSVG(e){const t=this.shape.svg.replace(/__COLOR__/g,e||this.options.color);return`data:image/svg+xml;base64,${btoa(t)}`}},d={methods:{$__svg:(e,t)=>new n({type:e,color:t}).getSVG()}}},7856:function(e){(function(t){"use strict";function a(e){var t=new Error(e);return t.name="ValueError",t}function s(e){return function(t){var s=Array.prototype.slice.call(arguments,1),r=0,i="UNDEFINED";return t.replace(/([{}])\1|[{](.*?)(?:!(.+?))?[}]/g,(function(t,l,o,n){if(null!=l)return l;var d=o;if(d.length>0){if("IMPLICIT"===i)throw a("cannot switch from implicit to explicit numbering");i="EXPLICIT"}else{if("EXPLICIT"===i)throw a("cannot switch from explicit to implicit numbering");i="IMPLICIT",d=String(r),r+=1}var c=d.split("."),u=(/^\d+$/.test(c[0])?c:["0"].concat(c)).reduce((function(e,t){return e.reduce((function(e,a){return null!=a&&t in Object(a)?["function"==typeof a[t]?a[t]():a[t]]:[]}),[])}),[s]).reduce((function(e,t){return t}),"");if(null==n)return u;if(Object.prototype.hasOwnProperty.call(e,n))return e[n](u);throw a('no transformer named "'+n+'"')}))}}var r=s({});r.create=s,r.extend=function(e,a){var r=s(a);e.format=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),r.apply(t,e)}},e.exports=r}).call(this,this)},7317:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>te});var s=a(379),r=a(3088),i=a(3465),l=a.n(i),o=a(2646),n=a(5602),d=a(1402),c=a(7856),u=a.n(c);class m{constructor(){this.context=null,this.nearby=[]}addContext(e){return this.context=e,this}addNearby(e){function t(e){this.nearby.push(e)}return Array.isArray(e)?e.forEach(t.bind(this)):t.call(this,e),this}toMiniMapForm(){const e=this.context.tooltips.filter((e=>"string"==typeof e)).map((e=>e));if(!this.context)throw new Error(window.MASystem.Labels.NearbyMaps_Cant_Save_Nearby_Map);const t={config:{context:{...this.context},layers:[]},layers:[]};t.center={...this.context.center},t.zoom=this.context.zoom,this.latLng=m.getLatLng.call(this.context),"field"===t.center.type&&(m.setCenterLatLngFields.call(this,t.center),t.config.context.center.lat="",t.config.context.center.lng=""),t.layers.push({label:this.context.name,type:"context",geoFieldType:this.context.geoFieldType,soql:this.buildContextQuery(),sobjectName:this.context.sobject,nameField:this.context.nameField,fields:e,marker:m.buildMarker.call(this.context,this.latLng)}),delete t.config.context.center.verifiedLat,delete t.config.context.center.verifiedLng,delete t.config.context.metadata,delete t.config.context.queryFilterComponents;let a=0;return this.nearby.forEach((e=>{e.latLng=this.latLng;const s=e.tooltips.filter((e=>"string"==typeof e)).map((e=>e));t.layers.push({label:e.name,type:"nearby",radius:e.radius,unit:e.unit,geoFieldType:e.geoFieldType,soql:m.buildNearbySOQL.call(e,this.context.sobject===e.sobject),sortField:e.sortField,sortDirection:e.sortDirection,sobjectName:e.sobject,numMarkers:e.numMarkers,nameField:e.nameField,fields:s,marker:m.buildMarker.call(e,m.getLatLng.call(e))}),t.config.layers.push({...e}),delete t.config.layers[a].metadata,delete t.config.layers[a++].queryFilterComponents})),t}buildContextQuery(){let e=` FROM ${this.context.sobject}`;const t=0===this.context.type.ordinal;t?this.context.queryFilters.length&&(e+=" WHERE"):e+=" WHERE Id = '{!Id}'";const a=m.buildQueryFilters(this.context.queryFilters||[]);if(a.length){e+=` ${a[0]}`;for(let t=1;t<a.length;t++)e+=` AND ${a[t]}`}return t&&this.context.sortField&&(e+=` ORDER BY ${this.context.sortField} ${this.context.sortDirection}`),t&&this.context.numMarkers&&(e+=` LIMIT ${this.context.numMarkers}`),e}static getLatLng(){const e={};if("number"===this.geoFieldType&&m.getLatLngFieldsFromNumberFields.call(this,e),"location"===this.geoFieldType){const t=m.getLatLngFieldsFromLocationField(this.locationField);e.lat=t.lat,e.lng=t.lng}if(this.verifiedLatField&&this.verifiedLngField&&"verified-number"===this.verifiedGeoFieldType&&m.getVerifiedLatLngFieldsFromNumberFields.call(this,e),this.verifiedLocationField&&"verified-location"===this.verifiedGeoFieldType){const t=m.getLatLngFieldsFromLocationField(this.verifiedLocationField);e.verifiedLat=t.lat,e.verifiedLng=t.lng}return e}static buildQueryFilters(e){const t=[];if(!e.length)return t;const a={number:{equals:"{0} = {1}","not equal to":"{0} != {1}","greater than":"{0} > {1}","greater than or equal to":"{0} >= {1}","less than":"{0} < {1}","less than or equal to":"{0} <= {1}"},text:{equals:"{0} = '{1}'","not equal to":"{0} != '{1}'","starts with":"{0} LIKE '{1}%'",contains:"{0} LIKE '%{1}%'","does not contain":"{0} NOT LIKE '%{1}%'"}};function s(e){if(!e.type)return null;let t;switch(e.type){case"int":case"integer":case"double":case"currency":t="number";break;case"date":case"datetime":t="date";break;default:t="text"}return u()(a[t][e.operator],e.name,e.componentValue)}a.date=a.number;for(let a=0;a<e.length;a++)t.push(s(e[a]));return t}static getLatLngFieldsFromNumberFields(e){e.lat=this.latField,e.lng=this.lngField}static getVerifiedLatLngFieldsFromNumberFields(e){e.verifiedLat=this.verifiedLatField,e.verifiedLng=this.verifiedLngField}static getLatLngFieldsFromLocationField(e){if(e.indexOf("__c")>-1){const t=e.substring(0,e.length-1);return{lat:`${t}latitude__s`,lng:`${t}longitude__s`}}const t=e.indexOf("address"),a=e.substring(0,t);return{lat:`${a}latitude`,lng:`${a}longitude`}}static buildNearbySOQL(e){const t=m.buildQueryFilters(this.queryFilters);e&&t.push("Id != '{!Id}'");const a=[];if("location"===this.geoFieldType){const e=`DISTANCE(${this.locationField}, GEOLOCATION({!${this.latLng.lat}}, {!${this.latLng.lng}}), '${this.unit}')`;t.push(`${e} < ${this.radius}`),a.push(e)}let s=`FROM ${this.sobject}`;if(t.length){s+=` WHERE ${t[0]}`;for(let e=1;e<t.length;e++)s+=` AND ${t[e]}`}if(this.sortField&&a.push(this.sortField),a.length){s+=` ORDER BY ${a[0]}`;for(let e=1;e<a.length;e++)s+=`, ${a[e]}`;s+=` ${this.sortDirection}`}return s+=` LIMIT ${this.numMarkers}`,s}static setCenterLatLngFields(e){e.lat=`{!${this.latLng.lat}}`,e.lng=`{!${this.latLng.lng}}`,this.latLng.verifiedLat&&this.latLng.verifiedLng&&(e.verifiedLat=`{!${this.latLng.verifiedLat}}`,e.verifiedLng=`{!${this.latLng.verifiedLng}}`,e.verifiedLatField=this.latLng.verifiedLat,e.verifiedLngField=this.latLng.verifiedLng)}static buildMarker(e){return{color:this.marker.color,type:this.marker.type,imgURL:this.marker.imgURL,latField:e.lat,lngField:e.lng,verifiedLatField:e.verifiedLat,verifiedLngField:e.verifiedLng}}static isLegacyConfig(e){return"string"==typeof e.context.type}static convertLegacyConfig(e){const t={...e.config};let a,s;if(e.layers.forEach((e=>{"context"===e.type?a=e:"nearby"===e.type&&(s=e)})),!a)throw new Error(window.MASystem.Labels.NearbyMaps_Cant_Save_Nearby_Map);return t.context.type="global"!==t.context.type&&t.layers.length?1:0,t.context.name=a.label,t.context.marker=a.marker,t.context.geoFieldType=a.geoFieldType,t.context.tooltips=a.fields,delete t.context.marker.latField,delete t.context.marker.lngField,s&&(t.layers[0].type=2,t.layers[0].name=s.label,t.layers[0].marker=s.marker,t.layers[0].geoFieldType=s.geoFieldType,t.layers[0].radius=s.radius,t.layers[0].unit=s.unit,t.layers[0].tooltips=s.fields,delete t.layers[0].marker.latField,delete t.layers[0].marker.lngField),t}}var f=a(4890),p=a(2419);const _=e=>!(0,p.default)(e)||/^[-]?[0-9]+[.]{0,1}[0-9]*$/.test(e);var v=a(70);function y(e){return(!(0,p.default)(e)||_(e))&&(0,v.default)(-85.05115,85.05115)(e)}function g(e){return(!(0,p.default)(e)||_(e))&&(0,v.default)(-180,180)(e)}var h=a(2934),b=a.n(h),F=a(553),$=a(7102),k=a(1222);const{MASystem:L}=window,x={name:"MarkerLegend",components:{Picklist:o.Gp},directives:{"click-outside":$.Z},mixins:[k.Z],props:{marker:{type:Object,required:!0}},data:()=>({standardMarkers:!0,showStandardMarkerOptions:!1,showCustomMarkerOptions:!1,Images:L.Images,customMarkers:L.MergeFields.MA_DocFolder_Images||[]}),computed:{customMarkerSet(){return null!=this.marker.imgURL&&""!==this.marker.imgURL},clickOutsideOptions(){return{active:!0,handler:this.doHide}}},methods:{doHide(e){e.target!==this.$refs.selection&&(this.showStandardMarkerOptions=!1)},showStandardSelection(e){this.standardMarkers=!0,this.showStandardMarkerOptions=!0,this.showCustomMarkerOptions=!1,e.imgURL=""},showCustomSelection(){this.standardMarkers=!1,this.showStandardMarkerOptions=!1,this.showCustomMarkerOptions=!0}}};var C=a(1900);const M={components:{MarkerLegend:(0,C.Z)(x,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("label",{staticClass:"slds-form-element__label"},[e._v("\n        "+e._s(e.$Labels.MA_Marker)+"\n        "),t("div",{staticClass:"slds-p-left_small location-markertype-selector",staticStyle:{display:"inline-block"}},[t("span",{staticClass:"slds-text-link",on:{click:function(t){return e.showStandardSelection(e.marker)}}},[e._v(e._s(e.$Labels.MA_Standard))]),e._v(" "),t("span",{staticClass:"slds-p-horizontal_x-small"},[e._v("|")]),e._v(" "),t("span",{staticClass:"slds-text-link",on:{click:e.showCustomSelection}},[e._v(e._s(e.$Labels.MA_Custom))])])]),e._v(" "),!e.customMarkerSet&&e.standardMarkers?t("div",{ref:"selection",staticClass:"slds-select",on:{click:e.showStandardSelection}},[t("img",{staticStyle:{width:"18px"},attrs:{src:e.$__svg(e.marker.type,e.marker.color)}})]):e._e(),e._v(" "),e.customMarkerSet||!e.standardMarkers?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[clickOutsideOptions]",arg:e.clickOutsideOptions}]},[t("Picklist",{attrs:{options:e.customMarkers,doDetach:!0,idKey:"itemValue",titleKey:"itemLabel",filterable:""},model:{value:e.marker.imgURL,callback:function(t){e.$set(e.marker,"imgURL",t)},expression:"marker.imgURL"}}),e._v(" "),t("div",{staticStyle:{"font-size":"8px","margin-top":"6px"}},[e._v("\n            "+e._s(e.$Labels.NearbyMaps_Add_Image_Markers)+"\n        ")])],1):e._e(),e._v(" "),e.showStandardMarkerOptions?t("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[clickOutsideOptions]",arg:e.clickOutsideOptions}],staticClass:"no-icon-dropdown"},[t("div",{staticClass:"slds-grid"},[t("div",{staticClass:"slds-col marker-type-container"},[t("fieldset",{staticClass:"slds-form-element"},[t("div",{staticClass:"slds-form-element__control"},[t("span",{staticClass:"slds-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.marker.type,expression:"marker.type"}],attrs:{id:"radioPin",type:"radio",value:"pin"},domProps:{checked:e._q(e.marker.type,"pin")},on:{change:function(t){return e.$set(e.marker,"type","pin")}}}),e._v(" "),t("label",{staticClass:"slds-radio__label",attrs:{for:"radioPin"}},[t("span",{staticClass:"slds-radio--faux"}),e._v(" "),t("img",{staticStyle:{width:"18px"},attrs:{src:e.$__svg("pin",e.marker.color)}})])]),e._v(" "),t("span",{staticClass:"slds-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.marker.type,expression:"marker.type"}],attrs:{id:"radioCircle",type:"radio",value:"circle"},domProps:{checked:e._q(e.marker.type,"circle")},on:{change:function(t){return e.$set(e.marker,"type","circle")}}}),e._v(" "),t("label",{staticClass:"slds-radio__label",attrs:{for:"radioCircle"}},[t("span",{staticClass:"slds-radio--faux"}),e._v(" "),t("img",{staticStyle:{width:"18px"},attrs:{src:e.$__svg("circle",e.marker.color)}})])]),e._v(" "),t("span",{staticClass:"slds-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.marker.type,expression:"marker.type"}],attrs:{id:"radioTriangle",type:"radio",value:"triangle"},domProps:{checked:e._q(e.marker.type,"triangle")},on:{change:function(t){return e.$set(e.marker,"type","triangle")}}}),e._v(" "),t("label",{staticClass:"slds-radio__label",attrs:{for:"radioTriangle"}},[t("span",{staticClass:"slds-radio--faux"}),e._v(" "),t("img",{staticStyle:{width:"18px"},attrs:{src:e.$__svg("triangle",e.marker.color)}})])]),e._v(" "),t("span",{staticClass:"slds-radio"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.marker.type,expression:"marker.type"}],attrs:{id:"radioSquare",type:"radio",value:"square"},domProps:{checked:e._q(e.marker.type,"square")},on:{change:function(t){return e.$set(e.marker,"type","square")}}}),e._v(" "),t("label",{staticClass:"slds-radio__label",attrs:{for:"radioSquare"}},[t("span",{staticClass:"slds-radio--faux"}),e._v(" "),t("img",{staticStyle:{width:"18px"},attrs:{src:e.$__svg("square",e.marker.color)}})])])])])]),e._v(" "),t("div",{staticClass:"marker-color-container"},[t("div",{staticClass:"slds-col"},[t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorRed"},on:{click:function(t){e.marker.color="#f44336"}}}),e._v(" "),t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorBlue"},on:{click:function(t){e.marker.color="#2196f3"}}}),e._v(" "),t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorWhite"},on:{click:function(t){e.marker.color="#fff"}}})]),e._v(" "),t("div",{staticClass:"slds-col"},[t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorOrange"},on:{click:function(t){e.marker.color="#ff9800"}}}),e._v(" "),t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorPurple"},on:{click:function(t){e.marker.color="#673ab7"}}}),e._v(" "),t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorBlack"},on:{click:function(t){e.marker.color="#000"}}})]),e._v(" "),t("div",{staticClass:"slds-col"},[t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorYellow"},on:{click:function(t){e.marker.color="#ffeb3b"}}}),e._v(" "),t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorBrown"},on:{click:function(t){e.marker.color="#795548"}}})]),e._v(" "),t("div",{staticClass:"slds-col"},[t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorGreen"},on:{click:function(t){e.marker.color="#4caf50"}}}),e._v(" "),t("div",{staticClass:"marker-legend-color",attrs:{id:"markerColorGray"},on:{click:function(t){e.marker.color="#9e9e9e"}}})])])])]):e._e()])}),[],!1,null,"0e801148",null).exports,TextInput:o.oi,Picklist:o.Gp,RadioButtonGroup:o.SY},inject:["getAllowableSObjects","getValidationMessages"],props:{layer:{type:Object,required:!0},validator:{type:Object,required:!0}},data(){return{layerShow:!0,geoFieldOptions:[{label:this.$Labels.MA_Location_Field,value:"location"},{label:this.$Labels.MA_Number_Field,value:"number"}],geoFieldVerifiedOptions:[{label:this.$Labels.MA_Location_Field,value:"verified-location"},{label:this.$Labels.MA_Number_Field,value:"verified-number"}]}},computed:{isGeoFieldTypeLocation(){return"location"===this.layer.geoFieldType},isGeoFieldTypeNumber(){return"number"===this.layer.geoFieldType},isVerifiedGeoFieldTypeLocation(){return"verified-location"===this.layer.verifiedGeoFieldType},isVerifiedGeoFieldTypeNumber(){return"verified-number"===this.layer.verifiedGeoFieldType}}},w=(0,C.Z)(M,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"slds-page-header slds-m-vertical_small"},[t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("button",{staticClass:"accordion slds-button slds-button--icon slds-m-right--x-small mm-layer-toggle",attrs:{"aria-controls":"tree0-node1",title:"Toggle"},on:{click:function(t){e.layerShow=!e.layerShow}}},[t("span",{staticClass:"ma-icon",class:e.layerShow?"ma-icon-chevrondown":"ma-icon-chevronright"}),e._v(" "),t("span",{staticClass:"slds-assistive-text"},[e._v(e._s(e.$Labels.MA_Toggle))])]),e._v(" "),t("TextInput",{attrs:{errors:e.getValidationMessages(e.validator.name),required:!0,labels:{name:e.$Labels.MA_Layer_Label,placeholder:e.$Labels.MA_Name_Layer}},on:{changed:e.validator.name.$touch},model:{value:e.layer.name,callback:function(t){e.$set(e.layer,"name",t)},expression:"layer.name"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.name.required,expression:"validator.$dirty && !validator.name.required"}],staticClass:"slds-form-element__error"},[e._v("\n                                "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                            ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.validator.name.maxLength,expression:"!validator.name.maxLength"}],staticClass:"slds-form-element__error"},[e._v("\n                                "+e._s(e.$Labels.MA_Max_Length_50)+"\n                            ")])])],2)],1)])])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.layerShow,expression:"layerShow"}]},[t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row slds-grid"},[t("div",{staticClass:"slds-form-element slds-col slds-size_1-of-2 slds-large-size_1-of-2"},[t("Picklist",{attrs:{options:e.getAllowableSObjects(),detach:!0,required:!0,errors:e.getValidationMessages(e.validator.sobject),labels:{name:e.$Labels.MA_OBJECT,search:e.$Labels.MA_Select_an_Option},idKey:"api",titleKey:"label",filterable:""},on:{changed:e.validator.sobject.$touch,"selected-option":e.$parent.onSObjectChange},model:{value:e.layer.sobject,callback:function(t){e.$set(e.layer,"sobject",t)},expression:"layer.sobject"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.sobject.required,expression:"validator.$dirty && !validator.sobject.required"}],staticClass:"slds-form-element__error"},[e._v("\n                                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                                ")])])],2)],1),e._v(" "),t("MarkerLegend",{attrs:{marker:e.layer.marker},on:{"update:marker":function(t){return e.$set(e.layer,"marker",t)}}})],1)])]),e._v(" "),t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row slds-grid"},[t("div",{staticClass:"slds-form-element slds-col slds-size_1-of-2 slds-large-size_1-of-2"},[t("RadioButtonGroup",{attrs:{options:e.geoFieldOptions,labels:{name:e.$Labels.MA_Plot_By}},model:{value:e.layer.geoFieldType,callback:function(t){e.$set(e.layer,"geoFieldType",t)},expression:"layer.geoFieldType"}})],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-col slds-size_1-of-2 slds-large-size_1-of-2"},[t("RadioButtonGroup",{attrs:{options:e.geoFieldVerifiedOptions,labels:{name:e.$Labels.NearbyMaps_Plot_By_Verified}},model:{value:e.layer.verifiedGeoFieldType,callback:function(t){e.$set(e.layer,"verifiedGeoFieldType",t)},expression:"layer.verifiedGeoFieldType"}})],1)])])]),e._v(" "),t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row slds-grid"},[e.isGeoFieldTypeLocation?t("div",{staticClass:"slds-form-element slds-col slds-size_1-of-2 slds-large-size_1-of-2"},[t("Picklist",{attrs:{options:e.layer.metadata.locationFields,detach:!0,required:!0,errors:e.getValidationMessages(e.validator.locationField),labels:{name:e.$Labels.MA_Location_Field},idKey:"api",titleKey:"label",filterable:""},on:{changed:e.validator.locationField.$touch},model:{value:e.layer.locationField,callback:function(t){e.$set(e.layer,"locationField",t)},expression:"layer.locationField"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.locationField.required,expression:"validator.$dirty && !validator.locationField.required"}],staticClass:"slds-form-element__error"},[e._v("\n                                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                                ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.locationField.notSameAsVerifiedLocation,expression:"validator.$dirty && !validator.locationField.notSameAsVerifiedLocation"}],staticClass:"slds-form-element__error"},[e._v("\n                                    "+e._s(e.$Labels.NearbyMaps_Location_Verified_Not_Same)+"\n                                ")])])],2)],1):e._e(),e._v(" "),e.isGeoFieldTypeNumber?t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("Picklist",{attrs:{options:e.layer.metadata.doubleFields,detach:!0,required:!0,errors:e.getValidationMessages(e.validator.latField),labels:{name:e.$Labels.MA_Latitude_Field},idKey:"api",titleKey:"label",filterable:""},on:{changed:e.validator.latField.$touch},model:{value:e.layer.latField,callback:function(t){e.$set(e.layer,"latField",t)},expression:"layer.latField"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.latField.required,expression:"validator.$dirty && !validator.latField.required"}],staticClass:"slds-form-element__error"},[e._v("\n                                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                                ")])])],2)],1):e._e(),e._v(" "),e.isGeoFieldTypeNumber?t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("Picklist",{attrs:{options:e.layer.metadata.doubleFields,detach:!0,required:!0,errors:e.getValidationMessages(e.validator.lngField),labels:{name:e.$Labels.MA_Longitude_Field},idKey:"api",titleKey:"label",filterable:""},on:{changed:e.validator.lngField.$touch},model:{value:e.layer.lngField,callback:function(t){e.$set(e.layer,"lngField",t)},expression:"layer.lngField"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.lngField.required,expression:"validator.$dirty && !validator.lngField.required"}],staticClass:"slds-form-element__error"},[e._v("\n                                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                                ")])])],2)],1):e._e(),e._v(" "),e.isVerifiedGeoFieldTypeLocation?t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("Picklist",{attrs:{options:e.layer.metadata.locationFields,detach:!0,labels:{name:e.$Labels.MA_Verified_Location_Field},idKey:"api",titleKey:"label",filterable:""},on:{changed:e.validator.locationField.$touch},model:{value:e.layer.verifiedLocationField,callback:function(t){e.$set(e.layer,"verifiedLocationField",t)},expression:"layer.verifiedLocationField"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.verifiedLocationField.notSameAsLocation,expression:"validator.$dirty && !validator.verifiedLocationField.notSameAsLocation"}],staticClass:"slds-form-element__error"},[e._v("\n                                    "+e._s(e.$Labels.NearbyMaps_Location_Verified_Not_Same)+"\n                                ")])])],2)],1):e._e(),e._v(" "),e.isVerifiedGeoFieldTypeNumber?t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("Picklist",{attrs:{options:e.layer.metadata.doubleFields,detach:!0,labels:{name:e.$Labels.MA_Verified_Latitude_Field},idKey:"api",titleKey:"label",filterable:""},model:{value:e.layer.verifiedLatField,callback:function(t){e.$set(e.layer,"verifiedLatField",t)},expression:"layer.verifiedLatField"}})],1):e._e(),e._v(" "),e.isVerifiedGeoFieldTypeNumber?t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("Picklist",{attrs:{options:e.layer.metadata.doubleFields,detach:!0,labels:{name:e.$Labels.MA_Verified_Longitude_Field},idKey:"api",titleKey:"label",filterable:""},model:{value:e.layer.verifiedLngField,callback:function(t){e.$set(e.layer,"verifiedLngField",t)},expression:"layer.verifiedLngField"}})],1):e._e()])])])])])}),[],!1,null,"d138e046",null).exports,S={components:{TextInput:o.oi},inject:["getValidationMessages"],props:{layer:{type:Object,required:!0},validator:{type:Object,required:!0}}},O=(0,C.Z)(S,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-form-element__row slds-wrap"},[t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("TextInput",{attrs:{errors:e.getValidationMessages(e.validator.center.lat),required:!0,labels:{name:e.$Labels.NearbyMaps_Map_Center_Latitude,placeholder:e.$Labels.MA_Latitude}},on:{changed:e.validator.center.lat.$touch},model:{value:e.layer.center.lat,callback:function(t){e.$set(e.layer.center,"lat",t)},expression:"layer.center.lat"}},[t("template",{slot:"errors"},[e.validator.center.lat.$dirty&&!e.validator.center.lat.required?t("div",{staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")]):e._e(),e._v(" "),e.validator.center.lat.latitude?e._e():t("div",{staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.NearbyMaps_Cant_Find_Lat)+"\n                ")])])],2)],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("TextInput",{attrs:{errors:e.getValidationMessages(e.validator.center.lng),required:!0,labels:{name:e.$Labels.NearbyMaps_Map_Center_Longitude,placeholder:e.$Labels.MA_Longitude}},on:{changed:e.validator.center.lng.$touch},model:{value:e.layer.center.lng,callback:function(t){e.$set(e.layer.center,"lng",t)},expression:"layer.center.lng"}},[t("template",{slot:"errors"},[e.validator.center.lng.$dirty&&!e.validator.center.lng.required?t("div",{staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")]):e._e(),e._v(" "),e.validator.center.lng.longitude?e._e():t("div",{staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.NearbyMaps_Cant_Find_Long)+"\n                ")])])],2)],1),e._v(" "),e._t("default")],2)}),[],!1,null,null,null).exports,q={components:{Picklist:o.Gp},inject:["getValidationMessages"],props:{layer:{type:Object,required:!0},validator:{type:Object,required:!0}},data(){return{levels:[{key:16,value:this.$Labels.MA_Street},{key:13,value:this.$Labels.MA_City},{key:10,value:this.$Labels.MA_State},{key:4,value:this.$Labels.MA_Country},{key:3,value:this.$Labels.MA_Continent}]}}},A=(0,C.Z)(q,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-form-element slds-size--1-of-2 zoom-form-element"},[t("Picklist",{attrs:{options:e.levels,detach:!0,required:!0,errors:e.getValidationMessages(e.validator.zoom),labels:{name:e.$Labels.NearbyMaps_Map_Zoom_Level},idKey:"key",titleKey:"value",filterable:""},on:{changed:e.validator.zoom.$touch},model:{value:e.layer.zoom,callback:function(t){e.$set(e.layer,"zoom",t)},expression:"layer.zoom"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.zoom.required,expression:"validator.$dirty && !validator.zoom.required"}],staticClass:"slds-form-element__error"},[e._v("\n                "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n            ")])])],2)],1)}),[],!1,null,null,null).exports,I={components:{Picklist:o.Gp},inject:["getValidationMessages"],props:{layer:{type:Object,required:!0},validator:{type:Object,required:!0}},data:()=>({options:[{key:5,value:"5"},{key:10,value:"10"},{key:15,value:"15"},{key:20,value:"20"},{key:25,value:"25"},{key:30,value:"30"},{key:35,value:"35"},{key:40,value:"40"},{key:45,value:"45"},{key:50,value:"50"}]})},V=(0,C.Z)(I,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("Picklist",{attrs:{options:e.options,detach:!0,required:!0,errors:e.getValidationMessages(e.validator.numMarkers),labels:{name:e.$Labels.MA_Num_of_Markers},idKey:"key",titleKey:"value",filterable:""},on:{changed:e.validator.numMarkers.$touch},model:{value:e.layer.numMarkers,callback:function(t){e.$set(e.layer,"numMarkers",t)},expression:"layer.numMarkers"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.validator.$dirty&&!e.validator.numMarkers.required,expression:"validator.$dirty && !validator.numMarkers.required"}],staticClass:"slds-form-element__error"},[e._v("\n                "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n            ")])])],2)],1)}),[],!1,null,null,null).exports;var N=a(381),j=a.n(N);const{Labels:T}=window.MASystem,G={};G.email=[{key:"equals",value:T.MA_Equals},{key:"not equal to",value:T.MA_Not_Equal},{key:"starts with",value:T.MA_Starts_With},{key:"contains",value:T.MA_Contains},{key:"does not contain",value:T.MA_Does_Not_Contain}],G.string=G.email,G.double=[{key:"equals",value:T.MA_Equals},{key:"not equal to",value:T.MA_Not_Equal},{key:"greater than",value:T.MA_Greater_Than},{key:"greater than or equal to",value:T.MA_Greater_Than_Equal},{key:"less than",value:T.MA_Less_Than},{key:"less than or equal to",value:T.MA_Less_Than_Equal}],G.integer=G.double,G.currency=G.double,G.int=G.double,G.picklist=[{key:"equals",value:T.MA_Equals},{key:"not equal to",value:T.MA_Not_Equal}],G.datetime=[{key:"equals",value:T.MA_Equals},{key:"not equal to",value:T.MA_Not_Equal},{key:"greater than",value:T.MA_Greater_Than},{key:"less than",value:T.MA_Less_Than}];const P={components:{DatePicker:o.Mt,TimePicker:o.jI,Picklist:o.Gp,TextInput:o.oi},inject:["getValidationMessages"],props:{filterFields:{type:Array,required:!0},init:{type:Object,default:()=>({})}},data:()=>({name:"",operator:"",componentValue:null,type:"",time:""}),computed:{value:{get(){if(!this.componentValue)return null;if("date"!==this.type&&"datetime"!==this.type)return this.componentValue;const e=j()(this.componentValue);if(this.time){const t=j()(this.time,"hh:mm a");e.set({hour:t.get("hour",""),minute:t.get("minute")})}return e},set(e){this.type&&("date"!==this.type&&"datetime"!==this.type?this.componentValue=e:e&&(this.time=j()(e).format("hh:mm a"),this.componentValue=j()(e)))}},activeFieldInfo(){return this.name?this.filterFields.find((e=>e.api===this.name)).additional||{}:""},operators(){return G[this.type]||[]},picklistValues(){return this.activeFieldInfo.picklistValues||[]},isPicklist(){return"picklist"===this.type},isDatetime(){return"datetime"===this.type}},watch:{activeFieldInfo(){this.type=this.activeFieldInfo.type,!this.value&&this.isDatetime&&(this.value=j()())}},validations:{name:{required:s.C1},operator:{required:s.C1},value:{required:s.C1}},created(){Object.assign(this.$data,this.init),this.isDatetime&&(this.value=this.value?j()(this.value):j()())},methods:{onFieldChange(){this.operator="",this.value="",this.$v.$reset()},remove(){this.$emit("remove",this)}}},D=(0,C.Z)(P,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-form-element__row slds-grid_vertical-align-center"},[t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("Picklist",{attrs:{options:e.filterFields,detach:!0,required:!0,errors:e.getValidationMessages(e.$v.name),labels:{name:e.$Labels.MA_Field},idKey:"api",titleKey:"label",filterable:""},on:{changed:e.$v.name.$touch,"selected-option":e.onFieldChange},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.$v.$dirty&&!e.$v.name.required,expression:"$v.$dirty && !$v.name.required"}],staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")])])],2)],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("Picklist",{attrs:{options:e.operators,detach:!0,required:!0,errors:e.getValidationMessages(e.$v.operator),labels:{name:e.$Labels.MA_OPERATOR},idKey:"key",titleKey:"value",filterable:""},on:{changed:e.$v.operator.$touch},model:{value:e.operator,callback:function(t){e.operator=t},expression:"operator"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.$v.$dirty&&!e.$v.operator.required,expression:"$v.$dirty && !$v.operator.required"}],staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")])])],2)],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-size--1-of-3"},[e.isPicklist?t("Picklist",{attrs:{options:e.picklistValues,detach:!0,required:!0,errors:e.getValidationMessages(e.$v.value),labels:{name:e.$Labels.MA_Value},idKey:"value",titleKey:"label",filterable:""},on:{changed:e.$v.value.$touch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.$v.$dirty&&!e.$v.value.required,expression:"$v.$dirty && !$v.value.required"}],staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")])])],2):"datetime"===e.type||"date"===e.type?t("div",[t("div",{staticClass:"slds-form-element__row"},[t("div",{staticClass:"slds-form-element slds-size_1-of-2"},[t("DatePicker",{attrs:{locale:e.$User.UserLocale,timezone:e.$User.timezoneId,dateFormat:e.$User.dateFormat.toUpperCase(),labels:{name:e.$Labels.MA_Date}},model:{value:e.componentValue,callback:function(t){e.componentValue=t},expression:"componentValue"}})],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-size_1-of-2"},[t("span",{staticClass:"slds-form-element__label"},[e._v("Â ")]),e._v(" "),"datetime"===e.type?t("TimePicker",{attrs:{combobox:"",start:e.time},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}):e._e()],1)])]):t("TextInput",{attrs:{errors:e.getValidationMessages(e.$v.value),required:!0,labels:{name:e.$Labels.MA_Value,placeholder:e.$Labels.MA_Enter_a_Value}},on:{changed:e.$v.value.$touch},model:{value:e.componentValue,callback:function(t){e.componentValue=t},expression:"componentValue"}},[t("template",{slot:"errors"},[e.$v.$dirty&&!e.$v.value.required?t("div",{staticClass:"slds-form-element__error"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")]):e._e()])],2)],1),e._v(" "),t("button",{staticClass:"slds-m-left_x-small slds-m-top_medium slds-button slds-button__icon slds-button__icon_large ma-icon ma-icon-close",attrs:{title:"Remove"},on:{click:e.remove}},[t("span",{staticClass:"slds-assistive-text"},[e._v(e._s(e.$Labels.MA_Remove))])])])}),[],!1,null,null,null).exports,z={components:{Picklist:o.Gp},props:{layer:{type:Object,required:!0}},computed:{dirOptions(){return[{key:"ASC",value:this.$Labels.MA_Ascending},{key:"DESC",value:this.$Labels.MA_Descending}]}}},R=(0,C.Z)(z,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("fieldset",{staticClass:"slds-form--compound"},[t("legend",{staticClass:"slds-form-element__legend slds-form-element__label"},[e._v("\n            "+e._s(e.$Labels.MA_Sort_Order)+"\n        ")]),e._v(" "),t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__control"},[t("div",{staticClass:"slds-form-element__row"},[t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("Picklist",{attrs:{options:e.layer.metadata.sortFields,detach:!0,labels:{name:e.$Labels.MA_Field},idKey:"api",titleKey:"label",filterable:""},model:{value:e.layer.sortField,callback:function(t){e.$set(e.layer,"sortField",t)},expression:"layer.sortField"}})],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-size--1-of-2"},[t("Picklist",{attrs:{options:e.dirOptions,detach:!0,labels:{name:e.$Labels.MA_Sort_By},idKey:"key",titleKey:"value",filterable:""},model:{value:e.layer.sortDirection,callback:function(t){e.$set(e.layer,"sortDirection",t)},expression:"layer.sortDirection"}})],1)])])])])])}),[],!1,null,"5c8889d5",null).exports,{MASystem:E}=window,U={components:{Picklist:o.Gp},mixins:[k.Z],props:{layer:{type:Object,required:!0}},data:()=>({tooltipBg:"~images/tooltip-preview-map.png",numTooltips:3,sitePrefix:E.MergeFields.SitePrefix,orgId:E.MergeFields.Organization_Id,nameField:""}),methods:{setNameField(e){this.layer.nameField=e.api}}},B=(0,C.Z)(U,(function(){var e=this,t=e._self._c;return t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("div",{staticClass:"slds-form-element slds-size--1-of-1"},[t("label",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.NearbyMaps_Pop_Up_Preview))]),e._v(" "),t("div",{staticClass:"tooltip-preview-wrapper"},[t("div",{staticClass:"tooltip-preview-container"},[t("div",{staticClass:"tooltip-box slds-card"},[t("div",{staticClass:"tooltip-header slds-page-header slds-has-bottom-magnet"},[1===e.layer.metadata.nameFields.length?t("h2",[t("span",[e._v("\n                                        "+e._s(e.layer.metadata.nameFields[0].label)+"\n                                    ")])]):e._e(),e._v(" "),e.layer.metadata.nameFields.length>1?t("Picklist",{attrs:{options:e.layer.metadata.nameFields,detach:!0,idKey:"api",titleKey:"label",labels:{name:e.$Labels.MA_Name_Field,placeholder:e.$Labels.MA_Select_an_Option}},on:{"selected-option":e.setNameField},model:{value:e.layer.nameField,callback:function(t){e.$set(e.layer,"nameField",t)},expression:"layer.nameField"}}):e._e()],1),e._v(" "),t("div",{staticClass:"tooltip-body slds-p-vertical_small"},e._l(e.numTooltips,(function(a){return t("div",{key:a,staticClass:"slds-form--inline slds-form-element__row slds-p-horizontal_small"},[t("Picklist",{attrs:{options:e.layer.metadata.tooltipFields,detach:!0,labels:{name:e.$Labels.MA_Field_With_Colon},idKey:"api",titleKey:"label",filterable:""},model:{value:e.layer.tooltips[a-1],callback:function(t){e.$set(e.layer.tooltips,a-1,t)},expression:"layer.tooltips[n - 1]"}})],1)})),0)]),e._v(" "),null==e.layer.marker.imgURL||null==e.layer.marker.imgURL||""===e.layer.marker.imgURL?t("img",{staticClass:"marker",attrs:{src:e.$__svg(e.layer.marker.type,e.layer.marker.color)}}):e._e(),e._v(" "),""!==e.layer.marker.imgURL?t("img",{staticClass:"marker",attrs:{src:e.sitePrefix+"/servlet/servlet.ImageServer?id="+e.layer.marker.imgURL+"&oid="+e.orgId}}):e._e()])])])])])])}),[],!1,null,"25062d48",null).exports;b().config.optionMergeStrategies.validations=function(e,t){return e?t?"function"==typeof e||"function"==typeof t?function(){let a=e,s=t;return"function"==typeof e&&(a=e.call(this)),"function"==typeof t&&(s=t.call(this)),b().config.optionMergeStrategies.computed(a,s)}:b().config.optionMergeStrategies.computed(e,t):e:t};const K={components:{Common:w,StaticLatLng:O,Zoom:A,NumMarkers:V,QueryFilter:D,Sort:R,Tooltips:B},props:{isLoading:{type:Boolean,required:!0},config:{type:Object,default:()=>{}}},data:()=>({type:"",name:"",sobject:"",marker:{type:"pin",color:"#f44336",imgURL:""},geoFieldType:"location",locationField:"",latField:"",lngField:"",verifiedGeoFieldType:"verified-location",verifiedLocationField:"",verifiedLatField:"",verifiedLngField:"",center:{lat:"",lng:"",type:"static"},radius:null,unit:"mi",numMarkers:10,zoom:13,queryFilters:[],queryFilterComponents:[],sortField:"",sortDirection:"",nameField:"",tooltips:[],metadata:{nameFields:[],doubleFields:[],sortFields:[],filterFields:[],locationFields:[],tooltipFields:[]}}),computed:{isContextLayer(){return d.og.GLOBAL.equals(this.type.name)||d.og.THIS.equals(this.type.name)},isNearbyLayer(){return d.og.NEARBY.equals(this.type.name)},disableAddFilterBtn(){return 3===this.queryFilterComponents.length}},watch:{geoFieldType(){this.$v.locationField.$reset(),this.$v.latField.$reset(),this.$v.lngField.$reset()},metadata:{handler(){1===this.metadata.nameFields.length&&(this.nameField=this.metadata.nameFields[0].api)},deep:!0,immediate:!0}},validations(){const e={name:{required:s.C1,maxLength:(0,s.BS)(50)},sobject:{required:s.C1},numMarkers:{required:s.C1},zoom:{required:s.C1},unit:{required:s.C1},locationField:{},verifiedLocationField:{},latField:{},lngField:{}};return"location"===this.$data.geoFieldType?(e.locationField={required:s.C1,notSameAsVerifiedLocation:(0,F.Z)((0,s.sH)("verifiedLocationField"))},e.verifiedLocationField={notSameAsLocation:(0,F.Z)((0,s.sH)("locationField"))}):(e.latField={required:s.C1},e.lngField={required:s.C1}),e},created(){this.config&&Object.keys(this.config).length&&(Object.assign(this.$data,this.config),this.loadFields(this.config.sobject).then((()=>{this.loadFilters()})))},methods:{aggregateData(){const e=this.$data;return e.queryFilters.length=0,this.queryFilterComponents.forEach((t=>{const a=this.$refs[t.id];if(!a.length)return;const s=a[0],r={};Object.keys(s.$data).forEach((e=>{r[e]=s.$data[e]})),e.queryFilters.push(r)})),e},blur(e){e.target.blur()},onSObjectChange(e){e&&this.resetMetadataDependentFields(),this.sobject&&this.loadFields(this.sobject)},async loadFields(e){try{this.$emit("update:isLoading",!0);const t=await f.Z.getSObjectInfoBySObjectName(e);Object.assign(this.metadata,t)}catch(e){this.$emit("error",e.message),console.error(e)}finally{this.$emit("update:isLoading",!1)}},loadFilters(){this.queryFilters.forEach((e=>{this.queryFilterComponents.push({id:(0,r.x$)(),init:e})}))},resetMetadataDependentFields(){this.geoFieldType="location",this.locationField="",this.latField="",this.lngField=""},addFilter(){this.queryFilterComponents.push({id:(0,r.x$)()})},removeFilter(e){this.queryFilterComponents.splice(e,1)}}},Z=(0,C.Z)(K,void 0,void 0,!1,null,null,null).exports,H={extends:Z,created(){this.type=d.og.GLOBAL},validations:{center:{lat:{required:s.C1,latitude:y},lng:{required:s.C1,longitude:g}}}},Q=(0,C.Z)(H,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"layer-wrapper-wizard slds-form_stacked"},[t("Common",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t},changed:e.onSObjectChange}}),e._v(" "),t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("StaticLatLng",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t}}},[t("Zoom",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)],1)]),e._v(" "),t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("NumMarkers",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)])]),e._v(" "),t("div",[t("fieldset",{staticClass:"slds-form--compound"},[t("legend",{staticClass:"slds-form-element__legend slds-form-element__label",attrs:{id:"selectLayerTitle"}},[e._v("\n                "+e._s(e.$Labels.MA_Query_Filters)+"\n            ")]),e._v(" "),t("div",{staticClass:"slds-form-element__control"},[e._l(e.queryFilterComponents,(function(a,s){return t("QueryFilter",{key:a.id,ref:a.id,refInFor:!0,attrs:{filterFields:e.metadata.filterFields,init:a.init},on:{remove:function(t){return e.removeFilter(s)}}})})),e._v(" "),t("button",{staticClass:"slds-button slds-button--neutral",attrs:{disabled:e.disableAddFilterBtn},on:{click:e.addFilter}},[e._v("\n                    "+e._s(e.$Labels.MA_Add_Filter)+"\n                ")])],2)])]),e._v(" "),t("Sort",{attrs:{layer:e.$data},on:{"update:layer":function(t){e.$data=t}}}),e._v(" "),t("Tooltips",{attrs:{layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)}),[],!1,null,null,null).exports,W={components:{RadioButtonGroup:o.SY},extends:Z,data(){return{centerOptions:[{label:this.$Labels.NearbyMaps_Current_Record,value:"field"},{label:this.$Labels.MA_Static_Lat_Lng,value:"static"}]}},watcher:{metadata:{handler(){1===this.metadata.nameFields.length&&(this.nameField=this.metadata.nameFields[0].api)},deep:!0,immediate:!0}},computed:{isStaticCenter(){return"static"===this.center.type}},created(){this.type=d.og.THIS},validations(){return this.isStaticCenter?{center:{lat:{latitude:y,required:s.C1},lng:{longitude:g,required:s.C1}}}:{center:{lat:{},lng:{}}}},methods:{aggregateData(){return this.$data}}},Y=(0,C.Z)(W,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"layer-wrapper-wizard slds-form_stacked"},[t("Common",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t},changed:e.onSObjectChange}}),e._v(" "),t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("RadioButtonGroup",{staticClass:"slds-size--1-of-2",attrs:{options:e.centerOptions,labels:{name:e.$Labels.MA_Map_Center}},model:{value:e.center.type,callback:function(t){e.$set(e.center,"type",t)},expression:"center.type"}}),e._v(" "),t("Zoom",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)])]),e._v(" "),t("fieldset",{directives:[{name:"show",rawName:"v-show",value:e.isStaticCenter,expression:"isStaticCenter"}],staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("StaticLatLng",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)])]),e._v(" "),t("Tooltips",{attrs:{layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)}),[],!1,null,"70c1fa70",null).exports,X={components:{TextInput:o.oi,Picklist:o.Gp},extends:Z,inject:["getValidationMessages"],computed:{units(){return[{key:"mi",value:this.$Labels.Routes_Miles},{key:"km",value:this.$Labels.Routes_Kilometers}]}},created(){this.type=d.og.NEARBY},validations(){const e={center:{lat:{},lng:{}},radius:{required:s.C1,decimal:_,between:(0,s.vX)(1,3e3)}};return this.isStaticCenter&&(e.center={lat:{required:s.C1,latitude:y},lng:{required:s.C1,longitude:g}}),e}},J=(0,C.Z)(X,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"layer-wrapper-wizard slds-form_stacked"},[t("Common",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t},changed:e.onSObjectChange}}),e._v(" "),t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("TextInput",{attrs:{errors:e.getValidationMessages(e.$v.radius),required:!0,labels:{name:e.$Labels.MA_Radius,placeholder:e.$Labels.MA_Radius}},on:{changed:e.$v.radius.$touch},model:{value:e.radius,callback:function(t){e.radius=t},expression:"radius"}},[t("template",{slot:"errors"},[e.$v.radius.$dirty&&!e.$v.radius.required?t("div",{staticClass:"slds-form-element__error"},[e._v("\n                                "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                            ")]):e._e(),e._v(" "),e.$v.radius.between&&e.$v.radius.decimal?e._e():t("div",{staticClass:"slds-form-element__error"},[e._v("\n                                "+e._s(e.$Labels.NearbyMaps_Enter_Number_One_To_Three_Thousand)+"\n                            ")])])],2)],1),e._v(" "),t("div",{staticClass:"slds-form-element slds-size--1-of-4"},[t("span",{staticClass:"slds-form-element__label"},[e._v("Â ")]),e._v(" "),t("Picklist",{attrs:{options:e.units,detach:!0,required:!0,errors:e.getValidationMessages(e.$v.unit),idKey:"key",titleKey:"value",filterable:""},on:{changed:e.$v.unit.$touch},model:{value:e.unit,callback:function(t){e.unit=t},expression:"unit"}},[t("template",{slot:"errors"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.$v.$dirty&&!e.$v.unit.required,expression:"$v.$dirty && !$v.unit.required"}],staticClass:"slds-form-element__error"},[e._v("\n                                "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                            ")])])],2)],1),e._v(" "),t("NumMarkers",{attrs:{validator:e.$v,layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)])]),e._v(" "),t("div",[t("fieldset",{staticClass:"slds-form--compound"},[t("legend",{staticClass:"slds-form-element__legend slds-form-element__label",attrs:{id:"selectLayerTitle"}},[e._v("\n                "+e._s(e.$Labels.MA_Query_Filters)+"\n            ")]),e._v(" "),t("div",{staticClass:"slds-form-element__control"},[e._l(e.queryFilterComponents,(function(a,s){return t("QueryFilter",{key:a.id,ref:a.id,refInFor:!0,attrs:{filterFields:e.metadata.filterFields,init:a.init},on:{remove:function(t){return e.removeFilter(s)}}})})),e._v(" "),t("button",{staticClass:"slds-button slds-button--neutral",attrs:{disabled:e.disableAddFilterBtn},on:{click:e.addFilter}},[e._v("\n                    "+e._s(e.$Labels.MA_Add_Filter)+"\n                ")])],2)])]),e._v(" "),t("Sort",{attrs:{layer:e.$data},on:{"update:layer":function(t){e.$data=t}}}),e._v(" "),t("Tooltips",{attrs:{layer:e.$data},on:{"update:layer":function(t){e.$data=t}}})],1)}),[],!1,null,null,null).exports,ee={components:{CreateWizard:()=>({...(0,n.YH)(),component:a.e(1214).then(a.bind(a,4019))}),TextInput:o.oi,Modal:o.u_,Toasts:o.F1,Spinner:o.$j},provide(){return{getAllowableSObjects:()=>this.allowableSObjects,getValidationMessages:this.getValidationMessages}},props:{config:{type:Object,default:()=>{}}},data:function(){return{isLoading:!1,mode:null,record:{Id:null,Name:"",maps__Name__c:"",maps__Active__c:!0,maps__Is_Custom__c:!0,maps__Options__c:"",maps__Object__c:""},layers:[],allowableSObjects:[],renderModal:!1,toasts:[]}},computed:{title(){switch(this.mode){case d.fO.EDIT:return this.$Labels.NearbyMaps_Edit_Nearby_Map;case d.fO.CREATE:default:return this.$Labels.NearbyMaps_Create_Nearby_Map}},showCreateWizard(){return d.fO.CREATE.equals(this.mode)}},validations:{record:{Name:{required:s.C1,maxLength:(0,s.BS)(50)}}},watch:{"record.Name":{handler(e){this.record.maps__Name__c=e}}},created(){this.$bus.$on("render-nearby-modal",(e=>{this.renderModal=!0,this.mode=e?d.fO.EDIT:d.fO.CREATE,this.loadSObjects().then((()=>{if(e){const t=l()(e);this.init(t)}}))}))},destroyed(){this.$bus.$off("render-nearby-modal")},methods:{close(){this.renderModal=!1,this.$refs=[],Object.assign(this.$data,{isLoading:!1,mode:null,record:{Id:null,Name:"",maps__Name__c:"",maps__Active__c:!0,maps__Is_Custom__c:!0,maps__Options__c:"",maps__Object__c:""},layers:[],allowableSObjects:[],renderModal:!1,toasts:[]}),this.$v.$reset()},getValidationMessages:(0,n.ed)({required:window.MASystem.Labels.MA_Field_Req,maxLength:window.MASystem.Labels.MA_Max_Length_80}),setError(e){console.log(e),this.toasts.push({message:e,state:"error"})},selected(e){this.layers.length=0,this.type=e,d.og.GLOBAL.equals(e)?this.layers.push({id:(0,r.x$)(),type:Q}):d.og.THIS.equals(e)&&(this.layers.push({id:(0,r.x$)(),type:Y}),this.layers.push({id:(0,r.x$)(),type:J}))},init(e){const{record:t={},options:{config:a={}}}=e;let s;Object.assign(this.record,t),m.isLegacyConfig(e.options.config)&&(e.options.config=m.convertLegacyConfig(e.options)),d.og.GLOBAL.equalsByOrdinal(a.context.type)||d.og.GLOBAL.equalsByOrdinal(a.context.type.ordinal)?s=Q:(d.og.THIS.equalsByOrdinal(a.context.type)||d.og.THIS.equalsByOrdinal(a.context.type.ordinal))&&(s=Y),this.layers.push({id:(0,r.x$)(),type:s,config:a.context}),a.layers.forEach((e=>{(d.og.NEARBY.equalsByOrdinal(e.type.ordinal)||d.og.NEARBY.equalsByOrdinal(e.type))&&this.layers.push({id:(0,r.x$)(),type:J,config:e})}))},async loadSObjects(){this.isLoading=!0;try{this.allowableSObjects=await f.Z.getAllowableSObjects()}catch(e){this.setError(e.message)}finally{this.isLoading=!1}},async save(){const e=this;try{if(!e.isDataValidForUpsert())return void e.setError(this.$Labels.Routes_Settings_Fix_Validation_Issues);e.isLoading=!0;const t=new m;Object.values(e.$refs).forEach((a=>{const s=a[0],r=s.aggregateData();s.isContextLayer?(t.addContext(r),e.record.maps__Object__c=r.sobject):s.isNearbyLayer&&t.addNearby(r)}));const a=t.toMiniMapForm();e.record.maps__Options__c=JSON.stringify(a).toString();const s=await f.Z.save(e.record);s.upsertResult&&s.upsertResult.success?(e.$bus.$emit("refresh-custom-nearby-configs"),e.close()):(console.log(s.error),e.setError(s.error))}catch(t){e.setError("An error occurred while saving the Nearby Map configuration."),console.error(t)}finally{e.isLoading=!1}},isDataValidForUpsert(){let e=!0;const t=a=>{Object.keys(a).length&&Object.values(a).forEach((a=>{a[0]&&a.length&&a[0].$v&&(t(a[0].$refs),a[0].$v.$touch(),a[0].$v.$invalid&&(e=!1))}))};return t(this.$refs),this.$v.$touch(),this.$v.$invalid&&(e=!1),e}}},te=(0,C.Z)(ee,(function(){var e=this,t=e._self._c;return e.renderModal?t("Modal",{attrs:{id:"mm-modal",doDetach:!0,isLarge:!0,title:e.title,footless:e.isLoading},on:{close:e.close}},[t("div",{attrs:{slot:"content"},slot:"content"},[e.isLoading?t("Spinner"):e._e(),e._v(" "),t("Toasts",{attrs:{toasts:e.toasts}}),e._v(" "),t("div",{staticClass:"mm-name-container slds-p-bottom_small"},[t("fieldset",{staticClass:"slds-form--compound"},[t("div",{staticClass:"slds-form-element__group"},[t("div",{staticClass:"slds-form-element__row"},[t("div",{staticClass:"slds-form-element slds-size_1-of-2"},[t("TextInput",{attrs:{required:!0,errors:e.getValidationMessages(e.$v.record.Name),labels:{name:e.$Labels.NearbyMaps_Nearby_Map_Name,placeholder:e.$Labels.NearbyMaps_Name_Your_Nearby_Map}},on:{blur:e.$v.record.Name.$touch},model:{value:e.record.Name,callback:function(t){e.$set(e.record,"Name",t)},expression:"record.Name"}})],1)])])])]),e._v(" "),e.showCreateWizard?t("CreateWizard",{on:{selected:e.selected}}):e._e(),e._v(" "),e._l(e.layers,(function(a){return t(a.type,{key:a.id,ref:a.id,refInFor:!0,tag:"component",attrs:{isLoading:e.isLoading,config:a.config},on:{"update:isLoading":function(t){e.isLoading=t},"update:is-loading":function(t){e.isLoading=t},error:e.setError}})}))],2),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.MA_Cancel)+"\n        ")]),e._v(" "),t("button",{staticClass:"slds-button slds-button_brand",on:{click:e.save}},[e._v("\n            "+e._s(e.$Labels.MA_Save)+"\n        ")])])]):e._e()}),[],!1,null,"b12d44be",null).exports},6408:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("alpha",/^[a-zA-Z]*$/);t.default=s},6195:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("alphaNum",/^[a-zA-Z0-9]*$/);t.default=s},5573:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.withParams)({type:"and"},(function(){for(var e=this,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.length>0&&t.reduce((function(t,a){return t&&a.apply(e,s)}),!0)}))}},70:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e,t){return(0,s.withParams)({type:"between",min:e,max:t},(function(a){return!(0,s.req)(a)||(!/\s/.test(a)||a instanceof Date)&&+e<=+a&&+t>=+a}))}},6681:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.req=t.regex=t.ref=t.len=void 0,Object.defineProperty(t,"withParams",{enumerable:!0,get:function(){return r.default}});var s,r=(s=a(8085))&&s.__esModule?s:{default:s};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var l=function(e){if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===i(e)){for(var t in e)return!0;return!1}return!!String(e).length};t.req=l,t.len=function(e){return Array.isArray(e)?e.length:"object"===i(e)?Object.keys(e).length:String(e).length},t.ref=function(e,t,a){return"function"==typeof e?e.call(t,a):a[e]},t.regex=function(e,t){return(0,r.default)({type:e},(function(e){return!l(e)||t.test(e)}))}},4078:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("decimal",/^[-]?\d*(\.\d+)?$/);t.default=s},8107:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("email",/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i);t.default=s},379:(e,t,a)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"vX",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"BS",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"C1",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"sH",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"HQ",{enumerable:!0,get:function(){return n.default}});c(a(6408)),c(a(6195)),c(a(5669));var r=c(a(70)),i=(c(a(8107)),c(a(9103)),c(a(7340)),c(a(5287))),l=(c(a(3091)),c(a(2419))),o=(c(a(2941)),c(a(8300)),c(a(918))),n=c(a(3213));c(a(5832)),c(a(5573)),c(a(2500)),c(a(2628)),c(a(301)),c(a(6673)),c(a(4078));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}!function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var o=i?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}r.default=e,a&&a.set(e,r)}(a(6681))},6673:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("integer",/(^[0-9]*$)|(^-[0-9]+$)/);t.default=s},9103:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681),r=(0,s.withParams)({type:"ipAddress"},(function(e){if(!(0,s.req)(e))return!0;if("string"!=typeof e)return!1;var t=e.split(".");return 4===t.length&&t.every(i)}));t.default=r;var i=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var t=0|+e;return t>=0&&t<=255}},7340:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,s.withParams)({type:"macAddress"},(function(t){if(!(0,s.req)(t))return!0;if("string"!=typeof t)return!1;var a="string"==typeof e&&""!==e?t.split(e):12===t.length||16===t.length?t.match(/.{2}/g):null;return null!==a&&(6===a.length||8===a.length)&&a.every(r)}))};var r=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)}},5287:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"maxLength",max:e},(function(t){return!(0,s.req)(t)||(0,s.len)(t)<=e}))}},301:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"maxValue",max:e},(function(t){return!(0,s.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e}))}},3091:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"minLength",min:e},(function(t){return!(0,s.req)(t)||(0,s.len)(t)>=e}))}},2628:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"minValue",min:e},(function(t){return!(0,s.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e}))}},2500:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"not"},(function(t,a){return!(0,s.req)(t)||!e.call(this,t,a)}))}},5669:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("numeric",/^[0-9]*$/);t.default=s},5832:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.withParams)({type:"or"},(function(){for(var e=this,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.length>0&&t.reduce((function(t,a){return t||a.apply(e,s)}),!1)}))}},2419:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681),r=(0,s.withParams)({type:"required"},(function(e){return"string"==typeof e?(0,s.req)(e.trim()):(0,s.req)(e)}));t.default=r},2941:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"requiredIf",prop:e},(function(t,a){return!(0,s.ref)(e,this,a)||(0,s.req)(t)}))}},8300:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"requiredUnless",prop:e},(function(t,a){return!!(0,s.ref)(e,this,a)||(0,s.req)(t)}))}},918:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(6681);t.default=function(e){return(0,s.withParams)({type:"sameAs",eq:e},(function(t,a){return t===(0,s.ref)(e,this,a)}))}},3213:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=(0,a(6681).regex)("url",/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i);t.default=s},8085:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(16).R;t.default=s},16:(e,t,a)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}t.R=void 0;var r="undefined"!=typeof window?window:void 0!==a.g?a.g:{},i=r.vuelidate?r.vuelidate.withParams:function(e,t){return"object"===s(e)&&void 0!==t?t:e((function(){}))};t.R=i}}]);
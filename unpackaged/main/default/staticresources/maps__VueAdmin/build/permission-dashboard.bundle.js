"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[7718],{9287:(s,t,e)=>{e.r(t),e.d(t,{default:()=>n});var i=e(5908),a=e(3088),o=e(2646);const{MAToastMessages:l}=window,r={components:{ActionMenu:o.PC,ActionMenuItem:o.F9,Modal:o.u_,Spinner:o.$j},data:()=>({isLoading:!1}),computed:{...(0,i.mapState)({store__toggle:"toggle",store__settingsGroup:"settingsGroup",store__config:"config"}),filteredGroups(){let s=this.store__config.groups;return this.store__config.filterTerm&&(s=this.store__config.groups.filter((s=>s.Name.toLowerCase().includes(this.store__config.filterTerm.toLowerCase())))),s}},async created(){await this.getAllSettingsGroups();const s=(0,a.Qb)();s.recordId&&this.$parent.populatePermissionGroup(s.recordId,"edit")},methods:{...(0,i.mapMutations)({store__setSettingsGroup:"setSettingsGroup"}),async getAllSettingsGroups(){this.isLoading=!0;try{const{groups:s,success:t,error:e,securityError:i}=await this.$remote("maps.UserAJAXResources.GetAllSettingsGroups",[]);t?(i&&l.showWarning({message:e,timeOut:6e3}),this.store__config.groups=s.map((s=>({...s,LastModifiedDate:this.$moment(s.LastModifiedDate).format("MMMM Do, YYYY"),Id:s.Id?s.Id:"defaultSettings"})))):i?l.showError({message:e,timeOut:6e3}):(l.showError({message:this.$Labels.Permission_Group_Getting_Group_Fails,timeOut:6e3}),console.error(e))}catch(s){l.showError({message:this.$Labels.Permission_Group_Something_Went_Wrong,timeOut:6e3}),console.error(s)}finally{this.isLoading=!1}},openDeletePermissionModal(s){this.store__config.groupIdToDelete=s,this.store__config.showDeleteWarning=!0},closeDeletePermissionModal(){this.store__config.showDeleteWarning=!1,this.store__config.groupIdToDelete=null},async deletePermissionGroup(s){this.isLoading=!0;try{const{success:t,error:e}=await this.$remote("maps.UserAJAXResources.DeleteSettingsGroup",[s]);t?(l.showSuccess({message:this.$Labels.Permission_Group_Deleted,timeOut:6e3}),await this.getAllSettingsGroups()):(l.showError({message:this.$Labels.Permission_Group_Cant_Delete_Permission_Group,timeOut:6e3}),console.error(e))}catch(s){l.showError({message:this.$Labels.Permission_Group_Something_Went_Wrong,timeOut:6e3}),console.error(s)}finally{this.store__toggle.showPermissionGroupView=!1,this.isLoading=!1,this.store__config.showDeleteWarning=!1,this.store__config.groupIdToDelete=null}}}},n=(0,e(1900).Z)(r,(function(){var s=this,t=s._self._c;return t("div",[s.store__config.showDeleteWarning?t("Modal",{attrs:{title:s.$Labels.Permission_Group_Delete_Warning_Modal_Header,doDetach:!0,hideCloseButton:!0,closeLabel:""},on:{close:s.closeDeletePermissionModal}},[t("div",{staticClass:"slds-text-body_regular slds-var-p-around_small",attrs:{slot:"content"},slot:"content"},[t("p",[s._v(s._s(s.$Labels.Permission_Group_Delete_Warning_Modal_are_you_sure))]),s._v(" "),t("br"),s._v(" "),t("p",[s._v(s._s(s.$Labels.Permission_Group_Delete_Warning_Modal_details))]),s._v(" "),t("br"),s._v(" "),t("p",[s._v(s._s(s.$Labels.Permission_Group_Delete_Warning_Modal_details_about_user))])]),s._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"slds-button slds-button_neutral",on:{click:s.closeDeletePermissionModal}},[s._v("\n                "+s._s(s.$Labels.MA_Cancel)+"\n            ")]),s._v(" "),t("button",{staticClass:"slds-button slds-button_destructive",on:{click:function(t){return s.deletePermissionGroup(s.store__config.groupIdToDelete)}}},[s._v("\n                "+s._s(s.$Labels.MA_Delete)+"\n            ")])])]):s._e(),s._v(" "),t("div",{staticClass:"slds-card slds-grid slds-grid_vertical"},[t("Spinner",{directives:[{name:"show",rawName:"v-show",value:s.isLoading,expression:"isLoading"}]}),s._v(" "),t("div",{staticClass:"slds-grid"},[t("table",{staticClass:"slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols",attrs:{role:"grid"}},[t("thead",[t("tr",{staticClass:"slds-line-height_reset"},[t("th",{staticClass:"slds-text-align_right",staticStyle:{width:"3.25rem"},attrs:{scope:"col"}}),s._v(" "),t("th",{attrs:{"aria-label":s.$Labels.Permission_Group_All_Permission_Groups,"aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:s.$Labels.Permission_Group}},[s._v(" "+s._s(s.$Labels.Permission_Group))]),s._v(" "),t("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),t("th",{attrs:{"aria-label":s.$Labels.MA_Description,"aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:s.$Labels.MA_Description}},[s._v(" "+s._s(s.$Labels.MA_Description)+" ")]),s._v(" "),t("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),t("th",{attrs:{"aria-label":s.$Labels.Created_By,"aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:s.$Labels.Created_By}},[s._v(" "+s._s(s.$Labels.Created_By)+" ")]),s._v(" "),t("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),t("th",{attrs:{"aria-label":s.$Labels.MA_Last_Modified,"aria-sort":"none",scope:"col"}},[t("a",{staticClass:"slds-th__action slds-text-link_reset",attrs:{href:"javascript:void(0);",role:"button",tabindex:"-1"}},[t("span",{staticClass:"slds-assistive-text"},[s._v(" "+s._s(s.$Labels.MA_Sort_By)+" ")]),s._v(" "),t("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},[t("span",{staticClass:"slds-truncate",attrs:{title:s.$Labels.MA_Last_Modified}},[s._v(" "+s._s(s.$Labels.MA_Last_Modified))]),s._v(" "),t("Icon",{staticClass:"slds-icon_container slds-icon-utility-arrowdown",attrs:{category:"utility",name:"arrowdown",iconClass:["slds-icon","slds-icon-text-default","slds-is-sortable__icon"]}})],1)])]),s._v(" "),t("th",{staticStyle:{width:"3.25rem"},attrs:{scope:"col"}},[t("div",{staticClass:"slds-truncate slds-assistive-text",attrs:{title:s.$Labels.MA_Actions}},[s._v("\n                                "+s._s(s.$Labels.MA_Actions)+"\n                            ")])])])]),s._v(" "),t("tbody",s._l(s.filteredGroups,(function(e,i){return t("tr",{key:i,staticClass:"slds-hint-parent"},[t("td",{staticClass:"slds-text-align_right",attrs:{role:"gridcell"}}),s._v(" "),t("th",{attrs:{scope:"row",tabindex:"0"}},[t("div",{staticClass:"slds-truncate"},[t("a",{attrs:{href:"javascript:void(0);",tabindex:"-1"},on:{click:function(t){return s.$parent.populatePermissionGroup(e.Id,"edit")}}},[s._v(s._s(e.Name))])])]),s._v(" "),t("td",{attrs:{role:"gridcell"}},[t("div",{staticClass:"slds-truncate"},[s._v("\n                                "+s._s(e.maps__Description__c)+"\n                            ")])]),s._v(" "),t("td",{attrs:{role:"gridcell"}},[t("div",{staticClass:"slds-truncate"},[s._v("\n                                "+s._s(e.CreatedBy?e.CreatedBy.Name:s.$Labels.MapsSetting_System)+"\n                            ")])]),s._v(" "),t("td",{attrs:{role:"gridcell"}},[t("div",{staticClass:"slds-truncate"},[s._v("\n                                "+s._s(e.LastModifiedBy?e.LastModifiedBy.Name:"")+" - "+s._s(e.LastModifiedBy?e.LastModifiedDate:"")+"\n                            ")])]),s._v(" "),t("td",{attrs:{role:"gridcell"}},[t("ActionMenu",[t("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small",attrs:{slot:"button"},slot:"button"},[t("span",{staticClass:"slds-button__icon ma-icon ma-icon-down"})]),s._v(" "),"Default"!==e.Name&&e.Name!==s.$Labels.MA_DEFAULT&&s.store__settingsGroup.Name!==s.$Labels.MA_DEFAULT||"defaultSettings"!==e.Id?t("ActionMenuItem",{attrs:{label:s.$Labels.MA_Edit},on:{click:function(t){s.store__toggle.readOnlyMode=!1,s.$parent.populatePermissionGroup(e.Id,"edit")}}}):s._e(),s._v(" "),t("ActionMenuItem",{attrs:{label:s.$Labels.MA_Clone},on:{click:function(t){return s.$parent.populatePermissionGroup(e.Id,"clone")}}}),s._v(" "),"Default"!==e.Name&&e.Name!==s.$Labels.MA_DEFAULT&&s.store__settingsGroup.Name!==s.$Labels.MA_DEFAULT||"defaultSettings"!==e.Id?t("ActionMenuItem",{attrs:{label:s.$Labels.MA_Delete},on:{click:function(t){return s.openDeletePermissionModal(e.Id)}}}):s._e()],1)],1)])})),0)])])],1)],1)}),[],!1,null,null,null).exports}}]);
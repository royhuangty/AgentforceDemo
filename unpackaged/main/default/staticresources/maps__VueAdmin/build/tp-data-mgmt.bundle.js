"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[5977],{1344:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var a=s(2646),i=s(5658),n=s(3088);const _={components:{Checkbox:a.XZ,ProgressRing:a.eL,Picklist:a.Gp,Spinner:a.$j,Tooltip:a.u,TextInput:a.oi},data:()=>({isLoading:!0,settings:[{sobjectType:"maps__MapsSetting__c",Name:"Asynchronous Data Set Creation",maps__Value__c:!0},{sobjectType:"maps__MapsSetting__c",Name:"Select unassigned by default",maps__Value__c:!0},{sobjectType:"maps__MapsSetting__c",Name:"Skip Recycle Bin",maps__Value__c:!1},{sobjectType:"maps__MapsSetting__c",Name:"Use Bulk API",maps__Value__c:!1},{sobjectType:"maps__MapsSetting__c",Name:"String Matching for Boundaries",maps__Value__c:!1},{sobjectType:"maps__MapsSetting__c",Name:"Base62PKChunking",maps__Value__c:!0},{sobjectType:"maps__MapsSetting__c",Name:"ParallelWriting",maps__Value__c:!0},{sobjectType:"maps__MapsSetting__c",Name:"ParallelWritingBatchSize",maps__Value__c:200},{sobjectType:"maps__MapsSetting__c",Name:"BasicUnitChunkSize",maps__Value__c:1e4},{sobjectType:"maps__MapsSetting__c",Name:"ExtendedUnitChunkSize",maps__Value__c:5e3},{sobjectType:"maps__MapsSetting__c",Name:"TP_Approver_BatchSize",maps__Value__c:25e3},{sobjectType:"maps__MapsSetting__c",Name:"Include aliases on user search",maps__Value__c:!1}],asyncDataSetCreation:!0,currentCleanupJob:null,basicUnitsErrors:[],extendedUnitsErrors:[],readBasicBatchSizeOptions:[500,1e3,2e3,5e3,1e4,15e3],readExtendedBatchSizeOptions:[500,1e3,2e3,5e3,1e4],writeBatchSizeOptions:[50,100,200,500],tpApprovalBatchSizeOptions:[1e3,5e3,1e4,25e3,5e4]}),computed:{cleanupJobLabelFormat(){return(0,i.N4)(this.$Labels.TPSettings_Admin_Settings_Cleanup_Job_Status,[this.currentCleanupJob.JobItemsProcessed,this.currentCleanupJob.JobItemsProcessed,this.currentCleanupJob.TotalJobItems])}},async mounted(){this.cleanupDataClick();let e=await(0,n.wX)("maps.TPRemoteActions.GetSettings",[["Asynchronous Data Set Creation","Skip Recycle Bin","Use Bulk API","String Matching for Boundaries","Base62PKChunking","BasicUnitChunkSize","ExtendedUnitChunkSize","ParallelWriting","ParallelWritingBatchSize","TP_Approver_BatchSize","Select unassigned by default","Include aliases on user search"]]);this.settings.forEach((t=>{const s=e.data.find((e=>e.Name===t.Name));s&&(t.Id=s.Id,["ExtendedUnitChunkSize","BasicUnitChunkSize","ParallelWritingBatchSize","TP_Approver_BatchSize"].includes(t.Name)?(t.maps__Value__c=+s.maps__Value__c,"BasicUnitChunkSize"!==t.Name||this.readBasicBatchSizeOptions.includes(t.maps__Value__c)||this.readBasicBatchSizeOptions.push(t.maps__Value__c),"ExtendedUnitChunkSize"!==t.Name||this.readExtendedBatchSizeOptions.includes(t.maps__Value__c)||this.readExtendedBatchSizeOptions.push(t.maps__Value__c)):t.maps__Value__c="true"===s.maps__Value__c)})),this.isLoading=!1},methods:{async saveBatchSizeOptions(){this.basicUnitsErrors=[],this.extendedUnitsErrors=[],["BasicUnitChunkSize","ExtendedUnitChunkSize"].forEach((e=>{const t=[];let s=JSON.parse(JSON.stringify(this.settings.find((t=>t.Name===e))));if(Number.isInteger(+s.maps__Value__c)){const e=parseInt(s.maps__Value__c);(e<500||e>5e4)&&t.push(this.$Labels.TPSettings_Admin_Settings_Error_Outside_Range)}else t.push(this.$Labels.TPSettings_Admin_Settings_Error_NonInteger_Value);"BasicUnitChunkSize"===e&&(this.basicUnitsErrors=t),"ExtendedUnitChunkSize"===e&&(this.extendedUnitsErrors=t)})),this.basicUnitsErrors.length>0||this.extendedUnitsErrors.length>0||(this.handleOptionClick("BasicUnitChunkSize",this.$Labels.TPSettings_Admin_Settings_Input_Batch_Size),this.handleOptionClick("ExtendedUnitChunkSize",this.$Labels.TPSettings_Admin_Settings_Input_Field_Batch_Size))},async handleOptionClick(e,t){const s=JSON.parse(JSON.stringify(this.settings.find((t=>t.Name===e))));s.maps__Value__c=`${s.maps__Value__c}`;const a=s.Id?"Update":"Insert",_=await(0,n.wX)(`maps.TPRemoteActions.${a}ObjectBatch`,[[s],!0,""]);this.settings.find((t=>t.Name===e)).Id=_.data[0].Id,this.$root.$emit("toast",{message:(0,i.N4)(this.$Labels.TPSettings_Admin_Setting_Updated,[t]),state:"success",duration:8e3})},async cleanupDataClick(e){this.currentCleanupJob=this.currentCleanupJob||"Loading",this.currentCleanupJob=(await(0,n.wX)("maps.TPRemoteActions.GetCleanupBatchJob",[!!e])).data,this.currentCleanupJob&&setTimeout((()=>{this.cleanupDataClick()}),3e3)}}},l=(0,s(1900).Z)(_,(function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.isLoading?t("Spinner"):e._e(),e._v(" "),t("div",{staticClass:"slds-section__title slds-theme--shade slds-m-bottom_x-small"},[t("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v(e._s(e.$Labels.TPSettings_Admin_Settings_Asynchronouse_Options))])]),e._v(" "),t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_Asynchronous_Data_Set_Creation},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("Asynchronous Data Set Creation",e.$Labels.TPSettings_Admin_Settings_Asynchronous_Data_Set_Creation)}},model:{value:e.settings.find((e=>"Asynchronous Data Set Creation"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"Asynchronous Data Set Creation"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'Asynchronous Data Set Creation').maps__Value__c"}}),e._v(" "),t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_Use_Bulk_API},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("Use Bulk API",e.$Labels.TPSettings_Admin_Settings_Use_Bulk_API)}},model:{value:e.settings.find((e=>"Use Bulk API"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"Use Bulk API"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'Use Bulk API').maps__Value__c"}}),e._v(" "),t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_String_Matching_Boundaries},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("String Matching for Boundaries",e.$Labels.TPSettings_Admin_Settings_String_Matching_Boundaries)}},model:{value:e.settings.find((e=>"String Matching for Boundaries"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"String Matching for Boundaries"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'String Matching for Boundaries').maps__Value__c"}}),e._v(" "),t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_Include_Alias_Field},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("Include aliases on user search",e.$Labels.TPSettings_Admin_Settings_Include_Alias_Field)}},model:{value:e.settings.find((e=>"Include aliases on user search"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"Include aliases on user search"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'Include aliases on user search').maps__Value__c"}}),e._v(" "),t("div",{staticClass:"slds-grid"},[t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_Use_Concurrent_Retrieval},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("Base62PKChunking",e.$Labels.TPSettings_Admin_Settings_Use_Concurrent_Retrieval)}},model:{value:e.settings.find((e=>"Base62PKChunking"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"Base62PKChunking"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'Base62PKChunking').maps__Value__c"}}),e._v(" "),t("Tooltip",{attrs:{text:e.$Labels.TPSettings_Admin_Settings_Tooltip_Concurrent_Retrieval,assistiveText:e.$Labels.TPSettings_Admin_Settings_Tooltip_Concurrent_Retrieval}})],1),e._v(" "),t("div",{staticClass:"slds-form",attrs:{role:"list"}},[t("div",{staticClass:"slds-form__row"},[t("div",{staticClass:"slds-form__item",attrs:{role:"listitem"}},[e._m(0),e._v(" "),t("div",[e._v("Â ")]),e._v(" "),t("Picklist",e._b({staticClass:"slds-form-element slds-m-bottom_small slds-var-m-right_large",attrs:{disabled:!e.settings.find((e=>"Base62PKChunking"===e.Name)).maps__Value__c,options:e.readBasicBatchSizeOptions,labels:{name:e.$Labels.TPSettings_Admin_Settings_Input_Batch_Size}},on:{changed:function(t){return e.handleOptionClick("BasicUnitChunkSize",e.$Labels.TPSettings_Admin_Settings_Input_Batch_Size)}},model:{value:e.settings.find((e=>"BasicUnitChunkSize"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"BasicUnitChunkSize"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'BasicUnitChunkSize').maps__Value__c"}},"Picklist",e.$attrs,!1)),e._v(" "),t("Picklist",e._b({staticClass:"slds-form-element slds-m-bottom_small slds-var-m-right_large",attrs:{disabled:!e.settings.find((e=>"Base62PKChunking"===e.Name)).maps__Value__c,options:e.readExtendedBatchSizeOptions,labels:{name:e.$Labels.TPSettings_Admin_Settings_Input_Field_Batch_Size}},on:{changed:function(t){return e.handleOptionClick("ExtendedUnitChunkSize",e.$Labels.TPSettings_Admin_Settings_Input_Field_Batch_Size)}},model:{value:e.settings.find((e=>"ExtendedUnitChunkSize"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"ExtendedUnitChunkSize"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'ExtendedUnitChunkSize').maps__Value__c"}},"Picklist",e.$attrs,!1))],1)])]),e._v(" "),t("div",{staticClass:"slds-grid"},[t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_Use_Parallel_Write},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("ParallelWriting",e.$Labels.TPSettings_Admin_Settings_Use_Parallel_Write)}},model:{value:e.settings.find((e=>"ParallelWriting"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"ParallelWriting"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'ParallelWriting').maps__Value__c"}}),e._v(" "),t("Tooltip",{attrs:{text:e.$Labels.TPSettings_Admin_Settings_Tooltip_Parallel_Write,assistiveText:e.$Labels.TPSettings_Admin_Settings_Tooltip_Parallel_Write}})],1),e._v(" "),t("div",{staticClass:"slds-form",attrs:{role:"list"}},[t("div",{staticClass:"slds-form__row"},[t("div",{staticClass:"slds-form__item",attrs:{role:"listitem"}},[e._m(1),e._v(" "),t("div",[e._v("Â ")]),e._v(" "),t("Picklist",e._b({staticClass:"slds-form-element slds-m-bottom_small slds-var-m-right_large",attrs:{disabled:!e.settings.find((e=>"ParallelWriting"===e.Name)).maps__Value__c,options:e.writeBatchSizeOptions,labels:{name:e.$Labels.TPSettings_Admin_Settings_Input_Write_Batch_Size}},on:{changed:function(t){return e.handleOptionClick("ParallelWritingBatchSize",e.$Labels.TPSettings_Admin_Settings_Use_Parallel_Write)}},model:{value:e.settings.find((e=>"ParallelWritingBatchSize"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"ParallelWritingBatchSize"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'ParallelWritingBatchSize').maps__Value__c"}},"Picklist",e.$attrs,!1))],1)])]),e._v(" "),t("Checkbox",{attrs:{labels:{name:e.$Labels.TPSettings_Admin_Settings_Select_Unassigned_By_Default},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("Select unassigned by default",e.$Labels.TPSettings_Admin_Settings_Select_Unassigned_By_Default)}},model:{value:e.settings.find((e=>"Select unassigned by default"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"Select unassigned by default"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'Select unassigned by default').maps__Value__c"}}),e._v(" "),t("div",{staticClass:"slds-section__title slds-theme--shade slds-m-bottom_x-small"},[t("span",{staticClass:"section-header-title slds-p-horizontal--small slds-truncate"},[e._v(e._s(e.$Labels.TPSettings_Admin_Settings_Clean_Up_Deleted))])]),e._v(" "),e.currentCleanupJob?"Loading"===e.currentCleanupJob?t("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[t("ProgressRing",{staticStyle:{"margin-right":"5px"},attrs:{percent:0}}),e._v(" "),t("span",[e._v(e._s(e.$Labels.TPSettings_Admin_Settings_Retrieving_Job_Details))])],1):t("div",{staticClass:"slds-grid slds-grid_vertical-align-center"},[t("ProgressRing",{staticStyle:{"margin-right":"5px"},attrs:{percent:100-100*e.currentCleanupJob.JobItemsProcessed/e.currentCleanupJob.TotalJobItems||100}}),e._v(" "),t("span",[e._v(e._s(e.cleanupJobLabelFormat))])],1):t("div",[t("button",{staticClass:"slds-button slds-button_text-destructive",on:{click:function(t){return e.cleanupDataClick(!0)}}},[e._v(e._s(e.$Labels.TPSettings_Admin_Settings_Delete_Data))]),e._v(" "),t("div",{staticClass:"slds-grid"},[t("Checkbox",{attrs:{noSlide:"",labels:{name:e.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Bin},toggleBuffer:500},on:{changed:function(t){return e.handleOptionClick("Skip Recycle Bin",e.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Bin)}},model:{value:e.settings.find((e=>"Skip Recycle Bin"===e.Name)).maps__Value__c,callback:function(t){e.$set(e.settings.find((e=>"Skip Recycle Bin"===e.Name)),"maps__Value__c",t)},expression:"settings.find(s => s.Name === 'Skip Recycle Bin').maps__Value__c"}}),e._v(" "),t("Tooltip",{attrs:{text:e.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Tooltip,assistiveText:e.$Labels.TPSettings_Admin_Settings_Skip_Recycle_Tooltip}})],1)])],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-checkbox",staticStyle:{visibility:"hidden"}},[t("input",{attrs:{type:"checkbox",name:"options"}}),e._v(" "),t("label",{staticClass:"slds-checkbox__label"},[t("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),t("span",{staticClass:"slds-form-element__label"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"slds-checkbox",staticStyle:{visibility:"hidden"}},[t("input",{attrs:{type:"checkbox",name:"options"}}),e._v(" "),t("label",{staticClass:"slds-checkbox__label"},[t("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),t("span",{staticClass:"slds-form-element__label"})])])}],!1,null,"02b06a12",null).exports}}]);
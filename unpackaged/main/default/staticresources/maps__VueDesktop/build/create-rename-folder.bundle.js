(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[82],{5719:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(2646),o=n(257),i=n(2072),s=n(9486);const u={components:{Spinner:r.$j,Modal:r.u_,TextInput:r.oi},props:{modalOptions:{type:Object,default:()=>{}}},data:()=>({name:"",id:"",isLoading:!1,nodeType:"",isNew:!1}),validations:()=>({name:{required:s.required}}),computed:{modalHeader(){return this.isNew?this.$Labels.Layers_Personal_Folder_Modal_Create_Folder:this.$Labels.MA_Rename}},created(){const{layer:e={},isNew:t=!1}=this.modalOptions;t||(this.name=e.name||""),this.id=e.id||"",this.nodeType=e.nodeType,this.isNew=t},mounted(){try{setTimeout((()=>{this.$refs.nameInput.$el.querySelector("input").focus()}),500)}catch(e){console.warn("please update folder rename modal auto focus:",e)}},methods:{getValidationMessages:(0,i.ed)({required:window.MASystem.Labels.MA_Field_Req}),close(){this.$emit("close")},saveChanges(){this.$v.$touch(),this.$v.$invalid?this.showError(this.$Labels.Routes_Settings_Fix_Validation_Issues):this.isNew?this.createFolder():this.updateFolder()},updateFolder(){this.isLoading=!0;const e={ajaxResource:"TreeAJAXResources",action:"rename_folder",id:this.id,name:this.name};(new o.Z).setAction("maps.RemoteFunctions.processAJAXRequest").setErrorHandler((e=>{this.isLoading=!1,this.showError(e),this.close()})).invoke([e],(e=>{const{success:t=!1,error:n=this.$Labels.Common_Refresh_And_Try_Again_Contact_Admin}=e;t?(this.$bus.$emit("refresh-folder"),this.close()):(this.showError(n),this.close()),this.isLoading=!1}),{buffer:!1})},createFolder(){this.isLoading=!0;const e={ajaxResource:"TreeAJAXResources",action:"new_folder",pid:this.id,pos:"0",name:this.name,NodeType:this.nodeType,personUser:"user"};(new o.Z).setAction("maps.RemoteFunctions.processAJAXRequest").setErrorHandler((e=>{this.isLoading=!1,this.showError(e),this.close()})).invoke([e],(e=>{const{success:t=!1,error:n=this.$Labels.Common_Refresh_And_Try_Again_Contact_Admin}=e;t?(this.$bus.$emit("refresh-folder"),this.close()):(this.showError(n),this.close()),this.isLoading=!1}),{buffer:!1})},showError(e){window.MAToastMessages.showError({message:this.$Labels.Territory_Management_Folder_Not_Renamed,subMessage:e}),this.isLoading=!1}}},a=(0,n(1900).Z)(u,(function(){var e=this,t=e._self._c;return t("Modal",{attrs:{title:e.modalHeader,labels:{close:e.$Labels.MA_Close}},on:{close:e.close}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),t("TextInput",{ref:"nameInput",staticClass:"slds-form-element",attrs:{required:"",labels:{name:e.$Labels.Layers_Personal_Folder_Modal_Create_Folder_Name},errors:e.getValidationMessages(e.$v.name),type:"text"},on:{changed:e.$v.name.$touch},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:e.isLoading},on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.Layers_Personal_Folder_Modal_Create_Folder_Button_Cancel)+"\n        ")]),e._v(" "),t("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:e.isLoading},on:{click:e.saveChanges}},[e._v("\n            "+e._s(e.$Labels.Layers_Personal_Folder_Modal_Create_Folder_Button_Done)+"\n        ")])])])}),[],!1,null,null,null).exports},9486:e=>{window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=2)}([function(e,t,n){"use strict";n.r(t),function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"withParams",(function(){return i}));var o="undefined"!=typeof window?window:void 0!==e?e:{},i=o.vuelidate?o.vuelidate.withParams:function(e,t){return"object"===r(e)&&void 0!==t?t:e((function(){}))}}.call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"alpha",(function(){return l})),n.d(t,"alphaNum",(function(){return d})),n.d(t,"numeric",(function(){return f})),n.d(t,"between",(function(){return h})),n.d(t,"email",(function(){return p})),n.d(t,"ipAddress",(function(){return m})),n.d(t,"macAddress",(function(){return _})),n.d(t,"maxLength",(function(){return g})),n.d(t,"minLength",(function(){return x})),n.d(t,"required",(function(){return v})),n.d(t,"requiredIf",(function(){return w})),n.d(t,"requiredUnless",(function(){return A})),n.d(t,"sameAs",(function(){return $})),n.d(t,"url",(function(){return L})),n.d(t,"or",(function(){return S})),n.d(t,"and",(function(){return M})),n.d(t,"not",(function(){return T})),n.d(t,"minValue",(function(){return C})),n.d(t,"maxValue",(function(){return F})),n.d(t,"integer",(function(){return j})),n.d(t,"decimal",(function(){return q})),n.d(t,"helpers",(function(){return r}));var r={};n.r(r),n.d(r,"withParams",(function(){return o})),n.d(r,"req",(function(){return s})),n.d(r,"len",(function(){return u})),n.d(r,"ref",(function(){return a})),n.d(r,"regex",(function(){return c}));var o=n(0).withParams;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=function(e){if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===i(e)){for(var t in e)return!0;return!1}return!!String(e).length},u=function(e){return Array.isArray(e)?e.length:"object"===i(e)?Object.keys(e).length:String(e).length},a=function(e,t,n){return"function"==typeof e?e.call(t,n):n[e]},c=function(e,t){return o({type:e},(function(e){return!s(e)||t.test(e)}))},l=c("alpha",/^[a-zA-Z]*$/),d=c("alphaNum",/^[a-zA-Z0-9]*$/),f=c("numeric",/^[0-9]*$/),h=function(e,t){return o({type:"between",min:e,max:t},(function(n){return!s(n)||(!/\s/.test(n)||n instanceof Date)&&+e<=+n&&+t>=+n}))},p=c("email",/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i),m=o({type:"ipAddress"},(function(e){if(!s(e))return!0;if("string"!=typeof e)return!1;var t=e.split(".");return 4===t.length&&t.every(y)})),y=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var t=0|+e;return t>=0&&t<=255},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return o({type:"macAddress"},(function(t){if(!s(t))return!0;if("string"!=typeof t)return!1;var n="string"==typeof e&&""!==e?t.split(e):12===t.length||16===t.length?t.match(/.{2}/g):null;return null!==n&&(6===n.length||8===n.length)&&n.every(b)}))},b=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)},g=function(e){return o({type:"maxLength",max:e},(function(t){return!s(t)||u(t)<=e}))},x=function(e){return o({type:"minLength",min:e},(function(t){return!s(t)||u(t)>=e}))},v=o({type:"required"},(function(e){return s("string"==typeof e?e.trim():e)})),w=function(e){return o({type:"requiredIf",prop:e},(function(t,n){return!a(e,this,n)||s(t)}))},A=function(e){return o({type:"requiredUnless",prop:e},(function(t,n){return!!a(e,this,n)||s(t)}))},$=function(e){return o({type:"sameAs",eq:e},(function(t,n){return t===a(e,this,n)}))},L=c("url",/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i),S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o({type:"or"},(function(){for(var e=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.length>0&&t.reduce((function(t,n){return t||n.apply(e,r)}),!1)}))},M=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o({type:"and"},(function(){for(var e=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.length>0&&t.reduce((function(t,n){return t&&n.apply(e,r)}),!0)}))},T=function(e){return o({type:"not"},(function(t,n){return!s(t)||!e.call(this,t,n)}))},C=function(e){return o({type:"minValue",min:e},(function(t){return!s(t)||(!/\s/.test(t)||t instanceof Date)&&+t>=+e}))},F=function(e){return o({type:"maxValue",max:e},(function(t){return!s(t)||(!/\s/.test(t)||t instanceof Date)&&+t<=+e}))},j=c("integer",/(^[0-9]*$)|(^-[0-9]+$)/),q=c("decimal",/^[-]?\d*(\.\d+)?$/)}])}}]);
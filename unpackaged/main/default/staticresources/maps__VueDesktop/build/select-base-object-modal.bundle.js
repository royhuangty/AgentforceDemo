"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[833],{9479:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(2646),o=t(257);const l={components:{Modal:a.u_,Spinner:a.$j,ScopedNotification:a.ac},props:{modalOptions:{type:Object,default:()=>{}}},data:()=>({baseObjects:[],isPoly:!1,isLoading:!1,selectedObject:"",hasError:!1}),computed:{baseObjectType(){return this.modalOptions.baseObjectType},hasBaseObjects(){return this.baseObjects.length>0}},created(){this.isLoading=!0,this.getBaseObjects().catch((e=>{const{message:s=""}=e;this.$root.$emit("toast",{message:s,state:"warning"}),this.hasError=!0})).finally((()=>{this.checkForPolyObject(),this.isLoading=!1}))},methods:{checkForPolyObject(){this.baseObjects.find((e=>e.Id===this.selectedObject)).PolymorphicObject?this.isPoly=!0:this.isPoly=!1},getBaseObjects(){return new Promise(((e,s)=>{(new o.Z).setAction("maps.RemoteFunctions.GetSavedBaseObjects").setErrorHandler((e=>{console.warn(e),s(new Error(this.$Labels.MA_Base_Object_Query_Error))})).invoke([],(t=>{const{success:a=!1,data:o={},securityError:l=!1}=t;if(l)console.warn(t),s(new Error(this.$Labels.No_Access_To_Some_Features_Error));else if(a){"live"===this.baseObjectType?this.baseObjects=o.live||[]:this.baseObjects=o.core||[];const[s]=this.baseObjects;s&&(this.selectedObject=s.Id),e()}else console.warn(t),s(new Error(this.$Labels.MA_Base_Object_Query_Error))}))}))},close(){this.$emit("close")},openMarkerLayerBuilder(){this.close();const e=window.MALayers.currentFolder;let s=window.MALayers.currentFolderNodeType;"PersonalRoot"!==e&&"CorporateRoot"!==s||(s=e);const t=this.selectedObject;this.$bus.$emit("open-modal",{modal:"create-sfdc-layer",options:{params:{b:t,f:e,ft:s}}})}}},r=(0,t(1900).Z)(l,(function(){var e=this,s=e._self._c;return s("Modal",{staticClass:"select-base-object-modal",attrs:{title:`Maps ${e.$Labels.MA_BASE_OBJECTS}`,labels:{close:e.$Labels.MA_Close}},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{loadingLabel:e.$Labels.MA_Loading}}),e._v(" "),s("div",{staticClass:"slds-scrollable slds-grow"},[e.isPoly&&e.hasBaseObjects?s("div",[s("ScopedNotification",{attrs:{theme:"info"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                        "+e._s(e.$Labels.BaseObject_PolymorphicMessage)+"\n                    ")])])],1):e._e(),e._v(" "),e.isLoading?s("div",[e._v("\n                Loading base objects... Please wait\n            ")]):e.hasBaseObjects?s("table",{staticClass:"slds-table slds-table_bordered slds-table_cell-buffer",attrs:{role:"grid"}},[s("thead",{staticClass:"ma-table-header"},[s("tr",{staticClass:"slds-text-title_caps"},[s("th",[e._v("Base Object")]),e._v(" "),s("th",[e._v("Description")])])]),e._v(" "),s("tbody",e._l(e.baseObjects,(function(t,a){return s("tr",{key:a},[s("td",[s("span",{staticClass:"slds-radio"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedObject,expression:"selectedObject"}],attrs:{id:`radio-${t.Id}`,type:"radio",name:"baseObject"},domProps:{value:t.Id,checked:e._q(e.selectedObject,t.Id)},on:{change:[function(s){e.selectedObject=t.Id},e.checkForPolyObject]}}),e._v(" "),s("label",{staticClass:"slds-radio__label",attrs:{for:`radio-${t.Id}`}},[s("span",{staticClass:"slds-radio_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label slds-m-left--x-small"},[e._v(e._s(e._f("decode")(t.Name__c)))])])])]),e._v(" "),s("td",{staticStyle:{"white-space":"normal !important"}},[e._v(e._s(e._f("decode")(t.Description__c)))])])})),0)]):s("div",[e._v("\n                Unfortunately no base objects have been configured. Please create one or contact your SF admin to continue.\n            ")])])],1),e._v(" "),s("template",{slot:"footer"},[s("button",{staticClass:"slds-button slds-button_neutral customDis-cancel",on:{click:e.close}},[e._v("\n            "+e._s(e.$Labels.MA_Cancel)+"\n        ")]),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.hasError&&e.hasBaseObjects,expression:"!hasError && hasBaseObjects"}],staticClass:"slds-button slds-button_brand js-layerSubType",attrs:{"data-layerSubType":"::layerSubType::",role:"saveButton"},on:{click:e.openMarkerLayerBuilder}},[e._v("\n            "+e._s(e.$Labels.MA_Continue)+"\n        ")])])],2)}),[],!1,null,"207d07aa",null).exports}}]);
"use strict";(globalThis.webpackChunkmaps_desktop=globalThis.webpackChunkmaps_desktop||[]).push([[453],{2069:(e,s,t)=>{t.r(s),t.d(s,{default:()=>N});var l=t(5908),a=t(4461),i=t(7102),o=t(379),r=t(2423);const{MASystem:n}=window,d=(e,s,t=[])=>new Promise(((l,a)=>{""===s&&l([]);const i={overlay:e,level:s,filters:t};(new r.Z).setAction("maps.RemoteFunctions.postJSONToHyperforceGISService").setErrorHandler((e=>{console.warn(n.Labels.ShapeLayer_Overlay_Not_Avail,e),a(new Error(n.Labels.ShapeLayer_Overlay_Not_Avail))})).invoke(["/boundary/search/2",JSON.stringify(i),!1],(e=>{const{success:s=!1,data:t={}}=e;if(s){const{geoids:e=[]}=t;l(e)}else console.warn(n.Labels.ShapeLayer_Overlay_Not_Avail,e),a(new Error(n.Labels.ShapeLayer_Overlay_Not_Avail))}),{escape:!1,buffer:!1})})),c=(e=!1,s,t)=>new Promise(((l,a)=>{let i={};if(e){if(!s||!t)return void a(new Error(n.Labels.ShapeLayer_Specify_Country));i={overlay:s,level:t,fields:!0}}(new r.Z).setAction("maps.RemoteFunctions.getFromHyperforceGISService").setErrorHandler((e=>{console.warn("Failed to get country select options",e),a(new Error(n.Labels.Common_Refresh_And_Try_Again_Contact_Admin))})).invoke(["/boundary/overlays/2",i],(e=>{const{success:s=!1,data:t={}}=e;if(s){const{overlays:e=[]}=t;l(e)}else console.warn("Failed to get country select options",e),a(new Error(n.Labels.Common_Refresh_And_Try_Again_Contact_Admin))}),{escape:!1,buffer:!1})}));var u=t(2646);const p={components:{ScopedNotification:u.ac,TextInput:u.oi},props:{validator:{type:Object,required:!0},isUsedInRule:{type:Boolean,default:!1}},computed:{...(0,l.mapState)("shapeBuilder",{builder__shape:"shape"})},methods:{moveToSelectionTab(){this.$emit("update-tab","shapeBuilderSelections")}}};var _=t(1900);const h=(0,_.Z)(p,(function(){var e=this,s=e._self._c;return s("div",[s("div",{staticClass:"slds-p-around--large",staticStyle:{width:"75%"}},[s("div",{staticClass:"slds-grid slds-gutters_large"},[s("div",{staticClass:"slds-col slds-size_2-of-5"},[s("TextInput",{staticClass:"territory-name",attrs:{required:!0,type:"text",labels:{name:e.$Labels.ShapeLayer_Name_Field,placeholder:e.$Labels.ShapeLayer_Name_Field_Example}},on:{changed:e.validator.builder__shape.Name.$touch},model:{value:e.builder__shape.Name,callback:function(s){e.$set(e.builder__shape,"Name",s)},expression:"builder__shape.Name"}}),e._v(" "),!e.validator.builder__shape.Name.required&&e.validator.builder__shape.Name.$dirty?s("div",{staticClass:"invalidField"},[e._v("\n                    "+e._s(e.$Labels.MA_This_Field_Is_Required)+"\n                ")]):e._e(),e._v(" "),e.validator.builder__shape.Name.maxLength?e._e():s("div",{staticClass:"invalidField"},[e._v("\n                    "+e._s(e.$Labels.MA_Max_Length_80_Name)+"\n                ")]),e._v(" "),s("TextInput",{staticClass:"territory-description",attrs:{useTextArea:!0,type:"text",labels:{name:e.$Labels.ShapeLayer_Description_Field,placeholder:e.$Labels.ShapeLayer_Description_Field_Example}},model:{value:e.builder__shape.maps__Description__c,callback:function(s){e.$set(e.builder__shape,"maps__Description__c",s)},expression:"builder__shape.maps__Description__c"}}),e._v(" "),s("div",[s("button",{staticClass:"slds-button slds-button--success",attrs:{id:"shapeLayerBuilderTabDetailsNextButton",disabled:!e.validator.builder__shape.Name.required},on:{click:e.moveToSelectionTab}},[e._v("\n                        "+e._s(e.$Labels.ShapeLayer_Next_Button)+"\n                    ")])])],1),e._v(" "),e.isUsedInRule?s("div",{staticClass:"slds-col slds-size_3-of-5 slds-p-horizontal_large"},[s("ScopedNotification",{attrs:{theme:"info"}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$Labels.AutoAssignment_ShapeLayer_Warning))])])],1):e._e()])])])}),[],!1,null,null,null).exports;var v=t(6076);const b={components:{Spinner:u.$j,Picklist:u.Gp,TextInput:u.oi,Button:u.zx,Popover:u.J2,ScopedNotification:u.ac},props:{showZipImportScreen:{type:Boolean,required:!0},countryOptions:{type:Array,required:!0}},data(){return{softLimitQuantity:2e3,isLoading:!1,isProcessing:!1,errorMessage:[],importError:!1,errorCount:0,validZipCount:0,zipEntryCount:0,zipEntry:"",selectedCountry:"",selectedCountryOptions:[{label:this.$Labels.ShapeLayer_ZipImport_Select_A_Country,id:""}]}},watch:{zipEntry(e){const s=this.formatUserEntry(e);this.zipEntryCount=s.length},isProcessing(e){this.$bus.$emit("zipsProcessing",e)},selectedCountry(e){""===e&&this.clearInputs()}},mounted(){this.getSupportedCountries()},methods:{formatLabel:(e,s=[])=>(0,v.N4)(e,s),closeImport(){this.isProcessing||(this.zipEntry="",this.$emit("update:showZipImportScreen",!1))},clearInputs(){this.zipEntry="",this.errorMessage=[],this.validZipCount=0},getErrorMessage(){this.errorMessage=[];let e=null;this.importError&&this.errorCount>0&&(e=`${this.formatLabel(this.$Labels.ShapeLayer_ZipImport_Errors,[this.errorCount])} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ${this.$Labels.ShapeLayer_Error_Text}`,this.errorMessage.push(e))},async processZipCodes(){this.isLoading=!0,this.isProcessing=!0;try{const e=[...new Set(this.formatUserEntry())],{success:s,data:t,errInfo:l,message:a}=await this.getZipCodeImports(e);if(!s||l||a){if(l){const{error:{message:e}}=JSON.parse(l);throw new Error(e)}throw new Error(a)}const{codes:i}=t;this.updateZipCodeData(i)}catch(e){window.MAToastMessages.showError({message:this.$Labels.MA_Error,subMessage:e.message,timeOut:0,extendedTimeOut:0,closeButton:!0})}finally{this.isProcessing=!1,this.isLoading=!1}},async getSupportedCountries(){try{this.isLoading=!0;const{success:e,data:s,message:t}=await this.$remoting("RemoteFunctions.getSupportedPostalCountries",[]);e&&s?this.selectedCountryOptions=[...this.selectedCountryOptions,...s]:this.$emit("show-error",t)}catch(e){this.$emit("show-error",e)}finally{this.isLoading=!1}},async getZipCodeImports(e){const s={codes:e,country:this.selectedCountry};return await this.$remoting("RemoteFunctions.postJSONToHyperforceGISService",["/boundary/postal/1",JSON.stringify(s),!1])},updateZipCodeData(e=[]){const s=e.map((e=>({label:e.code,value:e.geoid}))),t=s.filter((e=>e.value)),l=s.filter((e=>!e.value));this.errorCount=l.length;const i=this.countryOptions.find((e=>e.id===this.selectedCountry)),o=t.map((e=>({...e,active:!0,plotted:!1,guid:(0,a.x$)(),level:i.zip_postal_levels[0]})));if(this.validZipCount=o.length,this.isProcessing=!1,this.$emit("update-user-entry",o),l.length>0){const e=[];l.forEach((s=>e.push(s.label))),this.zipEntry=e.join("\r\n"),this.importError=!0,this.getErrorMessage()}else this.$bus.$emit("zipsProcessing",!1),this.importError=!1,this.closeImport()},formatUserEntry(e){return(e||this.zipEntry).split(/,|, |\n|\n /).filter((e=>""!==e.trim())).map((e=>e.trim()))}}},m=(0,_.Z)(b,(function(){var e=this,s=e._self._c;return s("div",{staticClass:"popoverContainer"},[s("Popover",{attrs:{id:"zipCodePopover",theme:"base",alignment:"bottom left",width:"full-width",position:"absolute",ariaLabel:e.$Labels.ShapeLayer_Paste_Zip_Codes_Button},on:{close:e.closeImport}},[s("div",{attrs:{slot:"content"},slot:"content"},[e.isLoading?s("Spinner"):e._e(),e._v(" "),s("div",[s("div",{staticClass:"slds-p-top--small slds-p-horizontal--small"},[s("div",{staticClass:"slds-p-bottom_x-small"},[s("p",{staticClass:"slds-text-body_regular"},[e._v("\n                            "+e._s(e.$Labels.ShapeLayer_ZipImport_Instructions)+" "),s("a",{attrs:{target:"_blank",href:"https://help.salesforce.com/s/articleView?id=sf.salesforce_maps_setup_postal_code_formats.htm"}},[e._v(e._s(e.$Labels.ShapeLayer_ZipImport_Doc_Link))])])])]),e._v(" "),s("div",{staticClass:"slds-p-horizontal--small"},[s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.selectedCountryOptions,disabled:""!==e.zipEntry,required:"",filterable:"",labels:{name:e.$Labels.ShapeLayer_Country,placeholder:e.$Labels.ShapeLayer_Select_An_Option},titleKey:"label"},model:{value:e.selectedCountry,callback:function(s){e.selectedCountry=s},expression:"selectedCountry"}})],1),e._v(" "),s("div",[s("div",{staticClass:"slds-p-top--x-small slds-p-horizontal--small slds-p-bottom_x-small"},[s("div",{staticClass:"slds-form-element",attrs:{id:"shapeBuilderPasteClipboardTextAreaWrap"}},[s("div",{staticClass:"slds-form-element__control"},[s("TextInput",{attrs:{id:"postalCodeInput",useTextArea:"",required:"",disableResize:"",errors:e.errorMessage,disabled:!e.selectedCountry,labels:{name:e.$Labels.ShapeLayer_ZipImport_Postal_Codes}},model:{value:e.zipEntry,callback:function(s){e.zipEntry=s},expression:"zipEntry"}})],1)])]),e._v(" "),e.zipEntryCount>=e.softLimitQuantity?s("div",{staticClass:"slds-p-bottom--x-large slds-p-horizontal--small"},[s("ScopedNotification",{attrs:{theme:"base"}},[s("p",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$Labels.ShapeLayer_ZipImport_Quantity_Warning))])])],1):e._e()])]),e._v(" "),s("div",{staticClass:"slds-p-horizontal--small slds-p-vertical--small"},[s("div",{staticClass:"slds-grid slds-grid_vertical-align-center slds-grid_align-spread"},[s("div",{staticClass:"slds-col"},[e.validZipCount>0?s("p",{ref:"validStatement"},[e._v("\n                            "+e._s(e.formatLabel(e.$Labels.ShapeLayer_ZipImport_Success,[e.validZipCount]))+"\n                        ")]):e._e()]),e._v(" "),s("div",{staticClass:"slds-col"},[s("Button",{attrs:{id:"clearZipCodesButton",variant:"neutral",label:e.$Labels.MA_Clear,title:e.$Labels.MA_Clear},on:{click:e.clearInputs}}),e._v(" "),s("Button",{attrs:{id:"shapeBuilderPasteClipboardProcessingButton",variant:"brand",disabled:!e.zipEntry,label:e.$Labels.MA_Add,title:e.$Labels.MA_Add},on:{click:e.processZipCodes}})],1)])])],1)])],1)}),[],!1,null,"25bc55d6",null).exports,y={components:{Picklist:u.Gp,Tooltip:u.u,TextInput:u.oi},directives:{"click-outside":i.Z},data:()=>({filterStyleObj:{left:"0px",bottom:"10px"},filterSearchTimeout:null}),computed:{clickOutsideFilterResults(){return{active:!0,handler:this.closeFilterResults}},...(0,l.mapState)("shapeBuilder",{builder__country:"country",builder__level:"level",builder__filters:"filters",builder__filterFields:"filterFields",builer__activeFilterId:"activeFilterId"})},methods:{...(0,l.mapMutations)("shapeBuilder",{builder__resetFilters:"resetFilters",builder__removeFilters:"removeFilters",builder__addFilter:"addFilter",builder__setFilterFields:"setFilterFields",builder__setActiveFilterId:"setActiveFilterId"}),buildFilter(){const e={field:"",label:"",type:"string",pills:[],operator:"",guid:(0,a.x$)(),searchTerm:"",result:[],showResults:!1,active:!1,searchLoading:!1,filterOperators:[],isValid:!1,min:"",max:"",isDirty:!0};if(this.builder__filterFields.length){const[s]=this.builder__filterFields;e.field=s.id,this.updateFilterSearchCriteria(e),this.builder__addFilter(e),this.showFilterEditMode(e)}else this.$emit("update-loading",!0),c(!0,this.builder__country,this.builder__level).then((s=>{this.setFilterFields(s);const[t]=this.builder__filterFields;e.field=t.id,this.updateFilterSearchCriteria(e),this.builder__addFilter(e),this.showFilterEditMode(e)})).finally((()=>{this.$emit("update-loading",!1)}))},removeFilter(e){this.builder__removeFilters([e]),this.closeFilterEditMode(),this.$nextTick((()=>{this.$emit("update-selections")}))},closeFilterEditMode(){this.builder__setActiveFilterId("")},showFilterEditMode(e){this.builder__setActiveFilterId(e.guid),this.$nextTick((()=>{const{$refs:s}=this,t=s[`filter_${e.guid}`],[l]=t,a=l.getBoundingClientRect(),{width:i}=a;this.filterStyleObj.left=`${i+25}px`}))},setFilterFields(e){const[s]=e;if(s){const{levels:e=[]}=s,[t]=e,l=[];t&&(t.fields.forEach((e=>{l.push(e)})),this.builder__setFilterFields(l))}},updateFilterSearchCriteria(e){const s=e.field,t=this.builder__filterFields.find((e=>e.id===s));e.label=t.label;const l=t.filter_as;e.filterOperators="decimal"===l?[{label:"equals"},{label:"less than"},{label:"greater than"},{label:"less or equal"},{label:"greater or equal"},{label:"not equal to"}]:[{label:"contains"},{label:"equals"},{label:"not equal to"},{label:"starts with"},{label:"does not contain"}];const[a]=e.filterOperators;e.operator=a.label,e.type=l,e.isDirty=!0,e.min="",e.pills=[],e.isValid=!1},filterString(e){const{pills:s=[]}=e;return s.map((e=>e.label)).join(", ")},removeFilterPill(e,s){e.pills=e.pills.filter((e=>e.value!==s.value)),e.isDirty=!0,e.isValid=!1,e.pills.length&&(e.isValid=!0)},runFilterSearch(){this.closeFilterEditMode(),this.$nextTick((()=>{this.$emit("update-selections")}))},debounceFilterSearch(e){if(null!==this.filterSearchTimeout&&clearTimeout(this.filterSearchTimeout),e.searchTerm.length<2)return e.results=[],void(e.searchLoading=!1);e.searchLoading=!0,this.filterSearchTimeout=setTimeout((()=>{var s,t,l,a;this.filterSearchTimeout=null,e.showResults=!0,(s=this.builder__country,t=this.builder__level,l=e.field,a=e.searchTerm,new Promise(((e,i)=>{const o={overlay:s,level:t,field:l,searchterm:a};(new r.Z).setAction("maps.RemoteFunctions.getFromHyperforceGISService").setErrorHandler((e=>{console.warn(n.Labels.ShapeLayer_Cannot_Get_Field_Details,e),i(new Error(n.Labels.ShapeLayer_Cannot_Get_Field_Details))})).invoke(["/boundary/autocomplete/2",o],(s=>{const{success:t=!1,data:l={}}=s;if(t){const s=l.data;e(s)}else console.warn(n.Labels.ShapeLayer_Cannot_Get_Field_Details,s),i(new Error(n.Labels.ShapeLayer_Cannot_Get_Field_Details))}),{escape:!1,buffer:!1})}))).then((s=>{e.results=s,e.results.unshift({id:"searchTerm",value:e.searchTerm,label:e.searchTerm})})).finally((()=>{e.searchLoading=!1}))}),500)},showFilterResults(e){e.showResults=!0},closeFilterResults(e){let s=!0;try{e.srcElement.className.indexOf("filter-search")>0&&(s=!1)}catch(e){}s&&this.builder__filters.forEach((e=>{e.showResults=!1}))},addFilterPill(e,s){e.pills.push(s),e.showResults=!1,e.searchTerm="",e.results=[],e.isDirty=!0,e.isValid=!0},cancelFilterCheck(e){let s=!0;""===e.field&&(s=!1),""===e.operator&&(s=!1),e.pills.length||(s=!1),s?this.closeFilterEditMode():this.removeFilter(e.guid)},removeAllFilters(){const e=this.builder__filters.map((e=>e.guid));this.builder__removeFilters(e),this.closeFilterEditMode(),this.$nextTick((()=>{this.$emit("update-selections")}))}}},f=(0,_.Z)(y,(function(){var e=this,s=e._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.builder__level,expression:"builder__level != ''"}]},[s("div",{staticClass:"slds-filters"},[s("h3",{staticClass:"slds-text-body_small slds-m-vertical_x-small slds-form-element__label"},[e._v(e._s(e.$Labels.ShapeLayer_Filters_Matching_All))]),e._v(" "),s("ol",{staticClass:"slds-list_vertical slds-list_vertical-space filterListItem"},e._l(e.builder__filters,(function(t,l){return s("li",{key:l,ref:`filter_${t.guid}`,refInFor:!0,staticClass:"slds-item slds-hint-parent filter-list-item js-filter-2"},[s("div",{staticClass:"slds-filters__item slds-grid slds-grid_vertical-align-center slds-is-relative filter-item"},[s("button",{staticClass:"slds-button_reset slds-grow slds-has-blur-focus",attrs:{href:"javascript:void(0);"},on:{click:function(s){return e.showFilterEditMode(t)}}},[""===t.field||""===t.operator?s("div",[e._v("New Filter")]):s("div",{staticClass:"filter-content-complete"},[s("p",{staticClass:"slds-text-body_small field-label"},[e._v(e._s(t.label)+" ")]),e._v(" "),s("p",{staticClass:"filters-from-pills"},[e._v(e._s(t.operator)+" "+e._s(e.filterString(t)))])])]),e._v(" "),s("button",{staticClass:"slds-button slds-button_icon slds-button_icon slds-button_icon-small js-remove-filter-item",on:{click:function(s){return e.removeFilter(t.guid)}}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-remove slds-filters__item-remove-button remove-filter-item"})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.builer__activeFilterId===t.guid,expression:"builer__activeFilterId === filter.guid"}],staticClass:"slds-filters__item-popover slds-filters__item-popover-positioner-left-bottom",style:e.filterStyleObj},[s("section",{staticClass:"slds-popover slds-popover_panel slds-nubbin_left-bottom slds-popover_large"},[s("div",{staticClass:"slds-p-around--small filter-form-container",attrs:{"field-datatype":"string"}},[s("div",{staticClass:"js-shape-filter-wrapper"},[s("div",{staticClass:"slds-form slds-form_stacked"},[s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.builder__filterFields,required:"",labels:{name:e.$Labels.MA_Field,placeholder:e.$Labels.MA_Select_an_Option},idKey:"id",titleKey:"label"},on:{changed:function(s){return e.updateFilterSearchCriteria(t)}},model:{value:t.field,callback:function(s){e.$set(t,"field",s)},expression:"filter.field"}}),e._v(" "),s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:t.filterOperators,required:"",labels:{name:e.$Labels.MA_OPERATOR,placeholder:e.$Labels.MA_Select_an_Option},idKey:"label",titleKey:"label"},model:{value:t.operator,callback:function(s){e.$set(t,"operator",s)},expression:"filter.operator"}}),e._v(" "),s("div",{staticClass:"slds-form-element"},["decimal"===t.type?s("div",[s("TextInput",{attrs:{type:"number",labels:{name:e.$Labels.MA_Value}},model:{value:t.min,callback:function(s){e.$set(t,"min",s)},expression:"filter.min"}})],1):s("div",[s("label",{staticClass:"slds-form-element__label string-label"},[e._v(e._s(e.$Labels.MA_Value))]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"filter.searchTerm"}],staticClass:"slds-input min filter-search",attrs:{type:"text"},domProps:{value:t.searchTerm},on:{input:[function(s){s.target.composing||e.$set(t,"searchTerm",s.target.value)},function(s){return e.debounceFilterSearch(t)}],focus:function(s){return e.showFilterResults(t)}}}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showResults,expression:"filter.showResults"},{name:"click-outside",rawName:"v-click-outside:[clickOutsideFilterResults]",arg:e.clickOutsideFilterResults}],staticClass:"slds-dropdown slds-dropdown_left slds-is-absolute",staticStyle:{"min-height":"100px","max-height":"500px",width:"100%",overflow:"auto"}},[s("ul",{staticClass:"slds-dropdown__list",attrs:{role:"menu"}},[s("li",{directives:[{name:"show",rawName:"v-show",value:t.searchTerm.length<2,expression:"filter.searchTerm.length < 2"}]},[s("div",{staticClass:"slds-text-align_center"},[s("div",{staticClass:"slds-p-top_large"},[s("Icon",{attrs:{category:"utility",name:"info",size:"small"}})],1),e._v(" "),s("div",{staticClass:"slds-text-color_weak"},[e._v("\n                                                                    "+e._s(e.$Labels.MA_char_search)+"\n                                                                ")])])]),e._v(" "),e._l(t.results,(function(l,a){return s("li",{key:a,staticClass:"slds-dropdown__item filter-line-item",attrs:{"data-label":l.label,"data-value":l.value,role:"presentation"},on:{click:function(s){return s.stopPropagation(),e.addFilterPill(t,l)}}},[s("a",{attrs:{href:"javascript:void(0);",role:"menuitem"}},[s("span",{staticClass:"slds-truncate filter-dropdown-item",attrs:{title:l.label}},["searchTerm"===l.id?s("Icon",{attrs:{category:"utility",name:"search",size:"xx-small"}}):e._e(),e._v("\n                                                                    "+e._s(e._f("decode")(l.label))+"\n                                                                ")],1)])])}))],2),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.searchLoading,expression:"filter.searchLoading"}],staticClass:"slds-spinner_container",staticStyle:{left:"1px",top:"1px",height:"calc(100% - 2px)",width:"calc(100% - 2px)","border-radius":"0px 0px 4px 4px",display:"block"}},[e._m(0,!0)])]),e._v(" "),s("div",{staticClass:"slds-p-top--xx-small filter-item-pills"},e._l(t.pills,(function(l,a){return s("span",{key:a,staticClass:"filter-pill slds-pill slds-pill_link"},[s("a",{staticClass:"slds-pill__action",attrs:{href:"javascript:void(0);",title:l.label}},[s("span",{staticClass:"slds-pill__label filter-pill-value"},[e._v(e._s(l.label))])]),e._v(" "),s("button",{staticClass:"slds-button slds-button_icon slds-button_icon slds-pill__remove js-remove-pill",attrs:{title:"Remove"},on:{click:function(s){return s.stopPropagation(),e.removeFilterPill(t,l)}}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-remove remove-filter-pill"})])])})),0)])])],1),e._v(" "),s("div",{staticClass:"slds-p-top--medium"},[s("div",{staticClass:"flex-row"},[s("div",{staticClass:"flex-grow-1"}),e._v(" "),s("div",[s("button",{staticClass:"slds-button slds-button_neutral",attrs:{disabled:t.isDirty&&t.isValid&&"decimal"!==t.type},on:{click:function(s){return e.cancelFilterCheck(t)}}},[e._v("\n                                                    "+e._s(e.$Labels.MA_Cancel)+"\n                                                ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand",attrs:{disabled:!t.isValid&&"decimal"!==t.type},on:{click:e.runFilterSearch}},[e._v("\n                                                    "+e._s(e.$Labels.MapsSetting_Update)+"\n                                                ")])])])])])])])])])])})),0)]),e._v(" "),s("div",{staticClass:"slds-filters__footer slds-p-around--none slds-p-vertical--medium flex-row"},[s("div",{directives:[{name:"show",rawName:"v-show",value:""===e.builer__activeFilterId,expression:"builer__activeFilterId === ''"}],staticClass:"slds-is-relative"},[s("Tooltip",[s("p",[e._v(e._s(e.$Labels.ShapeLayer_Filters_Tooltip_Text))])]),e._v(" "),s("button",{staticClass:"slds-button_reset slds-text-link",on:{click:e.buildFilter}},[e._v("\n                "+e._s(e.$Labels.MA_Add_Filter)+"\n            ")])],1),e._v(" "),s("div",{staticClass:"flex-grow-1"}),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.builder__filters.length,expression:"builder__filters.length"}]},[s("button",{staticClass:"slds-button_reset slds-text-link slds-col_bump-left remove-all-shape-filters",on:{click:e.removeAllFilters}},[e._v("\n                "+e._s(e.$Labels.MA_REMOVE_ALL)+"\n            ")])])])])}),[function(){var e=this,s=e._self._c;return s("div",{staticClass:"slds-spinner slds-spinner_medium slds-spinner_brand",attrs:{role:"status"}},[s("span",{staticClass:"slds-assistive-text"},[e._v("Loading")]),e._v(" "),s("div",{staticClass:"slds-spinner__dot-a"}),e._v(" "),s("div",{staticClass:"slds-spinner__dot-b"})])}],!1,null,null,null).exports,g={components:{Button:u.zx,Picklist:u.Gp,Tooltip:u.u,ZipImport:m,Filters:f,Icon:u.JO},props:{isLoading:{type:Boolean,default:!1},showDrawOnMap:{type:Boolean,default:!1}},data:()=>({availableOverlaysHolder:[],availableOverlays:[],selectedOverlaysHolder:[],countryOptions:[],iWantToSeeOptions:[],returnLimit:5e3,tooManyOverlays:!0,showZipImportScreen:!1,isModalLocked:!1}),computed:{selectedCountryData(){const e=this.countryOptions.find((e=>e.id===this.country));let s={};return e&&(s=e),s},overlayZipImportInfo(){const e={support:!1,levels:[]},{zip_postal_levels:s=[],zip_supported:t=!1,levels:l=[]}=this.selectedCountryData;return t&&(e.support=!0,e.levels=l.filter((e=>s.includes(e.id)))),e},country:{get(){return this.$store.state.shapeBuilder.country},set(e){this.builder__updateCountry(e)}},level:{get(){return this.$store.state.shapeBuilder.level},set(e){this.builder__updateLevel(e)}},...(0,l.mapState)("shapeBuilder",{builder__selectedOverlays:"selectedOverlays",builder__filters:"filters",builder__availableOverlays:"availableOverlays"})},created(){this.$bus.$on("zipsProcessing",(e=>{this.isModalLocked=e})),this.setLoadingStatus(!0),c().then((e=>{this.setCountryOptions(e),this.setIWantToSeePicklist()})).catch((e=>{this.showError(e.message),this.$emit("close")})).finally((()=>{this.setLoadingStatus(!1)}))},destroyed(){this.$bus.$off("zipsProcessing")},methods:{...(0,l.mapGetters)("shapeBuilder",{builder__formattedFilters:"formattedFilters"}),...(0,l.mapMutations)("shapeBuilder",{builder__updateSelectedOverlays:"updateSelectedOverlays",builder__updateCountry:"updateCountry",builder__updateLevel:"updateLevel",builder__resetFilters:"resetFilters",builder__toggleDrawOnMap:"toggleDrawOnMap",builder__removeFilters:"removeFilters",builder__updateAvailableOverlays:"updateAvailableOverlays"}),showError(e){window.MAToastMessages.showError({message:this.$Labels.MA_Error,subMessage:e,timeOut:0,extendedTimeOut:0,closeButton:!0})},clearPreviousPreviousOverlaySelections(){this.availableOverlaysHolder=[],this.builder__updateAvailableOverlays([]),this.tooManyOverlays=!0,this.builder__resetFilters()},updateIWantToSeePicklistOptions(){this.level="",this.setIWantToSeePicklist(),this.clearPreviousPreviousOverlaySelections()},updateOverlaySelections(e=!1){this.setLoadingStatus(!0),e&&this.clearPreviousPreviousOverlaySelections(),this.getSelectedInformation().then((e=>{e.length>this.returnLimit?this.tooManyOverlays=!0:(this.tooManyOverlays=!1,this.setAvailableOverlay(e))})).catch((e=>{this.showError(e.message)})).finally((()=>{this.setLoadingStatus(!1)}))},selectAllAvailable(){const{$refs:e}=this,{availableOptions:s}=e;s&&Array.from(s.options).forEach((e=>{this.availableOverlaysHolder.push(e.value)}))},unselectAllAvailable(){this.availableOverlaysHolder=[]},selectAllSelected(){const{$refs:e}=this,{selectedOptions:s}=e;s&&Array.from(s.options).forEach((e=>{this.selectedOverlaysHolder.push(e.value)}))},unselectAllSelected(){this.selectedOverlaysHolder=[]},removeAllSelected(){const{$refs:e}=this,{selectedOptions:s}=e;s&&(Array.from(s.options).forEach((e=>{this.selectedOverlaysHolder.push(e.value)})),this.removeSelectedShapes(),this.selectedOverlaysHolder=[])},addSelectedShapes(){const e=this.level,s=this.builder__availableOverlays.reduce(((e,s,t)=>(e[s.value]=t,e)),{}),t=this.builder__selectedOverlays.reduce(((e,s,t)=>(e[s.value]=t,e)),{}),l=this.availableOverlaysHolder;let i=l.length;const o=[],r=this.builder__availableOverlays;for(;i--;){const n=l[i];let d=!1;const c=t[n];this.builder__selectedOverlays[c]&&(d=!0);const u=s[n];if(!d){const s=this.builder__availableOverlays[u];s&&(s.level=e,s.active=!0,s.plotted=!1,s.guid=(0,a.x$)(),o.push(s))}r.splice(u,1)}const n=[...this.builder__selectedOverlays,...o];this.availableOverlaysHolder=[],this.selectedOverlaysHolder=[],this.builder__updateAvailableOverlays(r),this.builder__updateSelectedOverlays(n)},removeSelectedShapes(){const e=this.level,s=this.availableOverlays.reduce(((e,s,t)=>(e[s.value]=t,e)),{}),t=this.builder__selectedOverlays.reduce(((e,s,t)=>(e[s.value]=t,e)),{}),l=this.selectedOverlaysHolder;let a=l.length;const[i]=this.builder__availableOverlays;let o="";if(i){const e=i.value.split("-");[o]=e}const r=this.builder__selectedOverlays,n=[];for(;a--;){const i=l[a],d=t[i],c=this.builder__selectedOverlays[d],{level:u}=c;let p=!1;if(!this.tooManyOverlays&&u===e){const e=c.value.split("-")[0];if(0===this.builder__availableOverlays.length||o===e){const e=s[i];this.builder__availableOverlays[e]||(p=!0)}}p&&n.push(c),r.splice(d,1)}this.availableOverlaysHolder=[],this.selectedOverlaysHolder=[],this.builder__updateSelectedOverlays(r),this.builder__updateAvailableOverlays([...this.builder__availableOverlays,...n])},upateSelectedWithUserImport(e){const s=this.builder__selectedOverlays,t=s.length,l=e.length,a=[];for(let i=0;i<l;i++){const l=e[i],o=l.value;let r=!1;for(let e=0;e<t;e++)if(o===s[e].value){r=!0;break}r||a.push(l)}const i=[...this.builder__selectedOverlays,...a];this.builder__updateSelectedOverlays(i)},getSelectedInformation(e=!1){return new Promise(((s,t)=>{this.returnLimit=5e3,(0===this.builder__filters.length||e)&&(e=!0,this.returnLimit=500);const l=this.builder__formattedFilters(e),{valid:a=[],invalid:i=[]}=l;i.length&&(this.builder__removeFilters(i),window.MAToastMessages.showWarning({message:this.$Labels.Almost_There,subMessage:`${i.length} ${this.$Labels.ShapeLayer_Warning_Message}`,timeOut:6e3})),d(this.country,this.level,a).then((e=>{s(e)})).catch((()=>{t(new Error(this.$Labels.Common_Refresh_And_Try_Again))}))}))},setLoadingStatus(e){this.$emit("update-loading",e)},setCountryOptions(e){this.countryOptions=e},setIWantToSeePicklist(){const{levels:e=[]}=this.selectedCountryData;this.iWantToSeeOptions=e},setAvailableOverlay(e){this.builder__updateAvailableOverlays(e)},doShowDrawOnMap(){this.builder__toggleDrawOnMap(!0)}}},w=(0,_.Z)(g,(function(){var e=this,s=e._self._c;return s("div",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("div",{staticClass:"slds-grid slds-p-around_x-small"},[s("div",{staticClass:"slds-col_bump-right slds-m-top--x-small"},[s("h3",{staticClass:"slds-text-heading_small"},[e._v(e._s(e.$Labels.ShapeLayer_Shape_Selection_Tab))])]),e._v(" "),s("Button",{directives:[{name:"show",rawName:"v-show",value:""!=e.level,expression:"level != ''"}],staticClass:"js-show-shape-builder-drawing-mode slds-m-right--small",attrs:{variant:"neutral"},on:{click:e.doShowDrawOnMap}},[s("div",{staticClass:"slds-button__icon slds-button__icon--left ma-icon ma-icon-lasso"}),e._v("\n            "+e._s(e.$Labels.ShapeLayer_Draw_On_Map_Button)+"\n        ")]),e._v(" "),s("Button",{staticClass:"slds-float--right",attrs:{id:"addPostalCodesButton",disabled:e.isModalLocked,variant:"neutral",label:e.$Labels.ShapeLayer_Paste_Zip_Codes_Button},on:{click:function(s){e.showZipImportScreen=!e.showZipImportScreen}}})],1),e._v(" "),e.showZipImportScreen?s("ZipImport",{attrs:{zipImportData:e.overlayZipImportInfo,showZipImportScreen:e.showZipImportScreen,countryOptions:e.countryOptions},on:{"update:showZipImportScreen":function(s){e.showZipImportScreen=s},"update:show-zip-import-screen":function(s){e.showZipImportScreen=s},"update-user-entry":e.upateSelectedWithUserImport,"show-error":e.showError,close:function(s){e.showZipImportScreen=!!e.isModalLocked&&e.showZipImportScreen}}}):e._e(),e._v(" "),s("div",{staticClass:"slds-grid slds-gutters slds-border_top slds-p-top_x-small"},[s("div",{staticClass:"slds-col slds-size_1-of-3"},[s("div",{staticClass:"slds-form slds-form--stacked slds-m-bottom--x-small"},[s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.countryOptions,filterable:"",required:"",labels:{name:e.$Labels.ShapeLayer_Country,placeholder:e.$Labels.ShapeLayer_Select_An_Option},titleKey:"label"},on:{changed:e.updateIWantToSeePicklistOptions},model:{value:e.country,callback:function(s){e.country=s},expression:"country"}}),e._v(" "),s("div",[s("Tooltip",{staticClass:"slds-m-top_xx-small"},[s("p",[e._v(e._s(e.$Labels.ShapeLayer_I_Want_To_See_Info)),s("br"),s("br"),e._v(e._s(e.$Labels.ShapeLayer_For_Example_Info)),s("strong",[e._v(" "+e._s(e.$Labels.ShapeLayer_Zip_Codes_Info))]),e._v(".")])]),e._v(" "),s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.iWantToSeeOptions,filterable:"",required:"",labels:{name:e.$Labels.ShapeLayer_I_Want_To_See,placeholder:e.$Labels.ShapeLayer_Select_An_Option},titleKey:"label_plural"},on:{changed:function(s){return e.updateOverlaySelections(!0)}},model:{value:e.level,callback:function(s){e.level=s},expression:"level"}})],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.level,expression:"level != ''"}],staticClass:"slds-p-bottom--medium",attrs:{id:"shapeBuilderFiltersDrawOnMapWrap"}},[s("button",{staticClass:"slds-button slds-button--neutral js-show-shape-builder-drawing-mode",on:{click:e.doShowDrawOnMap}},[s("div",{staticClass:"slds-button__icon slds-button__icon--left ma-icon ma-icon-lasso"}),e._v("\n                    "+e._s(e.$Labels.ShapeLayer_Draw_On_Map_Button)+"\n                ")])]),e._v(" "),s("Filters",{on:{"update-loading":e.setLoadingStatus,"update-selections":function(s){return e.updateOverlaySelections(!1)}}})],1),e._v(" "),s("div",{staticClass:"slds-col slds-size_1-of-3 slds-border_right",staticStyle:{position:"relative"}},[s("div",{staticClass:"slds-grid slds-grid_vertical"},[s("div",{staticClass:"slds-col"},[e._v(e._s(e.$Labels.ShapeLayer_Available_Shapes))]),e._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-p-around_x-small slds-border_left slds-border_right slds-border_top"},[e._v("\n                        "+e._s(e.$Labels.ShapeLayer_Select)+" "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:e.selectAllAvailable}},[e._v(e._s(e.$Labels.ShapeLayer_All))]),e._v(" / "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:e.unselectAllAvailable}},[e._v(e._s(e.$Labels.ShapeLayer_None))])]),e._v(" "),s("div",[e.tooManyOverlays?s("div",{staticClass:"slds-p-around_large slds-border_left slds-border_right slds-border_top slds-border_bottom",staticStyle:{"overflow-y":"auto",height:"calc( 100vh - 400px)"}},[s("div",{staticClass:"slds-text-align_center"},[s("div",{staticClass:"slds-p-bottom_medium"},[s("Icon",{attrs:{category:"utility",name:"info",size:"small"}})],1),e._v(" "),s("div",{staticClass:"slds-text-color_weak"},[e._v("\n                                    "+e._s(e.$Labels.ShapeLayer_TooManyOverlays_Text)+"\n                                ")])])]):s("select",{directives:[{name:"model",rawName:"v-model",value:e.availableOverlaysHolder,expression:"availableOverlaysHolder"}],ref:"availableOptions",staticClass:"slds-select",staticStyle:{"overflow-y":"auto",height:"calc( 100vh - 400px)"},attrs:{size:"50",multiple:""},on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.availableOverlaysHolder=s.target.multiple?t:t[0]}}},e._l(e.builder__availableOverlays,(function(t,l){return s("option",{key:l,staticClass:"slds-truncate",attrs:{"data-level":2},domProps:{value:t.value}},[e._v("\n                                "+e._s(e._f("decode")(t.label))+"\n                            ")])})),0)])])]),e._v(" "),s("div",{staticStyle:{position:"absolute",right:"-17px",top:"105px"}},[s("div",{staticClass:"flex-column"},[s("div",{staticClass:"slds-p-bottom--medium"},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border slds-button_icon-border-filled",on:{click:e.addSelectedShapes}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-right"})])]),e._v(" "),s("div",[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border slds-button_icon-border-filled",on:{click:e.removeSelectedShapes}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-left"})])])])])]),e._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-grid slds-grid_vertical"},[s("div",{staticClass:"slds-col"},[e._v(e._s(e.$Labels.ShapeLayer_Selected_Shapes))]),e._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-p-around_x-small slds-border_left slds-border_right slds-border_top"},[e._v("\n                        "+e._s(e.$Labels.ShapeLayer_Select)+" "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:e.selectAllSelected}},[e._v(e._s(e.$Labels.ShapeLayer_All))]),e._v(" / "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:e.unselectAllSelected}},[e._v(e._s(e.$Labels.ShapeLayer_None))]),e._v(" "),s("a",{staticClass:"slds-float_right",attrs:{href:"javascript:void(0);"},on:{click:e.removeAllSelected}},[e._v(e._s(e.$Labels.ShapeLayer_Clear))])]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedOverlaysHolder,expression:"selectedOverlaysHolder"}],ref:"selectedOptions",staticClass:"slds-select",staticStyle:{"overflow-y":"auto",height:"calc( 100vh - 400px)"},attrs:{size:"50",multiple:"multiple"},on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.selectedOverlaysHolder=s.target.multiple?t:t[0]}}},e._l(e.builder__selectedOverlays,(function(e,t){return s("option",{key:t,staticClass:"slds-truncate",attrs:{label:e.label},domProps:{value:e.value}})})),0)])])])])],1)}),[],!1,null,null,null).exports,S={components:{ChromePicker:t(4023).Chrome,TextInput:u.oi},directives:{"click-outside":i.Z},props:{color:{type:String,required:!0},label:{type:String,default:"Color"}},data:()=>({selectedColor:{hex:"#00FF00"},colorTimeout:null,showPicker:!1,colorPickerStyle:{top:"0px",left:"0px",bottom:null}}),computed:{clickOutsideColor(){return{active:!0,handler:this.closeColorPicker}}},created(){this.selectedColor.hex=this.color},mounted(){this.setInputBackgroundColor(this.color)},methods:{toggleColorPicker(){this.$nextTick((()=>{const{$refs:e}=this,{colorPickerInput:s}=e;if(s){const{$el:e}=s,t=e.getBoundingClientRect(),{top:l,height:a,left:i}=t,o=a+l;this.colorPickerStyle.top=`${o}px`;const r=i-50;this.colorPickerStyle.left=`${r}px`,this.colorPickerStyle.bottom=null}this.showPicker=!this.showPicker,this.$nextTick(this.setInputBackgroundColor.bind(this,this.selectedColor.hex))}))},closeColorPicker(){this.showPicker=!1,this.$nextTick((()=>{this.setInputBackgroundColor(this.selectedColor.hex)}))},setInputBackgroundColor(e){this.checkColorOffScreen();const{$refs:s}=this;if(s.colorPickerInput){this.selectedColor.hex=e;const t=s.colorPickerInput,{$el:l}=t;l.querySelector("input").style.backgroundColor=e,this.$emit("update:color",e)}},checkColorOffScreen(){const e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),s=this.$refs.colorPicker;if(s){const{$el:t}=s,l=t.getBoundingClientRect(),{bottom:a}=l;a>e&&(this.colorPickerStyle.bottom="0",this.colorPickerStyle.top=null)}},updateValue(e){null!==this.colorTimeout&&clearTimeout(this.colorTimeout),this.colorTimeout=setTimeout((()=>{const{hex:s}=e;this.setInputBackgroundColor(s)}),100)}}},O=(0,_.Z)(S,(function(){var e=this,s=e._self._c;return s("div",[s("TextInput",{ref:"colorPickerInput",staticClass:"color-input",attrs:{labels:{name:e.$props.label},type:"text"},on:{click:e.toggleColorPicker},model:{value:e.color,callback:function(s){e.color=s},expression:"color"}}),e._v(" "),e.showPicker?s("ChromePicker",{directives:[{name:"click-outside",rawName:"v-click-outside:[clickOutsideColor]",arg:e.clickOutsideColor}],ref:"colorPicker",staticClass:"color-picker",style:e.colorPickerStyle,attrs:{value:e.selectedColor.hex,disableAlpha:!0},on:{input:e.updateValue},model:{value:e.selectedColor,callback:function(s){e.selectedColor=s},expression:"selectedColor"}}):e._e()],1)}),[],!1,null,"53b732ad",null).exports,L={components:{Picklist:u.Gp,Checkbox:u.XZ,InputColorPicker:O,TextInput:u.oi},data(){return{opacityOptions:[{label:"10%",value:"0.1"},{label:"20%",value:"0.2"},{label:"30%",value:"0.3"},{label:"40%",value:"0.4"},{label:"50%",value:"0.5"},{label:"60%",value:"0.6"},{label:"70%",value:"0.7"},{label:"80%",value:"0.8"},{label:"90%",value:"0.9"},{label:"100%",value:"1"}],justificationOptions:[{label:this.$Labels.ShapeLayer_Left,value:"left"},{label:this.$Labels.ShapeLayer_Center,value:"center"},{label:this.$Labels.ShapeLayer_Right,value:"right"}],fontOptions:[{label:"8px",value:"8px"},{label:"9px",value:"9px"},{label:"10px",value:"10px"},{label:"11px",value:"11px"},{label:"12px",value:"12px"},{label:"13px",value:"13px"},{label:"14px",value:"14px"},{label:"15px",value:"15px"},{label:"16px",value:"16px"},{label:"17px",value:"17px"},{label:"18px",value:"18px"}],colorPickerStyle:{top:"0px",left:"0px"},activeColorPicker:""}},computed:{...(0,l.mapState)("shapeBuilder",{builder__shape:"shape"}),shapeOptions(){return this.builder__shape.maps__Options__c}}},C=(0,_.Z)(L,(function(){var e=this,s=e._self._c;return s("div",{staticStyle:{width:"500px"}},[s("div",{staticClass:"slds-grid slds-p-bottom_x-small"},[s("div",{staticClass:"slds-col_bump-right slds-m-top--x-small"},[s("h3",{staticClass:"slds-text-heading_small"},[e._v(e._s(e.$Labels.ShapeLayer_Shape_Options))])])]),e._v(" "),s("div",{staticClass:"slds-border_top slds-p-top_x-small"},[s("InputColorPicker",{attrs:{label:e.$Labels.ShapeLayer_Fill_Color,color:e.shapeOptions.colorOptions.fillColor},on:{"update:color":function(s){return e.$set(e.shapeOptions.colorOptions,"fillColor",s)}}}),e._v(" "),s("InputColorPicker",{attrs:{label:e.$Labels.ShapeLayer_Border_Color,color:e.shapeOptions.colorOptions.borderColor},on:{"update:color":function(s){return e.$set(e.shapeOptions.colorOptions,"borderColor",s)}}}),e._v(" "),s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.opacityOptions,labels:{name:e.$Labels.ShapeLayer_Opacity},idKey:"value",titleKey:"label"},model:{value:e.shapeOptions.colorOptions.fillOpacity,callback:function(s){e.$set(e.shapeOptions.colorOptions,"fillOpacity",s)},expression:"shapeOptions.colorOptions.fillOpacity"}})],1),e._v(" "),s("div",{staticClass:"slds-grid slds-p-bottom_x-small"},[s("div",{staticClass:"slds-col_bump-right slds-m-top--x-small"},[s("h3",{staticClass:"slds-text-heading_small"},[e._v(e._s(e.$Labels.ShapeLayer_Label_Options))])])]),e._v(" "),s("div",{staticClass:"slds-border_top slds-p-top_x-small"},[s("Checkbox",{staticClass:"flex-row slds-form-element",attrs:{labels:{name:e.$Labels.ShapeLayer_Enable_Label}},model:{value:e.shapeOptions.colorOptions.labelEnabled,callback:function(s){e.$set(e.shapeOptions.colorOptions,"labelEnabled",s)},expression:"shapeOptions.colorOptions.labelEnabled"}}),e._v(" "),s("TextInput",{attrs:{type:"text",labels:{name:e.$Labels.ShapeLayer_Label_Text_Override}},model:{value:e.shapeOptions.colorOptions.labelOverride,callback:function(s){e.$set(e.shapeOptions.colorOptions,"labelOverride",s)},expression:"shapeOptions.colorOptions.labelOverride"}}),e._v(" "),s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.justificationOptions,labels:{name:e.$Labels.ShapeLayer_Justification},idKey:"value",titleKey:"label"},model:{value:e.shapeOptions.colorOptions.labelJustification,callback:function(s){e.$set(e.shapeOptions.colorOptions,"labelJustification",s)},expression:"shapeOptions.colorOptions.labelJustification"}}),e._v(" "),s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.fontOptions,labels:{name:e.$Labels.ShapeLayer_Font_Size},idKey:"value",titleKey:"label"},model:{value:e.shapeOptions.colorOptions.labelFontSize,callback:function(s){e.$set(e.shapeOptions.colorOptions,"labelFontSize",s)},expression:"shapeOptions.colorOptions.labelFontSize"}}),e._v(" "),s("InputColorPicker",{attrs:{label:e.$Labels.ShapeLayer_Font_Color,color:e.shapeOptions.colorOptions.labelFontColor},on:{"update:color":function(s){return e.$set(e.shapeOptions.colorOptions,"labelFontColor",s)}}}),e._v(" "),s("InputColorPicker",{attrs:{label:e.$Labels.ShapeLayer_Background_Color,color:e.shapeOptions.colorOptions.labelBGColor},on:{"update:color":function(s){return e.$set(e.shapeOptions.colorOptions,"labelBGColor",s)}}}),e._v(" "),s("Picklist",{staticClass:"slds-m-bottom_small",attrs:{options:e.opacityOptions,labels:{name:e.$Labels.ShapeLayer_Background_Opacity},idKey:"value",titleKey:"label"},model:{value:e.shapeOptions.colorOptions.labelBGOpacity,callback:function(s){e.$set(e.shapeOptions.colorOptions,"labelBGOpacity",s)},expression:"shapeOptions.colorOptions.labelBGOpacity"}})],1),e._v(" "),s("div",{staticClass:"slds-grid slds-p-bottom_x-small"},[s("div",{staticClass:"slds-col_bump-right slds-m-top--x-small"},[s("h3",{staticClass:"slds-text-heading_small"},[e._v(e._s(e.$Labels.ShapeLayer_Advanced_Options))])])]),e._v(" "),s("div",{staticClass:"slds-border_top slds-p-top_x-small"},[s("Checkbox",{staticClass:"flex-row slds-form-element",attrs:{labels:{name:e.$Labels.ShapeLayer_Merge_Boundaries}},model:{value:e.shapeOptions.advancedOptions.dissolveGeometry,callback:function(s){e.$set(e.shapeOptions.advancedOptions,"dissolveGeometry",s)},expression:"shapeOptions.advancedOptions.dissolveGeometry"}}),e._v(" "),s("Checkbox",{staticClass:"flex-row slds-form-element",attrs:{labels:{name:e.$Labels.ShapeLayer_Only_Show_Markers_Inside}},model:{value:e.shapeOptions.advancedOptions.affectVisibility,callback:function(s){e.$set(e.shapeOptions.advancedOptions,"affectVisibility",s)},expression:"shapeOptions.advancedOptions.affectVisibility"}})],1)])}),[],!1,null,null,null).exports;var x=t(5735),M=t.n(x),k=t(257);const $={props:{searchResult:{type:Object,default:()=>{}}},data:()=>({dateTime:new Date}),computed:{searchItem(){const e=this.searchResult,s=window.getProperty(e||{},"geometry.location",!1);let t=null;return null!==s&&(t={id:e.id||this.dateTime.getTime(),address:e.formatted_address||"N/A",label:e.name||"N/A",placeId:e.place_id,coordinates:s}),t},isValid(){return null!==this.searchItem}},methods:{selected(){this.$emit("selected",this.searchItem)}}},A={components:{LassoSearchResult:(0,_.Z)($,(function(){var e=this,s=e._self._c;return e.isValid?s("li",{staticClass:"slds-listbox__item",attrs:{role:"presentation"},on:{click:e.selected}},[s("div",{staticClass:"slds-media slds-is-relative slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta",attrs:{role:"option"}},[e._m(0),e._v(" "),s("span",{staticClass:"slds-media__body"},[s("span",{staticClass:"label_info slds-listbox__option-text slds-listbox__option-text_entity"},[e._v(e._s(e.searchItem.label))]),e._v(" "),s("span",{staticClass:"address_info slds-listbox__option-meta slds-listbox__option-meta_entity"},[e._v(e._s(e.searchItem.address))])])])]):e._e()}),[function(){var e=this._self._c;return e("span",{staticClass:"slds-media__figure slds-m-left_medium"},[e("span",{staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-checkin",attrs:{title:"Description of icon when needed"}})])}],!1,null,null,null).exports},directives:{"click-outside":i.Z},data:()=>({searchIsLoading:!1,placeSearchTerm:"",showSearchResults:!1,placeSearchResults:[],skipSearch:!1,lassoMarkers:[]}),computed:{clickOutsideOptions(){return{active:!0,handler:this.hideSearchResults}},...(0,l.mapState)("shapeBuilder",{builder__showDrawOnMap:"showDrawOnMap"})},watch:{builder__showDrawOnMap(){this.clearSearch()},placeSearchTerm(e,s){this.skipSearch?this.skipSearch=!1:(this.searchIsLoading=!0,e!==s&&e.length>=2?this.debounceSearch(e):(this.placeSearchResults=[],this.showSearchResults=!1,this.searchIsLoading=!1))}},created(){document.getElementById("topRightMapControls").classList.add("refreshLassoIsVisible")},destroyed(){document.getElementById("topRightMapControls").classList.remove("refreshLassoIsVisible"),this.clearSearch()},methods:{focusSearch(){this.placeSearchTerm.length>=2&&setTimeout((()=>{this.showSearchResults=!0}),500)},hideSearchResults(){this.showSearchResults=!1},clearSearch(){this.clearSearchResults(),this.placeSearchTerm=""},processSearchResult(e){this.clearSearchResults();const{coordinates:s}=e,{label:t}=e,{address:l}=e;if(null!==s||void 0!==s){const{map:e}=window.MA,a=new window.google.maps.LatLng(s.lat,s.lng);e.panTo(a);const i=window.getProperty(window.MASystem,"Organization.MAIO_URL",!1),o=new window.google.maps.Marker({position:a,icon:{url:`${i}/images/marker/3?color=da8175&forlegend=false&icon=Marker2`,anchor:new window.google.maps.Point(10,34),scaledSize:{height:34,width:20}},map:e,title:t||"Lasso Marker"});this.skipSearch=!0,this.placeSearchTerm=t||l,this.lassoMarkers.push(o)}},clearSearchResults(){this.placeSearchResults=[],this.removeLassoSearchMarkers(),this.showSearchResults=!1},debounceSearch(){null!==this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout((()=>{this.searchTimeout=null,this.placeSearchTerm.length>=2&&this.filteredGoogleSearch(this.placeSearchTerm)}),500)},filteredGoogleSearch(e){window.MASearch.searchGooglePlaces(e,{radius:5e4}).then((e=>{if(this.searchIsLoading=!1,e&&e.success){const s=window.getProperty(e,"data.results",!1)||[];this.placeSearchResults=s,this.showSearchResults=!0}else this.placeSearchResults=[],this.showSearchResults=!1}))},removeLassoSearchMarkers(){const e=this.lassoMarkers.length;for(let s=0;s<e;s++)this.lassoMarkers[s].setMap(null);this.lassoMarkers=[]}}},P=(0,_.Z)(A,(function(){var e=this,s=e._self._c;return s("div",{staticClass:"slds-form-element",staticStyle:{width:"250px",position:"absolute",right:"334px",top:"9px","z-index":"100"},attrs:{id:"shapeBuilderSearchContainer"}},[s("label",{staticClass:"slds-form-element__label slds-assistive-text",attrs:{for:""}},[e._v(e._s(e.$Labels.MA_Search))]),e._v(" "),s("div",{staticClass:"slds-form-element__control slds-input-has-icon slds-input-has-icon_left-right"},[s("span",{staticClass:"slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default ma-icon ma-icon-search"}),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.placeSearchTerm,expression:"placeSearchTerm"}],staticClass:"slds-input",attrs:{type:"text",placeholder:e.$Labels.MA_Search},domProps:{value:e.placeSearchTerm},on:{focus:e.focusSearch,input:function(s){s.target.composing||(e.placeSearchTerm=s.target.value)}}}),e._v(" "),s("div",{staticClass:"slds-input__icon-group slds-input__icon-group_right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.searchIsLoading,expression:"searchIsLoading"}],staticClass:"slds-spinner slds-spinner_brand slds-spinner_x-small",staticStyle:{left:"0px",position:"relative"},attrs:{role:"status"}},[s("span",{staticClass:"slds-assistive-text"},[e._v("Loading")]),e._v(" "),s("div",{staticClass:"slds-spinner__dot-a"}),e._v(" "),s("div",{staticClass:"slds-spinner__dot-b"})]),e._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.searchIsLoading,expression:"!searchIsLoading"}],staticClass:"slds-input__icon slds-input__icon_right slds-button slds-button_icon",on:{click:e.clearSearch}},[s("span",{staticClass:"slds-button__icon slds-icon-text-light ma-icon ma-icon-clear"})])]),e._v(" "),e.showSearchResults?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside:[clickOutsideOptions]",arg:e.clickOutsideOptions}],attrs:{id:"shapeBuilderSearchResults",role:"listbox"}},[s("ul",{staticClass:"slds-listbox slds-listbox_vertical slds-dropdown slds-dropdown_fluid",staticStyle:{"max-height":"375px",overflow:"auto"},attrs:{role:"presentation"}},e._l(e.placeSearchResults,(function(t,l){return s("LassoSearchResult",{key:l,attrs:{searchResult:t},on:{selected:e.processSearchResult}})})),1)]):e._e()])])}),[],!1,null,null,null).exports;let T={};const{google:I,jQuery:F}=window,E={components:{Spinner:u.$j,LassoSearch:P,TextInput:u.oi},data:()=>({tileLabels:!1,selectedOverlaysHolder:[],showTiles:!1,lassoSelection:"hand",lassoOptions:{lassoMove:null,lassoMouseUp:null,lassoPollyLine:null,lassoInProgress:!1,mapToggleListener:null,mapToggleCallsOut:0,strokeColor:"#232323"},showLabels:!1,isLoading:!1,searchIsLoading:!1,plotQueue:null,plotLoading:null}),computed:{...(0,l.mapState)("shapeBuilder",{builder__shape:"shape",builder__selectedOverlays:"selectedOverlays",builder__country:"country",builder__level:"level",builder__showDrawOnMap:"showDrawOnMap",builder__filters:"filters",builder__availableOverlays:"availableOverlays"})},watch:{builder__showDrawOnMap(e){e?(this.hidePlottedOverlays(),this.lassoSelection="hand",this.showDrawTiles(),this.plotOverlays(),this.hideMapElements(),this.toggleClickEvents(!1)):(this.lassoSelection="hand",this.terminatePlotQueue(),this.removeDrawTiles(),this.hidePlottedOverlays(),this.updateSavedOverlaysIfActive(),this.showMapElements(),this.toggleClickEvents(!0))}},created(){T={}},destroyed(){T=null},methods:{...(0,l.mapGetters)("shapeBuilder",{builder__formattedFilters:"formattedFilters"}),...(0,l.mapMutations)("shapeBuilder",{builder__updateSelectedOverlays:"updateSelectedOverlays",builder__toggleDrawOnMap:"toggleDrawOnMap",builder__removeFilters:"removeFilters",builder__updateAvailableOverlays:"updateAvailableOverlays"}),formatLabel:(e,s=[])=>(0,v.N4)(e,s),close(){this.hideDrawOnMap(),this.clearLassoEvents(),this.$nextTick((()=>{this.$emit("close")}))},hideDrawOnMap(){this.builder__toggleDrawOnMap(!1)},selectAllSelected(){const e=[];this.builder__selectedOverlays.forEach((s=>{try{const e=T[s.value];s.active||e.setMap(window.MA.map)}catch(e){}s.active=!0,e.push(s)})),this.builder__updateSelectedOverlays(e)},unselectAllSelected(){const e=[];this.builder__selectedOverlays.forEach((s=>{try{const e=T[s.value];s.active&&e.setMap(null)}catch(e){}s.active=!1,e.push(s)})),this.builder__updateSelectedOverlays(e)},toggleItem(e){const s=[];this.builder__selectedOverlays.forEach((t=>{t.value===e.value&&(e.active=!e.active),s.push(t)})),this.builder__updateSelectedOverlays(s);const{value:t}=e,l=T[t];try{e.active?l.setMap(window.MA.map):l.setMap(null)}catch(e){console.warn("shape not found",e)}},removeDrawTiles(){try{window.MA.Map.removeOverlay("maLassoShape")}catch(e){}},showDrawTiles(){this.removeDrawTiles();const e=window.getProperty(window.MASystem,"Organization.MAIO_HF_ENABLED_GIS",!1)?"Organization.MAIO_HF_URL":"Organization.MAIO_URL",s=`${window.getProperty(window.MASystem,e,!1)}/boundary/tile`,t=this.showLabels,l=new I.maps.ImageMapType({name:"maLassoShape",maxZoom:18,tileSize:new I.maps.Size(256,256),opacity:.75,getTileUrl:(e,l)=>{let a=t;return l<9&&t?a=!1:l>=10&&t&&(a=!0),[s,"/2?",`x=${e.x}`,"&",`y=${e.y}`,"&",`z=${l}`,"&",`overlay=${this.builder__country}`,"&",`level=${this.builder__level}`,"&",`labels=${a}`].join("")}});window.MA.map.overlayMapTypes.push(l)},plotOverlays(){return new Promise((e=>{this.isLoading=!0,this.plotLoading=window.MAToastMessages.showLoading({message:`${this.$Labels.MA_Loading_With_Ellipsis}`,subMessage:this.$Labels.ShapeLayer_Preparing_Your_Selections,timeOut:0,extendedTimeOut:0});const s=[];let t=[];const l=[],a=this.builder__selectedOverlays,i=a.length;for(let e=0;e<i;e++){const i=a[e];if(i.plotted){const{active:e}=i;e&&l.push(i.value)}else t.push(i.value),t.length>=10&&(s.push(t),t=[])}t.length>0&&(s.push(t),t=[]),this.showPlottedOverlays(l),this.plotQueue=M()(((e,s)=>{const{request:t}=e;this.plotLoading.find(".toast-message").text(this.$Labels.ShapeLayer_Preparing_Your_Selections),(new k.Z).setAction("maps.RemoteFunctions.postJSONToHyperforceGISService").setErrorHandler((e=>{console.warn(e),s()})).invoke(["/boundary/geography/2",JSON.stringify(t),!1],(e=>{const{success:t=!1,data:l={}}=e;if(t){const e=l.data,t=e.length;for(let s=0;s<t;s++){const t=e[s],{geojson:l={}}=t,{features:a=[]}=l,i=a.length;for(let e=0;e<i;e++){const s=a[e],{properties:t={}}=s,l=t.id,i=T[l];if(i)try{i.setMap(null),delete T[l]}catch(e){}const o=new I.maps.Data;o.addGeoJson(s),o.setStyle({strokeColor:"#061c3f",fillColor:"#1589ee",fillOpacity:"0.2",strokeWeight:3,zIndex:1,clickable:!1,boundriesKey:l}),o.setMap(window.MA.map),T[l]=o;const r=this.builder__selectedOverlays.find((e=>e.value===l));r&&(r.plotted=!0)}}s()}else console.warn(e),s()}),{escape:!1,buffer:!1})}),3),this.plotQueue.drain=()=>{e(),this.isLoading=!1,window.MAToastMessages.hideMessage(this.plotLoading)};const o=s.length;if(o)for(let e=0;e<o;e++){const t={geoids:s[e],format:"GeoJSON",merged:!1};this.plotQueue.push({request:t})}else this.plotQueue.drain()}))},hidePlottedOverlays(){const e=Object.keys(T),s=e.length;for(let t=0;t<s;t++){const s=e[t],l=T[s];try{l.setMap(null)}catch(e){}}},showPlottedOverlays(e=[]){const s=e.length;for(let t=0;t<s;t++){const s=e[t],l=T[s];try{l.setMap(window.MA.map)}catch(e){}}},updateSavedOverlaysIfActive(){const e=[],s=[],t=this.builder__selectedOverlays.length;for(let l=0;l<t;l++){const t=this.builder__selectedOverlays[l],{active:a}=t;a?s.push(t):e.push(t)}this.builder__updateSelectedOverlays(s),this.builder__updateAvailableOverlays([...this.builder__availableOverlays,...e])},hideMapElements(){try{const e=document.querySelector("#horizontalViewsWrap .layersPanel");e&&e.classList.remove("is-in"),document.getElementById("maMainNavbar").style.display="none",window.MA.map.disableKeyDragZoom()}catch(e){console.warn("Class names may have changd, unble to hide elements",e)}},showMapElements(){try{const e=document.querySelector("#horizontalViewsWrap .layersPanel");e&&e.classList.add("is-in"),document.getElementById("maMainNavbar").style.display="",window.MA.map.enableKeyDragZoom()}catch(e){console.warn("Class names may have changd, unble to show elements",e)}},updateLasso(e){this.clearLassoEvents(),this.lassoSelection=e,"plus"===e||"minus"===e?(this.toggleLassoMapOptions(!1),this.setLassoEvent(e)):"pointer"===e?this.setMapToggleEvent():this.clearLassoEvents()},clearLassoEvents(){this.lassoSelection="hand",window.MA.map.setOptions({draggableCursor:`url("${window.MASystem.Images.cursors.hand}"), auto`});try{I.maps.event.removeListener(this.lassoOptions.lassoMove)}catch(e){}try{I.maps.event.removeListener(this.lassoOptions.lassoMouseUp)}catch(e){}try{this.lassoOptions.lassoPollyLine.setMap(null)}catch(e){}try{I.maps.event.removeListener(this.lassoOptions.mapToggleListener)}catch(e){}try{I.maps.event.clearListeners(window.MA.map.getDiv(),"mousedown")}catch(e){}},toggleLassoMapOptions(e=!0){window.MA.map.setOptions({draggable:e,scrollwheel:e,disableDoubleClickZoom:e})},setLassoEvent(e){"plus"===e?window.MA.map.setOptions({draggableCursor:`url(${window.MASystem.Images.cursors.lasso_plus}), auto`}):"minus"===e?window.MA.map.setOptions({draggableCursor:`url(${window.MASystem.Images.cursors.lasso_minus}), auto`}):window.MA.map.setOptions({draggableCursor:"default"}),window.google.maps.event.addDomListener(window.MA.map.getDiv(),"mousedown",(()=>{this.lassoOptions.lassoPollyLine=new I.maps.Polyline({map:window.MA.map,clickable:!1,strokeColor:this.lassoOptions.strokeColor,zIndex:1500,strokeWeight:4}),this.lassoOptions.lassoMove=I.maps.event.addListener(window.MA.map,"mousemove",(e=>{this.lassoOptions.lassoInProgress=!0,this.lassoOptions.lassoPollyLine.getPath().push(e.latLng)})),this.lassoOptions.lassoMouseUp=I.maps.event.addListenerOnce(window.MA.map,"mouseup",(()=>{this.lassoOptions.lassoInProgress=!1,I.maps.event.removeListener(this.lassoOptions.lassoMove);const s=this.lassoOptions.lassoPollyLine.getPath();this.lassoOptions.lassoPollyLine.setMap(null),this.lassoOptions.lassoPollyLine=null,this.lassoOptions.lassoPollyLine=new I.maps.Polygon({map:window.MA.map,path:s,strokeColor:this.lassoOptions.strokeColor,strokeWeight:4}),I.maps.event.clearListeners(window.MA.map.getDiv(),"mousedown"),this.toggleLassoMapOptions(!0);let t=[];const l=this.lassoOptions.lassoPollyLine.getPaths().getArray(),a=l.length;for(let e=0;e<a;e++){const s=l[e].getArray();t=t.concat(s)}const i=window.MAToastMessages.showLoading({message:`${this.$Labels.Almost_There}`,subMessage:this.$Labels.ShapeLayer_Preparing_Your_Selections,timeOut:0,extendedTimeOut:0});this.isLoading=!0,this.processLassoPoints(t).then((s=>{this.clearLassoEvents(),"plus"===e?(this.addOverlaysFromUserSelection(s),this.plotOverlays()):(this.isLoading=!1,this.removeOverlaysFromUserSelection(s))})).catch((e=>{console.warn(e),this.clearLassoEvents(),this.isLoading=!1})).finally((()=>{window.MAToastMessages.hideMessage(i)}))}))}))},processLassoPoints(e){return new Promise(((s,t)=>{const l=[];e.forEach((e=>{l.push({lat:e.lat(),lng:e.lng()})}));const a=this.builder__formattedFilters(),{valid:i=[],invalid:o=[]}=a;o.length&&this.builder__removeFilters(o);const r=[{field_id:"spatial",values:l},...i];d(this.builder__country,this.builder__level,r).then((e=>{s(e)})).catch((e=>{this.clearLassoEvents(),t(e)}))}))},addOverlaysFromUserSelection(e=[]){const s=e.length;for(let t=0;t<s;t++){const s=e[t],l=this.builder__selectedOverlays.find((e=>e.value===s.value));if(l){const{value:e}=l,s=T[e];if(!l.active){l.active=!0;try{s.setMap(window.MA.map)}catch(e){}}}else this.builder__selectedOverlays.push({level:this.builder__level,value:s.value,label:s.label,active:!0,guid:(0,a.x$)(),plotted:!1})}this.builder__updateSelectedOverlays(this.builder__selectedOverlays)},removeOverlaysFromUserSelection(e=[]){const s=e.length;for(let t=0;t<s;t++){const s=e[t],l=this.builder__selectedOverlays.find((e=>e.value===s.value));if(l){const{value:e}=l,s=T[e];if(l.active){l.active=!1;try{s.setMap(null)}catch(e){}}}}this.builder__updateSelectedOverlays(this.builder__selectedOverlays)},setMapToggleEvent(){window.MA.map.setOptions({draggableCursor:"default"}),this.lassoOptions.mapToggleListener=window.MA.map.addListener("click",(e=>{const s=e.latLng;void 0===s&&window.MAToastMessages.showWarning({message:this.$Labels.Almost_There,subMessage:this.$Labels.ShapeLayer_Lat_Long_Not_Avail,timeOut:5e3}),this.lassoOptions.mapToggleCallsOut++;const t=new window.google.maps.Circle({center:s,radius:1}).getBounds(),l=[s,t.getNorthEast(),t.getSouthWest()];this.isLoading=!0,this.processLassoPoints(l).then((e=>{this.processMapToggleOverlays(e)})).catch((e=>{this.clearLassoEvents(),console.warn(e)})).finally((()=>{this.isLoading=!1}))}))},processMapToggleOverlays(e){const s=e.length,t=[],l=[];for(let a=0;a<s;a++){const s=e[a],i=this.builder__selectedOverlays.find((e=>e.value===s.value));i&&i.active?l.push(s):t.push(s)}l.length&&this.removeOverlaysFromUserSelection(l),t.length&&(this.addOverlaysFromUserSelection(t),this.plotOverlays())},save(){this.hideDrawOnMap(),this.clearLassoEvents(),this.$nextTick((()=>{this.$emit("save")}))},terminatePlotQueue(){try{this.plotQueue.kill(),window.MAToastMessages.hideMessage(this.plotLoading),this.isLoading=!1}catch(e){console.warn(e)}},toggleClickEvents(e=!0){document.querySelectorAll(".PlottedShapeLayer").forEach((s=>{const t=F(s).data(),{classList:l=[]}=s;if(l.contains("maTerritory"))try{const{dataLayer:s}=t,l=s.getStyle();l.clickable=e,s.setStyle(l)}catch(e){console.warn("unable to disable territory clicks",e)}else{const{proxObjects:s=[]}=t;s.forEach((s=>{s.setOptions({clickable:e})}))}})),document.querySelectorAll("#PlottedQueriesTable .proximity.layer").forEach((s=>{const t=F(s).data(),{proxObject:l}=t;l&&l.setOptions({clickable:e})}))}}},D=(0,_.Z)(E,(function(){var e=this,s=e._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.builder__showDrawOnMap,expression:"builder__showDrawOnMap"}]},[s("LassoSearch"),e._v(" "),s("div",{staticClass:"slds-scope",staticStyle:{position:"absolute",top:"0",right:"0",bottom:"0","z-index":"100",background:"white",width:"330px"}},[s("div",{staticClass:"slds-grid slds-grid_vertical",staticStyle:{height:"100%"}},[s("div",{staticClass:"slds-col slds-grow-none"},[s("div",{staticClass:"slds-grid slds-p-vertical_x-small slds-p-horizontal_x-small slds-border_bottom",staticStyle:{background:"#f4f6f9"}},[s("div",{staticClass:"slds-col"},[s("button",{staticClass:"slds-button slds-button_neutral js-show-shape-builder-manual-mode",on:{click:e.hideDrawOnMap}},[s("div",{staticClass:"slds-button__icon slds-button__icon_left ma-icon ma-icon-back"}),e._v("\n                            "+e._s(e.$Labels.MA_Back_Full_Editor)+"\n                        ")])]),e._v(" "),s("div",{staticClass:"slds-col"},[s("div",{staticClass:"slds-button-group",attrs:{role:"group"}},[s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-large-icon slds-button_icon-border-filled shape-builder-drawing-tool-button no-focus-styling has-hover-tooltip",class:{"slds-is-active":"plus"===e.lassoSelection},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),e.updateLasso("plus")}}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-lasso-plus"}),e._v(" "),s("div",{staticClass:"slds-popover slds-popover_tooltip slds-nubbin_top-right shape-builder-drawing-button-tooltip",staticStyle:{width:"210px"},attrs:{role:"tooltip"}},[s("div",{staticClass:"slds-popover__body"},[e._v("\n                                        "+e._s(e.$Labels.MA_Add_Selection_Draw)+"\n                                        "),s("div",{staticClass:"slds-text-body_small slds-m-top--small tooltip-action-instruction"},[e._v(e._s(e.$Labels.MA_Click_Plus_Draw))])])])]),e._v(" "),s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-large-icon slds-button_icon-border-filled shape-builder-drawing-tool-button no-focus-styling has-hover-tooltip",class:{"slds-is-active":"minus"===e.lassoSelection},on:{click:function(s){return e.updateLasso("minus")}}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-lasso-minus"}),e._v(" "),s("div",{staticClass:"slds-popover slds-popover_tooltip slds-nubbin_top-right shape-builder-drawing-button-tooltip",staticStyle:{width:"210px"},attrs:{role:"tooltip"}},[s("div",{staticClass:"slds-popover__body"},[e._v("\n                                        "+e._s(e.$Labels.MA_Remove_Selection_Draw)+"\n                                        "),s("div",{staticClass:"slds-text-body_small slds-m-top--small tooltip-action-instruction"},[e._v(e._s(e.$Labels.MA_Click_Plus_Draw))])])])]),e._v(" "),s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled shape-builder-drawing-tool-button no-focus-styling has-hover-tooltip",class:{"slds-is-active":"pointer"===e.lassoSelection},on:{click:function(s){return e.updateLasso("pointer")}}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-cursor-pointer"}),e._v(" "),s("div",{staticClass:"slds-popover slds-popover_tooltip slds-nubbin_top-right shape-builder-drawing-button-tooltip",staticStyle:{width:"210px"},attrs:{role:"tooltip"}},[s("div",{staticClass:"slds-popover__body"},[e._v("\n                                        "+e._s(e.$Labels.MA_Individual_Selection_Draw)+"\n                                    ")])])]),e._v(" "),s("button",{staticClass:"slds-button slds-button_icon slds-button_icon-border-filled shape-builder-drawing-tool-button no-focus-styling has-hover-tooltip",class:{"slds-is-active":"hand"===e.lassoSelection},on:{click:function(s){return e.updateLasso("hand")}}},[s("div",{staticClass:"slds-button__icon ma-icon ma-icon-hand"}),e._v(" "),s("div",{staticClass:"slds-popover slds-popover_tooltip slds-nubbin_top-right shape-builder-drawing-button-tooltip",staticStyle:{"white-space":"nowrap"},attrs:{role:"tooltip"}},[s("div",{staticClass:"slds-popover__body"},[e._v(e._s(e.$Labels.MA_Default_Cursor))])])])])])])]),e._v(" "),s("div",{staticClass:"slds-grow-none slds-col slds-p-around_x-small"},[s("TextInput",{attrs:{required:"",type:"text",labels:{name:e.$Labels.MA_Name,placeholder:e.$Labels.ShapeLayer_Name_Field_Example}},model:{value:e.builder__shape.Name,callback:function(s){e.$set(e.builder__shape,"Name",s)},expression:"builder__shape.Name"}})],1),e._v(" "),s("div",{staticClass:"slds-col slds-p-around_small slds-p-top_none",staticStyle:{height:"30%"}},[s("div",{staticClass:"slds-grid slds-grid_vertical",staticStyle:{height:"100%",position:"relative"}},[s("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),s("div",{staticClass:"slds-col slds-grow-none"},[e._v(e._s(e.$Labels.ShapeLayer_Selected_Shapes))]),e._v(" "),s("div",{staticClass:"slds-col slds-grow-none"},[s("div",{staticClass:"slds-p-around_x-small slds-border_left slds-border_right slds-border_top slds-grid"},[s("div",{staticClass:"slds-form-element__control"},[s("span",{staticClass:"slds-checkbox"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.showLabels,expression:"showLabels"}],staticClass:"test",attrs:{id:"lassoLabels",type:"checkbox"},domProps:{checked:Array.isArray(e.showLabels)?e._i(e.showLabels,null)>-1:e.showLabels},on:{change:[function(s){var t=e.showLabels,l=s.target,a=!!l.checked;if(Array.isArray(t)){var i=e._i(t,null);l.checked?i<0&&(e.showLabels=t.concat([null])):i>-1&&(e.showLabels=t.slice(0,i).concat(t.slice(i+1)))}else e.showLabels=a},e.showDrawTiles]}}),e._v(" "),s("label",{staticClass:"slds-checkbox__label",attrs:{for:"lassoLabels"}},[s("span",{staticClass:"slds-checkbox_faux"}),e._v(" "),s("span",{staticClass:"slds-form-element__label"},[e._v(e._s(e.$Labels.ShapeLayer_Draw_Show_Labels))])])])]),e._v(" "),s("div",{staticClass:"slds-col_bump-left"},[e._v("\n                                "+e._s(e.$Labels.MA_Select)+" "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:e.selectAllSelected}},[e._v(e._s(e.$Labels.MA_All))]),e._v(" / "),s("a",{attrs:{href:"javascript:void(0);"},on:{click:e.unselectAllSelected}},[e._v(e._s(e.$Labels.MA_None))])])])]),e._v(" "),s("div",{ref:"selectedOptions",staticClass:"slds-col slds-listbox slds-listbox_vertical slds-p-around_x-small slds-border_top slds-border_left slds-border_right slds-border_bottom",staticStyle:{overflow:"auto"}},e._l(e.builder__selectedOverlays,(function(t){return s("div",{key:t.guid,staticClass:"slds-listbox__item lasso-list-item slds-truncate",class:{"slds-is-selected":t.active},attrs:{value:t.value},on:{click:function(s){return e.toggleItem(t)}}},[s("span",{staticClass:"slds-listbox__option slds-listbox__option_plain slds-media",attrs:{role:"option"}},[s("span",{staticClass:"slds-truncate",attrs:{title:t.label}},[s("Icon",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"item.active"}],attrs:{category:"utility",name:"check",variant:"inverse",size:"x-small"}}),e._v(" "),s("span",{staticClass:"slds-m-left_xxx-small list-item-label"},[e._v(e._s(t.label))])],1)])])})),0),e._v(" "),s("div",{staticClass:"slds-col slds-grow-none slds-p-top--x-small slds-text-color_weak"},[e._v("\n                        "+e._s(e.formatLabel(e.$Labels.ShapeLayer_Draw_Shapes_Selected,[e.builder__selectedOverlays.length]))+"\n                    ")])],1)]),e._v(" "),s("div",{staticClass:"slds-col slds-grow-none"},[s("div",{staticClass:"flex-shrink-0"},[s("div",{staticClass:"flex-row slds-p-vertical--x-small slds-p-horizontal--medium",staticStyle:{"background-color":"#f4f6f9","border-top":"1px solid #d8dde6"}},[s("div",{staticClass:"flex-grow-1"}),e._v(" "),s("div",[s("button",{staticClass:"slds-button slds-button_neutral",on:{click:e.close}},[e._v("\n                                "+e._s(e.$Labels.MA_Cancel)+"\n                            ")])]),e._v(" "),s("div",{staticClass:"slds-p-left--x-small"},[s("button",{staticClass:"slds-button slds-button_brand",attrs:{id:"shapeBuilderDrawingSaveAndPlot"},on:{click:e.save}},[e._v("\n                                "+e._s(e.$Labels.MA_Save_Plot)+"\n                            ")])])])])])])])],1)}),[],!1,null,"761c07ba",null).exports,{async:B}=window,R={components:{Modal:u.u_,Tabs:u.mQ,Tab:u.OK,Spinner:u.$j,Details:h,ShapeSelection:w,Display:C,DrawOnMap:D},directives:{"click-outside":i.Z},props:{modalOptions:{type:Object,default:()=>{}}},validations(){const e={builder__shape:{Name:{required:o.C1,maxLength:(0,o.BS)(80)}}};return this.picklistVisible&&(e.selectedCustomMarker={required:o.C1}),e},data:()=>({isUsedInRule:!1,isLoading:!1,isPlotted:!1,loadingIndex:0,activeTabId:"shapeBuilderDetails",isClone:!1,mainProgressStyle:{loading:!0,style:{width:"0%"}},isShapeBuilderLocked:!1,selectedOverlays:[],drawingOption:{level:"",country:""}}),computed:{createdInfo(){return`${this.$Labels.ShapeLayer_Created_Text.replace("{0}",this.builder__shape.CreatedBy.Name).replace("{1}",window.moment(this.builder__shape.CreatedDate).format(window.formatUserLocaleDate({moment:!0}))).replace("{2}",this.builder__shape.LastModifiedBy.Name).replace("{3}",window.moment(this.builder__shape.LastModifiedDate).format(window.formatUserLocaleDate({moment:!0})))}`},clickOutsideFilterOptions(){return{active:!0,handler:this.checkFilterPopup}},clickOutsideFilterResults(){return{active:!0,handler:this.hideFilterResults}},...(0,l.mapState)("shapeBuilder",{builder__shape:"shape",builder__selectedOverlays:"selectedOverlays",builder__showDrawOnMap:"showDrawOnMap"}),saveText(){let e=this.$Labels.ShapeLayer_Save_Plot_Button;return this.isPlotted&&(e=this.$Labels.ShapeLayer_Save_Refresh_Button),e}},async created(){this.$bus.$on("zipsProcessing",(e=>{this.isShapeBuilderLocked=e}));const{id:e,isClone:s=!1,folder:t,plotted:l=!1}=this.modalOptions;if(this.isClone=s,this.isPlotted=l,e)this.isUsedInRule=await this.checkIfShapeIsUsedInRule(e),this.setLoadingStatus(!0),(e=>new Promise(((s,t)=>{const l={ajaxResource:"TerritoryAJAXResources",action:"getTerritory",id:e};(new r.Z).setAction("maps.RemoteFunctions.processAJAXRequest").setErrorHandler((e=>{console.warn(e),t(new Error(n.Labels.Common_Refresh_And_Try_Again_Contact_Admin))})).invoke([l],(e=>{const{success:l=!1,data:a={}}=e;e.securityError?t(new Error(n.Labels.ShapeLayer_Info_Error_Text)):l?s(a):(console.warn(e),t(new Error(n.Labels.Common_Refresh_And_Try_Again_Contact_Admin)))}),{escape:!1,buffer:!1})})))(e).then((e=>{this.setSavedShapeData(e),this.setSavedTerritoryGeometries().then((e=>{this.builder__updateSelectedOverlays(e)})).finally((()=>{this.setLoadingStatus(!1)}))})).catch((e=>{this.setLoadingStatus(!1),console.warn(e),this.showError(e.message),this.close()}));else{const e={maps__User__c:null,maps__Folder__c:null};"PersonalRoot"===t||"RoleUserFolder"===t?e.maps__User__c=window.MA.CurrentUser.Id:"CorporateRoot"===t||(e.maps__Folder__c=t),this.builder__updateShapeData(e)}},destroyed(){this.$bus.$off("zipsProcessing"),this.builder__resetBuilder()},methods:{...(0,l.mapMutations)("shapeBuilder",{builder__updateShapeData:"updateShapeData",builder__updateSelectedOverlays:"updateSelectedOverlays",builder__resetBuilder:"resetBuilder"}),updateTab(e){this.activeTabId=e},setLoadingStatus(e){e?this.loadingIndex++:this.loadingIndex--,this.loadingIndex<=0?(this.loadingIndex=0,this.isLoading=!1):this.isLoading=!0},close(e){this.isShapeBuilderLocked&&"shapeBuilderCancelButton"!==e.target.id||(this.builder__resetBuilder(),this.$emit("close"))},setSavedShapeData(e={}){const{territory:s={}}=e;if(this.builder__updateShapeData(s),this.isClone){const e={Id:null,Name:`Copy of ${this.builder__shape.Name}`};this.builder__updateShapeData(e)}const t={country:"shapesV2",advancedOptions:{calculateTerritoryAggregates:!1,dissolveGeometry:!0,affectVisibility:!1},colorOptions:{fillColor:"#16325C",borderColor:"#3083D3",fillOpacity:"0.2",labelEnabled:!1,labelOverride:"",labelJustification:"center",labelFontSize:"10px",labelFontColor:"#FFFFFF",labelBGColor:"#000000",labelBGOpacity:"0.3"}};try{const e=JSON.parse(s.maps__Options__c),l={...t,...e};this.builder__updateShapeData({maps__Options__c:l})}catch(e){console.warn(e),this.showError(this.$Labels.ShapeLayer_Something_Wrong_With_Settings),this.builder__updateShapeData({maps__Options__c:t})}},showError(e){window.MAToastMessages.showError({message:this.$Labels.MA_Error,subMessage:e,timeOut:0,extendedTimeOut:0,closeButton:!0})},buildGeoIdSaveData(){const e={};this.builder__selectedOverlays.forEach((s=>{const{level:t,value:l}=s;e[t]=e[t]||[],e[t].push(l)}));const s=JSON.stringify(e).match(/.{1,100000}/g),t={Name:`${this.builder__shape.Name}-geometry`,maps__Geometry__c:s[0]||{},maps__Geometry2__c:s[1]||"",maps__Geometry3__c:s[2]||"",maps__Geometry4__c:s[3]||"",maps__Geometry5__c:s[4]||"",maps__Geometry6__c:s[5]||"",maps__Geometry7__c:s[6]||"",maps__Geometry8__c:s[7]||"",maps__Geometry9__c:s[8]||"",maps__Geometry10__c:s[9]||""};return JSON.stringify(t)},buildTerritorySaveData(e){const s=this.builder__shape.maps__Options__c,t=JSON.stringify(s),l={Name:this.builder__shape.Name,maps__Description__c:this.builder__shape.maps__Description__c,maps__User__c:this.builder__shape.maps__User__c,maps__Folder__c:this.builder__shape.maps__Folder__c,Id:this.builder__shape.Id,maps__Options__c:t,maps__JobId__c:e};return JSON.stringify(l)},saveUpdatedTerritory(e){this.validateLayer()&&(this.setLoadingStatus(!0),this.saveLayer().then((s=>{window.MAToastMessages.showSuccess({message:this.$Labels.ShapeLayer_Layer_Saved}),e&&(this.isPlotted&&document.querySelector(`.PlottedShapeLayer.maTerritory[data-id="${s.Id}"]`).querySelector(".btn-remove").click(),window.MA_DrawShapes.init({id:s.Id})),this.$bus.$emit("refresh-folder")})).catch((e=>{this.showError(e.message)})).finally((()=>{this.setLoadingStatus(!1),this.close()})))},validateLayer(){let e=!0,s="";this.builder__shape.Name||(this.updateTab("shapeBuilderDetails"),s="Please enter a valid name for this layer",e=!1),this.builder__selectedOverlays.length||(this.updateTab("shapeBuilderSelections"),s="At least 1 shape is required to save",e=!1);const t=this.builder__selectedOverlays.map((e=>e.value));return JSON.stringify(t).match(/.{1,100000}/g).length>10&&(this.updateTab("shapeBuilderSelections"),s=this.$Labels.Layers_Remove_Boundaries_Try_Again,e=!1),e||window.MAToastMessages.showWarning({message:"Unable to save layer",subMessage:s,timeOut:7e3}),e},saveLayer(){return new Promise(((e,s)=>{var t;(t=this.builder__selectedOverlays.map((e=>e.value)),new Promise(((e,s)=>{1===t.length&&t.push(t[0]);const l={geo_ids:t};(new r.Z).setAction("maps.RemoteFunctions.MapAnythingIORequestPOST").setErrorHandler((e=>{console.warn(e),s(new Error(n.Labels.ShapeLayer_Cannot_Merge_Shapes))})).invoke([{subType:"geometry",action:"merge",version:"2"},JSON.stringify(l)],(t=>{const{success:l=!1,data:a={}}=t;if(l){const s=a.data||{},{job_id:t}=s;e(t)}else console.warn(t),s(new Error(n.Labels.ShapeLayer_Cannot_Merge_Shapes))}),{escape:!1})}))).then((t=>{const l=this.buildGeoIdSaveData();((e,s)=>new Promise(((t,l)=>{const a={ajaxResource:"TerritoryAJAXResources",action:"saveBoundaryInfo",serializedTerritory:e,serializedGeometry:s};(new r.Z).setAction("maps.RemoteFunctions.processAJAXRequest").setErrorHandler((e=>{console.warn(e),l(new Error(n.Labels.ShapeLayer_Try_Save_Again))})).invoke([a],(e=>{const{success:s=!1,data:a={}}=e;s?t(a):(console.warn(e),l(new Error(n.Labels.ShapeLayer_Try_Save_Again)))}),{escape:!1})})))(this.buildTerritorySaveData(t),l).then((s=>{e(s)})).catch((()=>{s(new Error(this.$Labels.ShapeLayer_Try_Save_Again))}))})).catch((e=>{s(new Error(e.message))}))}))},async checkIfShapeIsUsedInRule(e){const{data:s=!1,error:t}=await this.$remoting("AutoAssignmentController.isShapeUsedInPlan",[e]);return t&&console.error(t),s},setSavedTerritoryGeometries(){return new Promise((e=>{const s=window.getProperty(this.builder__shape,"maps__ShapeLayerGeometries__r.records",!1)||[],t=[];if(s.length){const e=s[0]||{};let l={};try{const s=e.maps__Geometry__c||"{}",t=e.maps__Geometry2__c||"",a=e.maps__Geometry3__c||"",i=e.maps__Geometry4__c||"",o=e.maps__Geometry5__c||"",r=e.maps__Geometry6__c||"",n=e.maps__Geometry7__c||"",d=e.maps__Geometry8__c||"",c=e.maps__Geometry9__c||"",u=e.maps__Geometry10__c||"";l=JSON.parse(s+t+a+i+o+r+n+d+c+u)}catch(s){this.showError(this.$Labels.ShapeLayer_Cannot_Show_Data),console.warn("Unable to parse custom shape info",s),console.warn(e.maps__Geometry__c)}const{country:a}=this.builder__shape.maps__Options__c;if(l){const e=Object.keys(l);for(let s=0;s<e.length;s++){let i=e[s]||"";const o=l[i]||[];"states"===i?i="1":"counties"===i?i="2":"zips"===i&&(i="4");for(let e=0;e<o.length;e++){let s=o[e];"USA"===a&&"2"===i?0===s.indexOf("USA-2-")?t.push({level:i,boundary:s}):t.push({level:i,boundary:`USA-2-${s.substring(4)}`}):(s=s.replace(/ +(?= )/g,"").replace(/ /g,"_"),t.push({level:i,boundary:s}))}}}}this.getSavedGeoIdLabels(t).then((s=>{s.sort(((e,s)=>e.label>s.label?1:e.label<s.label?-1:0)),e(s)}))}))},getSavedGeoIdLabels(e){return new Promise((s=>{const t=window.MA.Util.createBatchable(e,100);this.mainProgressStyle.style.width="0%",this.mainProgressStyle.loading=!0;const l={remaining:t.length,total:t.length},i=[],o=B.queue(((e,s)=>{l.remaining=o.tasks.length;const{remaining:t,total:r}=l,n=r-t,c=Math.round(n/r*100);this.mainProgressStyle.style.width=`${c}%`;const u=e.idsToSend.map((e=>e.boundary));d("*","*",[{field_id:"geoid",values:u}]).then((t=>{for(let s=0;s<t.length;s++){const l=t[s],o=e.idsToSend.find((e=>e.boundary===l.value));i.push({level:o.level||"1",value:l.value,label:l.label,active:!0,guid:(0,a.x$)(),plotted:!1})}s()})).catch((()=>{s()}))}),3);if(t.length>0)for(let e=0;e<t.length;e++)o.push({idsToSend:t[e]});else o.push({idsToSend:[]});o.drain=()=>{this.mainProgressStyle.loading=!1,s(i)}}))}}},N=(0,_.Z)(R,(function(){var e=this,s=e._self._c;return s("div",{attrs:{id:"shapeBuilderModalWrapper"}},[s("DrawOnMap",{on:{close:e.close,save:function(s){return e.saveUpdatedTerritory(!0)}}}),e._v(" "),s("Modal",{directives:[{name:"show",rawName:"v-show",value:!e.builder__showDrawOnMap,expression:"!builder__showDrawOnMap"}],attrs:{title:e.$Labels.ShapeLayer_Header,size:"large",labels:{close:e.$Labels.MA_Close}},on:{close:e.close}},[s("div",{attrs:{slot:"content"},slot:"content"},[s("Spinner",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}]}),e._v(" "),e.mainProgressStyle.loading?s("div",{staticClass:"slds-progress-bar slds-progress-bar_small",staticStyle:{position:"absolute",top:"0px",left:"0"},attrs:{"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"25",role:"progressbar"}},[s("span",{staticClass:"slds-progress-bar__value",style:e.mainProgressStyle.style},[s("span",{staticClass:"slds-assistive-text"},[e._v("Progress: 25%")])])]):e._e(),e._v(" "),s("Tabs",{attrs:{activeTabId:e.activeTabId,isVertical:""},on:{changed:e.updateTab}},[s("Tab",{attrs:{id:"shapeBuilderDetails",title:e.$Labels.ShapeLayer_Details_Tab}},[s("Details",{attrs:{validator:e.$v,isUsedInRule:e.isUsedInRule},on:{"update-tab":e.updateTab}})],1),e._v(" "),s("Tab",{attrs:{id:"shapeBuilderSelections",title:e.$Labels.ShapeLayer_Shape_Selection_Tab}},[s("ShapeSelection",{on:{"update-loading":e.setLoadingStatus,close:e.close}})],1),e._v(" "),s("Tab",{attrs:{id:"shapeBuilderDisplay",title:e.$Labels.ShapeLayer_Display_Tab}},[s("Display")],1)],1)],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"slds-float_left slds-m-top_xx-small"},[e._v(e._s(e.createdInfo))]),e._v(" "),s("button",{staticClass:"slds-button slds-button--neutral",attrs:{id:"shapeBuilderCancelButton"},on:{click:e.close}},[e._v("\n                "+e._s(e.$Labels.ShapeLayer_Cancel_Button)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand save-boundary",attrs:{id:"shapeBuilderSaveCloseBtn",disabled:e.isShapeBuilderLocked},on:{click:function(s){return e.saveUpdatedTerritory(!1)}}},[e._v("\n                "+e._s(e.$Labels.ShapeLayer_Save_Close_Button)+"\n            ")]),e._v(" "),s("button",{staticClass:"slds-button slds-button_brand save-boundary",attrs:{id:"shapeBuilderSavePlotBtn",disabled:e.isShapeBuilderLocked},on:{click:function(s){return e.saveUpdatedTerritory(!0)}}},[e._v("\n                "+e._s(e.saveText)+"\n            ")])])])],1)}),[],!1,null,null,null).exports},6408:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("alpha",/^[a-zA-Z]*$/);s.default=l},6195:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("alphaNum",/^[a-zA-Z0-9]*$/);s.default=l},5573:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.withParams)({type:"and"},(function(){for(var e=this,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return s.length>0&&s.reduce((function(s,t){return s&&t.apply(e,l)}),!0)}))}},7884:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e,s){return(0,l.withParams)({type:"between",min:e,max:s},(function(t){return!(0,l.req)(t)||(!/\s/.test(t)||t instanceof Date)&&+e<=+t&&+s>=+t}))}},6681:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.req=s.regex=s.ref=s.len=void 0,Object.defineProperty(s,"withParams",{enumerable:!0,get:function(){return a.default}});var l,a=(l=t(8085))&&l.__esModule?l:{default:l};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=function(e){if(Array.isArray(e))return!!e.length;if(null==e)return!1;if(!1===e)return!0;if(e instanceof Date)return!isNaN(e.getTime());if("object"===i(e)){for(var s in e)return!0;return!1}return!!String(e).length};s.req=o,s.len=function(e){return Array.isArray(e)?e.length:"object"===i(e)?Object.keys(e).length:String(e).length},s.ref=function(e,s,t){return"function"==typeof e?e.call(s,t):t[e]},s.regex=function(e,s){return(0,a.default)({type:e},(function(e){return!o(e)||s.test(e)}))}},4078:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("decimal",/^[-]?\d*(\.\d+)?$/);s.default=l},8107:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("email",/^(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9]{2,}(?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i);s.default=l},379:(e,s,t)=>{function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}Object.defineProperty(s,"gH",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"_L",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(s,"BS",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(s,"PW",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(s,"uv",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(s,"C1",{enumerable:!0,get:function(){return i.default}});u(t(6408)),u(t(6195)),u(t(5669)),u(t(7884)),u(t(8107)),u(t(9103)),u(t(7340));var a=u(t(5287)),i=(u(t(3091)),u(t(2419))),o=(u(t(2941)),u(t(8300)),u(t(918)),u(t(3213)),u(t(5832)),u(t(5573)),u(t(2500)),u(t(2628))),r=u(t(301)),n=u(t(6673)),d=u(t(4078));function c(e){if("function"!=typeof WeakMap)return null;var s=new WeakMap,t=new WeakMap;return(c=function(e){return e?t:s})(e)}function u(e){return e&&e.__esModule?e:{default:e}}!function(e,s){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=c(s);if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var r=i?Object.getOwnPropertyDescriptor(e,o):null;r&&(r.get||r.set)?Object.defineProperty(a,o,r):a[o]=e[o]}a.default=e,t&&t.set(e,a)}(t(6681))},6673:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("integer",/(^[0-9]*$)|(^-[0-9]+$)/);s.default=l},9103:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681),a=(0,l.withParams)({type:"ipAddress"},(function(e){if(!(0,l.req)(e))return!0;if("string"!=typeof e)return!1;var s=e.split(".");return 4===s.length&&s.every(i)}));s.default=a;var i=function(e){if(e.length>3||0===e.length)return!1;if("0"===e[0]&&"0"!==e)return!1;if(!e.match(/^\d+$/))return!1;var s=0|+e;return s>=0&&s<=255}},7340:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":";return(0,l.withParams)({type:"macAddress"},(function(s){if(!(0,l.req)(s))return!0;if("string"!=typeof s)return!1;var t="string"==typeof e&&""!==e?s.split(e):12===s.length||16===s.length?s.match(/.{2}/g):null;return null!==t&&(6===t.length||8===t.length)&&t.every(a)}))};var a=function(e){return e.toLowerCase().match(/^[0-9a-f]{2}$/)}},5287:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"maxLength",max:e},(function(s){return!(0,l.req)(s)||(0,l.len)(s)<=e}))}},301:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"maxValue",max:e},(function(s){return!(0,l.req)(s)||(!/\s/.test(s)||s instanceof Date)&&+s<=+e}))}},3091:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"minLength",min:e},(function(s){return!(0,l.req)(s)||(0,l.len)(s)>=e}))}},2628:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"minValue",min:e},(function(s){return!(0,l.req)(s)||(!/\s/.test(s)||s instanceof Date)&&+s>=+e}))}},2500:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"not"},(function(s,t){return!(0,l.req)(s)||!e.call(this,s,t)}))}},5669:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("numeric",/^[0-9]*$/);s.default=l},5832:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.withParams)({type:"or"},(function(){for(var e=this,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return s.length>0&&s.reduce((function(s,t){return s||t.apply(e,l)}),!1)}))}},2419:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681),a=(0,l.withParams)({type:"required"},(function(e){return"string"==typeof e?(0,l.req)(e.trim()):(0,l.req)(e)}));s.default=a},2941:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"requiredIf",prop:e},(function(s,t){return!(0,l.ref)(e,this,t)||(0,l.req)(s)}))}},8300:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"requiredUnless",prop:e},(function(s,t){return!!(0,l.ref)(e,this,t)||(0,l.req)(s)}))}},918:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(6681);s.default=function(e){return(0,l.withParams)({type:"sameAs",eq:e},(function(s,t){return s===(0,l.ref)(e,this,t)}))}},3213:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=(0,t(6681).regex)("url",/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[/?#]\S*)?$/i);s.default=l},8085:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=t(16).R;s.default=l},16:(e,s,t)=>{function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}s.R=void 0;var a="undefined"!=typeof window?window:void 0!==t.g?t.g:{},i=a.vuelidate?a.vuelidate.withParams:function(e,s){return"object"===l(e)&&void 0!==s?s:e((function(){}))};s.R=i}}]);